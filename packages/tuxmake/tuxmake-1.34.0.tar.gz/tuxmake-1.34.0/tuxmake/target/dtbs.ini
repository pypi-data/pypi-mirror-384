[target]
description = Device Tree Blobs
dependencies = config
preconditions = test -d arch/{source_arch}/boot/dts && grep -q ^dtbs_install: {source_tree}/Makefile
commands = {make} dtbs
    && rm -rf {build_dir}/dtbsinstall
    && mkdir -p {build_dir}/dtbsinstall/dtbs
    && {make} dtbs_install
    && {tar_caf} {build_dir}/dtbs.tar{z_ext} -C {build_dir}/dtbsinstall dtbs

[makevars]
INSTALL_DTBS_PATH = {build_dir}/dtbsinstall/dtbs

[artifacts]
dtbs.tar{z_ext} = dtbs.tar{z_ext}
