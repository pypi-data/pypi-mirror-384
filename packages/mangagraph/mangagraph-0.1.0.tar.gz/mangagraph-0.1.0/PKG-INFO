Metadata-Version: 2.4
Name: mangagraph
Version: 0.1.0
Summary: Async manga parser-converter from mangalib to telegraph pages
Home-page: https://github.com/damirTAG/mangagraph
Author: damirTAG
Author-email: damirtagilbayev17@gmail.com
License: MIT
Project-URL: Bug Reports, https://github.com/damirTAG/mangagraph/issues
Project-URL: Source, https://github.com/damirTAG/mangagraph
Project-URL: Telegram, https://t.me/damirtag
Keywords: mangalib,mangalib-parser,manga,telegraph,async,parser,converter,web-scraping
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Internet :: WWW/HTTP
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3 :: Only
Classifier: Operating System :: OS Independent
Classifier: Framework :: AsyncIO
Classifier: Typing :: Typed
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: aiohttp>=3.8.0
Requires-Dist: sqlalchemy>=1.4.0
Requires-Dist: telegraph>=2.2.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: flake8>=6.0.0; extra == "dev"
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: keywords
Dynamic: license
Dynamic: project-url
Dynamic: provides-extra
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# Mangagraph

#### From Mangalib to Telegraph with ‚ù§Ô∏è

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä-–∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –º–∞–Ω–≥–∏ –∏–∑ mangalib api –≤ telegraph

## –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

–î–∞–µ–º **—Å—Å—ã–ª–∫—É –Ω–∞ –º–∞–Ω–≥—É**
**(—Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞: https://mangalib.me/ru/manga/{slug_url}) –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–¥**
–∫—É–¥–∞ –º—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º _(—Ç–æ–º, –≥–ª–∞–≤—É, –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≥–ª–∞–≤—ã, —Å—Å—ã–ª–∫—É –Ω–∞ –≥–ª–∞–≤—É –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–µ—Ä–∫–∞–ª–æ –Ω–∞ —Å–ª—É—á–∞–∏_
_–µ—Å–ª–∏ –≥–ª–∞–≤–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞)_ -> –ø–æ–ª—É—á–∞–µ–º –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –≥–ª–∞–≤–∞—Ö -> –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–µ–ª–µ–≥—Ä–∞—Ñ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
–Ω–∞ –∫–∞–∂–¥—É—é –≥–ª–∞–≤—É -> —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ `SQLite` –±–¥, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `SQLAlchemy`

**-> –ù–∞ –≤—ã—Ö–æ–¥–µ**
–ø–æ–ª—É—á–∞–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤—É—é –∫ –ª—é–±–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –∫–æ–Ω–µ—á–Ω—É—é —Å—Å—ã–ª–∫—É —Ç–µ–ª–µ–≥—Ä–∞—Ñ–∞ —Å –∑–µ—Ä–∫–∞–ª–æ–º (–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ) –≤–Ω—É—Ç—Ä–∏
–∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤—Å–µ –≥–ª–∞–≤—ã —Å –∏–º–µ–Ω–∞–º–∏ –∏ —Å—Å—ã–ª–∫–æ–π –¥–ª—è —á—Ç–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥–ª–∞–≤—ã: https://graph.org/Vanpanchmen--Opasnoe-sushchestvo-01-22-4

–ü—Ä–∏–º–µ—Ä –æ–≥–ª–∞–≤–ª–µ–Ω–∏—è: https://graph.org/Vanpanchmen-01-22-3 (—Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–¥, –≤ —Ç–∞–±–ª–∏—Ü—É ToC_url)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install -U mangagraph
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### CLI

```bash
mangagraph --url https://mangalib.me/ru/manga/706--onepunchman
```

–∏–ª–∏

```bash
python mangagraph --url https://mangalib.me/ru/manga/706--onepunchman
```

–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≥–ª–∞–≤—ã (–∫ –ø—Ä–∏–º–µ—Ä—É –≤—Ç–æ—Ä–∞—è)

> –í–∞–∂–Ω–æ! –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–π –≥–ª–∞–≤—ã –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ë–î –∏ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ—Ä—Ç–µ–∂ –∏–∑ –¥–≤—É—Ö —Å—Ç—Ä–æ–∫ (–≥–ª–∞–≤–Ω–æ–π —Å—Å—ã–ª–∫–∏ –∏ –∑–µ—Ä–∫–∞–ª–∞)

```bash
python mangagraph --url https://mangalib.me/ru/manga/706--onepunchman --c 2
```

–ù–µ—Å–∫–æ–ª—å–∫–æ –≥–ª–∞–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é

–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –≥–ª–∞–≤:

```bash
python mangagraph --url https://mangalib.me/ru/manga/706--onepunchman --c "1,2,5,10"
```

#### –ü–æ–∏—Å–∫ –º–∞–Ω–≥–∏

```bash
python mangagraph --q "Berserk" --limit 10
```

#### Raw

```py
from mangagraph import Mangagraph
from mangagraph.exceptions import MangagraphError

async def main():
    try:
        mgraph = Mangagraph()
        # –ü–æ–∏—Å–∫ –º–∞–Ω–≥–∏ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É –∏ —Å –ª–∏–º–∏—Ç–æ–º
        results = await mgraph.search_manga("Berserk", limit=3)

        for idx, result in enumerate(results, 1):
            print(f"{idx}. {result.name} / {result.rus_name}")
            print(f"   –†–µ–π—Ç–∏–Ω–≥: {result.rating.raw_average} ({result.rating.raw_votes} –æ—Ç–∑—ã–≤–æ–≤)")
            print(f"   –ì–æ–¥: {result.release_year} | –¢–∏–ø: {result.type} | –°—Ç–∞—Ç—É—Å: {result.status}")
            print(f"   –°—Å—ã–ª–∫–∞: https://mangalib.me/ru/manga/{result.slug_url}")
            print()

        # –ü–∞—Ä—Å–∏–Ω–≥ –æ–¥–Ω–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≥–ª–∞–≤—ã
        chapter_num = 97
        url, mirror_url = await mgraph.process_chapter(
            'https://mangalib.me/ru/manga/7965--chainsaw-man',
            chapter_num
        )
        print(f'–ë–µ–Ω–∑–æ—á–µ–ª, –≥–ª–∞–≤–∞ –Ω–æ–º–µ—Ä {chapter_num}: {url} | {mirror_url}')

        # –ü–∞—Ä—Å–∏–Ω–≥ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–ª–∞–≤ —Å—Ä–∞–∑—É
        results = await mgraph.process_chapters(
            'https://mangalib.me/ru/manga/7965--chainsaw-man',
            chapter_nums=[90, 91, 92]
        )

        print("–ì–ª–∞–≤—ã:\n")
        for num, (toc, mirror) in results.items():
            print(f"üìñ –ì–ª–∞–≤–∞ ‚Ññ{num}")
            print(f"   TOC: {toc}")
            print(f"   Mirror: {mirror}\n")

        # –ü–∞—Ä—Å–∏–Ω–≥ –º–∞–Ω–≥–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–ª–µ–≥—Ä–∞—Ñ
        toc_url, mirror_toc_url = await mgraph.process_manga('https://mangalib.me/ru/manga/706--onepunchman')

        print(f"Table of Contents: {toc_url}")
        print(f"Mirror: {mirror_toc_url}")
    except MangagraphError as e:
        print(f"Parser error: {e}")
    except Exception as e:
        print(f"Unexpected error: {e}")

import asyncio

asyncio.run(main())
```
