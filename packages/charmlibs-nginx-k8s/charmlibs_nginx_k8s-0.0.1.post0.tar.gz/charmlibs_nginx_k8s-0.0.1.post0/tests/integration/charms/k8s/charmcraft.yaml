name: k8s
type: charm
summary: A small Kubernetes charm for use in integration tests.
description: A small Kubernetes charm for use in integration tests.

base: ubuntu@24.04
platforms:
  amd64:

parts:
  test-charm:
    source: .
    plugin: uv
    build-snaps: [astral-uv]

containers:
  nginx:
    resource: nginx
  nginx-pexp:
    resource: nginx-pexp

resources:
  nginx:
    type: oci-image
    description: OCI image for the 'nginx' container.
    # this is our rock's v1.27.5
    upstream-source: ghcr.io/canonical/nginx@sha256:6415a2c5f25f1d313c87315a681bdc84be80f3c79c304c6744737f9b34207993
  nginx-pexp:
    type: oci-image
    description: OCI image for the 'nginx-pexp' container.
    upstream-source: ubuntu/nginx-prometheus-exporter:1.4-24.04_stable

actions:
  inspect:
    params: {}
