{"version":3,"file":"girder-plugin-dicomweb.mjs","sources":["../constants.js","../templates/assetstoreImport.pug","../views/DICOMwebImportView.js","../templates/dicomwebAssetstoreImportButton.pug","../views/AssetstoresView.js","../templates/dicomwebAssetstoreEditFields.pug","../views/AuthOptions.js","../views/EditAssetstoreWidget.js","../templates/dicomwebAssetstoreCreate.pug","../views/NewAssetstoreWidget.js","../main.js"],"sourcesContent":["const { AssetstoreType } = girder.constants;\n\nAssetstoreType.DICOMWEB = 'dicomweb';\n",".g-body-title Import references to DICOM objects on a DICOMweb Server\n\n.g-import-instructions.\n  Use this page to import references to DICOM objects on a DICOMweb server\n  into the girder assetstore system. An existing folder must be used as the\n  destination for the DICOM references.\n\nform.g-dwas-import-form\n  .form-group\n    label(for=\"g-dwas-import-dest-type\") Destination type\n    select#g-dwas-import-dest-type.form-control\n      option(value=\"folder\", selected=true) Folder\n      option(value=\"user\") User\n      option(value=\"collection\") Collection\n  .form-group\n    label(for=\"g-dwas-import-dest-id\") Destination ID\n    .input-group.input-group-sm\n      input#g-dwas-import-dest-id.form-control.input-sm(\n          type=\"text\",\n          placeholder=\"Existing folder, user, or collection ID to use as the destination\")\n      .input-group-btn\n        button.g-open-browser.btn.btn-default(type=\"button\")\n          i.icon-folder-open\n    label(for=\"g-dwas-import-limit\") Limit (Studies)\n    input#g-dwas-import-limit.form-control(\n        type=\"number\", step=\"1\", min=\"1\", value=\"10\")\n    label(for=\"g-dwas-import-filters\") Filters (Studies)\n    textarea#g-dwas-import-filters.form-control(rows=\"10\")\n      | {\n      |     \"ModalitiesInStudy\": \"SM\"\n      | }\n  .g-validation-failed-message\n  button.g-submit-assetstore-import.btn.btn-success(type=\"submit\")\n    i.icon-link-ext\n    |  Begin import\n","import DWASImportTemplate from '../templates/assetstoreImport.pug';\n\nconst $ = girder.$;\nconst BrowserWidget = girder.views.widgets.BrowserWidget;\nconst router = girder.router;\nconst { View } = girder.views;\nconst { restRequest } = girder.rest;\nconst { assetstoreImportViewMap } = girder.views.body;\nconst { AssetstoreType } = girder.constants;\n\nconst DICOMwebImportView = View.extend({\n    events: {\n        'submit .g-dwas-import-form': function (e) {\n            e.preventDefault();\n            this.$('.g-validation-failed-message').empty();\n\n            const destinationType = this.$('#g-dwas-import-dest-type').val();\n            const destinationId = this.$('#g-dwas-import-dest-id').val().trim().split(/\\s/)[0];\n            const filters = this.$('#g-dwas-import-filters').val().trim();\n            const limit = this.$('#g-dwas-import-limit').val().trim();\n\n            if (!destinationId) {\n                this.$('.g-validation-failed-message').html('Invalid Destination ID');\n                return;\n            }\n\n            this.$('.g-submit-dwas-import').addClass('disabled');\n            this.assetstore.off().on('g:imported', function () {\n                router.navigate(destinationType + '/' + destinationId, { trigger: true });\n            }, this).on('g:error', function (err) {\n                this.$('.g-submit-dwas-import').removeClass('disabled');\n                this.$('.g-validation-failed-message').html(err.responseJSON.message);\n            }, this).import({\n                destinationId,\n                destinationType,\n                limit,\n                filters,\n                progress: true\n            });\n        },\n        'click .g-open-browser': '_openBrowser'\n    },\n\n    initialize: function (settings) {\n        this._browserWidgetView = new BrowserWidget({\n            parentView: this,\n            titleText: 'Destination',\n            helpText: 'Browse to a location to select it as the destination.',\n            submitText: 'Select Destination',\n            validate: function (model) {\n                const isValid = $.Deferred();\n                if (!model) {\n                    isValid.reject('Please select a valid root.');\n                } else {\n                    isValid.resolve();\n                }\n                return isValid.promise();\n            }\n        });\n\n        this.listenTo(this._browserWidgetView, 'g:saved', function (val) {\n            this.$('#g-dwas-import-dest-id').val(val.id);\n            const model = this._browserWidgetView._hierarchyView.parentModel;\n            const modelType = model.get('_modelType');\n            this.$('#g-dwas-import-dest-type').val(modelType);\n\n            // Make a rest request to get the resource path\n            restRequest({\n                url: `resource/${val.id}/path`,\n                method: 'GET',\n                data: { type: modelType }\n            }).done((result) => {\n                // Only add the resource path if the value wasn't altered\n                if (this.$('#g-dwas-import-dest-id').val() === val.id) {\n                    this.$('#g-dwas-import-dest-id').val(`${val.id} (${result})`);\n                }\n            });\n        });\n        this.assetstore = settings.assetstore;\n        this.render();\n    },\n\n    render: function () {\n        this.$el.html(DWASImportTemplate({\n            assetstore: this.assetstore\n        }));\n\n        return this;\n    },\n\n    _openBrowser: function () {\n        this._browserWidgetView.setElement($('#g-dialog-container')).render();\n    }\n});\n\n// This can be null if the base view is not the main Girder application\nif (assetstoreImportViewMap) {\n    assetstoreImportViewMap[AssetstoreType.DICOMWEB] = DICOMwebImportView;\n}\n\nexport default DICOMwebImportView;\n",".g-assetstore-import-button-container\n  a.g-dwas-import-button.btn.btn-sm.btn-success(\n      href=`#assetstore/${assetstore.get('_id')}/import`,\n      title=\"Import references to DICOM objects from a DICOMweb server\")\n    i.icon-link-ext\n    |  Import data\n","import DWASImportButtonTemplate from '../templates/dicomwebAssetstoreImportButton.pug';\n\nconst _ = girder._;\nconst AssetstoresView = girder.views.body.AssetstoresView;\nconst { AssetstoreType } = girder.constants;\nconst { wrap } = girder.utilities.PluginUtils;\n\n/**\n * Adds DICOMweb-specific info and an import button to the assetstore list\n * view.\n */\nwrap(AssetstoresView, 'render', function (render) {\n    render.call(this);\n\n    const selector = '.g-assetstore-info-section[assetstore-type=\"' + AssetstoreType.DICOMWEB + '\"]';\n\n    _.each(this.$(selector), function (el) {\n        const $el = this.$(el);\n        const assetstore = this.collection.get($el.attr('cid'));\n\n        $el.parent().find('.g-assetstore-buttons').append(\n            DWASImportButtonTemplate({\n                assetstore\n            })\n        );\n    }, this);\n\n    this.$('.g-dwas-import-button').tooltip({\n        delay: 100\n    });\n    return this;\n});\n","include dicomwebAssetstoreMixins\n\n+g-dwas-parameters(\"edit\")\n","const authOptions = [\n    {\n        // HTML can't accept null, but it can accept an empty string\n        value: '',\n        label: 'None'\n    },\n    {\n        value: 'token',\n        label: 'Token'\n    }\n];\n\nexport default authOptions;\n","import DWASEditFieldsTemplate from '../templates/dicomwebAssetstoreEditFields.pug';\n\nimport authOptions from './AuthOptions';\n\nconst EditAssetstoreWidget = girder.views.widgets.EditAssetstoreWidget;\nconst { AssetstoreType } = girder.constants;\nconst { wrap } = girder.utilities.PluginUtils;\n\n/**\n * Adds DICOMweb-specific fields to the edit dialog.\n */\nwrap(EditAssetstoreWidget, 'render', function (render) {\n    render.call(this);\n\n    if (this.model.get('type') === AssetstoreType.DICOMWEB) {\n        this.$('.g-assetstore-form-fields').append(\n            DWASEditFieldsTemplate({\n                assetstore: this.model,\n                authOptions\n            })\n        );\n    }\n    return this;\n});\n\nEditAssetstoreWidget.prototype.fieldsMap[AssetstoreType.DICOMWEB] = {\n    get: function () {\n        return {\n            url: this.$('#g-edit-dwas-url').val(),\n            qido_prefix: this.$('#g-edit-dwas-qido-prefix').val(),\n            wado_prefix: this.$('#g-edit-dwas-wado-prefix').val(),\n            auth_type: this.$('#g-edit-dwas-auth-type').val(),\n            auth_token: this.$('#g-edit-dwas-auth-token').val()\n        };\n    },\n    set: function () {\n        const dwInfo = this.model.get('dicomweb_meta');\n        this.$('#g-edit-dwas-url').val(dwInfo.url);\n        this.$('#g-edit-dwas-qido-prefix').val(dwInfo.qido_prefix);\n        this.$('#g-edit-dwas-wado-prefix').val(dwInfo.wado_prefix);\n        // HTML can't accept null, so set it to an empty string\n        this.$('#g-edit-dwas-auth-type').val(dwInfo.auth_type || '');\n        this.$('#g-edit-dwas-auth-token').val(dwInfo.auth_token);\n    }\n};\n","include dicomwebAssetstoreMixins\n\n.panel.panel-default\n  .panel-heading(\n      data-toggle=\"collapse\",\n      data-parent=\"#g-assetstore-accordion\",\n      data-target=\"#g-create-dwas-tab\")\n    .panel-title\n      a\n        i.icon-server\n        span Create new #[b DICOMweb] assetstore\n  #g-create-dwas-tab.panel-collapse.collapse\n    .panel-body\n      p.\n        The DICOMweb assetstore can be used to search for and view WSI DICOM\n        files on a DICOMweb server. Each DICOMweb assetstore should point to a\n        particular DICOMweb server.\n      form#g-new-dwas-form(role=\"form\")\n        label.control-label(for=\"g-new-dwas-name\") Assetstore name\n        input#g-new-dwas-name.input-sm.form-control(\n            type=\"text\",\n            placeholder=\"Name\")\n        +g-dwas-parameters(\"new\")\n        p#g-new-dwas-error.g-validation-failed-message\n        input.g-new-assetstore-submit.btn.btn-sm.btn-primary(\n          type=\"submit\", value=\"Create\")\n","import DWASCreateTemplate from '../templates/dicomwebAssetstoreCreate.pug';\n\nimport authOptions from './AuthOptions';\n\nconst NewAssetstoreWidget = girder.views.widgets.NewAssetstoreWidget;\nconst { AssetstoreType } = girder.constants;\nconst { wrap } = girder.utilities.PluginUtils;\n/**\n * Add UI for creating new DICOMweb assetstore.\n */\nwrap(NewAssetstoreWidget, 'render', function (render) {\n    render.call(this);\n\n    this.$('#g-assetstore-accordion').append(DWASCreateTemplate({\n        authOptions\n    }));\n    return this;\n});\n\nNewAssetstoreWidget.prototype.events['submit #g-new-dwas-form'] = function (e) {\n    this.createAssetstore(e, this.$('#g-new-dwas-error'), {\n        type: AssetstoreType.DICOMWEB,\n        name: this.$('#g-new-dwas-name').val(),\n        url: this.$('#g-new-dwas-url').val(),\n        qido_prefix: this.$('#g-new-dwas-qido-prefix').val(),\n        wado_prefix: this.$('#g-new-dwas-wado-prefix').val(),\n        auth_type: this.$('#g-new-dwas-auth-type').val(),\n        auth_token: this.$('#g-new-dwas-auth-token').val()\n    });\n};\n","// Extends and overrides API\nimport './constants';\nimport './views/DICOMwebImportView';\nimport './views/AssetstoresView';\nimport './views/EditAssetstoreWidget';\nimport './views/NewAssetstoreWidget';\n\n// expose symbols under girder.plugins\nimport * as dicomWeb from './index';\n\nconst { registerPluginNamespace } = girder.pluginUtils;\n\nregisterPluginNamespace('dicomweb', dicomWeb);\n"],"names":["AssetstoreType","pug_rethrow","e","n","r","t","o","a","s","template","locals","pug_html","pug_debug_filename","pug_debug_line","err","$","BrowserWidget","router","View","restRequest","assetstoreImportViewMap","DICOMwebImportView","destinationType","destinationId","filters","limit","settings","model","isValid","val","modelType","result","DWASImportTemplate","pug_attr","f","pug_escape","pug_match_html","c","locals_for_with","assetstore","_","AssetstoresView","wrap","render","selector","el","$el","DWASImportButtonTemplate","pug_has_own_property","pug_style","pug_mixins","pug_interp","authOptions","label_key","block","attributes","key","url_id","qido_id","wado_id","auth_type_id","auth_type_container_id","auth_token_id","auth_token_container_id","auth_type","updateFuncName","$$obj","pug_index0","$$l","auth_option","display","EditAssetstoreWidget","DWASEditFieldsTemplate","dwInfo","NewAssetstoreWidget","DWASCreateTemplate","registerPluginNamespace","dicomWeb"],"mappings":"AAAA,MAAM,kBAAEA,EAAc,IAAK,OAAO;AAElCA,EAAe,WAAW;;;;ACF1B,SAASC,EAAYC,GAAEC,GAAEC,GAAEC,GAAE;AAAC,MAAG,EAAEH,aAAa,OAAO,OAAMA;AAAE,MAAG,EAAe,OAAO,SAApB,OAA4BC,KAAGE,GAAG,OAAMH,EAAE,WAAS,cAAYE,GAAEF;AAAE,MAAII,GAAEC,GAAE,GAAEC;AAAE,MAAG;AAAC,IAAAH,IAAEA,KAAG,QAAQ,IAAI,EAAE,aAAaF,GAAE,EAAC,UAAS,OAAM,CAAC,GAAEG,IAAE,GAAEC,IAAEF,EAAE,MAAM;AAAA,CAAI,GAAE,IAAE,KAAK,IAAID,IAAEE,GAAE,CAAC,GAAEE,IAAE,KAAK,IAAID,EAAE,QAAOH,IAAEE,CAAC;AAAA,EAAC,SAAOD,GAAE;AAAC,WAAOH,EAAE,WAAS,4BAA0BC,IAAE,OAAKE,EAAE,UAAQ,KAAI,KAAKJ,EAAYC,GAAE,MAAKE,CAAC;AAAA,EAAC;AAAC,EAAAE,IAAEC,EAAE,MAAM,GAAEC,CAAC,EAAE,IAAI,SAASN,GAAEC,GAAE;AAAC,QAAIE,IAAEF,IAAE,IAAE;AAAE,YAAOE,KAAGD,IAAE,SAAO,UAAQC,IAAE,OAAKH;AAAA,EAAC,CAAC,EAAE,KAAK;AAAA,CAAI,GAAEA,EAAE,OAAKC;AAAE,MAAG;AAAC,IAAAD,EAAE,WAASC,KAAG,SAAO,MAAIC,IAAE;AAAA,IAAKE,IAAE;AAAA;AAAA,IAAOJ,EAAE;AAAA,EAAO,QAAS;AAAA,EAAC;AAAC,QAAMA;AAAC;AAAC,SAASO,EAASC,GAAQ;AAAI,MAACC,IAAW,IAAoCC,GAAoBC;AAAe,MAAI;AAAE,IAAAA,IAAiB,GAAED,IAAqB,kGAC/rBD,IAAWA,IAAW,8BACrBE,IAAiB,GAAED,IAAqB,kGACzCD,IAAWA,IAAW,iEACrBE,IAAiB,GAAED,IAAqB,kGACzCD,IAAWA,IAAW,uCACrBE,IAAiB,GAAED,IAAqB,kGACzCD,IAAWA,IAAW,4EACrBE,IAAiB,GAAED,IAAqB,kGACzCD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,GAAED,IAAqB,kGACzCD,IAAWA,IAAW,6EACrBE,IAAiB,GAAED,IAAqB,kGACzCD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,GAAED,IAAqB,kGACzCD,IAAWA,IAAW,yCACrBE,IAAiB,GAAED,IAAqB,kGACzCD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,GAAED,IAAqB,kGACzCD,IAAWA,IAAW,UACrBE,IAAiB,GAAED,IAAqB,kGACzCD,IAAWA,IAAW,qCACrBE,IAAiB,GAAED,IAAqB,kGACzCD,IAAWA,IAAW,4BACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,yCACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,4BACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,8DACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,+CACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,mBACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,yBACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,iBACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,+BACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,sCACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,4BACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,uCACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,0BACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,4CACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,iKACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,iCACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,iEACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,yDACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,qCACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,2BACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,oGACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,uCACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,6BACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,wEACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,KACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,iCACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,sBACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,mDACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,6EACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW,iCACrBE,IAAiB,IAAGD,IAAqB,kGAC1CD,IAAWA,IAAW;AAAA,EAA8D,SAASG,GAAK;AAACb,IAAAA,EAAYa,GAAKF,GAAoBC,CAAc;AAAA,EAAE;AAAE,SAAOF;AAAS;ACrF1K,MAAMI,IAAI,OAAO,GACXC,IAAgB,OAAO,MAAM,QAAQ,eACrCC,IAAS,OAAO,QAChB,EAAE,MAAAC,EAAI,IAAK,OAAO,OAClB,EAAE,aAAAC,EAAW,IAAK,OAAO,MACzB,EAAE,yBAAAC,EAAuB,IAAK,OAAO,MAAM,MAC3C,kBAAEpB,EAAc,IAAK,OAAO,WAE5BqB,IAAqBH,EAAK,OAAO;AAAA,EACnC,QAAQ;AAAA,IACJ,8BAA8B,SAAUhB,GAAG;AACvC,MAAAA,EAAE,eAAc,GAChB,KAAK,EAAE,8BAA8B,EAAE,MAAK;AAE5C,YAAMoB,IAAkB,KAAK,EAAE,0BAA0B,EAAE,IAAG,GACxDC,IAAgB,KAAK,EAAE,wBAAwB,EAAE,MAAM,OAAO,MAAM,IAAI,EAAE,CAAC,GAC3EC,IAAU,KAAK,EAAE,wBAAwB,EAAE,IAAG,EAAG,KAAI,GACrDC,IAAQ,KAAK,EAAE,sBAAsB,EAAE,IAAG,EAAG,KAAI;AAEvD,UAAI,CAACF,GAAe;AAChB,aAAK,EAAE,8BAA8B,EAAE,KAAK,wBAAwB;AACpE;AAAA,MACJ;AAEA,WAAK,EAAE,uBAAuB,EAAE,SAAS,UAAU,GACnD,KAAK,WAAW,IAAG,EAAG,GAAG,cAAc,WAAY;AAC/C,QAAAN,EAAO,SAASK,IAAkB,MAAMC,GAAe,EAAE,SAAS,IAAM;AAAA,MAC5E,GAAG,IAAI,EAAE,GAAG,WAAW,SAAUT,GAAK;AAClC,aAAK,EAAE,uBAAuB,EAAE,YAAY,UAAU,GACtD,KAAK,EAAE,8BAA8B,EAAE,KAAKA,EAAI,aAAa,OAAO;AAAA,MACxE,GAAG,IAAI,EAAE,OAAO;AAAA,QACZ,eAAAS;AAAA,QACA,iBAAAD;AAAA,QACA,OAAAG;AAAA,QACA,SAAAD;AAAA,QACA,UAAU;AAAA,MAC1B,CAAa;AAAA,IACL;AAAA,IACA,yBAAyB;AAAA,EACjC;AAAA,EAEI,YAAY,SAAUE,GAAU;AAC5B,SAAK,qBAAqB,IAAIV,EAAc;AAAA,MACxC,YAAY;AAAA,MACZ,WAAW;AAAA,MACX,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,UAAU,SAAUW,GAAO;AACvB,cAAMC,IAAUb,EAAE,SAAQ;AAC1B,eAAKY,IAGDC,EAAQ,QAAO,IAFfA,EAAQ,OAAO,6BAA6B,GAIzCA,EAAQ,QAAO;AAAA,MAC1B;AAAA,IACZ,CAAS,GAED,KAAK,SAAS,KAAK,oBAAoB,WAAW,SAAUC,GAAK;AAC7D,WAAK,EAAE,wBAAwB,EAAE,IAAIA,EAAI,EAAE;AAE3C,YAAMC,IADQ,KAAK,mBAAmB,eAAe,YAC7B,IAAI,YAAY;AACxC,WAAK,EAAE,0BAA0B,EAAE,IAAIA,CAAS,GAGhDX,EAAY;AAAA,QACR,KAAK,YAAYU,EAAI,EAAE;AAAA,QACvB,QAAQ;AAAA,QACR,MAAM,EAAE,MAAMC,EAAS;AAAA,MACvC,CAAa,EAAE,KAAK,CAACC,MAAW;AAEhB,QAAI,KAAK,EAAE,wBAAwB,EAAE,IAAG,MAAOF,EAAI,MAC/C,KAAK,EAAE,wBAAwB,EAAE,IAAI,GAAGA,EAAI,EAAE,KAAKE,CAAM,GAAG;AAAA,MAEpE,CAAC;AAAA,IACL,CAAC,GACD,KAAK,aAAaL,EAAS,YAC3B,KAAK,OAAM;AAAA,EACf;AAAA,EAEA,QAAQ,WAAY;AAChB,gBAAK,IAAI,KAAKM,EAAmB;AAAA,MAC7B,YAAY,KAAK;AAAA,IAC7B,CAAS,CAAC,GAEK;AAAA,EACX;AAAA,EAEA,cAAc,WAAY;AACtB,SAAK,mBAAmB,WAAWjB,EAAE,qBAAqB,CAAC,EAAE,OAAM;AAAA,EACvE;AACJ,CAAC;AAGGK,MACAA,EAAwBpB,EAAe,QAAQ,IAAIqB;ACjGvD,SAASY,EAAS5B,GAAE,GAAEF,GAAEC,GAAE;AAAC,MAAQ,MAAL,MAAc,KAAN,QAAS,CAAC,KAA2BC,MAAV,QAAa,QAAM;AAAG,MAAQ,MAAL,GAAO,QAAM,OAASA,IAAE,OAAKA,IAAE;AAAK,MAAI6B,IAAE,OAAO;AAAE,SAAiBA,MAAX,YAA2BA,MAAb,cAA4B,OAAO,EAAE,UAArB,eAA8B,IAAE,EAAE,OAAM,IAAc,OAAO,KAAjB,aAAqB,IAAE,KAAK,UAAU,CAAC,GAAE/B,MAA6B,IAAEgC,EAAW,CAAC,GAAG,MAAI9B,IAAE,OAAK,IAAE,OAAK,MAAIA,IAAE,OAAK,EAAE,QAAQ,MAAK,OAAO,IAAE;AAAG;AAC5W,SAAS8B,EAAWjC,GAAE;AAAC,MAAIK,IAAE,KAAGL,GAAEG,IAAE+B,EAAe,KAAK7B,CAAC;AAAE,MAAG,CAACF,EAAE,QAAOH;AAAE,MAAIE,GAAEiC,GAAElC,GAAEK,IAAE;AAAG,OAAIJ,IAAEC,EAAE,OAAMgC,IAAE,GAAEjC,IAAEG,EAAE,QAAOH,KAAI;AAAC,YAAOG,EAAE,WAAWH,CAAC,GAAC;AAAA,MAAE,KAAK;AAAG,QAAAD,IAAE;AAAS;AAAA,MAAM,KAAK;AAAG,QAAAA,IAAE;AAAQ;AAAA,MAAM,KAAK;AAAG,QAAAA,IAAE;AAAO;AAAA,MAAM,KAAK;AAAG,QAAAA,IAAE;AAAO;AAAA,MAAM;AAAQ;AAAA,IAAQ;AAAC,IAAAkC,MAAIjC,MAAII,KAAGD,EAAE,UAAU8B,GAAEjC,CAAC,IAAGiC,IAAEjC,IAAE,GAAEI,KAAGL;AAAA,EAAC;AAAC,SAAOkC,MAAIjC,IAAEI,IAAED,EAAE,UAAU8B,GAAEjC,CAAC,IAAEI;AAAC;AAC5U,IAAI4B,IAAe;AACnB,SAASnC,EAAYC,GAAEC,GAAEC,GAAEC,GAAE;AAAC,MAAG,EAAEH,aAAa,OAAO,OAAMA;AAAE,MAAG,EAAe,OAAO,SAApB,OAA4BC,KAAGE,GAAG,OAAMH,EAAE,WAAS,cAAYE,GAAEF;AAAE,MAAII,GAAEC,GAAE,GAAEC;AAAE,MAAG;AAAC,IAAAH,IAAEA,KAAG,QAAQ,IAAI,EAAE,aAAaF,GAAE,EAAC,UAAS,OAAM,CAAC,GAAEG,IAAE,GAAEC,IAAEF,EAAE,MAAM;AAAA,CAAI,GAAE,IAAE,KAAK,IAAID,IAAEE,GAAE,CAAC,GAAEE,IAAE,KAAK,IAAID,EAAE,QAAOH,IAAEE,CAAC;AAAA,EAAC,SAAOD,GAAE;AAAC,WAAOH,EAAE,WAAS,4BAA0BC,IAAE,OAAKE,EAAE,UAAQ,KAAI,KAAKJ,EAAYC,GAAE,MAAKE,CAAC;AAAA,EAAC;AAAC,EAAAE,IAAEC,EAAE,MAAM,GAAEC,CAAC,EAAE,IAAI,SAASN,GAAEC,GAAE;AAAC,QAAIE,IAAEF,IAAE,IAAE;AAAE,YAAOE,KAAGD,IAAE,SAAO,UAAQC,IAAE,OAAKH;AAAA,EAAC,CAAC,EAAE,KAAK;AAAA,CAAI,GAAEA,EAAE,OAAKC;AAAE,MAAG;AAAC,IAAAD,EAAE,WAASC,KAAG,SAAO,MAAIC,IAAE;AAAA,IAAKE,IAAE;AAAA;AAAA,IAAOJ,EAAE;AAAA,EAAO,QAAS;AAAA,EAAC;AAAC,QAAMA;AAAC;AAAC,SAASO,EAASC,GAAQ;AAAI,MAACC,IAAW,IAAoCC,GAAoBC;AAAe,MAAI;AACjpB,QAAIyB,IAAmB5B,KAAU;AAEjC,KAAC,SAAU6B,GAAY;AACpB,MAAA1B,IAAiB,GAAED,IAAqB,gHAC/CD,IAAWA,IAAW,sDACrBE,IAAiB,GAAED,IAAqB,gHACzCD,IAAWA,IAAW,QAAa,yDAAyDsB,EAAS,QAAQ,eAAeM,EAAW,IAAI,KAAK,CAAC,WAAW,IAAM,EAAK,IAAE,wEAA0E,KAClP1B,IAAiB,GAAED,IAAqB,gHACzCD,IAAWA,IAAW,iCACrBE,IAAiB,GAAED,IAAqB,gHACzCD,IAAWA,IAAW;AAAA,IAClB,GAAE,KAAK,MAAM,gBAAgB2B,IACzBA,EAAgB,aAChB,OAAO,aAAe,MAAc,aAAa,MAAS;AAAA,EAC7D,SAASxB,GAAK;AAACb,IAAAA,EAAYa,GAAKF,GAAoBC,CAAc;AAAA,EAAE;AAAE,SAAOF;AAAS;AChB3F,MAAM6B,KAAI,OAAO,GACXC,KAAkB,OAAO,MAAM,KAAK,iBACpC,kBAAEzC,GAAc,IAAK,OAAO,WAC5B,EAAA,MAAE0C,GAAI,IAAK,OAAO,UAAU;AAMlCA,GAAKD,IAAiB,UAAU,SAAUE,GAAQ;AAC9C,EAAAA,EAAO,KAAK,IAAI;AAEhB,QAAMC,IAAW,iDAAiD5C,GAAe,WAAW;AAE5F,SAAAwC,GAAE,KAAK,KAAK,EAAEI,CAAQ,GAAG,SAAUC,GAAI;AACnC,UAAMC,IAAM,KAAK,EAAED,CAAE,GACfN,IAAa,KAAK,WAAW,IAAIO,EAAI,KAAK,KAAK,CAAC;AAEtD,IAAAA,EAAI,OAAM,EAAG,KAAK,uBAAuB,EAAE;AAAA,MACvCC,EAAyB;AAAA,QACrB,YAAAR;AAAA,MAChB,CAAa;AAAA,IACb;AAAA,EACI,GAAG,IAAI,GAEP,KAAK,EAAE,uBAAuB,EAAE,QAAQ;AAAA,IACpC,OAAO;AAAA,EACf,CAAK,GACM;AACX,CAAC;;;;AC/BD,SAASN,EAAS5B,GAAE,GAAEF,GAAEC,GAAE;AAAC,MAAQ,MAAL,MAAc,KAAN,QAAS,CAAC,MAAcC,MAAV,WAAuBA,MAAV,SAAa,QAAM;AAAG,MAAQ,MAAL,GAAO,QAAM,OAASA,IAAE,OAAKA,IAAE;AAAK,MAAI6B,IAAE,OAAO;AAAE,SAAiBA,MAAX,YAA2BA,MAAb,cAA4B,OAAO,EAAE,UAArB,eAA8B,IAAE,EAAE,OAAM,IAAc,OAAO,KAAjB,aAAqB,IAAE,KAAK,UAAU,CAAC,GAAE/B,MAA6B,IAAEgC,EAAW,CAAC,GAAG,MAAI9B,IAAE,OAAK,IAAE,OAAK,MAAIA,IAAE,OAAK,EAAE,QAAQ,MAAK,OAAO,IAAE;AAAG;AAC5W,SAAS8B,EAAWjC,GAAE;AAAC,MAAIK,IAAE,KAAGL,GAAEG,IAAE+B,GAAe,KAAK7B,CAAC;AAAE,MAAG,CAACF,EAAE,QAAOH;AAAE,MAAIE,GAAEiC,GAAElC,GAAEK,IAAE;AAAG,OAAIJ,IAAEC,EAAE,OAAMgC,IAAE,GAAEjC,IAAEG,EAAE,QAAOH,KAAI;AAAC,YAAOG,EAAE,WAAWH,CAAC,GAAC;AAAA,MAAE,KAAK;AAAG,QAAAD,IAAE;AAAS;AAAA,MAAM,KAAK;AAAG,QAAAA,IAAE;AAAQ;AAAA,MAAM,KAAK;AAAG,QAAAA,IAAE;AAAO;AAAA,MAAM,KAAK;AAAG,QAAAA,IAAE;AAAO;AAAA,MAAM;AAAQ;AAAA,IAAQ;AAAC,IAAAkC,MAAIjC,MAAII,KAAGD,EAAE,UAAU8B,GAAEjC,CAAC,IAAGiC,IAAEjC,IAAE,GAAEI,KAAGL;AAAA,EAAC;AAAC,SAAOkC,MAAIjC,IAAEI,IAAED,EAAE,UAAU8B,GAAEjC,CAAC,IAAEI;AAAC;AAC5U,IAAIwC,KAAqB,OAAO,UAAU,gBACtCZ,KAAe;AACnB,SAASnC,EAAYC,GAAEC,GAAEC,GAAEC,GAAE;AAAC,MAAG,EAAEH,aAAa,OAAO,OAAMA;AAAE,MAAG,EAAe,OAAO,SAApB,OAA4BC,KAAGE,GAAG,OAAMH,EAAE,WAAS,cAAYE,GAAEF;AAAE,MAAII,GAAEC,GAAE,GAAEC;AAAE,MAAG;AAAC,IAAAH,IAAEA,KAAG,QAAQ,IAAI,EAAE,aAAaF,GAAE,EAAC,UAAS,OAAM,CAAC,GAAEG,IAAE,GAAEC,IAAEF,EAAE,MAAM;AAAA,CAAI,GAAE,IAAE,KAAK,IAAID,IAAEE,GAAE,CAAC,GAAEE,IAAE,KAAK,IAAID,EAAE,QAAOH,IAAEE,CAAC;AAAA,EAAC,SAAOD,GAAE;AAAC,WAAOH,EAAE,WAAS,4BAA0BC,IAAE,OAAKE,EAAE,UAAQ,KAAI,KAAKJ,EAAYC,GAAE,MAAKE,CAAC;AAAA,EAAC;AAAC,EAAAE,IAAEC,EAAE,MAAM,GAAEC,CAAC,EAAE,IAAI,SAASN,GAAEC,GAAE;AAAC,QAAIE,IAAEF,IAAE,IAAE;AAAE,YAAOE,KAAGD,IAAE,SAAO,UAAQC,IAAE,OAAKH;AAAA,EAAC,CAAC,EAAE,KAAK;AAAA,CAAI,GAAEA,EAAE,OAAKC;AAAE,MAAG;AAAC,IAAAD,EAAE,WAASC,KAAG,SAAO,MAAIC,IAAE;AAAA,IAAKE,IAAE;AAAA;AAAA,IAAOJ,EAAE;AAAA,EAAO,QAAS;AAAA,EAAC;AAAC,QAAMA;AAAC;AAC/hB,SAAS+C,GAAU,GAAE;AAAC,MAAG,CAAC,EAAE,QAAM;AAAG,MAAa,OAAO,KAAjB,UAAmB;AAAC,QAAI5C,IAAE;AAAG,aAAQH,KAAK,EAAE8C,CAAAA,GAAqB,KAAK,GAAE9C,CAAC,MAAIG,IAAEA,IAAEH,IAAE,MAAI,EAAEA,CAAC,IAAE;AAAK,WAAOG;AAAA,EAAC;AAAC,SAAO,IAAE;AAAE;AAAC,SAASI,GAASC,GAAQ;AAAC,MAAIC,IAAW,IAAIuC,IAAa,IAAIC,GAAevC,GAAoBC;AAAe,MAAI;AAC/Q,QAAIyB,IAAmB5B,KAAU;AAEjC,KAAC,SAAU6B,GAAYa,GAAa;AACjC,MAAAvC,IAAiB,GAAED,IAAqB,0GAC/CsC,EAAW,mBAAmB,IAAIC,IAAa,SAASE,GAAU;AAClE,YAAIC,IAAS,QAAQ,KAAK,OAAQC,IAAc,QAAQ,KAAK,cAAe,CAAA;AAC3E,QAAA1C,IAAiB,GAAED,IAAqB;AACzC,cAAM4C,IAAMH;AACX,QAAAxC,IAAiB,GAAED,IAAqB;AACzC,cAAM6C,IAAS,KAAKD,CAAG;AACtB,QAAA3C,IAAiB,GAAED,IAAqB;AACzC,cAAM8C,IAAU,KAAKF,CAAG;AACvB,QAAA3C,IAAiB,GAAED,IAAqB;AACzC,cAAM+C,IAAU,KAAKH,CAAG;AACvB,QAAA3C,IAAiB,IAAGD,IAAqB;AAC1C,cAAMgD,IAAe,KAAKJ,CAAG;AAC5B,QAAA3C,IAAiB,IAAGD,IAAqB;AAC1C,cAAMiD,IAAyB,KAAKL,CAAG;AACtC,QAAA3C,IAAiB,IAAGD,IAAqB;AAC1C,cAAMkD,IAAgB,KAAKN,CAAG;AAC7B,QAAA3C,IAAiB,IAAGD,IAAqB;AAC1C,cAAMmD,IAA0B,KAAKP,CAAG;AACvC,QAAA3C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,4BACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,2BAA2BsB,EAAS,OAAOwB,GAAQ,IAAM,EAAK,KAAK,KACzG5C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,+BACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,mCAAmCsB,EAAS,MAAMwB,GAAQ,IAAM,EAAK,IAAE,oCAAwC,MACrJ5C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,2BAA2BsB,EAAS,OAAOyB,GAAS,IAAM,EAAK,KAAK,KAC1G7C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,2CACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,mCAAmCsB,EAAS,MAAMyB,GAAS,IAAM,EAAK,IAAE,4CAAgD,MAC9J7C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,2BAA2BsB,EAAS,OAAO0B,GAAS,IAAM,EAAK,KAAK,KAC1G9C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,2CACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,mCAAmCsB,EAAS,MAAM0B,GAAS,IAAM,EAAK,IAAE,4CAAgD,MAC9J9C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,2BAA2BsB,EAAS,OAAO2B,GAAc,IAAM,EAAK,KAAK,KAC/G/C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,mDACrBE,IAAiB,IAAGD,IAAqB;AAC1C,cAAMoD,IAAazB,KAAcA,EAAW,WAAW,cAAc,aAAc;AAClF,QAAA1B,IAAiB,IAAGD,IAAqB;AAC1C,cAAMqD,IAAiB,GAAGT,CAAG;AAC5B,QAAA3C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,QACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAYwB,GAAoBgB,IAAac,MAAtB,OAAwC,KAAKd,CAAU,GACxFtC,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,oBACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,gDACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAYwB,GAAoBgB,IAAaS,MAAtB,OAAsC,KAAKT,CAAU,GACtFtC,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,yBACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,kDACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,gCACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAYwB,GAAoBgB,IAAaY,MAAtB,OAAiD,KAAKZ,CAAU,GACjGtC,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,+BACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,gBACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,SAAesB,EAAS,MAAM4B,GAAwB,IAAM,EAAK,IAAK,KAC3FhD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,aAAkB,0BAA0BsB,EAAS,MAAM2B,GAAc,IAAM,EAAK,IAAE3B,EAAS,YAAYgC,IAAiB,MAAM,IAAM,EAAK,KAAK,KACvKpD,IAAiB,IAAGD,IAAqB,2GAExC,WAAU;AACV,cAAIsD,IAAQd;AACZ,cAAgB,OAAOc,EAAM,UAAzB;AACA,qBAASC,IAAa,GAAGC,IAAMF,EAAM,QAAQC,IAAaC,GAAKD,KAAc;AAC3E,kBAAIE,IAAcH,EAAMC,CAAU;AACzC,cAAAtD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,aAAkBsB,EAAS,SAASoC,EAAY,OAAO,IAAM,EAAK,IAAEpC,EAAS,YAAa+B,MAAcK,EAAY,OAAQ,IAAM,EAAK,KAAK,KACjKxD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAYwB,GAAoBgB,IAAakB,EAAY,UAAlC,OAA2C,KAAKlB,CAAU,IAAK;AAAA,YAC3F;AAAA,eACG;AACL,gBAAIiB,IAAM;AACV,qBAASD,KAAcD,GAAO;AAC5B,cAAAE;AACA,kBAAIC,IAAcH,EAAMC,CAAU;AACvC,cAAAtD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,aAAkBsB,EAAS,SAASoC,EAAY,OAAO,IAAM,EAAK,IAAEpC,EAAS,YAAa+B,MAAcK,EAAY,OAAQ,IAAM,EAAK,KAAK,KACjKxD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAYwB,GAAoBgB,IAAakB,EAAY,UAAlC,OAA2C,KAAKlB,CAAU,IAAK;AAAA,YAC7F;AAAA,UACF;AAAA,QACF,GAAG,KAAK,IAAI,GAEZxC,IAAWA,IAAW,mBACrBE,IAAiB,IAAGD,IAAqB;AAC1C,cAAM0D,IAAUN,MAAc,UAAU,UAAS;AAChD,QAAAnD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,UAAesB,EAAS,MAAM8B,GAAyB,IAAM,EAAK,IAAE9B,EAAS,SAASgB,GAAU,cAAcqB,IAAU,GAAG,GAAG,IAAM,EAAK,KAAK,KACnKzD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,2BAA2BsB,EAAS,OAAO6B,GAAe,IAAM,EAAK,KAAK,KAChHjD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,yCACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,mCAAmCsB,EAAS,MAAM6B,GAAe,IAAM,EAAK,IAAE,sCAA0C;AAAA,MAC/J,GACCjD,IAAiB,GAAED,IAAqB,8GACzCsC,EAAW,mBAAmB,EAAE,MAAM;AAAA,IAClC,GAAE,KAAK,MAAM,gBAAgBZ,IACzBA,EAAgB,aAChB,OAAO,aAAe,MAAc,aAAa,QAAW,iBAAiBA,IAC7EA,EAAgB,cAChB,OAAO,cAAgB,MAAc,cAAc,MAAS;AAAA,EAC/D,SAASxB,GAAK;AAACb,IAAAA,EAAYa,GAAKF,GAAoBC,CAAc;AAAA,EAAE;AAAE,SAAOF;AAAS;ACxI3F,MAAMyC,IAAc;AAAA,EAChB;AAAA;AAAA,IAEI,OAAO;AAAA,IACP,OAAO;AAAA,EACf;AAAA,EACI;AAAA,IACI,OAAO;AAAA,IACP,OAAO;AAAA,EACf;AACA,GCNMmB,IAAuB,OAAO,MAAM,QAAQ,sBAC5C,kBAAEvE,EAAc,IAAK,OAAO,WAC5B,EAAA,MAAE0C,GAAI,IAAK,OAAO,UAAU;AAKlCA,GAAK6B,GAAsB,UAAU,SAAU5B,GAAQ;AACnD,SAAAA,EAAO,KAAK,IAAI,GAEZ,KAAK,MAAM,IAAI,MAAM,MAAM3C,EAAe,YAC1C,KAAK,EAAE,2BAA2B,EAAE;AAAA,IAChCwE,GAAuB;AAAA,MACnB,YAAY,KAAK;AAAA,MACjC,aAAgBpB;AAAAA,IAChB,CAAa;AAAA,EACb,GAEW;AACX,CAAC;AAEDmB,EAAqB,UAAU,UAAUvE,EAAe,QAAQ,IAAI;AAAA,EAChE,KAAK,WAAY;AACb,WAAO;AAAA,MACH,KAAK,KAAK,EAAE,kBAAkB,EAAE,IAAG;AAAA,MACnC,aAAa,KAAK,EAAE,0BAA0B,EAAE,IAAG;AAAA,MACnD,aAAa,KAAK,EAAE,0BAA0B,EAAE,IAAG;AAAA,MACnD,WAAW,KAAK,EAAE,wBAAwB,EAAE,IAAG;AAAA,MAC/C,YAAY,KAAK,EAAE,yBAAyB,EAAE,IAAG;AAAA,IAC7D;AAAA,EACI;AAAA,EACA,KAAK,WAAY;AACb,UAAMyE,IAAS,KAAK,MAAM,IAAI,eAAe;AAC7C,SAAK,EAAE,kBAAkB,EAAE,IAAIA,EAAO,GAAG,GACzC,KAAK,EAAE,0BAA0B,EAAE,IAAIA,EAAO,WAAW,GACzD,KAAK,EAAE,0BAA0B,EAAE,IAAIA,EAAO,WAAW,GAEzD,KAAK,EAAE,wBAAwB,EAAE,IAAIA,EAAO,aAAa,EAAE,GAC3D,KAAK,EAAE,yBAAyB,EAAE,IAAIA,EAAO,UAAU;AAAA,EAC3D;AACJ;;;;AC5CA,SAASxC,EAAS5B,GAAE,GAAEF,GAAEC,GAAE;AAAC,MAAQ,MAAL,MAAc,KAAN,QAAS,CAAC,MAAcC,MAAV,WAAuBA,MAAV,SAAa,QAAM;AAAG,MAAQ,MAAL,GAAO,QAAM,OAASA,IAAE,OAAKA,IAAE;AAAK,MAAI6B,IAAE,OAAO;AAAE,SAAiBA,MAAX,YAA2BA,MAAb,cAA4B,OAAO,EAAE,UAArB,eAA8B,IAAE,EAAE,OAAM,IAAc,OAAO,KAAjB,aAAqB,IAAE,KAAK,UAAU,CAAC,GAAE/B,MAA6B,IAAEgC,EAAW,CAAC,GAAG,MAAI9B,IAAE,OAAK,IAAE,OAAK,MAAIA,IAAE,OAAK,EAAE,QAAQ,MAAK,OAAO,IAAE;AAAG;AAC5W,SAAS8B,EAAWjC,GAAE;AAAC,MAAIK,IAAE,KAAGL,GAAEG,IAAE+B,GAAe,KAAK7B,CAAC;AAAE,MAAG,CAACF,EAAE,QAAOH;AAAE,MAAIE,GAAEiC,GAAElC,GAAEK,IAAE;AAAG,OAAIJ,IAAEC,EAAE,OAAMgC,IAAE,GAAEjC,IAAEG,EAAE,QAAOH,KAAI;AAAC,YAAOG,EAAE,WAAWH,CAAC,GAAC;AAAA,MAAE,KAAK;AAAG,QAAAD,IAAE;AAAS;AAAA,MAAM,KAAK;AAAG,QAAAA,IAAE;AAAQ;AAAA,MAAM,KAAK;AAAG,QAAAA,IAAE;AAAO;AAAA,MAAM,KAAK;AAAG,QAAAA,IAAE;AAAO;AAAA,MAAM;AAAQ;AAAA,IAAQ;AAAC,IAAAkC,MAAIjC,MAAII,KAAGD,EAAE,UAAU8B,GAAEjC,CAAC,IAAGiC,IAAEjC,IAAE,GAAEI,KAAGL;AAAA,EAAC;AAAC,SAAOkC,MAAIjC,IAAEI,IAAED,EAAE,UAAU8B,GAAEjC,CAAC,IAAEI;AAAC;AAC5U,IAAIwC,KAAqB,OAAO,UAAU,gBACtCZ,KAAe;AACnB,SAASnC,EAAYC,GAAEC,GAAEC,GAAEC,GAAE;AAAC,MAAG,EAAEH,aAAa,OAAO,OAAMA;AAAE,MAAG,EAAe,OAAO,SAApB,OAA4BC,KAAGE,GAAG,OAAMH,EAAE,WAAS,cAAYE,GAAEF;AAAE,MAAII,GAAEC,GAAE,GAAEC;AAAE,MAAG;AAAC,IAAAH,IAAEA,KAAG,QAAQ,IAAI,EAAE,aAAaF,GAAE,EAAC,UAAS,OAAM,CAAC,GAAEG,IAAE,GAAEC,IAAEF,EAAE,MAAM;AAAA,CAAI,GAAE,IAAE,KAAK,IAAID,IAAEE,GAAE,CAAC,GAAEE,IAAE,KAAK,IAAID,EAAE,QAAOH,IAAEE,CAAC;AAAA,EAAC,SAAOD,GAAE;AAAC,WAAOH,EAAE,WAAS,4BAA0BC,IAAE,OAAKE,EAAE,UAAQ,KAAI,KAAKJ,EAAYC,GAAE,MAAKE,CAAC;AAAA,EAAC;AAAC,EAAAE,IAAEC,EAAE,MAAM,GAAEC,CAAC,EAAE,IAAI,SAASN,GAAEC,GAAE;AAAC,QAAIE,IAAEF,IAAE,IAAE;AAAE,YAAOE,KAAGD,IAAE,SAAO,UAAQC,IAAE,OAAKH;AAAA,EAAC,CAAC,EAAE,KAAK;AAAA,CAAI,GAAEA,EAAE,OAAKC;AAAE,MAAG;AAAC,IAAAD,EAAE,WAASC,KAAG,SAAO,MAAIC,IAAE;AAAA,IAAKE,IAAE;AAAA;AAAA,IAAOJ,EAAE;AAAA,EAAO,QAAS;AAAA,EAAC;AAAC,QAAMA;AAAC;AAC/hB,SAAS+C,GAAU,GAAE;AAAC,MAAG,CAAC,EAAE,QAAM;AAAG,MAAa,OAAO,KAAjB,UAAmB;AAAC,QAAI5C,IAAE;AAAG,aAAQH,KAAK,EAAE,CAAA8C,GAAqB,KAAK,GAAE9C,CAAC,MAAIG,IAAEA,IAAEH,IAAE,MAAI,EAAEA,CAAC,IAAE;AAAK,WAAOG;AAAA,EAAC;AAAC,SAAO,IAAE;AAAE;AAAC,SAASI,GAASC,GAAQ;AAAC,MAAIC,IAAW,IAAIuC,IAAa,IAAIC,GAAevC,GAAoBC;AAAe,MAAI;AAC/Q,QAAIyB,IAAmB5B,KAAU;AAEjC,KAAC,SAAU6B,GAAYa,GAAa;AACjC,MAAAvC,IAAiB,GAAED,IAAqB,0GAC/CsC,EAAW,mBAAmB,IAAIC,IAAa,SAASE,GAAU;AAClE,YAAIC,IAAS,QAAQ,KAAK,OAAQC,IAAc,QAAQ,KAAK,cAAe,CAAA;AAC3E,QAAA1C,IAAiB,GAAED,IAAqB;AACzC,cAAM4C,IAAMH;AACX,QAAAxC,IAAiB,GAAED,IAAqB;AACzC,cAAM6C,IAAS,KAAKD,CAAG;AACtB,QAAA3C,IAAiB,GAAED,IAAqB;AACzC,cAAM8C,IAAU,KAAKF,CAAG;AACvB,QAAA3C,IAAiB,GAAED,IAAqB;AACzC,cAAM+C,IAAU,KAAKH,CAAG;AACvB,QAAA3C,IAAiB,IAAGD,IAAqB;AAC1C,cAAMgD,IAAe,KAAKJ,CAAG;AAC5B,QAAA3C,IAAiB,IAAGD,IAAqB;AAC1C,cAAMiD,IAAyB,KAAKL,CAAG;AACtC,QAAA3C,IAAiB,IAAGD,IAAqB;AAC1C,cAAMkD,IAAgB,KAAKN,CAAG;AAC7B,QAAA3C,IAAiB,IAAGD,IAAqB;AAC1C,cAAMmD,IAA0B,KAAKP,CAAG;AACvC,QAAA3C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,4BACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,2BAA2BsB,EAAS,OAAOwB,GAAQ,IAAM,EAAK,KAAK,KACzG5C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,+BACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,mCAAmCsB,EAAS,MAAMwB,GAAQ,IAAM,EAAK,IAAE,oCAAwC,MACrJ5C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,2BAA2BsB,EAAS,OAAOyB,GAAS,IAAM,EAAK,KAAK,KAC1G7C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,2CACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,mCAAmCsB,EAAS,MAAMyB,GAAS,IAAM,EAAK,IAAE,4CAAgD,MAC9J7C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,2BAA2BsB,EAAS,OAAO0B,GAAS,IAAM,EAAK,KAAK,KAC1G9C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,2CACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,mCAAmCsB,EAAS,MAAM0B,GAAS,IAAM,EAAK,IAAE,4CAAgD,MAC9J9C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,2BAA2BsB,EAAS,OAAO2B,GAAc,IAAM,EAAK,KAAK,KAC/G/C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,mDACrBE,IAAiB,IAAGD,IAAqB;AAC1C,cAAMoD,IAAazB,KAAcA,EAAW,WAAW,cAAc,aAAc;AAClF,QAAA1B,IAAiB,IAAGD,IAAqB;AAC1C,cAAMqD,IAAiB,GAAGT,CAAG;AAC5B,QAAA3C,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,QACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAYwB,GAAoBgB,IAAac,MAAtB,OAAwC,KAAKd,CAAU,GACxFtC,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,oBACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,gDACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAYwB,GAAoBgB,IAAaS,MAAtB,OAAsC,KAAKT,CAAU,GACtFtC,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,yBACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,kDACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,gCACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAYwB,GAAoBgB,IAAaY,MAAtB,OAAiD,KAAKZ,CAAU,GACjGtC,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,+BACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,gBACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,SAAesB,EAAS,MAAM4B,GAAwB,IAAM,EAAK,IAAK,KAC3FhD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,aAAkB,0BAA0BsB,EAAS,MAAM2B,GAAc,IAAM,EAAK,IAAE3B,EAAS,YAAYgC,IAAiB,MAAM,IAAM,EAAK,KAAK,KACvKpD,IAAiB,IAAGD,IAAqB,2GAExC,WAAU;AACV,cAAIsD,IAAQd;AACZ,cAAgB,OAAOc,EAAM,UAAzB;AACA,qBAASC,IAAa,GAAGC,IAAMF,EAAM,QAAQC,IAAaC,GAAKD,KAAc;AAC3E,kBAAIE,IAAcH,EAAMC,CAAU;AACzC,cAAAtD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,aAAkBsB,EAAS,SAASoC,EAAY,OAAO,IAAM,EAAK,IAAEpC,EAAS,YAAa+B,MAAcK,EAAY,OAAQ,IAAM,EAAK,KAAK,KACjKxD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAYwB,GAAoBgB,IAAakB,EAAY,UAAlC,OAA2C,KAAKlB,CAAU,IAAK;AAAA,YAC3F;AAAA,eACG;AACL,gBAAIiB,IAAM;AACV,qBAASD,KAAcD,GAAO;AAC5B,cAAAE;AACA,kBAAIC,IAAcH,EAAMC,CAAU;AACvC,cAAAtD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,aAAkBsB,EAAS,SAASoC,EAAY,OAAO,IAAM,EAAK,IAAEpC,EAAS,YAAa+B,MAAcK,EAAY,OAAQ,IAAM,EAAK,KAAK,KACjKxD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAYwB,GAAoBgB,IAAakB,EAAY,UAAlC,OAA2C,KAAKlB,CAAU,IAAK;AAAA,YAC7F;AAAA,UACF;AAAA,QACF,GAAG,KAAK,IAAI,GAEZxC,IAAWA,IAAW,mBACrBE,IAAiB,IAAGD,IAAqB;AAC1C,cAAM0D,IAAUN,MAAc,UAAU,UAAS;AAChD,QAAAnD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,UAAesB,EAAS,MAAM8B,GAAyB,IAAM,EAAK,IAAE9B,EAAS,SAASgB,GAAU,cAAcqB,IAAU,GAAG,GAAG,IAAM,EAAK,KAAK,KACnKzD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,2BAA2BsB,EAAS,OAAO6B,GAAe,IAAM,EAAK,KAAK,KAChHjD,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,yCACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,YAAiB,mCAAmCsB,EAAS,MAAM6B,GAAe,IAAM,EAAK,IAAE,sCAA0C;AAAA,MAC/J,GACCjD,IAAiB,GAAED,IAAqB,0GACzCD,IAAWA,IAAW,qCACrBE,IAAiB,GAAED,IAAqB,0GACzCD,IAAWA,IAAW,6HACrBE,IAAiB,GAAED,IAAqB,0GACzCD,IAAWA,IAAW,6BACrBE,IAAiB,GAAED,IAAqB,0GACzCD,IAAWA,IAAW,OACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,+BACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,UACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,eACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,OACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,gBACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,sCACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,gEACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,4BACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,OACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,wEACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,0EACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW;AAAA,GACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,mCACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,2CACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,uDACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,2BACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,8FACrBE,IAAiB,IAAGD,IAAqB,0GAC1CsC,EAAW,mBAAmB,EAAE,KAAK,GACpCrC,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW,qEACrBE,IAAiB,IAAGD,IAAqB,0GAC1CD,IAAWA,IAAW;AAAA,IAClB,GAAE,KAAK,MAAM,gBAAgB2B,IACzBA,EAAgB,aAChB,OAAO,aAAe,MAAc,aAAa,QAAW,iBAAiBA,IAC7EA,EAAgB,cAChB,OAAO,cAAgB,MAAc,cAAc,MAAS;AAAA,EAC/D,SAASxB,GAAK;AAAC,IAAAb,EAAYa,GAAKF,GAAoBC,CAAc;AAAA,EAAE;AAAE,SAAOF;AAAS;ACpL3F,MAAM+D,IAAsB,OAAO,MAAM,QAAQ,qBAC3C,EAAE,gBAAA1E,GAAc,IAAK,OAAO,WAC5B,EAAE,MAAA0C,GAAI,IAAK,OAAO,UAAU;AAIlCA,GAAKgC,GAAqB,UAAU,SAAU/B,GAAQ;AAClD,SAAAA,EAAO,KAAK,IAAI,GAEhB,KAAK,EAAE,yBAAyB,EAAE,OAAOgC,GAAmB;AAAA,IAChE,aAAQvB;AAAAA,EACR,CAAK,CAAC,GACK;AACX,CAAC;AAEDsB,EAAoB,UAAU,OAAO,yBAAyB,IAAI,SAAUxE,GAAG;AAC3E,OAAK,iBAAiBA,GAAG,KAAK,EAAE,mBAAmB,GAAG;AAAA,IAClD,MAAMF,GAAe;AAAA,IACrB,MAAM,KAAK,EAAE,kBAAkB,EAAE,IAAG;AAAA,IACpC,KAAK,KAAK,EAAE,iBAAiB,EAAE,IAAG;AAAA,IAClC,aAAa,KAAK,EAAE,yBAAyB,EAAE,IAAG;AAAA,IAClD,aAAa,KAAK,EAAE,yBAAyB,EAAE,IAAG;AAAA,IAClD,WAAW,KAAK,EAAE,uBAAuB,EAAE,IAAG;AAAA,IAC9C,YAAY,KAAK,EAAE,wBAAwB,EAAE,IAAG;AAAA,EACxD,CAAK;AACL;;;;;;;;;;;;;;8CCnBM,EAAE,yBAAA4E,GAAuB,IAAK,OAAO;AAE3CA,GAAwB,YAAYC,EAAQ;"}