"use strict";(self.webpackChunkenDI=self.webpackChunkenDI||[]).push([[770],{4770:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var a=n(467),r=n(4756),o=n.n(r),i=n(641),l=n(953),s=n(810),u=n(5207),c=n(19),p=n(940),m=n(136),d=n(7546),f=n(33),v=n(3683),g={class:"col_date"};const _={__name:"DateCell",props:{item:{type:Object,required:!0},getValue:{type:Function,required:!1},name:{type:String,required:!0}},setup:function(e){var t=e,n=(0,i.EW)(function(){return t.getValue?t.getValue(t.item):t.item[t.name]});return function(e,t){return(0,i.uX)(),(0,i.CE)("td",g,(0,f.v_)((0,l.R1)(v.Yq)(n.value)),1)}}};var C=n(150),b=n(2752),k={class:"col_text"};const y={__name:"UserCell",props:{item:{type:Object,required:!0},getValue:{type:Function,required:!1},name:{type:String,required:!0}},setup:function(e){var t=e,n=(0,i.EW)(function(){return t.getValue?t.getValue(t.item):t.item[t.name]});return function(e,t){return(0,i.uX)(),(0,i.CE)("td",k,[n.value?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)((0,f.v_)(n.value.label),1)],64)):(0,i.Q3)("v-if",!0)])}}};var h=n(5979);const A={__name:"StatusCell",props:{item:{type:Object,required:!0}},setup:function(e){var t=e,n=(0,i.EW)(function(){return"cancelled"===t.item.status?"danger":"closed"===t.item.status?"success":"neutral"});return function(t,a){return(0,i.uX)(),(0,i.CE)("td",{class:(0,f.C4)("col_status ".concat(n.value))},["cancelled"===e.item.status?((0,i.uX)(),(0,i.Wv)(h.A,{key:0,name:"cross","css-class":["status",n.value]},null,8,["css-class"])):(0,i.Q3)("v-if",!0),"closed"==e.item.status?((0,i.uX)(),(0,i.Wv)(h.A,{key:1,name:"check","css-class":["status",n.value]},null,8,["css-class"])):(0,i.Q3)("v-if",!0)],2)}}},R=[{name:"status",title:"Statut",cellComponent:(0,l.IG)(A),css:"col_status"},{name:"execution_date",title:"Date d'émission",cellComponent:(0,l.IG)(_),sort:"execution_date",css:"col_date"},{name:"user",title:"Émis par",cellComponent:(0,l.IG)(y),sort:"user"},{name:"bank_account",title:"Compte bancaire",cellComponent:(0,l.IG)(b.A),componentOptions:{getValue:function(e){return e.bank_account?e.bank_account.label:""}}},{name:"reference",title:"Référence",cellComponent:(0,l.IG)(b.A),css:"col_text"},{name:"amount",title:"Montant TTC",cellComponent:(0,l.IG)(C.A),sort:"amount",css:"col_number",componentOptions:{intFormat:2}}];var E={key:0},F={key:1},L={class:"main_toolbar action_tools"},X={class:"layout flex main_actions"},w={role:"group"},V={key:0,class:"alert alert-info"},q={class:"col_actions width_two"},I={class:"btn-group"},S=["href"];const T={__name:"SepaCreditTransferListComponent",setup:function(e){var t=(0,l.KR)(!0),n=(0,m.Dn)(),r=(0,u.G)(),f=(0,u.S)();f.setUrl(n.form_config_url);var v=(0,s.bP)(r),g=v.creditTransferCollection,_=v.creditTransferLoadOptions,C=v.creditTransferCollectionMeta,b=(0,l.KR)({sort:_.value.sort,columnsDef:R,columns:R.map(function(e){return e.name})}),k=function(e,t){_.value.sort.sort=e,_.value.sort.sortDirection=t};function y(){return(y=(0,a.A)(o().mark(function e(){var a,i,l;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setInitialValues(n.credit_transfer_id),i=f.loadConfig(),l=r.loadCreditTransferCollection(),e.next=1,Promise.all([a,i,l]);case 1:t.value=!1;case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}return function(){y.apply(this,arguments)}(),function(e,n){var a=(0,i.g2)("RouterLink");return t.value?((0,i.uX)(),(0,i.CE)("div",E,"Chargement des informations")):((0,i.uX)(),(0,i.CE)("div",F,[(0,i.Lk)("div",L,[(0,i.Lk)("div",X,[(0,i.Lk)("div",w,[(0,i.bF)(a,{to:"/",class:"btn icon only"},{default:(0,i.k6)(function(){return[(0,i.bF)(d.A,{name:"arrow-left"}),n[3]||(n[3]=(0,i.eW)("  Revenir à la liste des règlements en attente ",-1))]}),_:1})])])]),n[6]||(n[6]=(0,i.Lk)("h1",null,"Historique des virements SEPA",-1)),0===(0,l.R1)(C).total_count?((0,i.uX)(),(0,i.CE)("div",V," Aucun virement SEPA n'a été effectué. ")):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.bF)(p.A,{page:(0,l.R1)(_).pagination.page,"onUpdate:page":n[0]||(n[0]=function(e){return(0,l.R1)(_).pagination.page=e}),"items-per-page":(0,l.R1)(_).pagination.per_page,"onUpdate:itemsPerPage":n[1]||(n[1]=function(e){return(0,l.R1)(_).pagination.per_page=e}),pagination:(0,l.R1)(_).pagination,"onUpdate:pagination":n[2]||(n[2]=function(e){return(0,l.R1)(_).pagination=e}),"total-pages":(0,l.R1)(C).total_pages,"total-count":(0,l.R1)(C).total_count},null,8,["page","items-per-page","pagination","total-pages","total-count"]),(0,i.bF)(c.A,{items:(0,l.R1)(g),params:b.value,onSortBy:k},{rowActions:(0,i.k6)(function(e){var t=e.item;return[(0,i.Lk)("td",q,[(0,i.Lk)("div",I,[(0,i.bF)(a,{class:"btn icon only",to:"/orders/".concat(t.id),title:"Voir le détail de l'ordre de virement","aria-label":"Afficher le détail de l'ordre de virement"},{default:(0,i.k6)(function(){return[(0,i.bF)(d.A,{name:"eye"}),n[4]||(n[4]=(0,i.eW)(" Voir ",-1))]}),_:1},8,["to"]),(0,i.Lk)("a",{class:"btn icon only",href:"/files/".concat(t.file_id,"?action=download"),title:"Télécharger le fichier XML de l'ordre de virement","aria-label":"Ouvre une nouvelle fenêtre pour télécharger le fichier XML de l'ordre de virement",target:"_blank"},[(0,i.bF)(d.A,{name:"download"}),n[5]||(n[5]=(0,i.eW)(" Télécharger le fichier ",-1))],8,S)])])]}),_:1},8,["items","params"])],64))]))}}}}}]);