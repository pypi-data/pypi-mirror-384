"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1187],{7740:(e,t,i)=>{i.d(t,{Z:()=>D});var o=i(6252),s=i(3577);const a=(0,o._)("h2",null,"Public Links",-1),n=(0,o._)("p",{class:"text-instructions"}," The following will be public links you can send to clients. The links will contain certain information of the current object. i.e. it's status and description. Becareful who you send the links too! ",-1),l={key:0,class:"alert alert-info"},d={key:1,class:"alert alert-info"},r={key:2,class:"table table-striped"},c=(0,o._)("td",null,"Public Link",-1),u=(0,o._)("td",{style:{"text-align":"center",width:"100px"}},"Is Active",-1),h={key:0,style:{width:"10px"}},b=["onClick"],p={style:{"text-align":"center"}},g=["checked","data-public-link-id","disabled"],m={key:0},_={class:"remove-link"},k={key:3,class:"row submit-row"},y={class:"col-md-12"};var f=i(989),v=i(6542),w=i(5808);const $={name:"ListPublicLinks",props:{isReadOnly:{type:Boolean,default:!1},overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0}},data:()=>({isFetchingData:!0,publicLinkResults:[]}),watch:{overrideLocationId(){this.getPublicLinks()}},components:{Icon:v.JO},computed:{...(0,f.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mixins:[w.Z],methods:{async copyPublicLink(e){const t=`${window.location.origin}${this.rootUrl}public/${this.getDestination()}/${this.getLocationId()}/${e}/`;try{await navigator.clipboard.writeText(t),this.$store.dispatch("newToast",{header:"Public Link Copied",message:"Public Link has successfully copied to the clipboard",extra_classes:"bg-success"})}catch(e){this.$store.dispatch("newToast",{header:"Can not copy public link",message:"Sorry, we failed to copy the public link",extra_classes:"bg-danger",delay:0})}},createPublicLink(){this.$store.dispatch("newToast",{header:"Creating New Toast",message:"Please wait whilst we create the toast",extra_classes:"bg-warning text-dark",delay:0,unique_type:"create_public_link"}),this.axios.post(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/create/`).then((e=>{this.$store.dispatch("newToast",{header:"Successful new Public Link",message:"We have been able to create a new public link",extra_classes:"bg-success",unique_type:"create_public_link"}),this.publicLinkResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not create new public link",message:`Sorry, we failed to create the new public link. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"create_public_link"})}))},deletePublicLink(e){const t=new FormData;t.set("public_link_id",e),this.$store.dispatch("newToast",{header:"Deleting Public Link",message:"Deleting Public Link",extra_classes:"bg-warning text-dark",delay:0,unique_type:"public_link_delete"}),this.axios.post(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/delete/`,t).then((()=>{this.publicLinkResults=this.publicLinkResults.filter((t=>t.public_link_id!==e)),this.$store.dispatch("newToast",{header:"Successfully Deleted Public Link",message:"Successfully Deleted Public Link",extra_classes:"bg-success",unique_type:"public_link_delete"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Deleting Public Link",message:`Error - could not delete link. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"public_link_delete"})}))},formatUrl(e){if(""===e||void 0===e)return"Data error!";const t=e.slice(0,7);return`${window.location.origin}${this.rootUrl}public/${this.getDestination()}/${this.getLocationId()}/${t}...`},getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},getPublicLinks(){0!==this.getLocationId()&&this.axios(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/get_links/`).then((e=>{this.publicLinkResults=e.data,this.isFetchingData=!1})).catch((e=>{this.$store.dispatch("newToast",{header:"Error fetching Public Links",message:`We had an issue fetching the public links for this object. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateIsActive(e){const t=e.target.dataset.publicLinkId;this.$store.dispatch("newToast",{header:"Updating Active Status for Private Link",message:"Please wait - we are updating the status",extra_classes:"bg-warning text-dark",delay:0,unique_type:`is_active-${t}`});let i="False";e.target.checked&&(i="True");const o=new FormData;o.set("public_link_id",t),o.set("public_link_is_active",i),this.axios.post(`${this.rootUrl}public_data/${this.destination}/${this.locationId}/update_link/`,o).then((()=>{this.$store.dispatch("newToast",{header:"Successfully Updated",message:"We have updated the is active status for the link",extra_classes:"bg-success",unique_type:`is_active-${t}`})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Active Status for Private Link",message:`We are sorry, something went wrong. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:`is_active-${t}`})}))}},mounted(){this.$nextTick((()=>{this.getPublicLinks()}))}},D=(0,i(3744).Z)($,[["render",function(e,t,i,f,v,w){const $=(0,o.up)("Icon");return(0,o.wg)(),(0,o.iD)(o.HY,null,[a,n,v.isFetchingData?((0,o.wg)(),(0,o.iD)("div",l,"Currently loading data...")):(0,o.kq)("v-if",!0),!1===v.isFetchingData&&0===v.publicLinkResults.length?((0,o.wg)(),(0,o.iD)("div",d," Sorry. There are no public links setup for this object. ")):((0,o.wg)(),(0,o.iD)("table",r,[(0,o._)("thead",null,[(0,o._)("tr",null,[c,u,e.userLevel>1?((0,o.wg)(),(0,o.iD)("td",h)):(0,o.kq)("v-if",!0)])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(v.publicLinkResults,(i=>((0,o.wg)(),(0,o.iD)("tr",{key:i.public_link_id},[(0,o._)("td",null,[(0,o._)("button",{type:"button",class:"btn btn-link",onClick:e=>w.copyPublicLink(i.public_link_id)},(0,s.toDisplayString)(w.formatUrl(i.public_link_id)),9,b)]),(0,o._)("td",p,[(0,o._)("input",{class:"form-check-input",type:"checkbox",checked:i.public_link_is_active,"data-public-link-id":i.public_link_id,disabled:e.userLevel<=1,onChange:t[0]||(t[0]=(...e)=>w.updateIsActive&&w.updateIsActive(...e))},null,40,g)]),e.userLevel>1?((0,o.wg)(),(0,o.iD)("td",m,[(0,o._)("span",_,[(0,o.Wm)($,{icon:e.icons.trashCan,onClick:e=>w.deletePublicLink(i.public_link_id)},null,8,["icon","onClick"])])])):(0,o.kq)("v-if",!0)])))),128))])])),!1===i.isReadOnly&&e.userLevel>1?((0,o.wg)(),(0,o.iD)("div",k,[(0,o._)("div",y,[(0,o._)("button",{class:"btn btn-primary save-changes",onClick:t[1]||(t[1]=(...e)=>w.createPublicLink&&w.createPublicLink(...e))}," Create Public Link ")])])):(0,o.kq)("v-if",!0)],64)}]])},6505:(e,t,i)=>{i.d(t,{Z:()=>h});var o=i(6252);const s={class:"modal fade",id:"confirmFolderDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmFolderDelete","aria-hidden":"true"},a={class:"modal-dialog"},n={class:"modal-content"},l=(0,o._)("div",{class:"modal-header"},[(0,o._)("h5",{class:"modal-title",id:"confirmFolderDelete"}," Please confirm Folder Deletion "),(0,o.kq)(" TASK INFORMATION "),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmFolderDeleteButton"})],-1),d=(0,o._)("div",{class:"modal-body"}," Are you sure you want to delete the folder? All files under this folder will be deleted also. ",-1),r={class:"modal-footer"};var c=i(989);i(3138);const u={name:"ConfirmFolderDelete",mixins:[i(1295).Z],computed:{...(0,c.Se)({destination:"getDestination",folderRemoveId:"getFolderRemoveId",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{deleteFolder(){if(""===this.folderRemoveId)return;const e=this.folderRemoveId,t=new FormData;t.set("folder_id",this.folderRemoveId),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/remove_folder/`,t).then((()=>{this.$store.dispatch("removeFolder",{folder_id:e}),this.closeModal()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error removing folder",message:`We could not remove your folder. Error - ${e}`,extra_classes:"bg-danger",delay:0})})),this.closeModal()},closeModal(){this.$store.commit({type:"updateFolderRemoveId",documentRemoveKey:""}),document.getElementById("confirmFolderDeleteButton").click(),this.reopenCardInformation()}}},h=(0,i(3744).Z)(u,[["render",function(e,t,i,c,u,h){return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",a,[(0,o._)("div",n,[l,d,(0,o._)("div",r,[(0,o._)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>h.closeModal&&h.closeModal(...e))}," No "),(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>h.deleteFolder&&h.deleteFolder(...e))}," Yes ")])])])])}]])},9159:(e,t,i)=>{i.d(t,{Z:()=>b});var o=i(6252);const s={class:"modal fade",id:"confirmNoteDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmLinkDelete","aria-hidden":"true"},a={class:"modal-dialog"},n={class:"modal-content"},l=(0,o._)("div",{class:"modal-header"},[(0,o._)("h5",{class:"modal-title",id:"confirmNoteDelete"}," Please confirm Note Deletion "),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmNoteDeleteButton"})],-1),d=(0,o._)("div",{class:"modal-body"}," Are you sure you want to delete the note? ",-1),r={class:"modal-footer"};var c=i(989),u=(i(3138),i(1295));const h={name:"ConfirmNoteDelete",props:{},computed:{...(0,c.Se)({destination:"getDestination",noteId:"getSingleNoteId",rootUrl:"getRootUrl"})},mixins:[u.Z],methods:{deleteNote(){this.$store.dispatch("newToast",{header:"Deleting Note",message:"Currently deleting note",extra_classes:"bg-warning text-dark",delay:0,unique_type:"delete_note"});let e=`${this.rootUrl}note/delete/${this.noteId}/`;this.destination&&(e=`${this.rootUrl}note/organisation/delete/${this.noteId}/`),this.axios.post(e).then((()=>{this.$store.dispatch("newToast",{header:"Note is deleted",message:"Successfully Deleted Note",extra_classes:"bg-success",unique_type:"delete_note"}),this.$store.commit({type:"removeNote",noteId:this.noteId}),this.closeModal(),this.reopenCardInformation()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to Delete Note",message:`Sorry, we failed to delete the note. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"delete_note"})}))},closeModal(){document.getElementById("confirmNoteDeleteButton").click(),this.reopenCardInformation()}}},b=(0,i(3744).Z)(h,[["render",function(e,t,i,c,u,h){return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",a,[(0,o._)("div",n,[l,d,(0,o._)("div",r,[(0,o._)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>h.closeModal&&h.closeModal(...e))}," No "),(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>h.deleteNote&&h.deleteNote(...e))}," Yes ")])])])])}]])},8576:(e,t,i)=>{i.d(t,{Z:()=>y});var o=i(6252);const s={class:"modal fade",id:"editNoteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},a={class:"modal-dialog modal-lg",role:"document"},n={class:"modal-content"},l={class:"modal-header"},d=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"editNoteCloseButton"},[(0,o._)("span",{"aria-hidden":"true"})],-1),r={class:"modal-body"},c=(0,o._)("p",{class:"text-instructions"},' Use the text editor to edit your note. Click on the "Update" button to submit the changes. ',-1),u={class:"modal-footer"},h=["disabled"];var b=i(5808),p=i(1295),g=i(6542),m=i(7267),_=i(989);i(3138);const k={name:"EditHistoryNoteWizard",components:{editor:m.Z,Icon:g.JO},mixins:[b.Z,p.Z],data:()=>({noteModel:""}),computed:{...(0,_.Se)({description:"getSingleNoteDescription",destination:"getDestination",contentCss:"getContentCss",noteDescription:"getSingleNoteDescription",noteId:"getSingleNoteId",rootUrl:"getRootUrl",skin:"getSkin"})},watch:{noteDescription(){this.noteModel=this.noteDescription}},methods:{closeModal(){document.getElementById("editNoteCloseButton").click(),this.reopenCardInformation()},updateNote(){const e=new FormData;e.set("object_note_id",`${this.noteId}`),e.set("object_note",this.noteModel),this.$store.dispatch("newToast",{header:"Updating Note",message:"Please wait - updating your note",extra_classes:"bg-warning text-dark",delay:0,unique_type:"save_note"});let t=`${this.rootUrl}note/update/${this.noteId}/`;"organisation"===this.destination&&(t=`${this.rootUrl}note/organisation/update/${this.noteId}/`),this.axios.post(t,e).then((()=>{this.$store.dispatch("newToast",{header:"Updated Note",message:"The note updated successfully.",extra_classes:"bg-success",unique_type:"save_note"}),this.$store.dispatch({type:"editSingleNote",noteId:this.noteId,noteDescription:this.noteModel}),document.getElementById("editNoteCloseButton").click(),this.reopenCardInformation()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed Updating Note",message:`Failed to update note - Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"save_note"})}))}}},y=(0,i(3744).Z)(k,[["render",function(e,t,i,b,p,g){const m=(0,o.up)("Icon"),_=(0,o.up)("editor");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.kq)(" EDIT HISTORY NOTE "),(0,o._)("div",s,[(0,o._)("div",a,[(0,o._)("div",n,[(0,o._)("div",l,[(0,o._)("h2",null,[(0,o.Wm)(m,{icon:e.icons.noteAdd},null,8,["icon"]),(0,o.Uk)(" Edit Note ")]),d]),(0,o._)("div",r,[c,(0,o.Wm)(_,{init:{height:300,menubar:!1,plugins:["lists","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:p.noteModel,"onUpdate:modelValue":t[0]||(t[0]=e=>p.noteModel=e)},null,8,["init","modelValue"])]),(0,o._)("div",u,[(0,o._)("button",{type:"button",class:"btn btn-primary",disabled:""==p.noteModel,onClick:t[1]||(t[1]=(...e)=>g.updateNote&&g.updateNote(...e))}," Update Note ",8,h),(0,o._)("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=(...e)=>g.closeModal&&g.closeModal(...e))}," Close ")])])])])],2112)}]])}}]);