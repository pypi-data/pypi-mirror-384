# This file uses the standard pyproject.toml format to configure your project.
#
# There is no need to create or manage a setup.py or setup.cfg file.
#
# For details, see:
# https://setuptools.pypa.io/en/latest/userguide/pyproject_config.html

[build-system]
requires = [
    "setuptools >= 61",
    "wheel",
]
build-backend = "setuptools.build_meta"

[project]
name = "amzn-project-c-dock-app"
version = "1.01"
readme = "README.md"
requires-python = ">=3.11"
classifiers = [
    "Programming Language :: Python :: 3.11",
]

# Uncomment this line and add relevant keywords.
# keywords = [ "peru" ]

# Uncomment these lines and add contributors.
# authors = [
#  { name = "Example User", email = "example-user@amazon.com" }
# ]

# Specify your dependencies here.
dependencies = [
    "streamlit==1.47.0",
    "boto3>=1.24.13",
    "filelock==3.14.0",
    "numpy>=1.24.0,<2.0.0",
    "pyarrow>=7.0,<15.0.0",
    # Added to resolve the issue of pillow: https://build.amazon.com/log?backToRequestId=7433414359&nbtmTaskId=49c316a4b3e895fdb3af86949c0cd79e692ca5c1aee0615dd82f8d375033a4f5
    "pillow==11.2.1"
]

[project.optional-dependencies]
testing = [
    "coverage[toml]",
    "pytest >= 7",
    "pytest-cov",
    "pytest-xdist == 3.5.0"
]
dev = [
    "black",
    "coverage[toml]",
    "flake8",
    "isort",
    "mypy",
    "tox >= 4",
    "twine == 5.0.0",
]

[tool.setuptools.packages.find]
where = ["src"]

[tool.setuptools.package-data]
streamlit_src = ["*"]
streamlit_test = ["py.typed"]

[tool.mypy]
check_untyped_defs = true
show_error_codes = true
pretty = true

[tool.black]
line-length = 100

[tool.isort]
profile = "black"
line_length = 100
known_first_party = [ "streamlit_test" ]
src_paths = [
    "src",
]

[tool.pytest.ini_options]
addopts = [
    "--durations=5",
    "--color=yes",
    "--cov=streamlit_test",
]
testpaths = [ "test" ]
looponfailroots = [
    "src",
    "test",
]

[tool.coverage.run]
branch = true
parallel = true

[tool.coverage.paths]
source =  [
    "src/",
    ".tox/*/lib/*/site-packages/"
]

[tool.coverage.report]
show_missing = true

# Uncomment the following line to fail to build when the coverage is too low.
# fail_under = 99

[tool.coverage.xml]
output = "build/brazil-documentation/coverage/coverage.xml"

[tool.coverage.html]
directory = "build/brazil-documentation/coverage/"
