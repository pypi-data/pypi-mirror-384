{"version":3,"file":"TradeTemplateDetail-dbg.controller.js","names":["BaseController","_interopRequireDefault","__BaseController","TradeTemplateDetail","extend","onInit","_onInit","oOwnerComponent","getOwnerComponent","oRouter","getRouter","oControlModel","getModel","oViewModel","JSONModel","template","editable","getView","setModel","getRoute","attachPatternMatched","_onTemplateMatched","onEditToggleButtonPress","_onEditToggleButtonPress","showFunctionNotImplementedMessage","oTemplatePage","byId","bCurrentShowFooterState","getShowFooter","setShowFooter","loadTemplateDetails","_loadTemplateDetails","globalModel","backendBaseUrl","getProperty","response","fetch","_template","ok","Error","console","log","templateData","json","setProperty","error","MessageBox","message","oEvent","getParameter","layout","onFullscreenPressed","_onFullscreenPressed","sCurrentLayout","sNewLayout","navTo","onClosePressed","_onClosePressed","onExit","_onExit","detachPatternMatched"],"sources":["TradeTemplateDetail.controller.ts"],"sourcesContent":["import Router from \"sap/ui/core/routing/Router\";\nimport BaseController from \"./BaseController\";\nimport Page from \"sap/m/Page\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport MessageBox from \"sap/m/MessageBox\";\n/**\n * @namespace com.optrabot.ui.controller\n */\nexport default class TradeTemplateDetail extends BaseController {\n\tprivate oRouter: Router;\n\tprivate oControlModel: any;\n\tprivate oViewModel: JSONModel;\n\tprivate _template: string;\n\t\n\tpublic onInit(): void {\n\t\tvar oOwnerComponent = this.getOwnerComponent();\n\t\tthis.oRouter = oOwnerComponent.getRouter();\n\t\tthis.oControlModel = oOwnerComponent.getModel(\"control\");\n\n\t\tthis.oViewModel = new JSONModel({\n\t\t\ttemplate: null,\n\t\t\teditable: false\n\t\t});\n\t\tthis.getView().setModel(this.oViewModel, \"viewModel\");\n\n\t\tthis.oRouter.getRoute(\"template\").attachPatternMatched(this._onTemplateMatched, this);\n\t\tthis.oRouter.getRoute(\"templateWOLayout\").attachPatternMatched(this._onTemplateMatched, this);\n\t}\n\n\tpublic onEditToggleButtonPress(): void {\n\t\tthis.showFunctionNotImplementedMessage();\n\t\treturn;\n\n\t\tvar oTemplatePage = this.getView().byId(\"TemplatePageLayout\") as Page;\n\t\tvar bCurrentShowFooterState = oTemplatePage.getShowFooter();\n\t\toTemplatePage.setShowFooter(!bCurrentShowFooterState);\n\t}\n\n\tprivate async loadTemplateDetails(): Promise<void> {\n\t\ttry {\n\t\t\tconst globalModel = this.getOwnerComponent().getModel(\"global\") as JSONModel;\n\t\t\tconst backendBaseUrl = globalModel.getProperty(\"/backendBaseUrl\");\n\t\t\tconst response = await fetch(`${backendBaseUrl}/api/templates/` + this._template);\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error('Failed to fetch template details');\n\t\t\t}\n\t\t\tconsole.log(\"Template details loaded\");\n\t\t\tconst templateData = await response.json();\n\t\t\tthis.oViewModel.setProperty(\"/template\", templateData);\n\t\t} catch (error) {\n\t\t\tMessageBox.error(\"Failed to load template details: \" + error.message);\n\t\t}\n\t}\n\n\tpublic _onTemplateMatched(oEvent: any): void {\n\t\tconsole.log(\"Template matched\");\n\t\tthis._template = oEvent.getParameter(\"arguments\").template || this._template || \"0\";\n\t\t\n\t\t// Store the current template in the model\n\t\tvar layout = oEvent.getParameter(\"arguments\").layout || \"TwoColumnsMidExpanded\";\n\t\tthis.oControlModel.setProperty(\"/currentLayout\", layout);\n\n\t\tthis.loadTemplateDetails();\n\t}\n\n\tpublic onFullscreenPressed(): void {\n\t\tvar sCurrentLayout = this.oControlModel.getProperty(\"/currentLayout\");\n\t\tvar sNewLayout = sCurrentLayout;\n\t\tif (sCurrentLayout === \"MidColumnFullScreen\") {\n\t\t\tsNewLayout = \"TwoColumnsMidExpanded\";\n\t\t} else if (sCurrentLayout === \"TwoColumnsMidExpanded\") {\n\t\t\tsNewLayout = \"MidColumnFullScreen\";\n\t\t}\n\t\tthis.oRouter.navTo(\"template\", {\n\t\t\tlayout: sNewLayout, template: this._template}, true);\n\t}\n\n\tpublic onClosePressed(): void {\n\t\tthis.oRouter.navTo(\"templates\", {\n\t\t\tlayout: \"OneColumn\"}, true);\n\t}\n\n\tpublic onExit(): void {\n\t\tthis.oRouter.getRoute(\"template\").detachPatternMatched(this._onTemplateMatched, this);\n\t\tthis.oRouter.getRoute(\"templateWOLayout\").detachPatternMatched(this._onTemplateMatched, this);\n\t}\n}"],"mappings":"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","ignoreList":[]}