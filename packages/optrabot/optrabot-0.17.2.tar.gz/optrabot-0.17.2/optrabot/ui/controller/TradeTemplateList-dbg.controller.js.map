{"version":3,"file":"TradeTemplateList-dbg.controller.js","names":["BaseController","_interopRequireDefault","__BaseController","TradeTemplateList","extend","onInit","_onInit","oView","getView","oRouter","getOwnerComponent","getRouter","oViewModel","JSONModel","TemplateCollection","setModel","loadTemplates","_loadTemplates","globalModel","getModel","backendBaseUrl","getProperty","response","fetch","ok","Error","templates","json","setProperty","error","MessageBox","message","onAdd","_onAdd","showFunctionNotImplementedMessage","onTemplatePress","_onTemplatePress","oEvent","oFCL","getParent","setLayout","templatePath","getSource","getBindingContext","getPath","templateName","split","slice","pop","console","log","navTo","layout","template"],"sources":["TradeTemplateList.controller.ts"],"sourcesContent":["import Router from \"sap/ui/core/routing/Router\";\nimport BaseController from \"./BaseController\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\n/**\n * @namespace com.optrabot.ui.controller\n */\nexport default class TradeTemplateList extends BaseController {\n\tprivate oView: any;\n\tprivate oRouter: Router;\n\tprivate oViewModel: JSONModel;\n\n\tpublic onInit(): void {\n\t\tthis.oView = this.getView();\n\t\tthis.oRouter = this.getOwnerComponent().getRouter();\n\n\t\tthis.oViewModel = new JSONModel({\n\t\t\tTemplateCollection: []\n\t\t});\n\t\tthis.oView.setModel(this.oViewModel, \"tradetemplates\");\n\n\t\tthis.loadTemplates();\n\t}\n\n\tprivate async loadTemplates(): Promise<void> {\n\t\ttry {\n\t\t\tconst globalModel = this.getOwnerComponent().getModel(\"global\") as JSONModel;\n\t\t\tconst backendBaseUrl = globalModel.getProperty(\"/backendBaseUrl\");\n\t\t\tconst response = await fetch(`${backendBaseUrl}/api/templates/`);\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error('Failed to fetch templates');\n\t\t\t}\n\t\t\tconst templates = await response.json();\n\t\t\tthis.oViewModel.setProperty(\"/TemplateCollection\", templates);\n\t\t} catch (error) {\n\t\t\tMessageBox.error(\"Failed to load templates: \" + error.message);\n\t\t}\n\t}\n\n\tpublic onAdd(): void {\n\t\tthis.showFunctionNotImplementedMessage();\n\t}\n\n\tpublic onTemplatePress(oEvent: any): void {\n\t\tvar oFCL = this.oView.getParent().getParent();\n\t\toFCL.setLayout(\"TwoColumnsMidExpanded\");\n\t\tvar templatePath = oEvent.getSource().getBindingContext(\"tradetemplates\").getPath();\n\t\tvar templateName = templatePath.split(\"/\").slice(-1).pop();\n\t\tconsole.log(\"Template name: \" + templateName);\n\t\tthis.oRouter.navTo(\"template\", {layout: \"TwoColumnsMidExpanded\", template: templateName} );\n\t}\n}"],"mappings":";;;;;;;;QACOA,cAAc,GAAAC,sBAAA,CAAAC,gBAAA;EAIrB;AACA;AACA;EAFA,MAGqBC,iBAAiB,GAASH,cAAc,CAAAI,MAAA;IAKrDC,MAAM,WAAAC,QAAA,EAAS;MACrB,IAAI,CAACC,KAAK,GAAG,IAAI,CAACC,OAAO,CAAC,CAAC;MAC3B,IAAI,CAACC,OAAO,GAAG,IAAI,CAACC,iBAAiB,CAAC,CAAC,CAACC,SAAS,CAAC,CAAC;MAEnD,IAAI,CAACC,UAAU,GAAG,IAAIC,SAAS,CAAC;QAC/BC,kBAAkB,EAAE;MACrB,CAAC,CAAC;MACF,IAAI,CAACP,KAAK,CAACQ,QAAQ,CAAC,IAAI,CAACH,UAAU,EAAE,gBAAgB,CAAC;MAEtD,IAAI,CAACI,aAAa,CAAC,CAAC;IACrB,CAAC;IAEaA,aAAa,iBAAAC,eAAA,EAAkB;MAC5C,IAAI;QACH,MAAMC,WAAW,GAAG,IAAI,CAACR,iBAAiB,CAAC,CAAC,CAACS,QAAQ,CAAC,QAAQ,CAAc;QAC5E,MAAMC,cAAc,GAAGF,WAAW,CAACG,WAAW,CAAC,iBAAiB,CAAC;QACjE,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGH,cAAc,iBAAiB,CAAC;QAChE,IAAI,CAACE,QAAQ,CAACE,EAAE,EAAE;UACjB,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;QAC7C;QACA,MAAMC,SAAS,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;QACvC,IAAI,CAACf,UAAU,CAACgB,WAAW,CAAC,qBAAqB,EAAEF,SAAS,CAAC;MAC9D,CAAC,CAAC,OAAOG,KAAK,EAAE;QACfC,UAAU,CAACD,KAAK,CAAC,4BAA4B,GAAGA,KAAK,CAACE,OAAO,CAAC;MAC/D;IACD,CAAC;IAEMC,KAAK,WAAAC,OAAA,EAAS;MACpB,IAAI,CAACC,iCAAiC,CAAC,CAAC;IACzC,CAAC;IAEMC,eAAe,WAAAC,iBAACC,MAAW,EAAQ;MACzC,IAAIC,IAAI,GAAG,IAAI,CAAC/B,KAAK,CAACgC,SAAS,CAAC,CAAC,CAACA,SAAS,CAAC,CAAC;MAC7CD,IAAI,CAACE,SAAS,CAAC,uBAAuB,CAAC;MACvC,IAAIC,YAAY,GAAGJ,MAAM,CAACK,SAAS,CAAC,CAAC,CAACC,iBAAiB,CAAC,gBAAgB,CAAC,CAACC,OAAO,CAAC,CAAC;MACnF,IAAIC,YAAY,GAAGJ,YAAY,CAACK,KAAK,CAAC,GAAG,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,CAAC;MAC1DC,OAAO,CAACC,GAAG,CAAC,iBAAiB,GAAGL,YAAY,CAAC;MAC7C,IAAI,CAACpC,OAAO,CAAC0C,KAAK,CAAC,UAAU,EAAE;QAACC,MAAM,EAAE,uBAAuB;QAAEC,QAAQ,EAAER;MAAY,CAAE,CAAC;IAC3F;EAAC;EAAA,OA3CmB1C,iBAAiB;AAAA","ignoreList":[]}