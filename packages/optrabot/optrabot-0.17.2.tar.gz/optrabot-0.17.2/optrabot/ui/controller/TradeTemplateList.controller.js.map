{"version":3,"file":"TradeTemplateList.controller.js","names":["BaseController","_interopRequireDefault","__BaseController","TradeTemplateList","extend","onInit","_onInit","this","oView","getView","oRouter","getOwnerComponent","getRouter","oViewModel","JSONModel","TemplateCollection","setModel","loadTemplates","async","_loadTemplates","globalModel","getModel","backendBaseUrl","getProperty","response","fetch","ok","Error","templates","json","setProperty","error","MessageBox","message","onAdd","_onAdd","showFunctionNotImplementedMessage","onTemplatePress","_onTemplatePress","oEvent","oFCL","getParent","setLayout","templatePath","getSource","getBindingContext","getPath","templateName","split","slice","pop","console","log","navTo","layout","template"],"sources":["TradeTemplateList.controller.ts"],"sourcesContent":["import Router from \"sap/ui/core/routing/Router\";\nimport BaseController from \"./BaseController\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\n/**\n * @namespace com.optrabot.ui.controller\n */\nexport default class TradeTemplateList extends BaseController {\n\tprivate oView: any;\n\tprivate oRouter: Router;\n\tprivate oViewModel: JSONModel;\n\n\tpublic onInit(): void {\n\t\tthis.oView = this.getView();\n\t\tthis.oRouter = this.getOwnerComponent().getRouter();\n\n\t\tthis.oViewModel = new JSONModel({\n\t\t\tTemplateCollection: []\n\t\t});\n\t\tthis.oView.setModel(this.oViewModel, \"tradetemplates\");\n\n\t\tthis.loadTemplates();\n\t}\n\n\tprivate async loadTemplates(): Promise<void> {\n\t\ttry {\n\t\t\tconst globalModel = this.getOwnerComponent().getModel(\"global\") as JSONModel;\n\t\t\tconst backendBaseUrl = globalModel.getProperty(\"/backendBaseUrl\");\n\t\t\tconst response = await fetch(`${backendBaseUrl}/api/templates/`);\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error('Failed to fetch templates');\n\t\t\t}\n\t\t\tconst templates = await response.json();\n\t\t\tthis.oViewModel.setProperty(\"/TemplateCollection\", templates);\n\t\t} catch (error) {\n\t\t\tMessageBox.error(\"Failed to load templates: \" + error.message);\n\t\t}\n\t}\n\n\tpublic onAdd(): void {\n\t\tthis.showFunctionNotImplementedMessage();\n\t}\n\n\tpublic onTemplatePress(oEvent: any): void {\n\t\tvar oFCL = this.oView.getParent().getParent();\n\t\toFCL.setLayout(\"TwoColumnsMidExpanded\");\n\t\tvar templatePath = oEvent.getSource().getBindingContext(\"tradetemplates\").getPath();\n\t\tvar templateName = templatePath.split(\"/\").slice(-1).pop();\n\t\tconsole.log(\"Template name: \" + templateName);\n\t\tthis.oRouter.navTo(\"template\", {layout: \"TwoColumnsMidExpanded\", template: templateName} );\n\t}\n}"],"mappings":"qNACOA,EAAcC,EAAAC,GAIrB,MAGqBC,EAA0BH,EAAcI,OAAA,gDAKrDC,OAAM,SAAAC,IACZC,KAAKC,MAAQD,KAAKE,UAClBF,KAAKG,QAAUH,KAAKI,oBAAoBC,YAExCL,KAAKM,WAAa,IAAIC,EAAU,CAC/BC,mBAAoB,KAErBR,KAAKC,MAAMQ,SAAST,KAAKM,WAAY,kBAErCN,KAAKU,eACN,EAEcA,cAAaC,eAAAC,IAC1B,IACC,MAAMC,EAAcb,KAAKI,oBAAoBU,SAAS,UACtD,MAAMC,EAAiBF,EAAYG,YAAY,mBAC/C,MAAMC,QAAiBC,MAAM,GAAGH,oBAChC,IAAKE,EAASE,GAAI,CACjB,MAAM,IAAIC,MAAM,4BACjB,CACA,MAAMC,QAAkBJ,EAASK,OACjCtB,KAAKM,WAAWiB,YAAY,sBAAuBF,EACpD,CAAE,MAAOG,GACRC,EAAWD,MAAM,6BAA+BA,EAAME,QACvD,CACD,EAEOC,MAAK,SAAAC,IACX5B,KAAK6B,mCACN,EAEOC,gBAAe,SAAAC,EAACC,GACtB,IAAIC,EAAOjC,KAAKC,MAAMiC,YAAYA,YAClCD,EAAKE,UAAU,yBACf,IAAIC,EAAeJ,EAAOK,YAAYC,kBAAkB,kBAAkBC,UAC1E,IAAIC,EAAeJ,EAAaK,MAAM,KAAKC,OAAO,GAAGC,MACrDC,QAAQC,IAAI,kBAAoBL,GAChCxC,KAAKG,QAAQ2C,MAAM,WAAY,CAACC,OAAQ,wBAAyBC,SAAUR,GAC5E,IAAC,OA3CmB5C,CAAiB","ignoreList":[]}