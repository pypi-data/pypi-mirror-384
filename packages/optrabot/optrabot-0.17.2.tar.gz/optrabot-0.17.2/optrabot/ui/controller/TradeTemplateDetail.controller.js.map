{"version":3,"file":"TradeTemplateDetail.controller.js","names":["BaseController","_interopRequireDefault","__BaseController","TradeTemplateDetail","extend","onInit","_onInit","oOwnerComponent","this","getOwnerComponent","oRouter","getRouter","oControlModel","getModel","oViewModel","JSONModel","template","editable","getView","setModel","getRoute","attachPatternMatched","_onTemplateMatched","onEditToggleButtonPress","_onEditToggleButtonPress","showFunctionNotImplementedMessage","oTemplatePage","byId","bCurrentShowFooterState","getShowFooter","setShowFooter","loadTemplateDetails","async","_loadTemplateDetails","globalModel","backendBaseUrl","getProperty","response","fetch","_template","ok","Error","console","log","templateData","json","setProperty","error","MessageBox","message","oEvent","getParameter","layout","onFullscreenPressed","_onFullscreenPressed","sCurrentLayout","sNewLayout","navTo","onClosePressed","_onClosePressed","onExit","_onExit","detachPatternMatched"],"sources":["TradeTemplateDetail.controller.ts"],"sourcesContent":["import Router from \"sap/ui/core/routing/Router\";\nimport BaseController from \"./BaseController\";\nimport Page from \"sap/m/Page\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport MessageBox from \"sap/m/MessageBox\";\n/**\n * @namespace com.optrabot.ui.controller\n */\nexport default class TradeTemplateDetail extends BaseController {\n\tprivate oRouter: Router;\n\tprivate oControlModel: any;\n\tprivate oViewModel: JSONModel;\n\tprivate _template: string;\n\t\n\tpublic onInit(): void {\n\t\tvar oOwnerComponent = this.getOwnerComponent();\n\t\tthis.oRouter = oOwnerComponent.getRouter();\n\t\tthis.oControlModel = oOwnerComponent.getModel(\"control\");\n\n\t\tthis.oViewModel = new JSONModel({\n\t\t\ttemplate: null,\n\t\t\teditable: false\n\t\t});\n\t\tthis.getView().setModel(this.oViewModel, \"viewModel\");\n\n\t\tthis.oRouter.getRoute(\"template\").attachPatternMatched(this._onTemplateMatched, this);\n\t\tthis.oRouter.getRoute(\"templateWOLayout\").attachPatternMatched(this._onTemplateMatched, this);\n\t}\n\n\tpublic onEditToggleButtonPress(): void {\n\t\tthis.showFunctionNotImplementedMessage();\n\t\treturn;\n\n\t\tvar oTemplatePage = this.getView().byId(\"TemplatePageLayout\") as Page;\n\t\tvar bCurrentShowFooterState = oTemplatePage.getShowFooter();\n\t\toTemplatePage.setShowFooter(!bCurrentShowFooterState);\n\t}\n\n\tprivate async loadTemplateDetails(): Promise<void> {\n\t\ttry {\n\t\t\tconst globalModel = this.getOwnerComponent().getModel(\"global\") as JSONModel;\n\t\t\tconst backendBaseUrl = globalModel.getProperty(\"/backendBaseUrl\");\n\t\t\tconst response = await fetch(`${backendBaseUrl}/api/templates/` + this._template);\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error('Failed to fetch template details');\n\t\t\t}\n\t\t\tconsole.log(\"Template details loaded\");\n\t\t\tconst templateData = await response.json();\n\t\t\tthis.oViewModel.setProperty(\"/template\", templateData);\n\t\t} catch (error) {\n\t\t\tMessageBox.error(\"Failed to load template details: \" + error.message);\n\t\t}\n\t}\n\n\tpublic _onTemplateMatched(oEvent: any): void {\n\t\tconsole.log(\"Template matched\");\n\t\tthis._template = oEvent.getParameter(\"arguments\").template || this._template || \"0\";\n\t\t\n\t\t// Store the current template in the model\n\t\tvar layout = oEvent.getParameter(\"arguments\").layout || \"TwoColumnsMidExpanded\";\n\t\tthis.oControlModel.setProperty(\"/currentLayout\", layout);\n\n\t\tthis.loadTemplateDetails();\n\t}\n\n\tpublic onFullscreenPressed(): void {\n\t\tvar sCurrentLayout = this.oControlModel.getProperty(\"/currentLayout\");\n\t\tvar sNewLayout = sCurrentLayout;\n\t\tif (sCurrentLayout === \"MidColumnFullScreen\") {\n\t\t\tsNewLayout = \"TwoColumnsMidExpanded\";\n\t\t} else if (sCurrentLayout === \"TwoColumnsMidExpanded\") {\n\t\t\tsNewLayout = \"MidColumnFullScreen\";\n\t\t}\n\t\tthis.oRouter.navTo(\"template\", {\n\t\t\tlayout: sNewLayout, template: this._template}, true);\n\t}\n\n\tpublic onClosePressed(): void {\n\t\tthis.oRouter.navTo(\"templates\", {\n\t\t\tlayout: \"OneColumn\"}, true);\n\t}\n\n\tpublic onExit(): void {\n\t\tthis.oRouter.getRoute(\"template\").detachPatternMatched(this._onTemplateMatched, this);\n\t\tthis.oRouter.getRoute(\"templateWOLayout\").detachPatternMatched(this._onTemplateMatched, this);\n\t}\n}"],"mappings":"qNACOA,EAAcC,EAAAC,GAIrB,MAGqBC,EAA4BH,EAAcI,OAAA,kDAMvDC,OAAM,SAAAC,IACZ,IAAIC,EAAkBC,KAAKC,oBAC3BD,KAAKE,QAAUH,EAAgBI,YAC/BH,KAAKI,cAAgBL,EAAgBM,SAAS,WAE9CL,KAAKM,WAAa,IAAIC,EAAU,CAC/BC,SAAU,KACVC,SAAU,QAEXT,KAAKU,UAAUC,SAASX,KAAKM,WAAY,aAEzCN,KAAKE,QAAQU,SAAS,YAAYC,qBAAqBb,KAAKc,mBAAoBd,MAChFA,KAAKE,QAAQU,SAAS,oBAAoBC,qBAAqBb,KAAKc,mBAAoBd,KACzF,EAEOe,wBAAuB,SAAAC,IAC7BhB,KAAKiB,oCACL,OAEA,IAAIC,EAAgBlB,KAAKU,UAAUS,KAAK,sBACxC,IAAIC,EAA0BF,EAAcG,gBAC5CH,EAAcI,eAAeF,EAC9B,EAEcG,oBAAmBC,eAAAC,IAChC,IACC,MAAMC,EAAc1B,KAAKC,oBAAoBI,SAAS,UACtD,MAAMsB,EAAiBD,EAAYE,YAAY,mBAC/C,MAAMC,QAAiBC,MAAM,GAAGH,mBAAkC3B,KAAK+B,WACvE,IAAKF,EAASG,GAAI,CACjB,MAAM,IAAIC,MAAM,mCACjB,CACAC,QAAQC,IAAI,2BACZ,MAAMC,QAAqBP,EAASQ,OACpCrC,KAAKM,WAAWgC,YAAY,YAAaF,EAC1C,CAAE,MAAOG,GACRC,EAAWD,MAAM,oCAAsCA,EAAME,QAC9D,CACD,EAEO3B,mBAAkB,SAAAA,EAAC4B,GACzBR,QAAQC,IAAI,oBACZnC,KAAK+B,UAAYW,EAAOC,aAAa,aAAanC,UAAYR,KAAK+B,WAAa,IAGhF,IAAIa,EAASF,EAAOC,aAAa,aAAaC,QAAU,wBACxD5C,KAAKI,cAAckC,YAAY,iBAAkBM,GAEjD5C,KAAKuB,qBACN,EAEOsB,oBAAmB,SAAAC,IACzB,IAAIC,EAAiB/C,KAAKI,cAAcwB,YAAY,kBACpD,IAAIoB,EAAaD,EACjB,GAAIA,IAAmB,sBAAuB,CAC7CC,EAAa,uBACd,MAAO,GAAID,IAAmB,wBAAyB,CACtDC,EAAa,qBACd,CACAhD,KAAKE,QAAQ+C,MAAM,WAAY,CAC9BL,OAAQI,EAAYxC,SAAUR,KAAK+B,WAAY,KACjD,EAEOmB,eAAc,SAAAC,IACpBnD,KAAKE,QAAQ+C,MAAM,YAAa,CAC/BL,OAAQ,aAAc,KACxB,EAEOQ,OAAM,SAAAC,IACZrD,KAAKE,QAAQU,SAAS,YAAY0C,qBAAqBtD,KAAKc,mBAAoBd,MAChFA,KAAKE,QAAQU,SAAS,oBAAoB0C,qBAAqBtD,KAAKc,mBAAoBd,KACzF,IAAC,OA7EmBL,CAAmB","ignoreList":[]}