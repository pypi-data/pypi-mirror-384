import{_ as R,aC as v,f as y,I as U,u as L,c as D,e as l,w as s,a as o,A as j,d as u,t as r,E as N,L as K,aA as J,i as g,x as C,M as $,o as d,F as E,y as P,aB as de,j as ue}from"./index-B83Nj5wy.js";import{a as W,E as q}from"./form-item-BTA-ycNk.js";import{E as G}from"./row-DVAQSDiX.js";import{E as H}from"./col-BQ0dJrnG.js";/* empty css               */import{E as X}from"./card-DrdRfsqF.js";import{b as Y,a as Z,E as x}from"./pagination-DR65BV4_.js";import{E as ee,a as te,d as le}from"./select-DWPJjTK6.js";import{E as se}from"./popover-B2WwvPSr.js";import{E as ae}from"./index-CIlHu57m.js";import{E as ne}from"./index-nma4EivO.js";import{E as me}from"./index-D5UIxO6G.js";/* empty css                     */import"./_baseClone-BOzpZ_uO.js";import"./_initCloneObject-D0WUAqkw.js";import"./raf-BESGV2Sv.js";import"./validator-r28DD-hG.js";const pe={name:"SenderManager",data(){const{t:e}=L();return{editForm:{sender_id:"",warns:0,petal:0,superuser:!1,trusted:!1,blocked:!1,sender_data:{}},senderList:[],editDialogVisible:!1,selectedPrefix:"",selectedStatus:"",platformIdPart:"",senderDataString:"",currentPage:1,pageSize:20,totalItems:0,debounceTimer:null,loading:!1,abortController:new AbortController,t:e}},mounted(){this.refreshData()},beforeUnmount(){this.abortController.abort()},methods:{debouncedRefresh(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.refreshData()},500)},async refreshData(){this.currentPage=1,await this.fetchData()},async fetchData(){this.loading=!0;try{const e=await v.get("/api/sender",{signal:this.abortController.signal,params:{prefix:this.selectedPrefix||void 0,status:this.selectedStatus||void 0,id:this.platformIdPart||void 0,page:this.currentPage,size:this.pageSize}});e.status===200&&(this.senderList=e.data.sender_list,this.totalItems=e.data.total||0)}catch(e){v.isCancel(e)?console.log("Request canceled"):y.error(this.t("message.error.fetch")+e)}finally{this.loading=!1}},handlePageChange(e){this.currentPage=e,this.fetchData()},handleSuperUserChange(e){e&&(this.editForm.trusted=!1,this.editForm.blocked=!1)},handleTrustedChange(e){e&&(this.editForm.superuser=!1,this.editForm.blocked=!1)},handleBlockedChange(e){e&&(this.editForm.superuser=!1,this.editForm.trusted=!1)},editSender(e){Object.assign(this.editForm,{sender_id:e.sender_id,superuser:e.superuser,trusted:e.trusted,blocked:e.blocked,warns:e.warns,petal:e.petal,sender_data:e.sender_data?{...e.sender_data}:{}}),this.senderDataString=JSON.stringify(this.editForm.sender_data,null,2),this.editDialogVisible=!0},async submitEdit(){let e={};try{e=JSON.parse(this.senderDataString)}catch{y.error(this.t("session.message.invalid_json"))}const{sender_id:t,...w}=this.editForm;w.sender_data=e;try{await v.patch(`/api/sender/${t}`,w),y.success(this.t("session.message.success.edit")),this.editDialogVisible=!1,this.fetchData()}catch(c){c.response?.status===403&&U||y.error(this.t("message.error.fetch")+c.message)}},confirmDelete(e){ae.confirm(this.t("session.sender.confirm.message",{sender_id:e.sender_id}),this.t("confirm.warning"),{confirmButtonText:this.t("button.confirm"),cancelButtonText:this.t("button.cancel"),type:"warning"}).then(()=>{this.deleteSender(e)}).catch(()=>{})},async deleteSender(e){try{await v.delete(`/api/sender/${e.sender_id}`),y.success(this.t("session.message.success.delete")),this.fetchData()}catch(t){t.response?.status===403&&U||y.error(this.t("message.error.fetch")+t.message)}}}},ge={class:"header-container"},fe={class:"filter-container"},be={class:"filter-item"},ce={class:"filter-item"},_e={class:"filter-item"},he={class:"pagination-wrapper"};function ye(e,t,w,c,a,p){const f=N,m=te,V=ee,S=K,b=Y,k=le,z=se,M=Z,B=x,F=X,T=ne,_=q,h=H,I=me,O=G,Q=W,A=$,n=J;return d(),D("div",null,[l(F,{class:"sender-card",shadow:"never"},{default:s(()=>[o("div",ge,[o("h3",null,[t[12]||(t[12]=o("i",{class:"mdi mdi-account"},null,-1)),u(" "+r(e.$t("session.sender.title")),1)]),l(f,{onClick:p.refreshData,type:"primary",size:"small",disabled:a.loading,style:{float:"right","margin-left":"10px"}},{default:s(()=>[t[13]||(t[13]=o("i",{class:"mdi mdi-refresh"},null,-1)),u(" "+r(e.$t("button.refresh")),1)]),_:1},8,["onClick","disabled"])]),o("div",fe,[o("div",be,[l(V,{modelValue:a.selectedPrefix,"onUpdate:modelValue":t[0]||(t[0]=i=>a.selectedPrefix=i),clearable:"",placeholder:e.$t("session.select.prefix"),onChange:p.debouncedRefresh},{default:s(()=>[l(m,{label:"QQ",value:"QQ"}),l(m,{label:"QQBot",value:"QQBot"}),l(m,{label:"Discord",value:"Discord"}),l(m,{label:"Telegram",value:"Telegram"}),l(m,{label:"KOOK",value:"KOOK"}),l(m,{label:"Matrix",value:"Matrix"}),l(m,{label:"Web",value:"Web"})]),_:1},8,["modelValue","placeholder","onChange"])]),o("div",ce,[l(V,{modelValue:a.selectedStatus,"onUpdate:modelValue":t[1]||(t[1]=i=>a.selectedStatus=i),clearable:"",placeholder:e.$t("session.select.status"),onChange:p.debouncedRefresh},{default:s(()=>[l(m,{label:e.$t("session.sender.tag.superuser"),value:"superuser"},null,8,["label"]),l(m,{label:e.$t("session.sender.tag.trusted"),value:"trusted"},null,8,["label"]),l(m,{label:e.$t("session.sender.tag.blocked"),value:"blocked"},null,8,["label"])]),_:1},8,["modelValue","placeholder","onChange"])]),o("div",_e,[l(S,{modelValue:a.platformIdPart,"onUpdate:modelValue":t[2]||(t[2]=i=>a.platformIdPart=i),placeholder:e.$t("session.sender.input.sender_id"),onInput:p.debouncedRefresh},{prefix:s(()=>[...t[14]||(t[14]=[o("i",{class:"mdi mdi-magnify"},null,-1)])]),_:1},8,["modelValue","placeholder","onInput"])])]),j((d(),g(M,{data:a.senderList,style:{width:"100%"},stripe:""},{default:s(()=>[l(b,{prop:"sender_id",label:e.$t("session.sender.table.sender_id"),sortable:"","min-width":"140"},null,8,["label"]),l(b,{prop:"warns",label:e.$t("session.sender.table.warns"),sortable:"","min-width":"140"},null,8,["label"]),l(b,{prop:"petal",label:e.$t("session.sender.table.petal"),sortable:"","min-width":"140"},null,8,["label"]),l(b,{label:e.$t("session.table.status"),"min-width":"180"},{default:s(({row:i})=>[i.superuser?(d(),g(k,{key:0,type:"primary"},{default:s(()=>[u(r(e.$t("session.sender.tag.superuser")),1)]),_:1})):C("",!0),i.trusted?(d(),g(k,{key:1,type:"success",style:{"margin-left":"5px"}},{default:s(()=>[u(r(e.$t("session.sender.tag.trusted")),1)]),_:1})):C("",!0),i.blocked?(d(),g(k,{key:2,type:"danger",style:{"margin-left":"5px"}},{default:s(()=>[u(r(e.$t("session.sender.tag.blocked")),1)]),_:1})):C("",!0)]),_:1},8,["label"]),l(b,{label:e.$t("session.sender.table.sender_data"),"min-width":"140"},{default:s(({row:i})=>[l(z,{placement:"top",width:"300","hide-after":0,trigger:["hover","click"]},{reference:s(()=>[l(f,{size:"mini",type:"text"},{default:s(()=>[u(r(e.$t("session.table.text.detail")),1)]),_:1})]),default:s(()=>[o("pre",null,r(JSON.stringify(i.sender_data,null,2)),1)]),_:2},1024)]),_:1},8,["label"]),l(b,{label:e.$t("table.operation"),"min-width":"240"},{default:s(({row:i})=>[l(f,{size:"small",type:"warning",onClick:re=>p.editSender(i)},{default:s(()=>[t[15]||(t[15]=o("i",{class:"mdi mdi-pencil"},null,-1)),u(" "+r(e.$t("button.edit")),1)]),_:1},8,["onClick"]),l(f,{size:"small",type:"danger",onClick:re=>p.confirmDelete(i)},{default:s(()=>[t[16]||(t[16]=o("i",{class:"mdi mdi-delete"},null,-1)),u(" "+r(e.$t("button.delete")),1)]),_:1},8,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[n,a.loading]]),o("div",he,[a.totalItems>0?(d(),g(B,{key:0,background:"",layout:"prev, pager, next","current-page":a.currentPage,"onUpdate:currentPage":t[3]||(t[3]=i=>a.currentPage=i),"page-size":a.pageSize,total:a.totalItems,style:{"margin-top":"20px"},onCurrentChange:p.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])):C("",!0)])]),_:1}),l(A,{modelValue:a.editDialogVisible,"onUpdate:modelValue":t[11]||(t[11]=i=>a.editDialogVisible=i),title:e.$t("session.sender.title.edit_sender_data"),"close-on-press-escape":!1,"close-on-click-modal":!1,width:"600px"},{footer:s(()=>[l(f,{onClick:t[10]||(t[10]=i=>a.editDialogVisible=!1)},{default:s(()=>[u(r(e.$t("button.cancel")),1)]),_:1}),l(f,{type:"primary",onClick:p.submitEdit},{default:s(()=>[u(r(e.$t("button.save")),1)]),_:1},8,["onClick"])]),default:s(()=>[l(Q,{model:a.editForm,"label-width":"auto"},{default:s(()=>[l(O,{gutter:24},{default:s(()=>[l(h,{span:6},{default:s(()=>[l(_,{label:e.$t("session.sender.table.superuser")},{default:s(()=>[l(T,{modelValue:a.editForm.superuser,"onUpdate:modelValue":t[4]||(t[4]=i=>a.editForm.superuser=i),onChange:p.handleSuperUserChange},null,8,["modelValue","onChange"])]),_:1},8,["label"])]),_:1}),l(h,{span:6},{default:s(()=>[l(_,{label:e.$t("session.sender.table.trust")},{default:s(()=>[l(T,{modelValue:a.editForm.trusted,"onUpdate:modelValue":t[5]||(t[5]=i=>a.editForm.trusted=i),onChange:p.handleTrustedChange},null,8,["modelValue","onChange"])]),_:1},8,["label"])]),_:1}),l(h,{span:6},{default:s(()=>[l(_,{label:e.$t("session.sender.table.block")},{default:s(()=>[l(T,{modelValue:a.editForm.blocked,"onUpdate:modelValue":t[6]||(t[6]=i=>a.editForm.blocked=i),onChange:p.handleBlockedChange},null,8,["modelValue","onChange"])]),_:1},8,["label"])]),_:1}),l(h,{span:18},{default:s(()=>[l(_,{label:e.$t("session.sender.table.warns")},{default:s(()=>[l(I,{modelValue:a.editForm.warns,"onUpdate:modelValue":t[7]||(t[7]=i=>a.editForm.warns=i),min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(h,{span:18},{default:s(()=>[l(_,{label:e.$t("session.sender.table.petal")},{default:s(()=>[l(I,{modelValue:a.editForm.petal,"onUpdate:modelValue":t[8]||(t[8]=i=>a.editForm.petal=i)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(h,{span:24},{default:s(()=>[l(_,{label:e.$t("session.sender.table.sender_data")},{default:s(()=>[l(S,{type:"textarea",resize:"none",modelValue:a.senderDataString,"onUpdate:modelValue":t[9]||(t[9]=i=>a.senderDataString=i),rows:6,placeholder:e.$t("session.input.json_data")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}const ie=R(pe,[["render",ye],["__scopeId","data-v-72d8a24c"]]),Ve={name:"TargetManager",data(){const{t:e}=L();return{editForm:{target_id:"",locale:"",muted:!1,blocked:!1,modules:[],custom_admins:[],banned_users:[],target_data:{}},targetList:[],moduleDialogVisible:!1,adminDialogVisible:!1,bannedDialogVisible:!1,editDialogVisible:!1,selectedAdmins:[],selectedBanned:[],allModules:[],selectedModules:[],selectedPrefix:"",selectedStatus:"",platformIdPart:"",targetDataString:"",debounceTimer:null,currentPage:1,pageSize:20,totalItems:0,loading:!1,abortController:new AbortController,t:e}},mounted(){this.refreshData()},beforeUnmount(){this.abortController.abort()},methods:{debouncedRefresh(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.refreshData()},500)},async refreshData(){this.currentPage=1,await this.fetchData(),this.fetchAllModules()},viewModules(e){this.selectedModules=e.modules,this.moduleDialogVisible=!0},async fetchData(){this.loading=!0;try{const e=await v.get("/api/target",{signal:this.abortController.signal,params:{prefix:this.selectedPrefix||void 0,status:this.selectedStatus||void 0,id:this.platformIdPart||void 0,page:this.currentPage,size:this.pageSize}});e.status===200&&(this.targetList=e.data.target_list.map(t=>(t.modules=Array.isArray(t.modules)?t.modules:[],t.custom_admins=Array.isArray(t.custom_admins)?t.custom_admins:[],t)),this.totalItems=e.data.total||0)}catch(e){v.isCancel(e)?console.log("Request canceled"):y.error(this.t("message.error.fetch")+e)}finally{this.loading=!1}},async fetchAllModules(){try{const e=await v.get("/api/modules_list");e.status===200&&e.data.modules&&(this.allModules=Object.values(e.data.modules))}catch(e){v.isCancel(e)?console.log("Request canceled"):y.error(this.t("message.error.fetch")+e)}},handlePageChange(e){this.currentPage=e,this.fetchData()},viewAdmins(e){this.selectedAdmins=e.custom_admins||[],this.adminDialogVisible=!0},viewBanned(e){this.selectedBanned=e.banned_users||[],this.bannedDialogVisible=!0},editTarget(e){Object.assign(this.editForm,{target_id:e.target_id,locale:e.locale,muted:e.muted,blocked:e.blocked,modules:e.modules?[...e.modules]:[],custom_admins:e.custom_admins?[...e.custom_admins]:[],banned_users:e.banned_users?[...e.banned_users]:[],target_data:e.target_data?{...e.target_data}:{}}),this.targetDataString=JSON.stringify(this.editForm.target_data,null,2),this.editDialogVisible=!0},async submitEdit(){let e={};try{e=JSON.parse(this.targetDataString)}catch{y.error(this.t("session.message.invalid_json"))}const{target_id:t,...w}=this.editForm;w.target_data=e;try{await v.patch(`api/target/${t}`,w),y.success(this.t("session.message.success.edit")),this.editDialogVisible=!1,this.fetchData()}catch(c){c.response?.status===403&&U||y.error(this.t("message.error.fetch")+c.message)}},confirmDelete(e){ae.confirm(this.t("session.target.confirm.message",{target_id:e.target_id}),this.t("confirm.warning"),{confirmButtonText:this.t("button.confirm"),cancelButtonText:this.t("button.cancel"),type:"warning"}).then(()=>{this.deleteTarget(e)}).catch(()=>{})},async deleteTarget(e){try{await v.delete(`/api/target/${e.target_id}`),y.success(this.t("session.message.success.delete")),this.fetchData()}catch(t){t.response?.status===403&&U||y.error(this.t("message.error.fetch")+t.message)}}}},ve={class:"header-container"},Ce={class:"filter-container"},ke={class:"filter-item"},De={class:"filter-item"},we={class:"filter-item"},Se={class:"pagination-wrapper"},Fe={class:"tag-container"},Ee={class:"tag-container"},Pe={class:"tag-container"};function Te(e,t,w,c,a,p){const f=N,m=te,V=ee,S=K,b=Y,k=le,z=se,M=Z,B=x,F=$,T=X,_=q,h=H,I=ne,O=G,Q=W,A=J;return d(),D("div",null,[l(T,{class:"target-card",shadow:"never"},{default:s(()=>[o("div",ve,[o("h3",null,[t[16]||(t[16]=o("i",{class:"mdi mdi-forum"},null,-1)),u(" "+r(e.$t("session.target.title")),1)]),l(f,{onClick:p.refreshData,type:"primary",size:"small",disabled:a.loading,style:{float:"right","margin-left":"10px"}},{default:s(()=>[t[17]||(t[17]=o("i",{class:"mdi mdi-refresh"},null,-1)),u(" "+r(e.$t("button.refresh")),1)]),_:1},8,["onClick","disabled"])]),o("div",Ce,[o("div",ke,[l(V,{modelValue:a.selectedPrefix,"onUpdate:modelValue":t[0]||(t[0]=n=>a.selectedPrefix=n),clearable:"",placeholder:e.$t("session.select.prefix"),onChange:p.debouncedRefresh},{default:s(()=>[l(m,{label:"QQ",value:"QQ"}),l(m,{label:"QQBot",value:"QQBot"}),l(m,{label:"Discord",value:"Discord"}),l(m,{label:"Telegram",value:"Telegram"}),l(m,{label:"KOOK",value:"KOOK"}),l(m,{label:"Matrix",value:"Matrix"}),l(m,{label:"Web",value:"Web"})]),_:1},8,["modelValue","placeholder","onChange"])]),o("div",De,[l(V,{modelValue:a.selectedStatus,"onUpdate:modelValue":t[1]||(t[1]=n=>a.selectedStatus=n),clearable:"",placeholder:e.$t("session.select.status"),onChange:p.debouncedRefresh},{default:s(()=>[l(m,{label:e.$t("session.target.tag.muted"),value:"muted"},null,8,["label"]),l(m,{label:e.$t("session.target.tag.blocked"),value:"blocked"},null,8,["label"])]),_:1},8,["modelValue","placeholder","onChange"])]),o("div",we,[l(S,{modelValue:a.platformIdPart,"onUpdate:modelValue":t[2]||(t[2]=n=>a.platformIdPart=n),placeholder:e.$t("session.target.input.target_id"),onInput:p.debouncedRefresh},{prefix:s(()=>[...t[18]||(t[18]=[o("i",{class:"mdi mdi-magnify"},null,-1)])]),_:1},8,["modelValue","placeholder","onInput"])])]),j((d(),g(M,{data:a.targetList,style:{width:"100%"},stripe:""},{default:s(()=>[l(b,{prop:"target_id",label:e.$t("session.target.table.target_id"),sortable:"","min-width":"140"},null,8,["label"]),l(b,{prop:"locale",label:e.$t("session.target.table.locale"),sortable:"","min-width":"100"},null,8,["label"]),l(b,{prop:"modules",label:e.$t("session.target.table.modules"),"min-width":"160"},{default:s(({row:n})=>[u(r(n.modules.length)+" ",1),n.modules.length>0?(d(),g(f,{key:0,size:"small",type:"primary",style:{"margin-left":"5px"},onClick:i=>p.viewModules(n)},{default:s(()=>[t[19]||(t[19]=o("i",{class:"mdi mdi-eye"},null,-1)),u(" "+r(e.$t("session.button.view")),1)]),_:1},8,["onClick"])):C("",!0)]),_:1},8,["label"]),l(b,{label:e.$t("session.target.table.custom_admins"),"min-width":"160"},{default:s(({row:n})=>[u(r(n.custom_admins.length)+" ",1),n.custom_admins.length>0?(d(),g(f,{key:0,size:"small",type:"primary",style:{"margin-left":"5px"},onClick:i=>p.viewAdmins(n)},{default:s(()=>[t[20]||(t[20]=o("i",{class:"mdi mdi-eye"},null,-1)),u(" "+r(e.$t("session.button.view")),1)]),_:1},8,["onClick"])):C("",!0)]),_:1},8,["label"]),l(b,{label:e.$t("session.target.table.banned_users"),"min-width":"160"},{default:s(({row:n})=>[u(r(n.banned_users.length)+" ",1),n.banned_users.length>0?(d(),g(f,{key:0,size:"small",type:"primary",style:{"margin-left":"5px"},onClick:i=>p.viewBanned(n)},{default:s(()=>[t[21]||(t[21]=o("i",{class:"mdi mdi-eye"},null,-1)),u(" "+r(e.$t("session.button.view")),1)]),_:1},8,["onClick"])):C("",!0)]),_:1},8,["label"]),l(b,{label:e.$t("session.table.status"),"min-width":"220"},{default:s(({row:n})=>[n.muted?(d(),g(k,{key:0,type:"warning"},{default:s(()=>[u(r(e.$t("session.target.tag.muted")),1)]),_:1})):C("",!0),n.blocked?(d(),g(k,{key:1,type:"danger",style:{"margin-left":"5px"}},{default:s(()=>[u(r(e.$t("session.target.tag.blocked")),1)]),_:1})):C("",!0)]),_:1},8,["label"]),l(b,{label:e.$t("session.target.table.target_data"),"min-width":"140"},{default:s(({row:n})=>[l(z,{placement:"top",width:"300","hide-after":0,trigger:["hover","click"]},{reference:s(()=>[l(f,{size:"mini",type:"text"},{default:s(()=>[u(r(e.$t("session.table.text.detail")),1)]),_:1})]),default:s(()=>[o("pre",null,r(JSON.stringify(n.target_data,null,2)),1)]),_:2},1024)]),_:1},8,["label"]),l(b,{label:e.$t("table.operation"),"min-width":"240"},{default:s(({row:n})=>[l(f,{size:"small",type:"warning",onClick:i=>p.editTarget(n)},{default:s(()=>[t[22]||(t[22]=o("i",{class:"mdi mdi-pencil"},null,-1)),u(" "+r(e.$t("button.edit")),1)]),_:1},8,["onClick"]),l(f,{size:"small",type:"danger",onClick:i=>p.confirmDelete(n)},{default:s(()=>[t[23]||(t[23]=o("i",{class:"mdi mdi-delete"},null,-1)),u(" "+r(e.$t("button.delete")),1)]),_:1},8,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[A,a.loading]]),o("div",Se,[a.totalItems>0?(d(),g(B,{key:0,background:"",layout:"prev, pager, next","current-page":a.currentPage,"onUpdate:currentPage":t[3]||(t[3]=n=>a.currentPage=n),"page-size":a.pageSize,total:a.totalItems,style:{"margin-top":"20px"},onCurrentChange:p.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])):C("",!0)]),l(F,{modelValue:a.moduleDialogVisible,"onUpdate:modelValue":t[4]||(t[4]=n=>a.moduleDialogVisible=n),title:e.$t("session.target.table.modules")},{default:s(()=>[o("div",Fe,[(d(!0),D(E,null,P(a.selectedModules,n=>(d(),g(k,{key:n,style:{margin:"4px"},type:"info",round:""},{default:s(()=>[u(r(n),1)]),_:2},1024))),128))])]),_:1},8,["modelValue","title"]),l(F,{modelValue:a.adminDialogVisible,"onUpdate:modelValue":t[5]||(t[5]=n=>a.adminDialogVisible=n),title:e.$t("session.target.table.custom_admins")},{default:s(()=>[o("div",Ee,[(d(!0),D(E,null,P(a.selectedAdmins,n=>(d(),g(k,{key:n,style:{margin:"4px"},type:"info",round:""},{default:s(()=>[u(r(n),1)]),_:2},1024))),128))])]),_:1},8,["modelValue","title"]),l(F,{modelValue:a.bannedDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=n=>a.bannedDialogVisible=n),title:e.$t("session.target.table.banned_users")},{default:s(()=>[o("div",Pe,[(d(!0),D(E,null,P(a.selectedBanned,n=>(d(),g(k,{key:n,style:{margin:"4px"},type:"info",round:""},{default:s(()=>[u(r(n),1)]),_:2},1024))),128))])]),_:1},8,["modelValue","title"])]),_:1}),l(F,{modelValue:a.editDialogVisible,"onUpdate:modelValue":t[15]||(t[15]=n=>a.editDialogVisible=n),title:e.$t("session.target.title.edit_target_data"),"close-on-press-escape":!1,"close-on-click-modal":!1,width:"600px"},{footer:s(()=>[l(f,{onClick:t[14]||(t[14]=n=>a.editDialogVisible=!1)},{default:s(()=>[u(r(e.$t("button.cancel")),1)]),_:1}),l(f,{type:"primary",onClick:p.submitEdit},{default:s(()=>[u(r(e.$t("button.save")),1)]),_:1},8,["onClick"])]),default:s(()=>[l(Q,{model:a.editForm,"label-width":"auto"},{default:s(()=>[l(h,{span:12},{default:s(()=>[l(_,{label:e.$t("session.target.table.locale")},{default:s(()=>[l(S,{modelValue:a.editForm.locale,"onUpdate:modelValue":t[7]||(t[7]=n=>a.editForm.locale=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(O,{gutter:24},{default:s(()=>[l(h,{span:6},{default:s(()=>[l(_,{label:e.$t("session.target.table.mute")},{default:s(()=>[l(I,{modelValue:a.editForm.muted,"onUpdate:modelValue":t[8]||(t[8]=n=>a.editForm.muted=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(h,{span:6},{default:s(()=>[l(_,{label:e.$t("session.target.table.block")},{default:s(()=>[l(I,{modelValue:a.editForm.blocked,"onUpdate:modelValue":t[9]||(t[9]=n=>a.editForm.blocked=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(h,{span:24},{default:s(()=>[l(_,{label:e.$t("session.target.table.modules_list")},{default:s(()=>[l(V,{modelValue:a.editForm.modules,"onUpdate:modelValue":t[10]||(t[10]=n=>a.editForm.modules=n),multiple:"",filterable:"","allow-create":"",placeholder:e.$t("session.target.input.modules"),style:{width:"100%"}},{default:s(()=>[(d(!0),D(E,null,P(a.allModules,n=>(d(),g(m,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(h,{span:24},{default:s(()=>[l(_,{label:e.$t("session.target.table.custom_admins")},{default:s(()=>[l(V,{modelValue:a.editForm.custom_admins,"onUpdate:modelValue":t[11]||(t[11]=n=>a.editForm.custom_admins=n),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:e.$t("session.target.input.custom_admins"),style:{width:"100%"}},{default:s(()=>[(d(!0),D(E,null,P(a.editForm.custom_admins,n=>(d(),g(m,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(h,{span:24},{default:s(()=>[l(_,{label:e.$t("session.target.table.banned_users")},{default:s(()=>[l(V,{modelValue:a.editForm.banned_users,"onUpdate:modelValue":t[12]||(t[12]=n=>a.editForm.banned_users=n),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:e.$t("session.target.input.banned_users"),style:{width:"100%"}},{default:s(()=>[(d(!0),D(E,null,P(a.editForm.banned_users,n=>(d(),g(m,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(h,{span:24},{default:s(()=>[l(_,{label:e.$t("session.target.table.target_data")},{default:s(()=>[l(S,{type:"textarea",resize:"none",modelValue:a.targetDataString,"onUpdate:modelValue":t[13]||(t[13]=n=>a.targetDataString=n),rows:6,placeholder:e.$t("session.input.json_data")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}const oe=R(Ve,[["render",Te],["__scopeId","data-v-678a1676"]]),Ie={name:"SessionPage",components:{TargetManager:oe,SenderManager:ie},setup(){return{activeCard:ue("target")}}};function Ue(e,t,w,c,a,p){const f=N,m=de,V=oe,S=ie;return d(),D("div",null,[l(m,{class:"active-button-group"},{default:s(()=>[l(f,{type:c.activeCard==="target"?"primary":"default",onClick:t[0]||(t[0]=b=>c.activeCard="target")},{default:s(()=>[...t[2]||(t[2]=[o("i",{class:"mdi mdi-forum"},null,-1)])]),_:1},8,["type"]),l(f,{type:c.activeCard==="sender"?"primary":"default",onClick:t[1]||(t[1]=b=>c.activeCard="sender")},{default:s(()=>[...t[3]||(t[3]=[o("i",{class:"mdi mdi-account"},null,-1)])]),_:1},8,["type"])]),_:1}),c.activeCard==="target"?(d(),g(V,{key:0})):(d(),g(S,{key:1}))])}const Xe=R(Ie,[["render",Ue],["__scopeId","data-v-06f8a845"]]);export{Xe as default};
