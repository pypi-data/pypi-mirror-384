[tox]
min_version = 4.8
env_list = py313, ruff, black
isolated_build = true
skip_missing_interpreters = true

# Unit tests (no DB extras needed)
[testenv]
description = Run unit tests
extras = dev
setenv = PYTHONDONTWRITEBYTECODE = 1
commands = pytest -q

# Ruff lint
[testenv:ruff]
description = Ruff lint
skip_install = true
deps = ruff>=0.6.0
commands = ruff check src tests

# Black formatting check
[testenv:black]
description = Black formatting check
skip_install = true
deps = black
commands = black --check src tests

[flake8]
max-line-length = 100
exclude = __pycache__,.tox,.git,build,dist,.venv