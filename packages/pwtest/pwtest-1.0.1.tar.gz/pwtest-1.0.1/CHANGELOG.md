# Changelog

所有重要的变更都将记录在此文件中。

本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.0.1] - 2025-10-11

### 🎉 新功能

- **CLI 命令工具**: 新增 `pwtest init` 命令,一键初始化测试项目
  - 自动创建目录结构 (config/, pages/, tests/)
  - 自动生成配置文件 (pytest.ini, config.py, conftest.py)
  - 自动创建示例文件 (login_page.py, test_example.py)
  - 自动生成项目文档 (README.md, .gitignore)
  - 支持 `--dir` 参数指定目录
  - 支持 `--force` 参数强制覆盖

### 🐛 修复

- **修复 alluredir 参数为 None 导致的错误**: 添加了 None 值检查,使用默认值 `"allure-results"`
- **修复 pytest 插件入口点冲突**: 移除了自动加载配置,改为手动导入方式
- **修复 login_callback 未被调用**: context fixture 现在会自动检测并使用用户定义的 login_callback

### ✨ 改进

- **自动检测 login_callback**: 框架会自动检测测试项目中的 login_callback fixture
- **更好的日志提示**: 添加了 login_callback 检测的日志信息
- **可选的登录状态管理**: 如果不定义 login_callback,框架会跳过登录状态管理
- **开箱即用**: 使用 `pwtest init` 命令,30秒创建完整项目

### 📝 文档

- **新增 PROJECT_TEMPLATE.md**: 完整的测试项目模板和配置指南
- **更新 README.md**: 添加了 CLI 命令使用说明和快速开始指南
- **更新 TROUBLESHOOTING.md**: 添加了新问题的解决方案
- **更新 QUICK_FIX.md**: 包含最新的修复指南

---

## [1.0.0] - 2025-10-11

### 🎉 首次发布

这是 pwtest 的首个正式版本,提供了完整的 UI 自动化测试框架功能。

### ✨ 新增功能

#### 核心功能
- **浏览器管理**: 支持 Chromium、Firefox、WebKit、Chrome、Edge 多种浏览器
- **智能状态管理**: 自动管理浏览器登录状态,避免重复登录
- **视频录制**: 自动录制测试过程视频,失败时附加到报告
- **截图功能**: 测试失败时自动截图并保存
- **操作录制**: 支持 Playwright Trace 录制,便于调试
- **日志系统**: 基于 loguru 的详细日志记录

#### 测试框架集成
- **Pytest 集成**: 完整的 pytest fixture 支持
- **Allure 报告**: 自动生成美观的 Allure 测试报告
- **环境信息**: 自动收集并记录测试环境信息
- **多浏览器并行**: 支持多浏览器并行测试

#### 配置管理
- **配置继承**: 支持配置类继承和覆盖
- **灵活配置**: 丰富的配置选项,满足各种测试需求
- **环境变量**: 支持通过环境变量配置

#### 开发体验
- **POM 支持**: 完整的页面对象模型支持
- **登录回调**: 灵活的登录逻辑解耦机制
- **测试标记**: 预定义的测试标记(smoke、regression、user)
- **时间统计**: 自动统计测试类和方法的执行时间

### 📦 打包和分发
- **PyPI 发布**: 支持通过 pip 安装
- **现代化配置**: 使用 pyproject.toml 配置
- **完整文档**: 详细的 README 和使用示例

### 🔧 技术栈
- Python >= 3.8
- Playwright >= 1.54.0
- Pytest >= 8.4.1
- Allure-pytest >= 2.15.0
- Loguru >= 0.7.3

### 📝 文档
- 完整的 README.md 使用文档
- 详细的代码注释和文档字符串
- 示例项目演示

### 🙏 致谢
感谢所有为此项目做出贡献的开发者和测试人员。

---

## 版本说明

### 版本格式
- **主版本号**: 不兼容的 API 修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

### 变更类型
- **新增**: 新功能
- **变更**: 对现有功能的变更
- **废弃**: 即将移除的功能
- **移除**: 已移除的功能
- **修复**: 问题修复
- **安全**: 安全相关的修复

---

[1.0.0]: https://github.com/mofanx/pwtest/releases/tag/v1.0.0
