"use strict";(self.webpackChunk_amzn_sagemaker_ui_doc_manager_jl_plugin=self.webpackChunk_amzn_sagemaker_ui_doc_manager_jl_plugin||[]).push([[472],{472:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r}),t(219);const n="docmanager:open",o="docmanager:show-in-file-browser";t(296);const r={id:"@amzn/sagemaker-ui-doc-manager-jl-plugin:plugin",description:"A JupyterLab extension for handling notebook documents.",autoStart:!0,activate:e=>{console.log("sagemaker-ui-doc-manager-jl-plugin is activated!"),window.addEventListener("message",(async a=>{const t=a.data;if((e=>{const a=e.data;return"sagemaker:nbevent:OpenFile"===a.type&&""!==a.payload.path})(a)&&(await e.commands.execute(n,{path:t.payload.path}),await e.commands.execute(o)),"sagemaker:nbevent:OpenUntitledFile"===a.data.type){const{type:a,ext:r,path:s,content:i,format:c}=t.payload;await e.serviceManager.contents.newUntitled({type:a,ext:r,path:s}).then((async a=>{i&&await e.serviceManager.contents.save(a.path,{type:a.type,content:i,format:c||"text"}),await e.commands.execute(n,{path:a.path}),await e.commands.execute(o)}))}else if("sagemaker:nbevent:OpenOrCreateFile"===a.data.type){const{type:r,path:s,content:i,format:c}=t.payload;if(!i)return void console.error("Missing content",a);if(!s)return void console.error("Missing path",a);try{await(async(e,a)=>{var t;try{return await e.serviceManager.contents.get(a,{content:!1}),!0}catch(e){if(404===(null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.status))return!1;throw e}})(e,s)||await e.serviceManager.contents.save(s,{type:r,content:i,format:c||"text"})}catch(a){return void console.error("Unable to check if file exists",a)}await e.commands.execute(n,{path:s}),await e.commands.execute(o)}}))}}}}]);