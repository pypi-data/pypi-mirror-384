import{S as $,i as q,s as D,m as w,g as k,r as g,u as U,q as h,d as f,k as _,v as B,w as C,y as P,e as v,C as V,c as E,a as b,D as N,f as I,h as W,E as R,n as M,F}from"../chunks/BsAB9Z30.js";import"../chunks/IHki7fMi.js";import{t as d}from"../chunks/D1AOsjeD.js";import{g as Q}from"../chunks/CfFtnCED.js";import{p as j}from"../chunks/C4FH1jaS.js";import{a as z,c as H,b as y,f as A,d as G}from"../chunks/BzMu2T5T.js";import{a as J,u as K,g as L}from"../chunks/DpOSwv0f.js";import{F as T}from"../chunks/DOQfqgOE.js";import{S as X}from"../chunks/CbQmQGdd.js";import{g as Y}from"../chunks/C-MpeODL.js";import{e as Z,c as x}from"../chunks/Dl9eNJPw.js";function ee(c){let t,e,s,n;return s=new X({props:{className:"size-5"}}),{c(){t=v("div"),e=v("div"),V(s.$$.fragment),this.h()},l(o){t=E(o,"DIV",{class:!0});var r=b(t);e=E(r,"DIV",{class:!0});var u=b(e);N(s.$$.fragment,u),u.forEach(f),r.forEach(f),this.h()},h(){I(e,"class","pb-16"),I(t,"class","flex items-center justify-center h-full")},m(o,r){k(o,t,r),W(t,e),R(s,e,null),n=!0},p:M,i(o){n||(h(s.$$.fragment,o),n=!0)},o(o){g(s.$$.fragment,o),n=!1},d(o){o&&f(t),F(s)}}}function te(c){let t,e,s;return e=new T({props:{edit:!0,id:c[0].id,name:c[0].name,meta:c[0].meta,content:c[0].content,onSave:c[3]}}),{c(){t=v("div"),V(e.$$.fragment),this.h()},l(n){t=E(n,"DIV",{class:!0});var o=b(t);N(e.$$.fragment,o),o.forEach(f),this.h()},h(){I(t,"class","px-[16px] h-full")},m(n,o){k(n,t,o),R(e,t,null),s=!0},p(n,o){const r={};o&1&&(r.id=n[0].id),o&1&&(r.name=n[0].name),o&1&&(r.meta=n[0].meta),o&1&&(r.content=n[0].content),e.$set(r)},i(n){s||(h(e.$$.fragment,n),s=!0)},o(n){g(e.$$.fragment,n),s=!1},d(n){n&&f(t),F(e)}}}function ne(c){let t,e,s,n;const o=[te,ee],r=[];function u(a,l){return a[0]?0:1}return t=u(c),e=r[t]=o[t](c),{c(){e.c(),s=w()},l(a){e.l(a),s=w()},m(a,l){r[t].m(a,l),k(a,s,l),n=!0},p(a,[l]){let p=t;t=u(a),t===p?r[t].p(a,l):(P(),g(r[p],1,1,()=>{r[p]=null}),U(),e=r[t],e?e.p(a,l):(e=r[t]=o[t](a),e.c()),h(e,1),e.m(s.parentNode,s))},i(a){n||(h(e),n=!0)},o(a){g(e),n=!1},d(a){a&&f(s),r[t].d(a)}}}function oe(c,t,e){let s,n,o,r;_(c,j,i=>e(4,s=i)),_(c,z,i=>e(5,n=i)),_(c,H,i=>e(6,o=i));const u=B("i18n");_(c,u,i=>e(7,r=i));let a=null;const l=async i=>{var S;const m=Z(i.content);if(x((m==null?void 0:m.required_open_webui_version)??"0.0.0",y)){d.error(r.t("Open WebUI version (v{{OPEN_WEBUI_VERSION}}) is lower than required version (v{{REQUIRED_VERSION}})",{OPEN_WEBUI_VERSION:y,REQUIRED_VERSION:(m==null?void 0:m.required_open_webui_version)??"0.0.0"}));return}await K(localStorage.token,a.id,{id:i.id,name:i.name,meta:i.meta,content:i.content}).catch(O=>(d.error(`${O}`),null))&&(d.success(r.t("Function updated successfully")),A.set(await L(localStorage.token)),G.set(await Y(localStorage.token,((S=o==null?void 0:o.features)==null?void 0:S.enable_direct_connections)&&((n==null?void 0:n.directConnections)??null),!1,!0)))};return C(async()=>{const i=s.url.searchParams.get("id");i&&e(0,a=await J(localStorage.token,i).catch(m=>(d.error(`${m}`),Q("/admin/functions"),null)))}),[a,u,l,i=>{l(i)}]}class ge extends ${constructor(t){super(),q(this,t,oe,ne,D,{})}}export{ge as component};
//# sourceMappingURL=16.Dz370exn.js.map
