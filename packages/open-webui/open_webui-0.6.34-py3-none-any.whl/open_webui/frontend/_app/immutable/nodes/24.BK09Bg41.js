const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/h22AL3a0.js","../chunks/C1FmrZbK.js","../chunks/QjJsDpFa.js"])))=>i.map(i=>d[i]);
import{S as He,i as Me,s as Fe,l as x,C as q,e as g,o as We,d as u,p as W,D as G,c as b,a as k,f as h,g as A,E as Y,y as ce,r as O,u as fe,q as S,F as J,k as ie,v as xe,_ as Re,w as qe,n as ue,H as Ge,I as Ye,h as p,L as Ie,G as pe,K as Je,t as z,b as Q,j as ee,a0 as Xe,U as Ne}from"../chunks/BsAB9Z30.js";import"../chunks/IHki7fMi.js";import{W as Ke,s as Ve,m as ze,u as Qe,k as Ze}from"../chunks/BzMu2T5T.js";import{U as et}from"../chunks/D1tkRDjx.js";import{_ as Te}from"../chunks/C1FmrZbK.js";import{g as tt}from"../chunks/D0QH3NT1.js";import{e as _e,u as lt,o as rt}from"../chunks/BjVHJN9o.js";import{i as st,g as at,m as nt,j as Se}from"../chunks/Dl9eNJPw.js";import{t as se}from"../chunks/D1AOsjeD.js";import{f as ot}from"../chunks/5-chS5bE.js";import{F as it}from"../chunks/CU2r43ac.js";import{d as me,r as ct}from"../chunks/I1CDPYOB.js";import"../chunks/BXP-4RTu.js";import{d as ft}from"../chunks/BQWQRICs.js";import{p as ut}from"../chunks/C4FH1jaS.js";import{g as dt}from"../chunks/CfFtnCED.js";import{g as mt,c as Ce,d as ht}from"../chunks/DPX2wixP.js";import{E as _t}from"../chunks/BNJXXAzR.js";import{C as pt}from"../chunks/CWL6JHPL.js";import{S as vt}from"../chunks/D9KdRKiL.js";import{P as gt}from"../chunks/BW7wCiOr.js";import{S as bt}from"../chunks/CbQmQGdd.js";import{T as De}from"../chunks/cMkWkffq.js";import{N as $t}from"../chunks/CtDD1jpO.js";import{F as wt}from"../chunks/DOlsu18Q.js";import{X as kt}from"../chunks/CubwYUHd.js";import{S as yt}from"../chunks/BfJ33jvc.js";const{document:ye}=tt;function je(i,e,t){const s=i.slice();return s[32]=e[t],s}function Le(i,e,t){const s=i.slice();return s[35]=e[t],s[37]=t,s}function Dt(i){let e,t,s;return t=new bt({props:{className:"size-5"}}),{c(){e=g("div"),q(t.$$.fragment),this.h()},l(l){e=b(l,"DIV",{class:!0});var a=k(e);G(t.$$.fragment,a),a.forEach(u),this.h()},h(){h(e,"class","w-full h-full flex justify-center items-center")},m(l,a){A(l,e,a),Y(t,e,null),s=!0},p:ue,i(l){s||(S(t.$$.fragment,l),s=!0)},o(l){O(t.$$.fragment,l),s=!1},d(l){l&&u(e),J(t)}}}function Et(i){let e,t,s,l,a,r,n,o,_,d,D,c,m,w,C,U,j,I,E,V,N,R,M,X;function te(v){i[14](v)}let Z={title:i[1].t("Delete note?"),$$slots:{default:[It]},$$scope:{ctx:i}};i[5]!==void 0&&(Z.show=i[5]),e=new pt({props:Z}),Ge.push(()=>Ye(e,"show",te)),e.$on("confirm",i[15]),o=new vt({props:{className:"size-3.5"}});let P=i[0]&&Ue(i);const K=[Vt,Nt],B=[];function ae(v,$){return $[0]&16&&(C=null),C==null&&(C=Object.keys(v[4]).length>0),C?0:1}return U=ae(i,[-1,-1]),j=B[U]=K[U](i),N=new De({props:{content:i[1].t("Create Note"),$$slots:{default:[Lt]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),s=x(),l=g("div"),a=g("div"),r=g("div"),n=g("div"),q(o.$$.fragment),_=x(),d=g("input"),c=x(),P&&P.c(),m=x(),w=g("div"),j.c(),I=x(),E=g("div"),V=g("div"),q(N.$$.fragment),this.h()},l(v){G(e.$$.fragment,v),s=W(v),l=b(v,"DIV",{class:!0});var $=k(l);a=b($,"DIV",{class:!0});var L=k(a);r=b(L,"DIV",{class:!0});var H=k(r);n=b(H,"DIV",{class:!0});var f=k(n);G(o.$$.fragment,f),f.forEach(u),_=W(H),d=b(H,"INPUT",{class:!0,placeholder:!0}),c=W(H),P&&P.l(H),H.forEach(u),L.forEach(u),$.forEach(u),m=W(v),w=b(v,"DIV",{class:!0});var y=k(w);j.l(y),y.forEach(u),I=W(v),E=b(v,"DIV",{class:!0});var T=k(E);V=b(T,"DIV",{class:!0});var F=k(V);G(N.$$.fragment,F),F.forEach(u),T.forEach(u),this.h()},h(){h(n,"class","self-center ml-1 mr-3"),h(d,"class","w-full text-sm py-1 rounded-r-xl outline-hidden bg-transparent"),h(d,"placeholder",D=i[1].t("Search Notes")),h(r,"class","flex flex-1 items-center"),h(a,"class","flex flex-1 items-center w-full space-x-2"),h(l,"class","flex flex-col gap-1 px-3.5"),h(w,"class","px-4.5 @container h-full pt-2"),h(V,"class","flex gap-0.5 justify-end w-full"),h(E,"class","absolute bottom-0 left-0 right-0 p-5 max-w-full flex justify-end")},m(v,$){Y(e,v,$),A(v,s,$),A(v,l,$),p(l,a),p(a,r),p(r,n),Y(o,n,null),p(r,_),p(r,d),Ie(d,i[0]),p(r,c),P&&P.m(r,null),A(v,m,$),A(v,w,$),B[U].m(w,null),A(v,I,$),A(v,E,$),p(E,V),Y(N,V,null),R=!0,M||(X=pe(d,"input",i[16]),M=!0)},p(v,$){const L={};$[0]&2&&(L.title=v[1].t("Delete note?")),$[0]&10|$[1]&128&&(L.$$scope={dirty:$,ctx:v}),!t&&$[0]&32&&(t=!0,L.show=v[5],Je(()=>t=!1)),e.$set(L),(!R||$[0]&2&&D!==(D=v[1].t("Search Notes")))&&h(d,"placeholder",D),$[0]&1&&d.value!==v[0]&&Ie(d,v[0]),v[0]?P?(P.p(v,$),$[0]&1&&S(P,1)):(P=Ue(v),P.c(),S(P,1),P.m(r,null)):P&&(ce(),O(P,1,1,()=>{P=null}),fe());let H=U;U=ae(v,$),U===H?B[U].p(v,$):(ce(),O(B[H],1,1,()=>{B[H]=null}),fe(),j=B[U],j?j.p(v,$):(j=B[U]=K[U](v),j.c()),S(j,1),j.m(w,null));const f={};$[0]&2&&(f.content=v[1].t("Create Note")),$[1]&128&&(f.$$scope={dirty:$,ctx:v}),N.$set(f)},i(v){R||(S(e.$$.fragment,v),S(o.$$.fragment,v),S(P),S(j),S(N.$$.fragment,v),R=!0)},o(v){O(e.$$.fragment,v),O(o.$$.fragment,v),O(P),O(j),O(N.$$.fragment,v),R=!1},d(v){v&&(u(s),u(l),u(m),u(w),u(I),u(E)),J(e,v),J(o),P&&P.d(),B[U].d(),J(N),M=!1,X()}}}function It(i){let e,t=i[1].t("This will delete")+"",s,l,a,r=i[3].title+"",n,o;return{c(){e=g("div"),s=z(t),l=x(),a=g("span"),n=z(r),o=z("."),this.h()},l(_){e=b(_,"DIV",{class:!0});var d=k(e);s=Q(d,t),l=W(d),a=b(d,"SPAN",{class:!0});var D=k(a);n=Q(D,r),D.forEach(u),o=Q(d,"."),d.forEach(u),this.h()},h(){h(a,"class","font-semibold"),h(e,"class","text-sm text-gray-500 truncate")},m(_,d){A(_,e,d),p(e,s),p(e,l),p(e,a),p(a,n),p(e,o)},p(_,d){d[0]&2&&t!==(t=_[1].t("This will delete")+"")&&ee(s,t),d[0]&8&&r!==(r=_[3].title+"")&&ee(n,r)},d(_){_&&u(e)}}}function Ue(i){let e,t,s,l,a,r;return s=new kt({props:{className:"size-3",strokeWidth:"2"}}),{c(){e=g("div"),t=g("button"),q(s.$$.fragment),this.h()},l(n){e=b(n,"DIV",{class:!0});var o=k(e);t=b(o,"BUTTON",{class:!0});var _=k(t);G(s.$$.fragment,_),_.forEach(u),o.forEach(u),this.h()},h(){h(t,"class","p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"),h(e,"class","self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent")},m(n,o){A(n,e,o),p(e,t),Y(s,t,null),l=!0,a||(r=pe(t,"click",i[17]),a=!0)},p:ue,i(n){l||(S(s.$$.fragment,n),l=!0)},o(n){O(s.$$.fragment,n),l=!1},d(n){n&&u(e),J(s),a=!1,r()}}}function Nt(i){let e,t,s,l=i[1].t("No Notes")+"",a,r,n,o=i[1].t("Create your first note by clicking on the plus button below.")+"",_;return{c(){e=g("div"),t=g("div"),s=g("div"),a=z(l),r=x(),n=g("div"),_=z(o),this.h()},l(d){e=b(d,"DIV",{class:!0});var D=k(e);t=b(D,"DIV",{class:!0});var c=k(t);s=b(c,"DIV",{class:!0});var m=k(s);a=Q(m,l),m.forEach(u),r=W(c),n=b(c,"DIV",{class:!0});var w=k(n);_=Q(w,o),w.forEach(u),c.forEach(u),D.forEach(u),this.h()},h(){h(s,"class","text-xl font-medium text-gray-400 dark:text-gray-600"),h(n,"class","mt-1 text-sm text-gray-300 dark:text-gray-700"),h(t,"class","pb-20 text-center"),h(e,"class","w-full h-full flex flex-col items-center justify-center")},m(d,D){A(d,e,D),p(e,t),p(t,s),p(s,a),p(t,r),p(t,n),p(n,_)},p(d,D){D[0]&2&&l!==(l=d[1].t("No Notes")+"")&&ee(a,l),D[0]&2&&o!==(o=d[1].t("Create your first note by clicking on the plus button below.")+"")&&ee(_,o)},i:ue,o:ue,d(d){d&&u(e)}}}function Vt(i){let e,t,s=_e(Object.keys(i[4])),l=[];for(let r=0;r<s.length;r+=1)l[r]=Oe(je(i,s,r));const a=r=>O(l[r],1,1,()=>{l[r]=null});return{c(){e=g("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var n=k(e);for(let o=0;o<l.length;o+=1)l[o].l(n);n.forEach(u),this.h()},h(){h(e,"class","pb-10")},m(r,n){A(r,e,n);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t=!0},p(r,n){if(n[0]&1082){s=_e(Object.keys(r[4]));let o;for(o=0;o<s.length;o+=1){const _=je(r,s,o);l[o]?(l[o].p(_,n),S(l[o],1)):(l[o]=Oe(_),l[o].c(),S(l[o],1),l[o].m(e,null))}for(ce(),o=s.length;o<l.length;o+=1)a(o);fe()}},i(r){if(!t){for(let n=0;n<s.length;n+=1)S(l[n]);t=!0}},o(r){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)O(l[n]);t=!1},d(r){r&&u(e),Xe(l,r)}}}function Tt(i){let e,t,s;return t=new _t({props:{className:"size-5"}}),{c(){e=g("button"),q(t.$$.fragment),this.h()},l(l){e=b(l,"BUTTON",{class:!0,type:!0});var a=k(e);G(t.$$.fragment,a),a.forEach(u),this.h()},h(){h(e,"class","self-center w-fit text-sm p-1 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),h(e,"type","button")},m(l,a){A(l,e,a),Y(t,e,null),s=!0},p:ue,i(l){s||(S(t.$$.fragment,l),s=!0)},o(l){O(t.$$.fragment,l),s=!1},d(l){l&&u(e),J(t)}}}function St(i){let e=i[1].t("No content")+"",t;return{c(){t=z(e)},l(s){t=Q(s,e)},m(s,l){A(s,t,l)},p(s,l){l[0]&2&&e!==(e=s[1].t("No content")+"")&&ee(t,e)},d(s){s&&u(t)}}}function Ct(i){var s,l;let e=((l=(s=i[35].data)==null?void 0:s.content)==null?void 0:l.md)+"",t;return{c(){t=z(e)},l(a){t=Q(a,e)},m(a,r){A(a,t,r)},p(a,r){var n,o;r[0]&16&&e!==(e=((o=(n=a[35].data)==null?void 0:n.content)==null?void 0:o.md)+"")&&ee(t,e)},d(a){a&&u(t)}}}function jt(i){var l,a,r,n;let e,t=i[1].t("By {{name}}",{name:Se(((a=(l=i[35])==null?void 0:l.user)==null?void 0:a.name)??((n=(r=i[35])==null?void 0:r.user)==null?void 0:n.email)??i[1].t("Deleted User"))})+"",s;return{c(){e=g("div"),s=z(t),this.h()},l(o){e=b(o,"DIV",{class:!0});var _=k(e);s=Q(_,t),_.forEach(u),this.h()},h(){h(e,"class","shrink-0 text-gray-500")},m(o,_){A(o,e,_),p(e,s)},p(o,_){var d,D,c,m;_[0]&18&&t!==(t=o[1].t("By {{name}}",{name:Se(((D=(d=o[35])==null?void 0:d.user)==null?void 0:D.name)??((m=(c=o[35])==null?void 0:c.user)==null?void 0:m.email)??o[1].t("Deleted User"))})+"")&&ee(s,t)},d(o){o&&u(e)}}}function Pe(i,e){var ae,v;let t,s,l,a,r,n,o=e[35].title+"",_,d,D,c,m,w,C,U,j,I=me(e[35].updated_at/1e6).fromNow()+"",E,V,N,R,M;function X(...$){return e[18](e[35],...$)}function te(){return e[19](e[35])}function Z(){return e[20](e[35])}c=new $t({props:{onDownload:X,onCopyLink:te,onDelete:Z,$$slots:{default:[Tt]},$$scope:{ctx:e}}});function P($,L){var H,f;return(f=(H=$[35].data)==null?void 0:H.content)!=null&&f.md?Ct:St}let K=P(e),B=K(e);return N=new De({props:{content:((v=(ae=e[35])==null?void 0:ae.user)==null?void 0:v.email)??e[1].t("Deleted User"),className:"flex shrink-0",placement:"top-start",$$slots:{default:[jt]},$$scope:{ctx:e}}}),{key:i,first:null,c(){t=g("div"),s=g("div"),l=g("a"),a=g("div"),r=g("div"),n=g("div"),_=z(o),d=x(),D=g("div"),q(c.$$.fragment),m=x(),w=g("div"),B.c(),C=x(),U=g("div"),j=g("div"),E=z(I),V=x(),q(N.$$.fragment),this.h()},l($){t=b($,"DIV",{class:!0});var L=k(t);s=b(L,"DIV",{class:!0});var H=k(s);l=b(H,"A",{href:!0,class:!0});var f=k(l);a=b(f,"DIV",{class:!0});var y=k(a);r=b(y,"DIV",{class:!0});var T=k(r);n=b(T,"DIV",{class:!0});var F=k(n);_=Q(F,o),F.forEach(u),d=W(T),D=b(T,"DIV",{});var re=k(D);G(c.$$.fragment,re),re.forEach(u),T.forEach(u),m=W(y),w=b(y,"DIV",{class:!0});var ne=k(w);B.l(ne),ne.forEach(u),y.forEach(u),C=W(f),U=b(f,"DIV",{class:!0});var oe=k(U);j=b(oe,"DIV",{});var le=k(j);E=Q(le,I),le.forEach(u),V=W(oe),G(N.$$.fragment,oe),oe.forEach(u),f.forEach(u),H.forEach(u),L.forEach(u),this.h()},h(){h(n,"class","font-semibold line-clamp-1 capitalize"),h(r,"class","flex items-center gap-2 self-center mb-1 justify-between"),h(w,"class","text-xs text-gray-500 dark:text-gray-500 mb-3 line-clamp-3 min-h-10"),h(a,"class","flex-1"),h(U,"class","text-xs px-0.5 w-full flex justify-between items-center"),h(l,"href",R=`/notes/${e[35].id}`),h(l,"class","w-full -translate-y-0.5 flex flex-col justify-between"),h(s,"class","flex flex-1 space-x-4 cursor-pointer w-full"),h(t,"class","flex space-x-4 cursor-pointer w-full px-4.5 py-4 border border-gray-50 dark:border-gray-850 bg-transparent dark:hover:bg-gray-850 hover:bg-white rounded-2xl transition"),this.first=t},m($,L){A($,t,L),p(t,s),p(s,l),p(l,a),p(a,r),p(r,n),p(n,_),p(r,d),p(r,D),Y(c,D,null),p(a,m),p(a,w),B.m(w,null),p(l,C),p(l,U),p(U,j),p(j,E),p(U,V),Y(N,U,null),M=!0},p($,L){var y,T;e=$,(!M||L[0]&16)&&o!==(o=e[35].title+"")&&ee(_,o);const H={};L[0]&24&&(H.onDownload=X),L[0]&18&&(H.onCopyLink=te),L[0]&56&&(H.onDelete=Z),L[1]&128&&(H.$$scope={dirty:L,ctx:e}),c.$set(H),K===(K=P(e))&&B?B.p(e,L):(B.d(1),B=K(e),B&&(B.c(),B.m(w,null))),(!M||L[0]&16)&&I!==(I=me(e[35].updated_at/1e6).fromNow()+"")&&ee(E,I);const f={};L[0]&18&&(f.content=((T=(y=e[35])==null?void 0:y.user)==null?void 0:T.email)??e[1].t("Deleted User")),L[0]&18|L[1]&128&&(f.$$scope={dirty:L,ctx:e}),N.$set(f),(!M||L[0]&16&&R!==(R=`/notes/${e[35].id}`))&&h(l,"href",R)},i($){M||(S(c.$$.fragment,$),S(N.$$.fragment,$),M=!0)},o($){O(c.$$.fragment,$),O(N.$$.fragment,$),M=!1},d($){$&&u(t),J(c),B.d(),J(N)}}}function Oe(i){let e,t=i[1].t(i[32])+"",s,l,a,r=[],n=new Map,o,_,d=_e(i[4][i[32]]);const D=c=>c[35].id;for(let c=0;c<d.length;c+=1){let m=Le(i,d,c),w=D(m);n.set(w,r[c]=Pe(w,m))}return{c(){e=g("div"),s=z(t),l=x(),a=g("div");for(let c=0;c<r.length;c+=1)r[c].c();o=x(),this.h()},l(c){e=b(c,"DIV",{class:!0});var m=k(e);s=Q(m,t),m.forEach(u),l=W(c),a=b(c,"DIV",{class:!0});var w=k(a);for(let C=0;C<r.length;C+=1)r[C].l(w);o=W(w),w.forEach(u),this.h()},h(){h(e,"class","w-full text-xs text-gray-500 dark:text-gray-500 font-medium pb-2.5"),h(a,"class","mb-5 gap-2.5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5")},m(c,m){A(c,e,m),p(e,s),A(c,l,m),A(c,a,m);for(let w=0;w<r.length;w+=1)r[w]&&r[w].m(a,null);p(a,o),_=!0},p(c,m){(!_||m[0]&18)&&t!==(t=c[1].t(c[32])+"")&&ee(s,t),m[0]&1082&&(d=_e(c[4][c[32]]),ce(),r=lt(r,m,D,1,c,d,n,a,rt,Pe,o,Le),fe())},i(c){if(!_){for(let m=0;m<d.length;m+=1)S(r[m]);_=!0}},o(c){for(let m=0;m<r.length;m+=1)O(r[m]);_=!1},d(c){c&&(u(e),u(l),u(a));for(let m=0;m<r.length;m+=1)r[m].d()}}}function Lt(i){let e,t,s,l,a;return t=new gt({props:{className:"size-4.5",strokeWidth:"2.5"}}),{c(){e=g("button"),q(t.$$.fragment),this.h()},l(r){e=b(r,"BUTTON",{class:!0,type:!0});var n=k(e);G(t.$$.fragment,n),n.forEach(u),this.h()},h(){h(e,"class","cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl"),h(e,"type","button")},m(r,n){A(r,e,n),Y(t,e,null),s=!0,l||(a=pe(e,"click",i[21]),l=!0)},p:ue,i(r){s||(S(t.$$.fragment,r),s=!0)},o(r){O(t.$$.fragment,r),s=!1},d(r){r&&u(e),J(t),l=!1,a()}}}function Ut(i){let e,t,s,l,a,r,n,o;ye.title=e=`
		`+i[1].t("Notes")+" • "+i[7]+`
	`,s=new wt({props:{show:i[6]}});const _=[Et,Dt],d=[];function D(c,m){return c[2]?0:1}return r=D(i),n=d[r]=_[r](i),{c(){t=x(),q(s.$$.fragment),l=x(),a=g("div"),n.c(),this.h()},l(c){We("svelte-16ir3op",ye.head).forEach(u),t=W(c),G(s.$$.fragment,c),l=W(c),a=b(c,"DIV",{id:!0,class:!0});var w=k(a);n.l(w),w.forEach(u),this.h()},h(){h(a,"id","notes-container"),h(a,"class","w-full min-h-full h-full")},m(c,m){A(c,t,m),Y(s,c,m),A(c,l,m),A(c,a,m),d[r].m(a,null),o=!0},p(c,m){(!o||m[0]&130)&&e!==(e=`
		`+c[1].t("Notes")+" • "+c[7]+`
	`)&&(ye.title=e);const w={};m[0]&64&&(w.show=c[6]),s.$set(w);let C=r;r=D(c),r===C?d[r].p(c,m):(ce(),O(d[C],1,1,()=>{d[C]=null}),fe(),n=d[r],n?n.p(c,m):(n=d[r]=_[r](c),n.c()),S(n,1),n.m(a,null))},i(c){o||(S(s.$$.fragment,c),S(n),o=!0)},o(c){O(s.$$.fragment,c),O(n),o=!1},d(c){c&&(u(t),u(l),u(a)),J(s,c),d[r].d()}}}function Pt(i,e,t){let s,l,a;ie(i,ut,f=>t(22,s=f)),ie(i,Ke,f=>t(7,a=f));const{saveAs:r}=ot;me.extend(ft),me.extend(ct);async function n(f){for(const y of f)try{me.locale(y);break}catch(T){`${y}`}}const o=xe("i18n");ie(i,o,f=>t(1,l=f));let _=!1,d="",D=[],c=null,m=null,w={},C=!1;const U=f=>{if(!Array.isArray(f))return{};const y={};for(const T of f){const F=at(T.updated_at/1e9);y[F]||(y[F]=[]),y[F].push({...T,timeRange:F})}return y},j=async()=>{t(12,D=await mt(localStorage.token,!0)),t(13,c=new it(D,{keys:["title"]}))},I=async f=>{const y=await Ce(localStorage.token,{title:me().format("YYYY-MM-DD"),data:{content:{json:null,html:f??"",md:f??""}},meta:null,access_control:{}}).catch(T=>(se.error(`${T}`),null));y&&dt(`/notes/${y.id}`)},E=async f=>{if(f==="md"){const y=new Blob([m.data.content.md],{type:"text/markdown"});r(y,`${m.title}.md`)}else f==="pdf"&&await V(m)},V=async f=>{var y,T;try{const[{default:F},{default:re}]=await Promise.all([Te(()=>import("../chunks/h22AL3a0.js"),__vite__mapDeps([0,1,2]),import.meta.url),Te(()=>import("../chunks/BNVeY_Dn.js"),[],import.meta.url)]),ne=1024,oe=1400,le=((T=(y=f.data)==null?void 0:y.content)==null?void 0:T.html)??"";let de;le instanceof HTMLElement?de=le:(de=document.createElement("div"),de.innerHTML=le,document.body.appendChild(de));const ve=await re(de,{useCORS:!0,scale:2,width:ne,windowWidth:ne,windowHeight:oe});le instanceof HTMLElement||document.body.removeChild(de);const Ee=ve.toDataURL("image/jpeg",.7),he=new F("p","mm","a4"),ge=210,be=297,$e=ve.height*ge/ve.width;let we=$e,ke=0;for(he.addImage(Ee,"JPEG",0,ke,ge,$e),we-=be;we>0;)ke-=be,he.addPage(),he.addImage(Ee,"JPEG",0,ke,ge,$e),we-=be;he.save(`${f.title}.pdf`)}catch(F){se.error(`${F}`)}},N=async f=>{await ht(localStorage.token,f).catch(T=>(se.error(`${T}`),null))&&j()},R=async f=>{for(const y of f){if(y.type!=="text/markdown"){se.error(l.t("Only markdown files are allowed"));return}const T=new FileReader;T.onload=async F=>{const re=F.target.result;let ne=y.name.replace(/\.md$/,"");if(typeof re!="string"){se.error(l.t("Invalid file content"));return}await Ce(localStorage.token,{title:ne,data:{content:{json:null,html:nt.parse(re??""),md:re}},meta:null,access_control:{}}).catch(le=>(se.error(`${le}`),null))&&j()},T.readAsText(y)}};let M=!1;const X=f=>{var y,T;f.preventDefault(),(T=(y=f.dataTransfer)==null?void 0:y.types)!=null&&T.includes("Files")?t(6,M=!0):t(6,M=!1)},te=()=>{t(6,M=!1)},Z=async f=>{var y,T;if(f.preventDefault(),(y=f.dataTransfer)!=null&&y.files){const F=Array.from((T=f.dataTransfer)==null?void 0:T.files);F&&F.length>0&&R(F)}t(6,M=!1)};Re(()=>{const f=document.getElementById("notes-container");f&&(f==null||f.removeEventListener("dragover",X),f==null||f.removeEventListener("drop",Z),f==null||f.removeEventListener("dragleave",te))}),qe(async()=>{if(s.url.searchParams.get("content")){const y=s.url.searchParams.get("content")??"";if(y){I(y);return}}await j(),t(2,_=!0);const f=document.getElementById("notes-container");f==null||f.addEventListener("dragover",X),f==null||f.addEventListener("drop",Z),f==null||f.addEventListener("dragleave",te)});function P(f){C=f,t(5,C)}const K=()=>{N(m.id),t(5,C=!1)};function B(){d=this.value,t(0,d)}const ae=()=>{t(0,d="")},v=(f,y)=>{t(3,m=f),E(y)},$=async f=>{const y=window.location.origin;await st(`${y}/notes/${f.id}`)?se.success(l.t("Copied link to clipboard")):se.error(l.t("Failed to copy link"))},L=f=>{t(3,m=f),t(5,C=!0)},H=async()=>{I()};return i.$$.update=()=>{i.$$.dirty[0]&2&&n(l.languages),i.$$.dirty[0]&12289&&c&&t(4,w=U(d?c.search(d).map(f=>f.item):D))},[d,l,_,m,w,C,M,a,o,I,E,N,D,c,P,K,B,ae,v,$,L,H]}class Ot extends He{constructor(e){super(),Me(this,e,Pt,Ut,Fe,{},null,[-1,-1])}}function Ae(i){let e,t,s,l;return t=new De({props:{content:i[0]?i[2].t("Close Sidebar"):i[2].t("Open Sidebar"),interactive:!0,$$slots:{default:[At]},$$scope:{ctx:i}}}),{c(){e=g("div"),q(t.$$.fragment),this.h()},l(a){e=b(a,"DIV",{class:!0});var r=k(e);G(t.$$.fragment,r),r.forEach(u),this.h()},h(){h(e,"class",s=(i[0]?"md:hidden":"")+" flex flex-none items-center")},m(a,r){A(a,e,r),Y(t,e,null),l=!0},p(a,r){const n={};r&5&&(n.content=a[0]?a[2].t("Close Sidebar"):a[2].t("Open Sidebar")),r&129&&(n.$$scope={dirty:r,ctx:a}),t.$set(n),(!l||r&1&&s!==(s=(a[0]?"md:hidden":"")+" flex flex-none items-center"))&&h(e,"class",s)},i(a){l||(S(t.$$.fragment,a),l=!0)},o(a){O(t.$$.fragment,a),l=!1},d(a){a&&u(e),J(t)}}}function At(i){let e,t,s,l,a,r;return s=new yt({}),{c(){e=g("button"),t=g("div"),q(s.$$.fragment),this.h()},l(n){e=b(n,"BUTTON",{id:!0,class:!0});var o=k(e);t=b(o,"DIV",{class:!0});var _=k(t);G(s.$$.fragment,_),_.forEach(u),o.forEach(u),this.h()},h(){h(t,"class","self-center p-1.5"),h(e,"id","sidebar-toggle-button"),h(e,"class","cursor-pointer flex rounded-lg hover:bg-gray-100 dark:hover:bg-gray-850 transition cursor-")},m(n,o){A(n,e,o),p(e,t),Y(s,t,null),l=!0,a||(r=pe(e,"click",i[5]),a=!0)},p:ue,i(n){l||(S(s.$$.fragment,n),l=!0)},o(n){O(s.$$.fragment,n),l=!1},d(n){n&&u(e),J(s),a=!1,r()}}}function Be(i){var s;let e,t;return e=new et({props:{className:"max-w-[240px]",role:(s=i[3])==null?void 0:s.role,help:!0,$$slots:{default:[Bt]},$$scope:{ctx:i}}}),e.$on("show",i[6]),{c(){q(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,a){Y(e,l,a),t=!0},p(l,a){var n;const r={};a&8&&(r.role=(n=l[3])==null?void 0:n.role),a&136&&(r.$$scope={dirty:a,ctx:l}),e.$set(r)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Bt(i){let e,t,s,l;return{c(){e=g("button"),t=g("div"),s=g("img"),this.h()},l(a){e=b(a,"BUTTON",{class:!0,"aria-label":!0});var r=k(e);t=b(r,"DIV",{class:!0});var n=k(t);s=b(n,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),n.forEach(u),r.forEach(u),this.h()},h(){var a;Ne(s.src,l=(a=i[3])==null?void 0:a.profile_image_url)||h(s,"src",l),h(s,"class","size-6 object-cover rounded-full"),h(s,"alt","User profile"),h(s,"draggable","false"),h(t,"class","self-center"),h(e,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition"),h(e,"aria-label","User Menu")},m(a,r){A(a,e,r),p(e,t),p(t,s)},p(a,r){var n;r&8&&!Ne(s.src,l=(n=a[3])==null?void 0:n.profile_image_url)&&h(s,"src",l)},d(a){a&&u(e)}}}function Ht(i){let e,t,s,l,a,r,n,o,_=i[2].t("Notes")+"",d,D,c,m,w,C,U,j,I=i[1]&&Ae(i),E=i[3]!==void 0&&i[3]!==null&&Be(i);return C=new Ot({}),{c(){e=g("div"),t=g("nav"),s=g("div"),I&&I.c(),l=x(),a=g("div"),r=g("div"),n=g("div"),o=g("a"),d=z(_),D=x(),c=g("div"),E&&E.c(),m=x(),w=g("div"),q(C.$$.fragment),this.h()},l(V){e=b(V,"DIV",{class:!0});var N=k(e);t=b(N,"NAV",{class:!0});var R=k(t);s=b(R,"DIV",{class:!0});var M=k(s);I&&I.l(M),l=W(M),a=b(M,"DIV",{class:!0});var X=k(a);r=b(X,"DIV",{class:!0});var te=k(r);n=b(te,"DIV",{class:!0});var Z=k(n);o=b(Z,"A",{class:!0,href:!0});var P=k(o);d=Q(P,_),P.forEach(u),Z.forEach(u),te.forEach(u),D=W(X),c=b(X,"DIV",{class:!0});var K=k(c);E&&E.l(K),K.forEach(u),X.forEach(u),M.forEach(u),R.forEach(u),m=W(N),w=b(N,"DIV",{class:!0});var B=k(w);G(C.$$.fragment,B),B.forEach(u),N.forEach(u),this.h()},h(){h(o,"class","min-w-fit transition"),h(o,"href","/notes"),h(n,"class","flex gap-1 scrollbar-none overflow-x-auto w-fit text-center text-sm font-medium bg-transparent py-1 touch-auto pointer-events-auto"),h(r,"class",""),h(c,"class","self-center flex items-center gap-1"),h(a,"class","ml-2 py-0.5 self-center flex items-center justify-between w-full"),h(s,"class","flex items-center"),h(t,"class","px-2 pt-1.5 backdrop-blur-xl w-full drag-region"),h(w,"class","pb-1 flex-1 max-h-full overflow-y-auto @container"),h(e,"class",U="flex flex-col w-full h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(i[0]?"md:max-w-[calc(100%-260px)]":"")+" max-w-full")},m(V,N){A(V,e,N),p(e,t),p(t,s),I&&I.m(s,null),p(s,l),p(s,a),p(a,r),p(r,n),p(n,o),p(o,d),p(a,D),p(a,c),E&&E.m(c,null),p(e,m),p(e,w),Y(C,w,null),j=!0},p(V,[N]){V[1]?I?(I.p(V,N),N&2&&S(I,1)):(I=Ae(V),I.c(),S(I,1),I.m(s,l)):I&&(ce(),O(I,1,1,()=>{I=null}),fe()),(!j||N&4)&&_!==(_=V[2].t("Notes")+"")&&ee(d,_),V[3]!==void 0&&V[3]!==null?E?(E.p(V,N),N&8&&S(E,1)):(E=Be(V),E.c(),S(E,1),E.m(c,null)):E&&(ce(),O(E,1,1,()=>{E=null}),fe()),(!j||N&1&&U!==(U="flex flex-col w-full h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(V[0]?"md:max-w-[calc(100%-260px)]":"")+" max-w-full"))&&h(e,"class",U)},i(V){j||(S(I),S(E),S(C.$$.fragment,V),j=!0)},o(V){O(I),O(E),O(C.$$.fragment,V),j=!1},d(V){V&&u(e),I&&I.d(),E&&E.d(),J(C)}}}function Mt(i,e,t){let s,l,a,r;ie(i,Ve,d=>t(0,s=d)),ie(i,ze,d=>t(1,l=d)),ie(i,Qe,d=>t(3,r=d));const n=xe("i18n");return ie(i,n,d=>t(2,a=d)),[s,l,a,r,n,()=>{Ve.set(!s)},d=>{d.detail==="archived-chat"&&Ze.set(!0)}]}class hl extends He{constructor(e){super(),Me(this,e,Mt,Ht,Fe,{})}}export{hl as component};
//# sourceMappingURL=24.BK09Bg41.js.map
