import{S as be,i as we,s as ye,l as z,m as ge,o as Ie,d,p as G,g as te,q as J,r as ae,u as Se,k as T,v as ke,H as K,I as Q,e as p,t as X,C as Ee,c as v,a as b,b as Y,D as Me,f as _,h as u,E as De,G as Ve,j as Z,K as x,F as Ce,y as Le,M as $}from"../chunks/BsAB9Z30.js";import"../chunks/IHki7fMi.js";import{g as ee}from"../chunks/CfFtnCED.js";import{p as je}from"../chunks/C4FH1jaS.js";import{d as le}from"../chunks/I1CDPYOB.js";import{j as _e,a as se,c as Be,W as Ne,d as Ue}from"../chunks/BzMu2T5T.js";import{l as Fe,b as Oe,d as Te}from"../chunks/Dl9eNJPw.js";import{g as We,c as qe}from"../chunks/RK7lYsbz.js";import{M as Ae}from"../chunks/Bw1da7bY.js";import{g as He,a as Pe}from"../chunks/CbLk2dWY.js";import{g as Re}from"../chunks/C-MpeODL.js";import{t as ze}from"../chunks/D1AOsjeD.js";function he(e){let m,t,n,c,s,a,f,U,E,M,S=le(e[4].chat.timestamp).format("LLL")+"",j,w,F,D,V,i,h,W,q,A,C,L,l,k=e[11].t("Clone Chat")+"",B,I,O,r;function H(o){e[16](o)}function pe(o){e[17](o)}function ve(o){e[18](o)}let P={className:"h-full flex pt-4 pb-8 ",user:e[5],chatId:e[8],readOnly:!0,selectedModels:e[3],processing:Je,bottomPadding:e[13].length>0,sendMessage:Ke,continueResponse:Qe,regenerateResponse:Xe};return e[0]!==void 0&&(P.history=e[0]),e[7]!==void 0&&(P.messages=e[7]),e[2]!==void 0&&(P.autoScroll=e[2]),i=new Ae({props:P}),K.push(()=>Q(i,"history",H)),K.push(()=>Q(i,"messages",pe)),K.push(()=>Q(i,"autoScroll",ve)),{c(){m=p("div"),t=p("div"),n=p("div"),c=p("div"),s=p("div"),a=p("div"),f=X(e[6]),U=z(),E=p("div"),M=p("div"),j=X(S),F=z(),D=p("div"),V=p("div"),Ee(i.$$.fragment),A=z(),C=p("div"),L=p("div"),l=p("button"),B=X(k),this.h()},l(o){m=v(o,"DIV",{class:!0});var g=b(m);t=v(g,"DIV",{class:!0});var y=b(t);n=v(y,"DIV",{class:!0,id:!0});var N=b(n);c=v(N,"DIV",{class:!0});var oe=b(c);s=v(oe,"DIV",{class:!0});var R=b(s);a=v(R,"DIV",{class:!0});var re=b(a);f=Y(re,e[6]),re.forEach(d),U=G(R),E=v(R,"DIV",{class:!0});var ne=b(E);M=v(ne,"DIV",{class:!0});var ie=b(M);j=Y(ie,S),ie.forEach(d),ne.forEach(d),R.forEach(d),oe.forEach(d),F=G(N),D=v(N,"DIV",{class:!0});var ce=b(D);V=v(ce,"DIV",{class:!0});var ue=b(V);Me(i.$$.fragment,ue),ue.forEach(d),ce.forEach(d),N.forEach(d),A=G(y),C=v(y,"DIV",{class:!0});var de=b(C);L=v(de,"DIV",{class:!0});var fe=b(L);l=v(fe,"BUTTON",{class:!0});var me=b(l);B=Y(me,k),me.forEach(d),fe.forEach(d),de.forEach(d),y.forEach(d),g.forEach(d),this.h()},h(){var o;_(a,"class","text-2xl font-semibold line-clamp-1"),_(M,"class","text-gray-400"),_(E,"class","flex text-sm justify-between items-center mt-1"),_(s,"class","px-3"),_(c,"class",w="pt-5 px-2 w-full "+(((o=e[9])==null?void 0:o.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto"),_(V,"class","w-full"),_(D,"class","h-full w-full flex flex-col py-2"),_(n,"class","flex flex-col w-full flex-auto overflow-auto h-0"),_(n,"id","messages-container"),_(l,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),_(L,"class","pb-5"),_(C,"class","absolute bottom-0 right-0 left-0 flex justify-center w-full bg-linear-to-b from-transparent to-white dark:to-gray-900"),_(t,"class","flex flex-col flex-auto justify-center relative"),_(m,"class","h-screen max-h-[100dvh] w-full flex flex-col text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900")},m(o,g){te(o,m,g),u(m,t),u(t,n),u(n,c),u(c,s),u(s,a),u(a,f),u(s,U),u(s,E),u(E,M),u(M,j),u(n,F),u(n,D),u(D,V),De(i,V,null),u(t,A),u(t,C),u(C,L),u(L,l),u(l,B),I=!0,O||(r=Ve(l,"click",e[14]),O=!0)},p(o,g){var N;(!I||g&64)&&Z(f,o[6]),(!I||g&16)&&S!==(S=le(o[4].chat.timestamp).format("LLL")+"")&&Z(j,S),(!I||g&512&&w!==(w="pt-5 px-2 w-full "+(((N=o[9])==null?void 0:N.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto"))&&_(c,"class",w);const y={};g&32&&(y.user=o[5]),g&256&&(y.chatId=o[8]),g&8&&(y.selectedModels=o[3]),!h&&g&1&&(h=!0,y.history=o[0],x(()=>h=!1)),!W&&g&128&&(W=!0,y.messages=o[7],x(()=>W=!1)),!q&&g&4&&(q=!0,y.autoScroll=o[2],x(()=>q=!1)),i.$set(y),(!I||g&2048)&&k!==(k=o[11].t("Clone Chat")+"")&&Z(B,k)},i(o){I||(J(i.$$.fragment,o),I=!0)},o(o){ae(i.$$.fragment,o),I=!1},d(o){o&&d(m),Ce(i),O=!1,r()}}}function Ge(e){let m,t,n,c;document.title=m=`
		`+(e[6]?`${e[6].length>30?`${e[6].slice(0,30)}...`:e[6]} • ${e[10]}`:`${e[10]}`)+`
	`;let s=e[1]&&he(e);return{c(){t=z(),s&&s.c(),n=ge()},l(a){Ie("svelte-a2pwma",document.head).forEach(d),t=G(a),s&&s.l(a),n=ge()},m(a,f){te(a,t,f),s&&s.m(a,f),te(a,n,f),c=!0},p(a,[f]){(!c||f&1088)&&m!==(m=`
		`+(a[6]?`${a[6].length>30?`${a[6].slice(0,30)}...`:a[6]} • ${a[10]}`:`${a[10]}`)+`
	`)&&(document.title=m),a[1]?s?(s.p(a,f),f&2&&J(s,1)):(s=he(a),s.c(),J(s,1),s.m(n.parentNode,n)):s&&(Le(),ae(s,1,1,()=>{s=null}),Se())},i(a){c||(J(s),c=!0)},o(a){ae(s),c=!1},d(a){a&&(d(t),d(n)),s&&s.d(a)}}}let Je="";const Ke=()=>{},Qe=()=>{},Xe=()=>{};function Ye(e,m,t){let n,c,s,a,f,U;T(e,_e,l=>t(8,n=l)),T(e,je,l=>t(15,c=l)),T(e,se,l=>t(9,s=l)),T(e,Be,l=>t(19,a=l)),T(e,Ne,l=>t(10,f=l));const E=ke("i18n");T(e,E,l=>t(11,U=l)),le.extend(Fe);let M=!1,S=!0,j=[""],w=null,F=null,D="",V=[],i=[],h={messages:{},currentId:null};const W=async()=>{var k,B,I,O;const l=await He(localStorage.token).catch(r=>null);if(l)se.set(l.ui);else{let r={};try{r=JSON.parse(localStorage.getItem("settings")??"{}")}catch(H){}se.set(r)}if(await Ue.set(await Re(localStorage.token,((k=a==null?void 0:a.features)==null?void 0:k.enable_direct_connections)&&((s==null?void 0:s.directConnections)??null))),await _e.set(c.params.id),t(4,w=await We(localStorage.token,n).catch(async r=>(await ee("/"),null))),w){t(5,F=await Pe(localStorage.token,w.user_id).catch(H=>null));const r=w.chat;return r?(t(3,j=((r==null?void 0:r.models)??void 0)!==void 0?r.models:[r.models??""]),t(0,h=((r==null?void 0:r.history)??void 0)!==void 0?r.history:Te(r.messages)),t(6,D=r.title),t(2,S=!0),await $(),i.length>0&&((B=i.at(-1))!=null&&B.id)&&((I=i.at(-1))==null?void 0:I.id)in h.messages&&t(0,h.messages[(O=i.at(-1))==null?void 0:O.id].done=!0,h),await $(),!0):null}},q=async()=>{if(!w)return;const l=await qe(localStorage.token,w.id).catch(k=>(ze.error(`${k}`),null));l&&ee(`/c/${l.id}`)};function A(l){h=l,t(0,h)}function C(l){i=l,t(7,i),t(0,h)}function L(l){S=l,t(2,S)}return e.$$.update=()=>{e.$$.dirty&1&&t(7,i=Oe(h,h.currentId)),e.$$.dirty&32768&&c.params.id&&(async()=>await W()?(await $(),t(1,M=!0)):await ee("/"))()},[h,M,S,j,w,F,D,i,n,s,f,U,E,V,q,c,A,C,L]}class cs extends be{constructor(m){super(),we(this,m,Ye,Ge,ye,{})}}export{cs as component};
//# sourceMappingURL=44.DssO-FSa.js.map
