{"version":3,"mappings":"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","names":["insert_hydration","target","div","anchor","ctx","create_if_block_3","show_if","div3","append_hydration","div2","div1","div0","input","div4","div6","div5","t2_value","span","set_data","t0","t0_value","dirty","t2","button","i","each_blocks","t_value","_b","_a","capitalizeFirstLetter","_d","_c","t4_value","dayjs","create_if_block_2","attr","a","a_href_value","div8","div7","current","t4","each_value_1","ensure_array_like","get_key","document_1","title_value","saveAs","fileSaver","duration","relativeTime","loadLocale","locales","locale","error","i18n","getContext","loaded","query","noteItems","fuse","selectedNote","notes","showDeleteConfirm","groupNotes","res","grouped","note","timeRange","getTimeRange","init","getNotes","Fuse","createNoteHandler","content","createNewNote","toast","goto","downloadHandler","type","blob","downloadPdf","jsPDF","html2canvas","virtualWidth","virtualHeight","html","node","canvas","imgData","pdf","imgWidth","pageHeight","imgHeight","heightLeft","position","deleteNoteHandler","id","deleteNoteById","inputFilesHandler","inputFiles","file","$i18n","reader","event","name","marked","dragged","onDragOver","e","onDragLeave","onDrop","onDestroy","dropzoneElement","onMount","$page","value","$$invalidate","baseUrl","copyToClipboard","usermenu_changes","src_url_equal","img","img_src_value","create_if_block_1","if_block1","create_if_block","nav","t1","t1_value","showSidebar","$showSidebar","showArchivedChats"],"ignoreList":[],"sources":["../../../../../../src/lib/components/notes/Notes.svelte","../../../../../../src/routes/(app)/notes/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { marked } from 'marked';\n\n\timport { toast } from 'svelte-sonner';\n\timport fileSaver from 'file-saver';\n\timport Fuse from 'fuse.js';\n\n\tconst { saveAs } = fileSaver;\n\n\timport dayjs from '$lib/dayjs';\n\timport duration from 'dayjs/plugin/duration';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\n\tdayjs.extend(duration);\n\tdayjs.extend(relativeTime);\n\n\tasync function loadLocale(locales) {\n\t\tfor (const locale of locales) {\n\t\t\ttry {\n\t\t\t\tdayjs.locale(locale);\n\t\t\t\tbreak; // Stop after successfully loading the first available locale\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(`Could not load locale '${locale}':`, error);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Assuming $i18n.languages is an array of language codes\n\t$: loadLocale($i18n.languages);\n\n\timport { page } from '$app/stores';\n\timport { goto } from '$app/navigation';\n\timport { onMount, getContext, onDestroy } from 'svelte';\n\timport { WEBUI_NAME, config, prompts as _prompts, user } from '$lib/stores';\n\n\timport { createNewNote, deleteNoteById, getNotes } from '$lib/apis/notes';\n\timport { capitalizeFirstLetter, copyToClipboard, getTimeRange } from '$lib/utils';\n\n\timport EllipsisHorizontal from '../icons/EllipsisHorizontal.svelte';\n\timport DeleteConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\timport Search from '../icons/Search.svelte';\n\timport Plus from '../icons/Plus.svelte';\n\timport ChevronRight from '../icons/ChevronRight.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\timport Tooltip from '../common/Tooltip.svelte';\n\timport NoteMenu from './Notes/NoteMenu.svelte';\n\timport FilesOverlay from '../chat/MessageInput/FilesOverlay.svelte';\n\timport XMark from '../icons/XMark.svelte';\n\n\tconst i18n = getContext('i18n');\n\tlet loaded = false;\n\n\tlet importFiles = '';\n\tlet query = '';\n\n\tlet noteItems = [];\n\tlet fuse = null;\n\n\tlet selectedNote = null;\n\tlet notes = {};\n\t$: if (fuse) {\n\t\tnotes = groupNotes(\n\t\t\tquery\n\t\t\t\t? fuse.search(query).map((e) => {\n\t\t\t\t\t\treturn e.item;\n\t\t\t\t\t})\n\t\t\t\t: noteItems\n\t\t);\n\t}\n\n\tlet showDeleteConfirm = false;\n\n\tconst groupNotes = (res) => {\n\t\tconsole.log(res);\n\t\tif (!Array.isArray(res)) {\n\t\t\treturn {}; // or throw new Error(\"Notes response is not an array\")\n\t\t}\n\n\t\t// Build the grouped object\n\t\tconst grouped: Record<string, any[]> = {};\n\t\tfor (const note of res) {\n\t\t\tconst timeRange = getTimeRange(note.updated_at / 1000000000);\n\t\t\tif (!grouped[timeRange]) {\n\t\t\t\tgrouped[timeRange] = [];\n\t\t\t}\n\t\t\tgrouped[timeRange].push({\n\t\t\t\t...note,\n\t\t\t\ttimeRange\n\t\t\t});\n\t\t}\n\t\treturn grouped;\n\t};\n\n\tconst init = async () => {\n\t\tnoteItems = await getNotes(localStorage.token, true);\n\n\t\tfuse = new Fuse(noteItems, {\n\t\t\tkeys: ['title']\n\t\t});\n\t};\n\n\tconst createNoteHandler = async (content?: string) => {\n\t\t//  $i18n.t('New Note'),\n\t\tconst res = await createNewNote(localStorage.token, {\n\t\t\t// YYYY-MM-DD\n\t\t\ttitle: dayjs().format('YYYY-MM-DD'),\n\t\t\tdata: {\n\t\t\t\tcontent: {\n\t\t\t\t\tjson: null,\n\t\t\t\t\thtml: content ?? '',\n\t\t\t\t\tmd: content ?? ''\n\t\t\t\t}\n\t\t\t},\n\t\t\tmeta: null,\n\t\t\taccess_control: {}\n\t\t}).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tgoto(`/notes/${res.id}`);\n\t\t}\n\t};\n\n\tconst downloadHandler = async (type) => {\n\t\tconsole.log('downloadHandler', type);\n\t\tconsole.log('selectedNote', selectedNote);\n\t\tif (type === 'md') {\n\t\t\tconst blob = new Blob([selectedNote.data.content.md], { type: 'text/markdown' });\n\t\t\tsaveAs(blob, `${selectedNote.title}.md`);\n\t\t} else if (type === 'pdf') {\n\t\t\tawait downloadPdf(selectedNote);\n\t\t}\n\t};\n\n\tconst downloadPdf = async (note) => {\n\t\ttry {\n\t\t\tconst [{ default: jsPDF }, { default: html2canvas }] = await Promise.all([\n\t\t\t\timport('jspdf'),\n\t\t\t\timport('html2canvas-pro')\n\t\t\t]);\n\n\t\t\t// Define a fixed virtual screen size\n\t\t\tconst virtualWidth = 1024; // Fixed width (adjust as needed)\n\t\t\tconst virtualHeight = 1400; // Fixed height (adjust as needed)\n\n\t\t\t// STEP 1. Get a DOM node to render\n\t\t\tconst html = note.data?.content?.html ?? '';\n\t\t\tlet node;\n\t\t\tif (html instanceof HTMLElement) {\n\t\t\t\tnode = html;\n\t\t\t} else {\n\t\t\t\t// If it's HTML string, render to a temporary hidden element\n\t\t\t\tnode = document.createElement('div');\n\t\t\t\tnode.innerHTML = html;\n\t\t\t\tdocument.body.appendChild(node);\n\t\t\t}\n\n\t\t\t// Render to canvas with predefined width\n\t\t\tconst canvas = await html2canvas(node, {\n\t\t\t\tuseCORS: true,\n\t\t\t\tscale: 2, // Keep at 1x to avoid unexpected enlargements\n\t\t\t\twidth: virtualWidth, // Set fixed virtual screen width\n\t\t\t\twindowWidth: virtualWidth, // Ensure consistent rendering\n\t\t\t\twindowHeight: virtualHeight\n\t\t\t});\n\n\t\t\t// Remove hidden node if needed\n\t\t\tif (!(html instanceof HTMLElement)) {\n\t\t\t\tdocument.body.removeChild(node);\n\t\t\t}\n\n\t\t\tconst imgData = canvas.toDataURL('image/jpeg', 0.7);\n\n\t\t\t// A4 page settings\n\t\t\tconst pdf = new jsPDF('p', 'mm', 'a4');\n\t\t\tconst imgWidth = 210; // A4 width in mm\n\t\t\tconst pageHeight = 297; // A4 height in mm\n\n\t\t\t// Maintain aspect ratio\n\t\t\tconst imgHeight = (canvas.height * imgWidth) / canvas.width;\n\t\t\tlet heightLeft = imgHeight;\n\t\t\tlet position = 0;\n\n\t\t\tpdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight);\n\t\t\theightLeft -= pageHeight;\n\n\t\t\t// Handle additional pages\n\t\t\twhile (heightLeft > 0) {\n\t\t\t\tposition -= pageHeight;\n\t\t\t\tpdf.addPage();\n\n\t\t\t\tpdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight);\n\t\t\t\theightLeft -= pageHeight;\n\t\t\t}\n\n\t\t\tpdf.save(`${note.title}.pdf`);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error generating PDF', error);\n\n\t\t\ttoast.error(`${error}`);\n\t\t}\n\t};\n\n\tconst deleteNoteHandler = async (id) => {\n\t\tconst res = await deleteNoteById(localStorage.token, id).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tinit();\n\t\t}\n\t};\n\n\tconst inputFilesHandler = async (inputFiles) => {\n\t\t// Check if all the file is a markdown file and extract name and content\n\n\t\tfor (const file of inputFiles) {\n\t\t\tif (file.type !== 'text/markdown') {\n\t\t\t\ttoast.error($i18n.t('Only markdown files are allowed'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = async (event) => {\n\t\t\t\tconst content = event.target.result;\n\t\t\t\tlet name = file.name.replace(/\\.md$/, '');\n\n\t\t\t\tif (typeof content !== 'string') {\n\t\t\t\t\ttoast.error($i18n.t('Invalid file content'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Create a new note with the content\n\t\t\t\tconst res = await createNewNote(localStorage.token, {\n\t\t\t\t\ttitle: name,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\tjson: null,\n\t\t\t\t\t\t\thtml: marked.parse(content ?? ''),\n\t\t\t\t\t\t\tmd: content\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmeta: null,\n\t\t\t\t\taccess_control: {}\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\treturn null;\n\t\t\t\t});\n\n\t\t\t\tif (res) {\n\t\t\t\t\tinit();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treader.readAsText(file);\n\t\t}\n\t};\n\n\tlet dragged = false;\n\n\tconst onDragOver = (e) => {\n\t\te.preventDefault();\n\n\t\t// Check if a file is being dragged.\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\n\t\t\tdragged = true;\n\t\t} else {\n\t\t\tdragged = false;\n\t\t}\n\t};\n\n\tconst onDragLeave = () => {\n\t\tdragged = false;\n\t};\n\n\tconst onDrop = async (e) => {\n\t\te.preventDefault();\n\t\tconsole.log(e);\n\n\t\tif (e.dataTransfer?.files) {\n\t\t\tconst inputFiles = Array.from(e.dataTransfer?.files);\n\t\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\t\tconsole.log(inputFiles);\n\t\t\t\tinputFilesHandler(inputFiles);\n\t\t\t}\n\t\t}\n\n\t\tdragged = false;\n\t};\n\n\tonDestroy(() => {\n\t\tconsole.log('destroy');\n\t\tconst dropzoneElement = document.getElementById('notes-container');\n\n\t\tif (dropzoneElement) {\n\t\t\tdropzoneElement?.removeEventListener('dragover', onDragOver);\n\t\t\tdropzoneElement?.removeEventListener('drop', onDrop);\n\t\t\tdropzoneElement?.removeEventListener('dragleave', onDragLeave);\n\t\t}\n\t});\n\n\tonMount(async () => {\n\t\tif ($page.url.searchParams.get('content')) {\n\t\t\tconst content = $page.url.searchParams.get('content') ?? '';\n\t\t\tif (content) {\n\t\t\t\tcreateNoteHandler(content);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tawait init();\n\t\tloaded = true;\n\n\t\tconst dropzoneElement = document.getElementById('notes-container');\n\n\t\tdropzoneElement?.addEventListener('dragover', onDragOver);\n\t\tdropzoneElement?.addEventListener('drop', onDrop);\n\t\tdropzoneElement?.addEventListener('dragleave', onDragLeave);\n\t});\n</script>\n\n<svelte:head>\n\t<title>\n\t\t{$i18n.t('Notes')} • {$WEBUI_NAME}\n\t</title>\n</svelte:head>\n\n<FilesOverlay show={dragged} />\n\n<div id=\"notes-container\" class=\"w-full min-h-full h-full\">\n\t{#if loaded}\n\t\t<DeleteConfirmDialog\n\t\t\tbind:show={showDeleteConfirm}\n\t\t\ttitle={$i18n.t('Delete note?')}\n\t\t\ton:confirm={() => {\n\t\t\t\tdeleteNoteHandler(selectedNote.id);\n\t\t\t\tshowDeleteConfirm = false;\n\t\t\t}}\n\t\t>\n\t\t\t<div class=\" text-sm text-gray-500 truncate\">\n\t\t\t\t{$i18n.t('This will delete')} <span class=\"  font-semibold\">{selectedNote.title}</span>.\n\t\t\t</div>\n\t\t</DeleteConfirmDialog>\n\n\t\t<div class=\"flex flex-col gap-1 px-3.5\">\n\t\t\t<div class=\" flex flex-1 items-center w-full space-x-2\">\n\t\t\t\t<div class=\"flex flex-1 items-center\">\n\t\t\t\t\t<div class=\" self-center ml-1 mr-3\">\n\t\t\t\t\t\t<Search className=\"size-3.5\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\" w-full text-sm py-1 rounded-r-xl outline-hidden bg-transparent\"\n\t\t\t\t\t\tbind:value={query}\n\t\t\t\t\t\tplaceholder={$i18n.t('Search Notes')}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{#if query}\n\t\t\t\t\t\t<div class=\"self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tquery = '';\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<XMark className=\"size-3\" strokeWidth=\"2\" />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"px-4.5 @container h-full pt-2\">\n\t\t\t{#if Object.keys(notes).length > 0}\n\t\t\t\t<div class=\"pb-10\">\n\t\t\t\t\t{#each Object.keys(notes) as timeRange}\n\t\t\t\t\t\t<div class=\"w-full text-xs text-gray-500 dark:text-gray-500 font-medium pb-2.5\">\n\t\t\t\t\t\t\t{$i18n.t(timeRange)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"mb-5 gap-2.5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#each notes[timeRange] as note, idx (note.id)}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\" flex space-x-4 cursor-pointer w-full px-4.5 py-4 border border-gray-50 dark:border-gray-850 bg-transparent dark:hover:bg-gray-850 hover:bg-white rounded-2xl transition\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\" flex flex-1 space-x-4 cursor-pointer w-full\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={`/notes/${note.id}`}\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full -translate-y-0.5 flex flex-col justify-between\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"  flex items-center gap-2 self-center mb-1 justify-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\" font-semibold line-clamp-1 capitalize\">{note.title}</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<NoteMenu\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDownload={(type) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedNote = note;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdownloadHandler(type);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonCopyLink={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst baseUrl = window.location.origin;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst res = await copyToClipboard(`${baseUrl}/notes/${note.id}`);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.success($i18n.t('Copied link to clipboard'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.error($i18n.t('Failed to copy link'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDelete={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedNote = note;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center w-fit text-sm p-1 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisHorizontal className=\"size-5\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</NoteMenu>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" text-xs text-gray-500 dark:text-gray-500 mb-3 line-clamp-3 min-h-10\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#if note.data?.content?.md}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{note.data?.content?.md}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('No content')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" text-xs px-0.5 w-full flex justify-between items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{dayjs(note.updated_at / 1000000).fromNow()}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent={note?.user?.email ?? $i18n.t('Deleted User')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex shrink-0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top-start\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"shrink-0 text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('By {{name}}', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: capitalizeFirstLetter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnote?.user?.name ?? note?.user?.email ?? $i18n.t('Deleted User')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t{:else}\n\t\t\t\t<div class=\"w-full h-full flex flex-col items-center justify-center\">\n\t\t\t\t\t<div class=\"pb-20 text-center\">\n\t\t\t\t\t\t<div class=\" text-xl font-medium text-gray-400 dark:text-gray-600\">\n\t\t\t\t\t\t\t{$i18n.t('No Notes')}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"mt-1 text-sm text-gray-300 dark:text-gray-700\">\n\t\t\t\t\t\t\t{$i18n.t('Create your first note by clicking on the plus button below.')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"absolute bottom-0 left-0 right-0 p-5 max-w-full flex justify-end\">\n\t\t\t<div class=\"flex gap-0.5 justify-end w-full\">\n\t\t\t\t<Tooltip content={$i18n.t('Create Note')}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\tcreateNoteHandler();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"size-4.5\" strokeWidth=\"2.5\" />\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<!-- <button\n\t\t\t\tclass=\"cursor-pointer p-2.5 flex rounded-full hover:bg-gray-100 dark:hover:bg-gray-850 transition shadow-xl\"\n\t\t\t>\n\t\t\t\t<SparklesSolid className=\"size-4\" />\n\t\t\t</button> -->\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- {#if $user?.role === 'admin'}\n\t\t<div class=\" flex justify-end w-full mb-3\">\n\t\t\t<div class=\"flex space-x-2\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"notes-import-input\"\n\t\t\t\t\tbind:files={importFiles}\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\taccept=\".md\"\n\t\t\t\t\thidden\n\t\t\t\t\ton:change={() => {\n\t\t\t\t\t\tconsole.log(importFiles);\n\n\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\treader.onload = async (event) => {\n\t\t\t\t\t\t\tconsole.log(event.target.result);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\treader.readAsText(importFiles[0]);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tconst notesImportInputElement = document.getElementById('notes-import-input');\n\t\t\t\t\t\tif (notesImportInputElement) {\n\t\t\t\t\t\t\tnotesImportInputElement.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" self-center mr-2 font-medium line-clamp-1\">{$i18n.t('Import Notes')}</div>\n\n\t\t\t\t\t<div class=\" self-center\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 9.5a.75.75 0 0 1-.75-.75V8.06l-.72.72a.75.75 0 0 1-1.06-1.06l2-2a.75.75 0 0 1 1.06 0l2 2a.75.75 0 1 1-1.06 1.06l-.72-.72v2.69a.75.75 0 0 1-.75.75Z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t{/if} -->\n\t{:else}\n\t\t<div class=\"w-full h-full flex justify-center items-center\">\n\t\t\t<Spinner className=\"size-5\" />\n\t\t</div>\n\t{/if}\n</div>\n","<script>\n\timport { mobile, showArchivedChats, showSidebar, user } from '$lib/stores';\n\timport { getContext } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\timport UserMenu from '$lib/components/layout/Sidebar/UserMenu.svelte';\n\timport Notes from '$lib/components/notes/Notes.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Sidebar from '$lib/components/icons/Sidebar.svelte';\n</script>\n\n<div\n\tclass=\" flex flex-col w-full h-screen max-h-[100dvh] transition-width duration-200 ease-in-out {$showSidebar\n\t\t? 'md:max-w-[calc(100%-260px)]'\n\t\t: ''} max-w-full\"\n>\n\t<nav class=\"   px-2 pt-1.5 backdrop-blur-xl w-full drag-region\">\n\t\t<div class=\" flex items-center\">\n\t\t\t{#if $mobile}\n\t\t\t\t<div class=\"{$showSidebar ? 'md:hidden' : ''} flex flex-none items-center\">\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\tcontent={$showSidebar ? $i18n.t('Close Sidebar') : $i18n.t('Open Sidebar')}\n\t\t\t\t\t\tinteractive={true}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tid=\"sidebar-toggle-button\"\n\t\t\t\t\t\t\tclass=\" cursor-pointer flex rounded-lg hover:bg-gray-100 dark:hover:bg-gray-850 transition cursor-\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tshowSidebar.set(!$showSidebar);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\" self-center p-1.5\">\n\t\t\t\t\t\t\t\t<Sidebar />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"ml-2 py-0.5 self-center flex items-center justify-between w-full\">\n\t\t\t\t<div class=\"\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex gap-1 scrollbar-none overflow-x-auto w-fit text-center text-sm font-medium bg-transparent py-1 touch-auto pointer-events-auto\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<a class=\"min-w-fit transition\" href=\"/notes\">\n\t\t\t\t\t\t\t{$i18n.t('Notes')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\" self-center flex items-center gap-1\">\n\t\t\t\t\t{#if $user !== undefined && $user !== null}\n\t\t\t\t\t\t<UserMenu\n\t\t\t\t\t\t\tclassName=\"max-w-[240px]\"\n\t\t\t\t\t\t\trole={$user?.role}\n\t\t\t\t\t\t\thelp={true}\n\t\t\t\t\t\t\ton:show={(e) => {\n\t\t\t\t\t\t\t\tif (e.detail === 'archived-chat') {\n\t\t\t\t\t\t\t\t\tshowArchivedChats.set(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t\t\t\t\taria-label=\"User Menu\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\" self-center\">\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={$user?.profile_image_url}\n\t\t\t\t\t\t\t\t\t\tclass=\"size-6 object-cover rounded-full\"\n\t\t\t\t\t\t\t\t\t\talt=\"User profile\"\n\t\t\t\t\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</UserMenu>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</nav>\n\n\t<div class=\" pb-1 flex-1 max-h-full overflow-y-auto @container\">\n\t\t<Notes />\n\t</div>\n</div>\n"],"file":"_app/immutable/nodes/24.BK09Bg41.js"}