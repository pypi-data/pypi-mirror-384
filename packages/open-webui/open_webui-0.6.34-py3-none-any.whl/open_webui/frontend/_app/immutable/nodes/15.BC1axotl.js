import{S as q,i as U,s as O,m as d,g as b,q as p,r as _,u as R,d as g,k as E,v as y,w as C,y as V,n as D,e as W,C as B,c as M,a as P,D as J,f as Q,E as H,F as L}from"../chunks/BsAB9Z30.js";import"../chunks/IHki7fMi.js";import{t as S}from"../chunks/D1AOsjeD.js";import{g as j}from"../chunks/CfFtnCED.js";import{a as z,c as A,b as I,f as G,d as K}from"../chunks/BzMu2T5T.js";import{c as T,g as X}from"../chunks/DpOSwv0f.js";import{F as Y}from"../chunks/DOQfqgOE.js";import{g as Z}from"../chunks/C-MpeODL.js";import{e as $,c as x}from"../chunks/Dl9eNJPw.js";function N(a){var l;let s=(l=a[2])==null?void 0:l.content,n,e,o=v(a);return{c(){o.c(),n=d()},l(i){o.l(i),n=d()},m(i,u){o.m(i,u),b(i,n,u),e=!0},p(i,u){var t;u&4&&O(s,s=(t=i[2])==null?void 0:t.content)?(V(),_(o,1,1,D),R(),o=v(i),o.c(),p(o,1),o.m(n.parentNode,n)):o.p(i,u)},i(i){e||(p(o),e=!0)},o(i){_(o),e=!1},d(i){i&&g(n),o.d(i)}}}function v(a){var o,l,i,u;let s,n,e;return n=new Y({props:{id:((o=a[2])==null?void 0:o.id)??"",name:((l=a[2])==null?void 0:l.name)??"",meta:((i=a[2])==null?void 0:i.meta)??{description:""},content:((u=a[2])==null?void 0:u.content)??"",clone:a[1],onSave:a[5]}}),{c(){s=W("div"),B(n.$$.fragment),this.h()},l(t){s=M(t,"DIV",{class:!0});var c=P(s);J(n.$$.fragment,c),c.forEach(g),this.h()},h(){Q(s,"class","px-[16px] h-full")},m(t,c){b(t,s,c),H(n,s,null),e=!0},p(t,c){var w,r,m,h;const f={};c&4&&(f.id=((w=t[2])==null?void 0:w.id)??""),c&4&&(f.name=((r=t[2])==null?void 0:r.name)??""),c&4&&(f.meta=((m=t[2])==null?void 0:m.meta)??{description:""}),c&4&&(f.content=((h=t[2])==null?void 0:h.content)??""),c&2&&(f.clone=t[1]),n.$set(f)},i(t){e||(p(n.$$.fragment,t),e=!0)},o(t){_(n.$$.fragment,t),e=!1},d(t){t&&g(s),L(n)}}}function ee(a){let s,n,e=a[0]&&N(a);return{c(){e&&e.c(),s=d()},l(o){e&&e.l(o),s=d()},m(o,l){e&&e.m(o,l),b(o,s,l),n=!0},p(o,[l]){o[0]?e?(e.p(o,l),l&1&&p(e,1)):(e=N(o),e.c(),p(e,1),e.m(s.parentNode,s)):e&&(V(),_(e,1,1,()=>{e=null}),R())},i(o){n||(p(e),n=!0)},o(o){_(e),n=!1},d(o){o&&g(s),e&&e.d(o)}}}function oe(a,s,n){let e,o,l;E(a,z,r=>n(6,e=r)),E(a,A,r=>n(7,o=r));const i=y("i18n");E(a,i,r=>n(8,l=r));let u=!1,t=!1,c=null;const f=async r=>{var k;const m=$(r.content);if(x((m==null?void 0:m.required_open_webui_version)??"0.0.0",I)){S.error(l.t("Open WebUI version (v{{OPEN_WEBUI_VERSION}}) is lower than required version (v{{REQUIRED_VERSION}})",{OPEN_WEBUI_VERSION:I,REQUIRED_VERSION:(m==null?void 0:m.required_open_webui_version)??"0.0.0"}));return}await T(localStorage.token,{id:r.id,name:r.name,meta:r.meta,content:r.content}).catch(F=>(S.error(`${F}`),null))&&(S.success(l.t("Function created successfully")),G.set(await X(localStorage.token)),K.set(await Z(localStorage.token,((k=o==null?void 0:o.features)==null?void 0:k.enable_direct_connections)&&((e==null?void 0:e.directConnections)??null),!1,!0)),await j("/admin/functions"))};return C(()=>{window.addEventListener("message",async r=>{["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(r.origin)&&n(2,c=JSON.parse(r.data))}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.function&&(n(2,c=JSON.parse(sessionStorage.function)),sessionStorage.removeItem("function"),n(1,t=!0)),n(0,u=!0)}),[u,t,c,i,f,r=>{f(r)}]}class fe extends q{constructor(s){super(),U(this,s,oe,ee,O,{})}}export{fe as component};
//# sourceMappingURL=15.BC1axotl.js.map
