import{S as R,i as v,s as b,m as g,g as I,q as f,r as p,u as N,d as h,v as V,k as q,w as U,y as O,n as y,C as T,D as $,E as W,F as B}from"../chunks/BsAB9Z30.js";import"../chunks/IHki7fMi.js";import{g as C}from"../chunks/CfFtnCED.js";import{c as D,g as P}from"../chunks/lIeQgTNv.js";import{T as F}from"../chunks/CBAJg9Ed.js";import{b as k,t as J}from"../chunks/BzMu2T5T.js";import{e as M,c as Q}from"../chunks/Dl9eNJPw.js";import{t as d}from"../chunks/D1AOsjeD.js";function E(i){var a;let r=(a=i[2])==null?void 0:a.content,n,e,o=S(i);return{c(){o.c(),n=g()},l(s){o.l(s),n=g()},m(s,t){o.m(s,t),I(s,n,t),e=!0},p(s,t){var c;t&4&&b(r,r=(c=s[2])==null?void 0:c.content)?(O(),p(o,1,1,y),N(),o=S(s),o.c(),f(o,1),o.m(n.parentNode,n)):o.p(s,t)},i(s){e||(f(o),e=!0)},o(s){p(o),e=!1},d(s){s&&h(n),o.d(s)}}}function S(i){var e,o,a,s;let r,n;return r=new F({props:{id:((e=i[2])==null?void 0:e.id)??"",name:((o=i[2])==null?void 0:o.name)??"",meta:((a=i[2])==null?void 0:a.meta)??{description:""},content:((s=i[2])==null?void 0:s.content)??"",access_control:null,clone:i[1],onSave:i[5]}}),{c(){T(r.$$.fragment)},l(t){$(r.$$.fragment,t)},m(t,c){W(r,t,c),n=!0},p(t,c){var l,u,w,_;const m={};c&4&&(m.id=((l=t[2])==null?void 0:l.id)??""),c&4&&(m.name=((u=t[2])==null?void 0:u.name)??""),c&4&&(m.meta=((w=t[2])==null?void 0:w.meta)??{description:""}),c&4&&(m.content=((_=t[2])==null?void 0:_.content)??""),c&2&&(m.clone=t[1]),r.$set(m)},i(t){n||(f(r.$$.fragment,t),n=!0)},o(t){p(r.$$.fragment,t),n=!1},d(t){B(r,t)}}}function H(i){let r,n,e=i[0]&&E(i);return{c(){e&&e.c(),r=g()},l(o){e&&e.l(o),r=g()},m(o,a){e&&e.m(o,a),I(o,r,a),n=!0},p(o,[a]){o[0]?e?(e.p(o,a),a&1&&f(e,1)):(e=E(o),e.c(),f(e,1),e.m(r.parentNode,r)):e&&(O(),p(e,1,1,()=>{e=null}),N())},i(o){n||(f(e),n=!0)},o(o){p(e),n=!1},d(o){o&&h(r),e&&e.d(o)}}}function L(i,r,n){let e;const o=V("i18n");q(i,o,l=>n(6,e=l));let a=!1,s=!1,t=null;const c=async l=>{const u=M(l.content);if(Q((u==null?void 0:u.required_open_webui_version)??"0.0.0",k)){d.error(e.t("Open WebUI version (v{{OPEN_WEBUI_VERSION}}) is lower than required version (v{{REQUIRED_VERSION}})",{OPEN_WEBUI_VERSION:k,REQUIRED_VERSION:(u==null?void 0:u.required_open_webui_version)??"0.0.0"}));return}await D(localStorage.token,{id:l.id,name:l.name,meta:l.meta,content:l.content,access_control:l.access_control}).catch(_=>(d.error(`${_}`),null))&&(d.success(e.t("Tool created successfully")),J.set(await P(localStorage.token)),await C("/workspace/tools"))};return U(()=>{window.addEventListener("message",async l=>{["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(l.origin)&&n(2,t=JSON.parse(l.data))}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.tool&&(n(2,t=JSON.parse(sessionStorage.tool)),sessionStorage.removeItem("tool"),n(1,s=!0)),n(0,a=!0)}),[a,s,t,o,c,l=>{c(l)}]}class x extends R{constructor(r){super(),v(this,r,L,H,b,{})}}export{x as component};
//# sourceMappingURL=40.L9XgyarI.js.map
