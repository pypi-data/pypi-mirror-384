(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[491],{3280:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/benchmarks",function(){return t(6006)}])},6006:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return $}});var r=t(5893),n=t(5321),l=t(8233),s=t(3967),i=t.n(s),c=t(7294),o=t(1664),d=t.n(o),m=t(3126),h=t(6811),u=t(2294),_=t(3397),p=t(2033),g=t.n(p),x=t(9375),j=t(8901),b=t.n(j),k=t(1163),y=t(4225);let v=(0,c.createContext)({benchmarks:null}),f=()=>(0,c.useContext)(v),N=e=>{let{children:a}=e,[t,n]=(0,c.useState)([]),[l,s]=(0,c.useState)(!1),{get:i}=(0,y.e)();return((0,c.useEffect)(()=>{(async()=>{s(!0);let e=Object.values(await (await i("benchmarks/")).json()).map(e=>({name:e.display_name,description:e.description,catalogUrl:e.catalog_url,url:e.url,type:e.type,dataset:e.dataset_name,tags:e.tags,groupByFieldsToValues:Object.fromEntries(Object.entries(e.group_by_fields).map(e=>{let[a,t]=e;return[a,Object.fromEntries(Object.entries(t).map(e=>{let[a,t]=e;return[a,{datasetLen:t.dataset_len,groupByValue:t.group_by_value,judgeResults:t.judge_results}]}))]}))}));e.sort((e,a)=>e.name.localeCompare(a.name)),n(e),s(!1)})()},[i]),l||null===t)?(0,r.jsx)(m.gbz,{withOverlay:!0}):(0,r.jsx)(v.Provider,{value:{benchmarks:t},children:a})},C=(0,c.createContext)({benchmark:null,selectedCriteriaName:null,getURLFromBenchmark:()=>"",updateURLFromBenchmark:()=>{}}),B=()=>(0,c.useContext)(C),T=e=>{let{children:a}=e,t=(0,k.useRouter)(),{benchmarks:n}=f(),l=(0,c.useMemo)(()=>t.query.criteriaName?t.query.criteriaName:null,[t.query.criteriaName]),s=(0,c.useMemo)(()=>{let e=t.query.benchmark?t.query.benchmark:null,a=t.query.type?t.query.type:null;return(t.query.criteriaName&&t.query.criteriaName,null!==e&&null!==a)?n.find(t=>t.name===e&&t.type===a):null},[n,t.query.benchmark,t.query.criteriaName,t.query.type]),i=(0,c.useCallback)((e,a)=>{let t=[{key:"benchmark",value:e.name},{key:"type",value:e.type}];void 0!==a&&t.push({key:"criteriaName",value:a});let r=(0,_.f0)(t);return"/benchmarks/".concat(r)},[]),o=(0,c.useCallback)((e,a)=>{let r=i(e,a);t.push(r,r,{shallow:!0})},[i,t]);return(0,r.jsx)(C.Provider,{value:{benchmark:s,getURLFromBenchmark:i,updateURLFromBenchmark:o,selectedCriteriaName:l},children:a})},F={accuracy:"Accuracy",positional_bias_rate:"Positional bias rate",pearson:"Pearson",f1_macro:"F1 macro"},w=e=>{let{groupByField:a,groupByValue:t,groupByValueResult:l,className:s,style:o}=e,{benchmark:d}=B(),{getCriteria:h}=(0,n.L)(),[u,p]=(0,c.useState)(!1),g=(0,c.useMemo)(()=>Object.keys(Object.values(l.judgeResults)[0].results),[l]),j=(0,c.useMemo)(()=>g.map((e,a)=>"pearson"===e?(0,r.jsxs)("div",{className:b().headerWithTooltip,children:[F[e],(0,r.jsx)(m.ua7,{label:(0,r.jsx)("p",{style:{textAlign:"center"},children:"Calculate the Pearson correlation coefficient between the LLM rating and the human rating."}),align:"top",children:(0,r.jsx)(x.d,{className:b().headerInfoIcon})})]},a):F[e]||(0,_.aY)(e)),[g]),k=e=>"positional_bias_rate"===e,y=(e,a)=>(k(a)?Math.min:Math.max)(...e),v=(e,a)=>null!==a?Math.round(100*a)/100:"-",f=(0,c.useMemo)(()=>Object.values(l.judgeResults).sort((e,a)=>0!==e.model.localeCompare(a.model)?e.model.localeCompare(a.model):e.judge.localeCompare(a.judge)),[l.judgeResults]);return null!==d&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(m.n9L,{className:i()(s,b().root),style:o,children:[(0,r.jsxs)("div",{className:b().criteriaHeader,children:[(0,r.jsx)("div",{className:b().criteriaInfo,children:(0,r.jsx)("h5",{children:"".concat((0,_.hz)(a),": ").concat((0,_.aY)(t))})}),(0,r.jsx)("p",{style:{paddingTop:"0.5rem",fontStyle:"italic",color:"gray"},children:"Number of instances: ".concat(l.datasetLen)})]}),(0,r.jsx)("div",{className:i()(b().table),children:(0,r.jsxs)(m.iA_,{size:"lg",useZebraStyles:!1,children:[(0,r.jsx)(m.ssF,{children:(0,r.jsxs)(m.SCH,{children:[(0,r.jsx)(m.xDH,{children:"Evaluator"},0),j.map((e,a)=>(0,r.jsx)(m.xDH,{children:e},a))]})}),(0,r.jsx)(m.RMI,{children:f.map((e,a)=>(0,r.jsxs)(m.SCH,{children:[(0,r.jsx)(m.pj1,{children:(0,_.LF)("".concat(e.model," (").concat(e.judge,")"))}),g.map(a=>(0,r.jsx)(m.pj1,{className:i()({[b().highlightedCellText]:e.results[a]===y(f.map(e=>e.results[a]),a)}),children:v(a,e.results[a])},a))]},a))})]})})]})})};var S=t(1647),I=t(7482),O=t(981),E=t.n(O);let D=()=>{let{benchmarks:e}=f(),{benchmark:a,selectedCriteriaName:t,updateURLFromBenchmark:n}=B(),l=(0,c.useMemo)(()=>(null==e?void 0:e.filter(e=>e.type===I.f7.DIRECT))||[],[e]),s=(0,c.useMemo)(()=>(null==e?void 0:e.filter(e=>e.type===I.f7.PAIRWISE))||[],[e]),[o,d]=(0,c.useState)({direct:!0,pairwise:!0}),[h,u]=(0,c.useState)(()=>{let a={};return e&&e.forEach(e=>{a["".concat(null==e?void 0:e.name,"_").concat(null==e?void 0:e.type)]=!1}),a}),p=e=>d({...o,[e]:!o[e]}),g=e=>u({...h,[e]:!h[e]});(0,c.useEffect)(()=>{a&&null!==t&&!h["".concat(a.name,"_").concat(a.type)]&&u({...h,["".concat(a.name,"_").concat(a.type)]:!0})},[a,h,t]);let x=(0,c.useMemo)(()=>a?["".concat(a.name,"_").concat(a.type)]:[],[a]),j=(0,c.useMemo)(()=>a&&t?["".concat(t,"_").concat(a.name,"_").concat(a.type)]:[],[a,t]),b=(e,a)=>{e.stopPropagation(),e.preventDefault(),n(a)},k=(e,a,t)=>{e.stopPropagation(),e.preventDefault(),n(a,t)};return(0,r.jsx)("aside",{className:i()(E().sidebar),children:(0,r.jsx)("div",{role:"tabpanel",className:E().panel,tabIndex:-1,children:(0,r.jsxs)("section",{className:i()(E().root),children:[(0,r.jsx)("header",{className:E().header,children:(0,r.jsx)("h2",{className:E().heading,children:"Benchmark Catalog"})}),(0,r.jsx)("div",{className:E().content,children:(0,r.jsx)("div",{className:E().prompts,children:(0,r.jsx)("section",{className:E().section,children:(0,r.jsx)("div",{className:E()["tree-wrapper"],children:(0,r.jsxs)(m.LQJ,{className:E()["tree-root"],label:"",selected:j.length>0?j:x,id:"tree-view",children:[(0,r.jsx)(m.OFT,{id:"direct",label:S.zu,onSelect:()=>p("direct"),onToggle:()=>p("direct"),isExpanded:o.direct,selected:x.length>0&&j.length>0&&j[0].endsWith(x[0])?[]:x,children:l.map((e,a)=>(0,r.jsx)(m.OFT,{label:(0,r.jsx)("div",{className:E()["tree-node-content"],children:(0,r.jsx)("span",{className:E()["tree-node-label"],children:(0,_.aY)(e.name)})}),id:"".concat(e.name,"_direct"),onClick:a=>b(a,e),onToggle:()=>g("".concat(e.name,"_direct")),isExpanded:h["".concat(e.name,"_direct")],selected:j,children:Object.keys(e.groupByFieldsToValues.criteria).map((a,t)=>(0,r.jsx)(m.OFT,{label:(0,r.jsx)("div",{className:E()["tree-node-content"],children:(0,r.jsx)("span",{className:i()(E()["tree-node-label"],E()["tree-node-label-indent"]),children:"".concat((0,_.aY)(a))})}),id:"".concat(a,"_").concat(e.name,"_direct"),onClick:t=>k(t,e,a),selected:j},"".concat(a,"_").concat(e.name,"_direct")))},"".concat(e.name,"_direct")))}),(0,r.jsx)(m.OFT,{id:"pairwise",label:S.o6,onSelect:()=>p("pairwise"),onToggle:()=>p("pairwise"),isExpanded:o.pairwise,children:s.map((e,a)=>(0,r.jsx)(m.OFT,{label:(0,r.jsx)("div",{className:E()["tree-node-content"],children:(0,r.jsx)("span",{className:E()["tree-node-label"],children:(0,_.aY)(e.name)})}),id:"".concat(e.name,"_pairwise"),onClick:a=>b(a,e),onToggle:()=>g("".concat(e.name,"_pairwise")),isExpanded:h["".concat(e.name,"_pairwise")],children:Object.keys(e.groupByFieldsToValues.criteria).map((a,t)=>(0,r.jsx)(m.OFT,{label:(0,r.jsx)("div",{className:E()["tree-node-content"],children:(0,r.jsx)("span",{className:i()(E()["tree-node-label"],E()["tree-node-label-indent"]),children:"".concat((0,_.aY)(a))})}),id:"".concat(a,"_").concat(e.name,"_pairwise"),onClick:t=>k(t,e,a)},"".concat(a,"_").concat(e.name,"_pairwise")))},"".concat(e.name,"_pairwise")))})]})})})})})]})})})};var M=t(7563),L=t.n(M);let z=()=>{let{benchmark:e,selectedCriteriaName:a}=B(),t=(0,c.useMemo)(()=>e?Object.keys(e.groupByFieldsToValues):[],[e]),[n,l]=(0,c.useState)("criteria");(0,c.useEffect)(()=>{l("criteria")},[e]);let s=(0,c.useMemo)(()=>e&&n in e.groupByFieldsToValues?e.groupByFieldsToValues[n]:[],[e,n]);return null!==e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D,{}),(0,r.jsxs)("div",{className:i()(L().root,L().leftPadding),children:[(0,r.jsxs)(m.aGc,{className:L().breadcrumb,children:[(0,r.jsx)(m.gN6,{isCurrentPage:!1,children:(0,r.jsx)(d(),{href:"/benchmarks",children:"All benchmarks"})}),(0,r.jsx)(m.gN6,{isCurrentPage:!0,children:(0,r.jsx)("p",{children:e.name})})]}),(0,r.jsx)("h3",{className:i()(L().title,L().bottomDivider),children:"Benchmarks"}),(0,r.jsx)("div",{className:i()(L().bottomDivider,L().benchmarkHeader),children:(0,r.jsxs)("div",{className:L().benchmarkTile,children:[(0,r.jsx)("h4",{children:(0,_.aY)(e.name)}),(0,r.jsx)("div",{className:L()["vertical-divider"]}),(0,r.jsx)(u.X,{type:e.type})]})}),(0,r.jsxs)("div",{className:g()["benchmark-actions-container"],children:[(0,r.jsxs)("div",{className:g()["benchmark-buttons-container"],children:[(0,r.jsx)(m.zxk,{href:e.catalogUrl,target:"_blank",rel:"noopener noreferrer",kind:"ghost",renderIcon:h.GI,children:"Unitxt catalog"}),e.url&&(0,r.jsx)(m.zxk,{href:e.url,target:"_blank",rel:"noopener noreferrer",kind:"ghost",renderIcon:h.GI,children:"Dataset description"})]}),(0,r.jsxs)(m.PhF,{id:"groupByFieldOption-selector",labelText:"Select an option to group results",onChange:e=>l(e.target.value),value:n,inline:!0,className:g()["benchmark-groupby-select"],readOnly:1===t.length,children:[(0,r.jsx)(m.QlF,{text:"",value:""},"Empty"),t.map((e,a)=>(0,r.jsx)(m.QlF,{text:(0,_.hz)(e),value:e},a))]})]}),(0,r.jsx)("div",{className:i()(L().criteriaBenchmark,{[L().multipleColumns]:Object.keys(s).length>1}),children:Object.entries(s).map((e,a)=>{let[t,l]=e;return(0,r.jsx)(w,{groupByField:n,groupByValue:t,groupByValueResult:l},a)})})]})]})};var P=t(614),V=t(3108),R=t.n(V),q=t(9479),G=t.n(q);let Y=e=>{let{style:a,className:t,size:n,name:l,color:s,onClick:c}=e;return(0,r.jsx)(m.Vp9,{style:a,className:i()(t,G()["usecase-tag"]),type:s,size:n||"md",onClick:c,children:l})},H=e=>{let{benchmark:a,tagToColor:t,selectedCriteriaItems:n,setSelectedItems:l}=e,{isDarkMode:s}=(0,P.TC)(),{getURLFromBenchmark:o,updateURLFromBenchmark:h}=B(),u=(0,c.useMemo)(()=>Object.keys(a.groupByFieldsToValues.criteria),[a.groupByFieldsToValues]),p=(0,c.useMemo)(()=>{let e={name:"...",highlighted:!1,clickable:!1};if(!(u.length>=5))return u.map(e=>({name:e,highlighted:n.includes(e),clickable:!0}));if(0===n.length)return[...u.slice(0,5).map(e=>({name:e,highlighted:!1,clickable:!0})),e];{let a=u.filter(e=>n.includes(e));return a.length>=5?[...a.map(e=>({name:e,highlighted:!0,clickable:!0})),e]:[...a.map(e=>({name:e,highlighted:!0,clickable:!0})),...u.filter(e=>!a.map(e=>e).includes(e)).slice(0,5-a.length).map(e=>({name:e,highlighted:!1,clickable:!0})),e]}},[u,n]),g=(0,c.useCallback)((e,a)=>{e.preventDefault(),e.stopPropagation(),l(e=>[...e,a])},[l]);return(0,r.jsxs)(m.n9L,{className:i()(R().root,{[R()["card-white-mode"]]:!s()}),onClick:()=>{h(a)},children:[(0,r.jsx)("div",{className:R()["title-row"],children:(0,r.jsx)("h5",{className:R().title,children:(0,_.aY)(a.name)})}),(0,r.jsx)(m.QI$,{className:R().list,children:p.map((e,t)=>(0,r.jsx)(m.HCh,{children:e.clickable?(0,r.jsx)(d(),{href:o(a,u.find(a=>a===e.name)),className:R().nameLink,children:e.highlighted?(0,r.jsx)("mark",{children:(0,_.aY)(e.name)}):(0,_.aY)(e.name)}):(0,r.jsx)("div",{children:e.name})},t))}),(0,r.jsxs)("div",{className:R().tagList,children:[(0,r.jsx)(Y,{name:(0,_.FN)(a.type,S.zu,S.o6),className:R().badge,size:"md",color:t[(0,_.FN)(a.type,S.zu,S.o6)],onClick:e=>g(e,(0,_.FN)(a.type,S.zu,S.o6))}),a.tags.map((e,a)=>(0,r.jsx)(Y,{className:R().badge,name:(0,_.LF)(e),color:t[e],size:"md",onClick:a=>g(a,e)},a))]})]})};var A=t(9037),X=t.n(A);let Q=e=>{let{items:a,selectedItems:t,setSelectedItems:n,tagToColor:l,title:s,label:c,className:o}=e;return(0,r.jsxs)("div",{className:i()(o,X().root,{[X().placeholderText]:0===t.length}),children:[(0,r.jsx)("div",{style:{width:300,marginRight:"1rem"},children:(0,r.jsx)(m._nR,{titleText:s,items:a,selectedItems:t,onChange:e=>{n(e.selectedItems||[])},selectionFeedback:"top-after-reopen",id:"filter-multiselect",itemToString:e=>(0,_.aY)(e)})}),(0,r.jsx)("div",{className:X().selectedItems,children:t.map((e,a)=>(0,r.jsx)(Y,{name:(0,_.aY)(e),color:l[e],size:"md"},a))})]})};var W=t(2707),K=t.n(W);let U=()=>{let{benchmarks:e}=f();console.log(e);let[a,t]=(0,c.useState)([]),[n,l]=(0,c.useState)([]),[s,o]=(0,c.useState)([]),d=(0,c.useMemo)(()=>{if(!e)return[];let t=[...e];return t=0===n.length?t:t.filter(e=>n.includes(e.name)),t=0===a.length?t:t.filter(e=>a.every(a=>a===S.zu&&e.type===I.f7.DIRECT||a===S.o6&&e.type===I.f7.PAIRWISE||e.tags.includes(a))),t=0===s.length?t:t.filter(e=>s.every(a=>Object.keys(e.groupByFieldsToValues.criteria).includes(a)))},[e,n,s,a]),m=(0,c.useMemo)(()=>{if(!e)return[];let a=[];return e.forEach(e=>{e.tags.forEach(e=>{a.includes(e)||a.push(e)})}),a.sort((e,a)=>a.localeCompare(e)),a},[e]),h=(0,c.useMemo)(()=>e?Array.from(new Set(e.map(e=>Object.keys(e.groupByFieldsToValues.criteria)).flat())):[],[e]),u=(0,c.useMemo)(()=>{let e={};return e[S.zu]=I.Gy[0],e[S.o6]=I.Gy[1],m.forEach((a,t)=>{let r=I.Gy[(t+2)%I.Gy.length];e[a]=r}),e},[m]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D,{}),(0,r.jsxs)("div",{className:i()(L().root,K().root,L().leftPadding),children:[(0,r.jsx)("h3",{className:i()(L().title,L().bottomDivider),children:"Benchmarks"}),(0,r.jsxs)("div",{className:K().filters,children:[(0,r.jsx)(Q,{items:e.map(e=>e.name),selectedItems:n,setSelectedItems:l,tagToColor:u,title:"Benchmark filter",label:a.length>0?a.join(", "):"No filters selected"}),(0,r.jsx)(Q,{items:[S.zu,S.o6,...m],selectedItems:a,setSelectedItems:t,tagToColor:u,title:"Tag filter",label:a.length>0?a.join(", "):"No filters selected"}),(0,r.jsx)(Q,{items:h,selectedItems:s,setSelectedItems:o,tagToColor:u,title:"Criteria filter",label:s.length>0?s.join(", "):"No criterias selected"})]}),d.length>0?(0,r.jsx)("div",{className:i()(K().cardsGrid),children:d.map((e,a)=>(0,r.jsx)(H,{selectedCriteriaItems:s,setSelectedItems:t,benchmark:e,tagToColor:u},a))}):(0,r.jsx)("p",{className:K().emptyFilterResult,children:"No benchmarks match your filter criteria."})]})]})},J=()=>{let{benchmark:e}=B();return e?(0,r.jsx)(z,{}):(0,r.jsx)(U,{})},Z=()=>(0,r.jsx)(n._,{children:(0,r.jsx)(l.e,{children:(0,r.jsx)(N,{children:(0,r.jsx)(T,{children:(0,r.jsx)(J,{})})})})});var $=(0,t(9835).Q)(()=>(0,r.jsx)(Z,{}))},3108:function(e){e.exports={root:"BenchmarkCard_root__tCWek",list:"BenchmarkCard_list__ZMBDr","title-row":"BenchmarkCard_title-row__0fETX",badge:"BenchmarkCard_badge__FI2Tw",description:"BenchmarkCard_description__CwalN",nameLink:"BenchmarkCard_nameLink__qolNr","card-white-mode":"BenchmarkCard_card-white-mode__MrXss",tagList:"BenchmarkCard_tagList__WsDcg"}},2033:function(e){e.exports={"benchmark-actions-container":"BenchmarkView_benchmark-actions-container__fdrT1","benchmark-buttons-container":"BenchmarkView_benchmark-buttons-container__egrB6","benchmark-groupby-select":"BenchmarkView_benchmark-groupby-select__KinEI"}},8901:function(e){e.exports={root:"CriteriaBenchmarkCard_root__yr7T9",table:"CriteriaBenchmarkCard_table__2vTDo",highlightedCellText:"CriteriaBenchmarkCard_highlightedCellText__AiCB9",criteriaHeader:"CriteriaBenchmarkCard_criteriaHeader__7_WRF",criteriaInfo:"CriteriaBenchmarkCard_criteriaInfo__eYq8h",headerWithTooltip:"CriteriaBenchmarkCard_headerWithTooltip__Hn3cB",headerInfoIcon:"CriteriaBenchmarkCard_headerInfoIcon__8u8BA",toggle:"CriteriaBenchmarkCard_toggle__k3PhJ"}},9037:function(e){e.exports={root:"Filter_root__TN2Qa",placeholderText:"Filter_placeholderText__cJ0MX",selectedItems:"Filter_selectedItems__mKONF"}},2707:function(e){e.exports={cardsGrid:"Landing_cardsGrid__K_mMe",emptyFilterResult:"Landing_emptyFilterResult__iDCGK",root:"Landing_root__V65Tc",filters:"Landing_filters__x7nDj",benchmarkFilter:"Landing_benchmarkFilter__Ay9ir",verticalDivider:"Landing_verticalDivider__9b__Q"}},981:function(e){e.exports={sidebar:"Sidenav_sidebar___o6x3",panel:"Sidenav_panel__c3zxl",root:"Sidenav_root__sszHz",header:"Sidenav_header__C_X_8",heading:"Sidenav_heading__KqNMr",content:"Sidenav_content__655hO",prompts:"Sidenav_prompts__oGDBK",section:"Sidenav_section__2nXsx","tree-root":"Sidenav_tree-root__cbPNw","tree-node-content":"Sidenav_tree-node-content__DpdDk","tree-node-label":"Sidenav_tree-node-label__IsO47","tree-node-label-indent":"Sidenav_tree-node-label-indent__zmkfz","link-button":"Sidenav_link-button__5Ebof","tree-wrapper":"Sidenav_tree-wrapper__EApi_","empty-message":"Sidenav_empty-message__Cw25g"}},9479:function(e){e.exports={"usecase-tag":"TagBadge_usecase-tag__TTf42"}},7563:function(e){e.exports={root:"Benchmarks_root__oVyuE",title:"Benchmarks_title__orPV8",bottomDivider:"Benchmarks_bottomDivider___mNst",leftPadding:"Benchmarks_leftPadding__xXGN8","vertical-divider":"Benchmarks_vertical-divider__eUtq3",benchmarkContent:"Benchmarks_benchmarkContent__7hcQs",benchmarkHeader:"Benchmarks_benchmarkHeader__Q01RG",benchmarkTile:"Benchmarks_benchmarkTile__0fv8h",breadcrumb:"Benchmarks_breadcrumb__aphMf",benchmarkDescriptionTitle:"Benchmarks_benchmarkDescriptionTitle__rvmOL",benchmarkDescription:"Benchmarks_benchmarkDescription__pOiKN",benchmarkLink:"Benchmarks_benchmarkLink__Sx60g",criteriaBenchmark:"Benchmarks_criteriaBenchmark__UfXYE",multipleColumns:"Benchmarks_multipleColumns__VSKGD"}}},function(e){e.O(0,[759,472,888,774,179],function(){return e(e.s=3280)}),_N_E=e.O()}]);