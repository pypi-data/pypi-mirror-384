[project]
name = "tomoscan"
dynamic = ["version"]
authors = [
    { name = "Henri Payno", email = "henri.payno@esrf.fr" },
    { name = "Pierre Paleo", email = "pierre.paleo@esrf.fr" },
    { name = "Pierre-Olivier Autran", email = "pierre-olivier.autran@esrf.fr" },
    { name = "Jérôme Lesaint", email = "jerome.lesaint@esrf.fr" },
    { name = "Alessandro Mirone", email = "mirone@esrf.fr" }
]
description = "Utility to access tomography data at ESRF"
readme = { file = "README.md", content-type = "text/markdown" }
license = { text = "MIT" }
requires-python = ">=3.9"
keywords = ["NXtomo", "nexus", "tomography", "esrf", "bliss-tomo"]
classifiers = [
    "Intended Audience :: Education",
    "Intended Audience :: Science/Research",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Environment :: Console",
    "Environment :: X11 Applications :: Qt",
    "Operating System :: POSIX",
    "Natural Language :: English",
    "Topic :: Scientific/Engineering :: Physics",
    "Topic :: Software Development :: Libraries :: Python Modules"
]

dependencies = [
    "setuptools",
    "defusedxml",
    "h5py>=3.0",
    "silx>=2.0",
    "lxml",
    "dicttoxml",
    "packaging",
    "psutil",
    "nxtomo>=3.0.0dev0",
    "numpy",
    "packaging>=22.0",
    "pint",
]

[project.optional-dependencies]
compression_plugins = [
    "hdf5plugin",
    "blosc2-grok",
]
full_no_compression_plugins = [
    "glymur<0.14 ; python_version <= '3.9'",
    "glymur ; python_version > '3.9'",
    "tqdm",
    "tifffile[zarr]>=2023.7.4; python_version >= '3.10'",
    "tifffile; python_version < '3.10'",
    "zarr; python_version < '3.10'",
    "fsspec; python_version < '3.10'" # for zarr < 3.10
]
full = [
    "tomoscan[full_no_compression_plugins]",
    "tomoscan[compression_plugins]",
]
test = [
    "pytest",
    "python-gitlab",
    "glymur<0.14 ; python_version <= '3.9'",
    "glymur ; python_version > '3.9'",
    "tqdm",
    "tifffile[zarr]>=2023.7.4; python_version >= '3.10'",
    "tifffile; python_version < '3.10'",
    "zarr; python_version < '3.10'",
    "fsspec; python_version < '3.10'"
]
doc = [
    "Sphinx>=4.0.0, <5.2.0",
    "nbsphinx",
    "pandoc",
    "ipykernel",
    "jupyter_client",
    "nbconvert",
    "h5glance",
    "pydata_sphinx_theme",
    "sphinx-design",
    "sphinx-autodoc-typehints",
    "glymur<0.14 ; python_version <= '3.9'",
    "glymur ; python_version > '3.9'",
    "tqdm",
    "tifffile[zarr]>=2023.7.4; python_version >= '3.10'",
    "tifffile; python_version < '3.10'",
    "zarr; python_version < '3.10'",
    "fsspec; python_version < '3.10'"
]

[build-system]
requires = [
    "setuptools>=61.0",
    "wheel",
    "numpy"
]
build-backend = "setuptools.build_meta"

[tool.sphinx]
source-dir = "./doc"

[project.scripts]
tomoscan = "tomoscan.__main__:main"

[tool.setuptools.dynamic]
version = { attr = "tomoscan.__version__" }

[tool.setuptools.packages.find]
where = ["."]
