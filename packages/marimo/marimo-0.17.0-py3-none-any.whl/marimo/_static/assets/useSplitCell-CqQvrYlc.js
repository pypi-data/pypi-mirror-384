import{s as h}from"./chunk-DZLz74EQ.js";import{D as g,Zn as b,ar as k,g as v,lr as y,m as D,rt as x}from"./cells-BEhFXxEH.js";import{n as I,t as R}from"./jsx-runtime-DvsdsEjx.js";import{t as S}from"./Logger-BkkOJyg0.js";import{r as j}from"./requests-BW3DqHQI.js";import{o as z}from"./dist-B8v7AWk6.js";import{t as F}from"./use-toast-BKA5A0CC.js";import{n as e}from"./useEvent-itkPNnCe.js";import{r as H}from"./useDeleteCell-CIqS2s5l.js";var m=h(I());function U(){let t=(0,m.c)(2),r=u(),n;return t[0]===r?n=t[1]:(n=()=>r(y(v())),t[0]=r,t[1]=n),e(n)}function V(t){let r=(0,m.c)(3),n=u(),o;return r[0]!==t||r[1]!==n?(o=()=>{t!==void 0&&n([t])},r[0]=t,r[1]=n,r[2]=o):o=r[2],e(o)}function Z(){let t=(0,m.c)(2),r=u(),n;return t[0]===r?n=t[1]:(n=()=>r(k(v())),t[0]=r,t[1]=n),e(n)}function u(){let t=(0,m.c)(3),{prepareForRun:r}=g(),{sendRun:n}=j(),o;return t[0]!==r||t[1]!==n?(o=async a=>{var l,C,w;if(a.length===0)return;let{cellHandles:s,cellData:f}=v(),i=[];for(let p of a){let c=(C=(l=s[p])==null?void 0:l.current)==null?void 0:C.editorView,d;c?(b(c)!=="markdown"&&z(c),d=x(c)):d=((w=f[p])==null?void 0:w.code)||"",i.push(d),r({cellId:p})}await n({cellIds:a,codes:i}).catch(_)},t[0]=r,t[1]=n,t[2]=o):o=t[2],e(o)}function _(t){S.error(t)}var q=h(I()),A=h(R());function B(){let t=(0,q.c)(3),{splitCell:r,undoSplitCell:n}=g(),o;return t[0]!==r||t[1]!==n?(o=a=>{let s=D(a.cellId);if(!s)return;let f=x(s);r(a);let{dismiss:i}=F({title:"Cell split",action:(0,A.jsx)(H,{"data-testid":"undo-split-button",size:"sm",variant:"outline",onClick:()=>{n({...a,snapshot:f}),l()},children:"Undo"})}),l=i},t[0]=r,t[1]=n,t[2]=o):o=t[2],e(o)}export{U as a,u as i,Z as n,V as r,B as t};
