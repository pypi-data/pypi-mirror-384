import{s as _}from"./chunk-DZLz74EQ.js";import{D as b,M as N,P as g,Pn as L,Pr as P,pt as j}from"./cells-BEhFXxEH.js";import{n as w,t as S}from"./jsx-runtime-DvsdsEjx.js";import{t as $}from"./Logger-BkkOJyg0.js";import{t as y}from"./cn-CwmWKpZ_.js";import{t as D}from"./filename-dpoTdlj9.js";var p=_(w()),v=_(S());const k=o=>{let e=(0,p.c)(12),{className:t,cellId:r,variant:l,onClick:s,formatCellName:a,skipScroll:i}=o,u=g()[r]??"",x=N().inOrderIds.indexOf(r),{showCellIfHidden:d}=b(),C=a??q,n;e[0]===t?n=e[1]:(n=y("inline-block cursor-pointer text-link hover:underline",t),e[0]=t,e[1]=n);let c;e[2]!==r||e[3]!==s||e[4]!==d||e[5]!==i||e[6]!==l?(c=h=>{if(r==="__scratch__")return!1;d({cellId:r}),h.stopPropagation(),h.preventDefault(),requestAnimationFrame(()=>{I(r,l,i)&&(s==null||s())})},e[2]=r,e[3]=s,e[4]=d,e[5]=i,e[6]=l,e[7]=c):c=e[7];let f=C(j(u,x)),m;return e[8]!==n||e[9]!==c||e[10]!==f?(m=(0,v.jsx)("div",{className:n,role:"link",tabIndex:-1,onClick:c,children:f}),e[8]=n,e[9]=c,e[10]=f,e[11]=m):m=e[11],m},O=o=>{let e=(0,p.c)(2),t;return e[0]===o?t=e[1]:(t=(0,v.jsx)(k,{...o,variant:"destructive"}),e[0]=o,e[1]=t),t},T=o=>{let e=(0,p.c)(10),{cellId:t,lineNumber:r}=o,l=D(),s;e[0]!==t||e[1]!==r?(s=()=>L(t,r),e[0]=t,e[1]=r,e[2]=s):s=e[2];let a;e[3]!==t||e[4]!==l?(a=u=>t==="__scratch__"?"scratch":`marimo://${l||"untitled"}#cell=${u}`,e[3]=t,e[4]=l,e[5]=a):a=e[5];let i;return e[6]!==t||e[7]!==s||e[8]!==a?(i=(0,v.jsx)(k,{cellId:t,onClick:s,skipScroll:!0,variant:"destructive",className:"traceback-cell-link",formatCellName:a}),e[6]=t,e[7]=s,e[8]=a,e[9]=i):i=e[9],i};function I(o,e,t){let r=P.create(o),l=document.getElementById(r);return l===null?($.error(`Cell ${r} not found on page.`),!1):(t||l.scrollIntoView({behavior:"smooth",block:"center"}),e==="destructive"&&(l.classList.add("error-outline"),setTimeout(()=>{l.classList.remove("error-outline")},2e3)),e==="focus"&&(l.classList.add("focus-outline"),setTimeout(()=>{l.classList.remove("focus-outline")},2e3)),!0)}function q(o){return o}export{I as i,O as n,T as r,k as t};
