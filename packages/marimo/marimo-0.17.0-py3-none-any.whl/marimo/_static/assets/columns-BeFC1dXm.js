const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./esm-D8TEQuHf.js","./precisionRound-BLxyDkD7.js","./defaultLocale-DEWTIUVh.js","./linear-Oq5kiZf9.js","./timer-DL6F-lux.js","./chunk-DZLz74EQ.js","./init-F9jkgvKE.js","./src-tKqUT5a0.js","./time-DIhXWsZe.js","./defaultLocale-B9-NA0ur.js","./range-BT9bu4c7.js","./vega-loader.browser.module-B3yPAbRZ.js","./treemap-Bw2ef0_x.js","./path-C9KI-dzZ.js","./colors-vEZNI1u9.js","./ordinal-BpSm2d04.js","./arc-b6bpmWtg.js","./math-C9UoZaXa.js","./array-DAkwBc1M.js","./step-DgNh0Im1.js","./line-BCUKzinT.js","./fast-deep-equal-COY6BKFU.js","./esm-CLNcq-Bu.js","./prop-types-ShpF60yB.js","./react-BcIddLXZ.js","./tslib.es6-C9vXkBtU.js"])))=>i.map(i=>d[i]);
var ui=Object.defineProperty;var di=(C,U,pe)=>U in C?ui(C,U,{enumerable:!0,configurable:!0,writable:!0,value:pe}):C[U]=pe;var Ne=(C,U,pe)=>di(C,typeof U!="symbol"?U+"":U,pe);import{s as P}from"./chunk-DZLz74EQ.js";import{a as Vl,c as ci,l as Pl,o as re,r as Al,t as gi}from"./react-7g8sREeT.js";import{t as mi}from"./react-BcIddLXZ.js";import{Ct as pi,Ft as Dl,Lr as fi,Nr as hi,Rr as xi,_t as Je,gr as wi,hr as bi,m as Si,mr as yi,xt as El,__tla as Ci}from"./cells-BEhFXxEH.js";import{n as A,t as vi}from"./jsx-runtime-DvsdsEjx.js";import{t as ji}from"./capitalize-CkrfIDeS.js";import{i as Ri,o as _i,t as J}from"./invariant-B43sqCFA.js";import{i as Fi,n as Mi,t as zl}from"./loader-BcHzCbiy.js";import{t as Xe}from"./range-BB1DXJJn.js";import{n as Ii,t as ve}from"./Logger-BkkOJyg0.js";import{a as Ve}from"./hotkeys-ZAWHeY7d.js";import{r as ki}from"./utils-DLuqCLqV.js";import{g as Tl,n as Ni}from"./config-BeIk_wvs.js";import{t as Ol}from"./ErrorBoundary-Bj7QJPi8.js";import{t as M}from"./cn-CwmWKpZ_.js";import{t as X}from"./events-BGfCi1Xy.js";import{t as D}from"./button-g1jf7cM6.js";import{et as Vi}from"./dist-BNtnpgX8.js";import{r as Pi,t as Ai}from"./once-4nUTgcVU.js";import{r as Ll}from"./documentation-B7z6bB-t.js";import{t as Di}from"./createReducer-CFr1RdS2.js";import{t as Hl}from"./requests-BW3DqHQI.js";import{t as Gl}from"./preload-helper-DImqtvgl.js";import{t as kt}from"./use-toast-BKA5A0CC.js";import{r as ql}from"./useTheme-BWXNjHkw.js";import{t as N}from"./createLucideIcon-Dz-D6iuz.js";import{_ as Nt,a as Ei,c as $l,h as Bl,i as Ze,n as Ul,o as zi,r as Ti,s as Wl,t as Kl}from"./select-DIqNYEaz.js";import{a as Oi,n as Li}from"./download-RtEDTktT.js";import{t as Hi}from"./chevron-right-kGH9aJGk.js";import{d as Gi,f as Yl,p as qi,t as $i,u as Bi}from"./maps-duCv2i7k.js";import{a as Ui,i as Wi,l as Ki,n as Qe,r as Yi,s as Ji,t as Xi,u as et}from"./ansi_up-CAiCs1Gk.js";import{a as V,c as je,d as Pe,f as Vt,p as Pt,r as At,s as tt,t as Dt,u as Re}from"./dropdown-menu-D3tww20d.js";import{t as Jl}from"./copy-CGWkBrzb.js";import{t as Zi}from"./list-filter-DQ2_e3bh.js";import{n as Qi,t as Xl}from"./spinner-fS9J74Ro.js";import{n as es,t as ts}from"./MarimoErrorOutput-CD3rG7IK.js";import{Ft as Et,o as Zl,r as ns}from"./input-DGY-1Oes.js";import{n as ls,r as ce}from"./useNonce-DvpkYOW9.js";import{t as as}from"./badge-Cbb7s63B.js";import{t as q}from"./tooltip-CW-4dtRh.js";import{a as os,n as rs,r as is,t as ss}from"./dates-D2l0yAKQ.js";import{t as ge}from"./context-BwP_-Md9.js";import{t as nt}from"./useDateFormatter-BapFytxP.js";import{i as zt,n as us,r as G}from"./numbers-P4hvbAnW.js";import{n as ie}from"./useEvent-itkPNnCe.js";import{n as ds}from"./vega-loader.browser.module-B3yPAbRZ.js";import{t as lt}from"./copy-BxPDuBrN.js";import{t as Ql}from"./RenderHTML-B398JcWn.js";import{n as cs,r as gs,t as ms}from"./accordion-D8h6M7fo.js";import{a as ps,i as fs,n as hs,o as ea,r as xs,t as ta}from"./JsonOutput-BU4PIFXg.js";import{n as ws}from"./useAsyncData-BB0ZlY9B.js";import{n as na,t as bs}from"./error-banner-CHF-jGs2.js";import{t as Ss}from"./kbd-CrDndhyw.js";import{t as ys,__tla as Cs}from"./LazyAnyLanguageCodeMirror-CInCxHCy.js";import{i as Tt,n as vs,o as js,r as Ot,t as Lt}from"./popover-IOch2AIR.js";import{a as Rs,o as la,r as _s,s as Fs,t as Ms}from"./command-W6QvsWS0.js";import{a as Is,i as ks,n as Ns,o as Ht,r as aa,t as Vs}from"./table-CMFDmrFM.js";import{t as Ps}from"./formats-Dbfcbsil.js";import{r as As}from"./cell-link-D8x9Ez3U.js";import{i as Ds,n as Es,r as zs,t as Ts}from"./tabs-CswUuyA0.js";let at,Gt,qt,$t,ot,oa,Bt,Ut,Wt,Kt,Yt,Jt,ra,Xt,Ae,Zt,Qt,en,tn,nn,ia,ln,an,on,sa,rn,ua,sn,un,dn,da,ca,cn,gn,me,mn,pn,ga,ma,pa,fa,ha,fn,hn,xn,Os=Promise.all([(()=>{try{return Ci}catch{}})(),(()=>{try{return Cs}catch{}})()]).then(async()=>{var ue;var C=P(mi(),1),U=new WeakMap;function pe(t,e){let n=Vl(e),l=wn(n);for(let[a,...o]of t)(!l.has(a)||e!=null&&e.dangerouslyForceHydrate)&&(l.add(a),n.set(a,...o))}let wn,bn,Sn,yn,rt,Cn,vn,jn,Rn,_n,Fn,Mn,In,kn,Nn,Vn,Pn,r;wn=t=>{let e=U.get(t);return e||(e=new WeakSet,U.set(t,e)),e},bn=N("align-justify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]),Bt=N("arrow-down-wide-narrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]),Sn=N("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),yn=N("brick-wall",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 9v6",key:"199k2o"}],["path",{d:"M16 15v6",key:"8rj2es"}],["path",{d:"M16 3v6",key:"1j6rpj"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M8 15v6",key:"1stoo3"}],["path",{d:"M8 3v6",key:"vlvjmk"}]]),rt=N("bug-play",[["path",{d:"M10 19.655A6 6 0 0 1 6 14v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 3.97",key:"1gnv52"}],["path",{d:"M14 15.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"1weqy9"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13v-1a3 3 0 0 1 4.18-2.895 3 3 0 0 1 1.821 2.896v1",key:"1dt6cl"}]]),Cn=N("chart-column-stacked",[["path",{d:"M11 13H7",key:"t0o9gq"}],["path",{d:"M19 9h-4",key:"rera1j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"15",y:"5",width:"4",height:"12",rx:"1",key:"q8uenq"}],["rect",{x:"7",y:"8",width:"4",height:"9",rx:"1",key:"sr5ea"}]]),nn=N("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),vn=N("chart-spline",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16c.5-2 1.5-7 4-7 2 0 2 3 4 3 2.5 0 4.5-5 5-7",key:"lw07rv"}]]),en=N("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),Ut=N("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),jn=N("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Rn=N("expand",[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]]),_n=N("funnel-plus",[["path",{d:"M13.354 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l1.218-1.348",key:"8mvsmf"}],["path",{d:"M16 6h6",key:"1dogtp"}],["path",{d:"M19 3v6",key:"1ytpjt"}]]),Fn=N("funnel-x",[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]]),tn=N("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Gt=N("grip-horizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]),Mn=N("list-filter-plus",[["path",{d:"M10 18h4",key:"1ulq68"}],["path",{d:"M11 6H3",key:"1u26ik"}],["path",{d:"M15 6h6",key:"1jlkvy"}],["path",{d:"M18 9V3",key:"xwwp7m"}],["path",{d:"M7 12h8",key:"7a1bxv"}]]),In=N("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),kn=N("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Nn=N("panel-right",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),xn=N("pin-off",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]),Ae=N("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),Vn=N("text",[["path",{d:"M15 18H3",key:"olowqp"}],["path",{d:"M17 6H3",key:"16j9eg"}],["path",{d:"M21 12H3",key:"2avoz0"}]]),Kt=N("wrap-text",[["path",{d:"m16 16-2 2 2 2",key:"kkc6pm"}],["path",{d:"M3 12h15a3 3 0 1 1 0 6h-4",key:"1cl7v7"}],["path",{d:"M3 18h7",key:"sq21v6"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]),Pn=P(A()),r=P(vi()),Wt=t=>{let e=(0,Pn.c)(6),{container:n,children:l}=t,a;e:{if(!n){let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=ea({key:"mo",prepend:!0}),e[0]=d):d=e[0],a=d;break e}let s;if(e[1]!==n){let d=n.querySelector("style");d||(d=document.createElement("style"),n.append(d)),s=ea({key:"mo",prepend:!0,container:d}),e[1]=n,e[2]=s}else s=e[2];a=s}let o=a,i;return e[3]!==o||e[4]!==l?(i=(0,r.jsx)(ps,{value:o,children:l}),e[3]=o,e[4]=l,e[5]=i):i=e[5],i};var xa=P(A());const An=t=>{let e=(0,xa.c)(3),{children:n}=t,{locale:l}=ge(),a;return e[0]!==n||e[1]!==l?(a=n(l),e[0]=n,e[1]=l,e[2]=a):a=e[2],a};var wa=P(A());const ba=t=>{let e=(0,wa.c)(25),n,l,a;e[0]===t?(n=e[1],l=e[2],a=e[3]):({children:n,className:l,...a}=t,e[0]=t,e[1]=n,e[2]=l,e[3]=a);let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o={x:0,y:0},e[4]=o):o=e[4];let[i,s]=(0,C.useState)(o),d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d={x:0,y:0},e[5]=d):d=e[5];let u=(0,C.useRef)(d),[g,m]=(0,C.useState)(!1),c;if(e[6]!==i.x||e[7]!==i.y){c=_=>{u.current={x:_.clientX-i.x,y:_.clientY-i.y},m(!0),document.addEventListener("mousemove",y),document.addEventListener("mouseup",v)};let y=_=>{s({x:_.clientX-u.current.x,y:_.clientY-u.current.y})},v=()=>{m(!1),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",v)};e[6]=i.x,e[7]=i.y,e[8]=c}else c=e[8];let p;e[9]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(Tt,{}),e[9]=p):p=e[9];let w;e[10]!==i.x||e[11]!==i.y?(w={position:"fixed",left:i.x,top:i.y},e[10]=i.x,e[11]=i.y,e[12]=w):w=e[12];let f=`flex items-center justify-center absolute top-0 left-1/2 -translate-x-1/2 ${g?"cursor-grabbing":"cursor-grab"}`,h;e[13]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)(Gt,{className:"h-5 w-5 mt-1 text-muted-foreground/40"}),e[13]=h):h=e[13];let x;e[14]!==c||e[15]!==f?(x=(0,r.jsx)("div",{onMouseDown:c,className:f,children:h}),e[14]=c,e[15]=f,e[16]=x):x=e[16];let S;e[17]!==n||e[18]!==l||e[19]!==w||e[20]!==x?(S=(0,r.jsxs)(Ot,{className:l,style:w,children:[x,n]}),e[17]=n,e[18]=l,e[19]=w,e[20]=x,e[21]=S):S=e[21];let b;return e[22]!==a||e[23]!==S?(b=(0,r.jsxs)(Lt,{...a,children:[p,S]}),e[22]=a,e[23]=S,e[24]=b):b=e[24],b},W={number(t){return{type:"number",...t}},text(t){return{type:"text",...t}},date(t){return{type:"date",...t}},datetime(t){return{type:"datetime",...t}},time(t){return{type:"time",...t}},boolean(t){return{type:"boolean",...t}},select(t){return{type:"select",...t}}};oa=function(t,e){if(!e)return[];let n=t;if(e.operator==="is_null"||e.operator==="is_not_null")return{column_id:n,operator:e.operator,value:void 0};switch(e.type){case"number":{let l=[];return e.min!==void 0&&l.push({column_id:n,operator:">=",value:e.min}),e.max!==void 0&&l.push({column_id:n,operator:"<=",value:e.max}),l}case"text":return{column_id:n,operator:e.operator,value:e.text};case"datetime":{let l=[];return e.min!==void 0&&l.push({column_id:n,operator:">=",value:e.min.toISOString()}),e.max!==void 0&&l.push({column_id:n,operator:"<=",value:e.max.toISOString()}),l}case"date":{let l=[];return e.min!==void 0&&l.push({column_id:n,operator:">=",value:e.min.toISOString()}),e.max!==void 0&&l.push({column_id:n,operator:"<=",value:e.max.toISOString()}),l}case"time":{let l=[];return e.min!==void 0&&l.push({column_id:n,operator:">=",value:e.min.toISOString()}),e.max!==void 0&&l.push({column_id:n,operator:"<=",value:e.max.toISOString()}),l}case"boolean":return e.value?{column_id:n,operator:"is_true",value:void 0}:e.value?[]:{column_id:n,operator:"is_false",value:void 0};case"select":return{column_id:n,operator:"in",value:e.options};default:ls(e)}};function Z(t,e){return typeof t=="function"?t(e):t}function z(t,e){return n=>{e.setState(l=>({...l,[t]:Z(n,l[t])}))}}function De(t){return t instanceof Function}function Sa(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function ya(t,e){let n=[],l=a=>{a.forEach(o=>{n.push(o);let i=e(o);i!=null&&i.length&&l(i)})};return l(t),n}function j(t,e,n){let l=[],a;return o=>{let i;n.key&&n.debug&&(i=Date.now());let s=t(o);if(!(s.length!==l.length||s.some((u,g)=>l[g]!==u)))return a;l=s;let d;if(n.key&&n.debug&&(d=Date.now()),a=e(...s),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){let u=Math.round((Date.now()-i)*100)/100,g=Math.round((Date.now()-d)*100)/100,m=g/16,c=(p,w)=>{for(p=String(p);p.length<w;)p=" "+p;return p};console.info(`%c\u23F1 ${c(g,5)} /${c(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,n==null?void 0:n.key)}return a}}function R(t,e,n,l){return{debug:()=>(t==null?void 0:t.debugAll)??t[e],key:!1,onChange:l}}function Ca(t,e,n,l){let a={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(l),renderValue:()=>a.getValue()??t.options.renderFallbackValue,getContext:j(()=>[t,n,e,a],(o,i,s,d)=>({table:o,column:i,row:s,cell:d,getValue:d.getValue,renderValue:d.renderValue}),R(t.options,"debugCells","cell.getContext"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(a,n,e,t)},{}),a}function va(t,e,n,l){let a={...t._getDefaultColumnDef(),...e},o=a.accessorKey,i=a.id??(o?typeof String.prototype.replaceAll=="function"?o.replaceAll(".","_"):o.replace(/\./g,"_"):void 0)??(typeof a.header=="string"?a.header:void 0),s;if(a.accessorFn?s=a.accessorFn:o&&(s=o.includes(".")?u=>{let g=u;for(let m of o.split("."))g=g==null?void 0:g[m];return g}:u=>u[a.accessorKey]),!i)throw Error();let d={id:`${String(i)}`,accessorFn:s,parent:l,depth:n,columnDef:a,columns:[],getFlatColumns:j(()=>[!0],()=>{var u;return[d,...(u=d.columns)==null?void 0:u.flatMap(g=>g.getFlatColumns())]},R(t.options,"debugColumns","column.getFlatColumns")),getLeafColumns:j(()=>[t._getOrderColumnsFn()],u=>{var g;return(g=d.columns)!=null&&g.length?u(d.columns.flatMap(m=>m.getLeafColumns())):[d]},R(t.options,"debugColumns","column.getLeafColumns"))};for(let u of t._features)u.createColumn==null||u.createColumn(d,t);return d}var O="debugHeaders";function Dn(t,e,n){let l={id:n.id??e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let a=[],o=i=>{i.subHeaders&&i.subHeaders.length&&i.subHeaders.map(o),a.push(i)};return o(l),a},getContext:()=>({table:t,header:l,column:e})};return t._features.forEach(a=>{a.createHeader==null||a.createHeader(l,t)}),l}var ja={createTable:t=>{t.getHeaderGroups=j(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,l,a)=>{let o=(l==null?void 0:l.map(d=>n.find(u=>u.id===d)).filter(Boolean))??[],i=(a==null?void 0:a.map(d=>n.find(u=>u.id===d)).filter(Boolean))??[],s=n.filter(d=>!(l!=null&&l.includes(d.id))&&!(a!=null&&a.includes(d.id)));return Ee(e,[...o,...s,...i],t)},R(t.options,O,"getHeaderGroups")),t.getCenterHeaderGroups=j(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,l,a)=>(n=n.filter(o=>!(l!=null&&l.includes(o.id))&&!(a!=null&&a.includes(o.id))),Ee(e,n,t,"center")),R(t.options,O,"getCenterHeaderGroups")),t.getLeftHeaderGroups=j(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,l)=>Ee(e,(l==null?void 0:l.map(a=>n.find(o=>o.id===a)).filter(Boolean))??[],t,"left"),R(t.options,O,"getLeftHeaderGroups")),t.getRightHeaderGroups=j(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,l)=>Ee(e,(l==null?void 0:l.map(a=>n.find(o=>o.id===a)).filter(Boolean))??[],t,"right"),R(t.options,O,"getRightHeaderGroups")),t.getFooterGroups=j(()=>[t.getHeaderGroups()],e=>[...e].reverse(),R(t.options,O,"getFooterGroups")),t.getLeftFooterGroups=j(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),R(t.options,O,"getLeftFooterGroups")),t.getCenterFooterGroups=j(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),R(t.options,O,"getCenterFooterGroups")),t.getRightFooterGroups=j(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),R(t.options,O,"getRightFooterGroups")),t.getFlatHeaders=j(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),R(t.options,O,"getFlatHeaders")),t.getLeftFlatHeaders=j(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),R(t.options,O,"getLeftFlatHeaders")),t.getCenterFlatHeaders=j(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),R(t.options,O,"getCenterFlatHeaders")),t.getRightFlatHeaders=j(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),R(t.options,O,"getRightFlatHeaders")),t.getCenterLeafHeaders=j(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),R(t.options,O,"getCenterLeafHeaders")),t.getLeftLeafHeaders=j(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),R(t.options,O,"getLeftLeafHeaders")),t.getRightLeafHeaders=j(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),R(t.options,O,"getRightLeafHeaders")),t.getLeafHeaders=j(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,l)=>{var a,o,i;return[...((a=e[0])==null?void 0:a.headers)??[],...((o=n[0])==null?void 0:o.headers)??[],...((i=l[0])==null?void 0:i.headers)??[]].map(s=>s.getLeafHeaders()).flat()},R(t.options,O,"getLeafHeaders"))}};function Ee(t,e,n,l){var u;let a=0,o=function(g,m){m===void 0&&(m=1),a=Math.max(a,m),g.filter(c=>c.getIsVisible()).forEach(c=>{var p;(p=c.columns)!=null&&p.length&&o(c.columns,m+1)},0)};o(t);let i=[],s=(g,m)=>{let c={depth:m,id:[l,`${m}`].filter(Boolean).join("_"),headers:[]},p=[];g.forEach(w=>{let f=[...p].reverse()[0],h=w.column.depth===c.depth,x,S=!1;if(h&&w.column.parent?x=w.column.parent:(x=w.column,S=!0),f&&(f==null?void 0:f.column)===x)f.subHeaders.push(w);else{let b=Dn(n,x,{id:[l,m,x.id,w==null?void 0:w.id].filter(Boolean).join("_"),isPlaceholder:S,placeholderId:S?`${p.filter(y=>y.column===x).length}`:void 0,depth:m,index:p.length});b.subHeaders.push(w),p.push(b)}c.headers.push(w),w.headerGroup=c}),i.push(c),m>0&&s(p,m-1)};s(e.map((g,m)=>Dn(n,g,{depth:a,index:m})),a-1),i.reverse();let d=g=>g.filter(m=>m.column.getIsVisible()).map(m=>{let c=0,p=0,w=[0];m.subHeaders&&m.subHeaders.length?(w=[],d(m.subHeaders).forEach(h=>{let{colSpan:x,rowSpan:S}=h;c+=x,w.push(S)})):c=1;let f=Math.min(...w);return p+=f,m.colSpan=c,m.rowSpan=p,{colSpan:c,rowSpan:p}});return d(((u=i[0])==null?void 0:u.headers)??[]),i}var it=(t,e,n,l,a,o,i)=>{let s={id:e,index:l,original:n,depth:a,parentId:i,_valuesCache:{},_uniqueValuesCache:{},getValue:d=>{if(s._valuesCache.hasOwnProperty(d))return s._valuesCache[d];let u=t.getColumn(d);if(u!=null&&u.accessorFn)return s._valuesCache[d]=u.accessorFn(s.original,l),s._valuesCache[d]},getUniqueValues:d=>{if(s._uniqueValuesCache.hasOwnProperty(d))return s._uniqueValuesCache[d];let u=t.getColumn(d);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(s._uniqueValuesCache[d]=u.columnDef.getUniqueValues(s.original,l),s._uniqueValuesCache[d]):(s._uniqueValuesCache[d]=[s.getValue(d)],s._uniqueValuesCache[d])},renderValue:d=>s.getValue(d)??t.options.renderFallbackValue,subRows:o??[],getLeafRows:()=>ya(s.subRows,d=>d.subRows),getParentRow:()=>s.parentId?t.getRow(s.parentId,!0):void 0,getParentRows:()=>{let d=[],u=s;for(;;){let g=u.getParentRow();if(!g)break;d.push(g),u=g}return d.reverse()},getAllCells:j(()=>[t.getAllLeafColumns()],d=>d.map(u=>Ca(t,s,u,u.id)),R(t.options,"debugRows","getAllCells")),_getAllCellsByColumnId:j(()=>[s.getAllCells()],d=>d.reduce((u,g)=>(u[g.column.id]=g,u),{}),R(t.options,"debugRows","getAllCellsByColumnId"))};for(let d=0;d<t._features.length;d++){let u=t._features[d];u==null||u.createRow==null||u.createRow(s,t)}return s},Ra={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},En=(t,e,n)=>{var l,a;let o=n==null||(l=n.toString())==null?void 0:l.toLowerCase();return!!(!((a=t.getValue(e))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(o))};En.autoRemove=t=>$(t);var zn=(t,e,n)=>{var l;return!!(!((l=t.getValue(e))==null||(l=l.toString())==null)&&l.includes(n))};zn.autoRemove=t=>$(t);var Tn=(t,e,n)=>{var l;return((l=t.getValue(e))==null||(l=l.toString())==null?void 0:l.toLowerCase())===(n==null?void 0:n.toLowerCase())};Tn.autoRemove=t=>$(t);var On=(t,e,n)=>{var l;return(l=t.getValue(e))==null?void 0:l.includes(n)};On.autoRemove=t=>$(t);var Ln=(t,e,n)=>!n.some(l=>{var a;return!((a=t.getValue(e))!=null&&a.includes(l))});Ln.autoRemove=t=>$(t)||!(t!=null&&t.length);var Hn=(t,e,n)=>n.some(l=>{var a;return(a=t.getValue(e))==null?void 0:a.includes(l)});Hn.autoRemove=t=>$(t)||!(t!=null&&t.length);var Gn=(t,e,n)=>t.getValue(e)===n;Gn.autoRemove=t=>$(t);var qn=(t,e,n)=>t.getValue(e)==n;qn.autoRemove=t=>$(t);var st=(t,e,n)=>{let[l,a]=n,o=t.getValue(e);return o>=l&&o<=a};st.resolveFilterValue=t=>{let[e,n]=t,l=typeof e=="number"?e:parseFloat(e),a=typeof n=="number"?n:parseFloat(n),o=e===null||Number.isNaN(l)?-1/0:l,i=n===null||Number.isNaN(a)?1/0:a;if(o>i){let s=o;o=i,i=s}return[o,i]},st.autoRemove=t=>$(t)||$(t[0])&&$(t[1]);var Q={includesString:En,includesStringSensitive:zn,equalsString:Tn,arrIncludes:On,arrIncludesAll:Ln,arrIncludesSome:Hn,equals:Gn,weakEquals:qn,inNumberRange:st};function $(t){return t==null||t===""}var _a={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:z("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{var l;let n=(l=e.getCoreRowModel().flatRows[0])==null?void 0:l.getValue(t.id);return typeof n=="string"?Q.includesString:typeof n=="number"?Q.inNumberRange:typeof n=="boolean"||typeof n=="object"&&n?Q.equals:Array.isArray(n)?Q.arrIncludes:Q.weakEquals},t.getFilterFn=()=>{var n;return De(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():((n=e.options.filterFns)==null?void 0:n[t.columnDef.filterFn])??Q[t.columnDef.filterFn]},t.getCanFilter=()=>(t.columnDef.enableColumnFilter??!0)&&(e.options.enableColumnFilters??!0)&&(e.options.enableFilters??!0)&&!!t.accessorFn,t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(l=>l.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n;return((n=e.getState().columnFilters)==null?void 0:n.findIndex(l=>l.id===t.id))??-1},t.setFilterValue=n=>{e.setColumnFilters(l=>{let a=t.getFilterFn(),o=l==null?void 0:l.find(d=>d.id===t.id),i=Z(n,o?o.value:void 0);if($n(a,i,t))return(l==null?void 0:l.filter(d=>d.id!==t.id))??[];let s={id:t.id,value:i};return o?(l==null?void 0:l.map(d=>d.id===t.id?s:d))??[]:l!=null&&l.length?[...l,s]:[s]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{let n=t.getAllLeafColumns();t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(l=>{var a;return(a=Z(e,l))==null?void 0:a.filter(o=>{let i=n.find(s=>s.id===o.id);return!(i&&$n(i.getFilterFn(),o.value,i))})})},t.resetColumnFilters=e=>{var n;t.setColumnFilters(e?[]:((n=t.initialState)==null?void 0:n.columnFilters)??[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function $n(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||e===void 0||typeof e=="string"&&!e}var ut={sum:(t,e,n)=>n.reduce((l,a)=>{let o=a.getValue(t);return l+(typeof o=="number"?o:0)},0),min:(t,e,n)=>{let l;return n.forEach(a=>{let o=a.getValue(t);o!=null&&(l>o||l===void 0&&o>=o)&&(l=o)}),l},max:(t,e,n)=>{let l;return n.forEach(a=>{let o=a.getValue(t);o!=null&&(l<o||l===void 0&&o>=o)&&(l=o)}),l},extent:(t,e,n)=>{let l,a;return n.forEach(o=>{let i=o.getValue(t);i!=null&&(l===void 0?i>=i&&(l=a=i):(l>i&&(l=i),a<i&&(a=i)))}),[l,a]},mean:(t,e)=>{let n=0,l=0;if(e.forEach(a=>{let o=a.getValue(t);o!=null&&(o=+o)>=o&&(++n,l+=o)}),n)return l/n},median:(t,e)=>{if(!e.length)return;let n=e.map(o=>o.getValue(t));if(!Sa(n))return;if(n.length===1)return n[0];let l=Math.floor(n.length/2),a=n.sort((o,i)=>o-i);return n.length%2==0?(a[l-1]+a[l])/2:a[l]},unique:(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),uniqueCount:(t,e)=>new Set(e.map(n=>n.getValue(t))).size,count:(t,e)=>e.length},Fa={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e;return((e=t.getValue())==null||e.toString==null?void 0:e.toString())??null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:z("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(l=>l!==t.id):[...n??[],t.id])},t.getCanGroup=()=>(t.columnDef.enableGrouping??!0)&&(e.options.enableGrouping??!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue),t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{let n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{var l;let n=(l=e.getCoreRowModel().flatRows[0])==null?void 0:l.getValue(t.id);if(typeof n=="number")return ut.sum;if(Object.prototype.toString.call(n)==="[object Date]")return ut.extent},t.getAggregationFn=()=>{var n;if(!t)throw Error();return De(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():((n=e.options.aggregationFns)==null?void 0:n[t.columnDef.aggregationFn])??ut[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n;t.setGrouping(e?[]:((n=t.initialState)==null?void 0:n.grouping)??[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];let l=e.getColumn(n);return l!=null&&l.columnDef.getGroupingValue?(t._groupingValuesCache[n]=l.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,l)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var a;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function Ma(t,e,n){if(!(e!=null&&e.length)||!n)return t;let l=t.filter(a=>!e.includes(a.id));return n==="remove"?l:[...e.map(a=>t.find(o=>o.id===a)).filter(Boolean),...l]}var Ia={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:z("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=j(n=>[_e(e,n)],n=>n.findIndex(l=>l.id===t.id),R(e.options,"debugColumns","getIndex")),t.getIsFirstColumn=n=>{var l;return((l=_e(e,n)[0])==null?void 0:l.id)===t.id},t.getIsLastColumn=n=>{var a;let l=_e(e,n);return((a=l[l.length-1])==null?void 0:a.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{t.setColumnOrder(e?[]:t.initialState.columnOrder??[])},t._getOrderColumnsFn=j(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,l)=>a=>{let o=[];if(!(e!=null&&e.length))o=a;else{let i=[...e],s=[...a];for(;s.length&&i.length;){let d=i.shift(),u=s.findIndex(g=>g.id===d);u>-1&&o.push(s.splice(u,1)[0])}o=[...o,...s]}return Ma(o,n,l)},R(t.options,"debugTable","_getOrderColumnsFn"))}},dt=()=>({left:[],right:[]}),Bn={getInitialState:t=>({columnPinning:dt(),...t}),getDefaultOptions:t=>({onColumnPinningChange:z("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{let l=t.getLeafColumns().map(a=>a.id).filter(Boolean);e.setColumnPinning(a=>n==="right"?{left:((a==null?void 0:a.left)??[]).filter(o=>!(l!=null&&l.includes(o))),right:[...((a==null?void 0:a.right)??[]).filter(o=>!(l!=null&&l.includes(o))),...l]}:n==="left"?{left:[...((a==null?void 0:a.left)??[]).filter(o=>!(l!=null&&l.includes(o))),...l],right:((a==null?void 0:a.right)??[]).filter(o=>!(l!=null&&l.includes(o)))}:{left:((a==null?void 0:a.left)??[]).filter(o=>!(l!=null&&l.includes(o))),right:((a==null?void 0:a.right)??[]).filter(o=>!(l!=null&&l.includes(o)))})},t.getCanPin=()=>t.getLeafColumns().some(n=>(n.columnDef.enablePinning??!0)&&(e.options.enableColumnPinning??e.options.enablePinning??!0)),t.getIsPinned=()=>{let n=t.getLeafColumns().map(s=>s.id),{left:l,right:a}=e.getState().columnPinning,o=n.some(s=>l==null?void 0:l.includes(s)),i=n.some(s=>a==null?void 0:a.includes(s));return o?"left":i?"right":!1},t.getPinnedIndex=()=>{var n;let l=t.getIsPinned();return l?((n=e.getState().columnPinning)==null||(n=n[l])==null?void 0:n.indexOf(t.id))??-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=j(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,l,a)=>{let o=[...l??[],...a??[]];return n.filter(i=>!o.includes(i.column.id))},R(e.options,"debugRows","getCenterVisibleCells")),t.getLeftVisibleCells=j(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,l)=>(l??[]).map(a=>n.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),R(e.options,"debugRows","getLeftVisibleCells")),t.getRightVisibleCells=j(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,l)=>(l??[]).map(a=>n.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),R(e.options,"debugRows","getRightVisibleCells"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n;return t.setColumnPinning(e?dt():((n=t.initialState)==null?void 0:n.columnPinning)??dt())},t.getIsSomeColumnsPinned=e=>{var l,a,o;let n=t.getState().columnPinning;return e?!!((l=n[e])!=null&&l.length):!!((a=n.left)!=null&&a.length||(o=n.right)!=null&&o.length)},t.getLeftLeafColumns=j(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(l=>e.find(a=>a.id===l)).filter(Boolean),R(t.options,"debugColumns","getLeftLeafColumns")),t.getRightLeafColumns=j(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(l=>e.find(a=>a.id===l)).filter(Boolean),R(t.options,"debugColumns","getRightLeafColumns")),t.getCenterLeafColumns=j(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,l)=>{let a=[...n??[],...l??[]];return e.filter(o=>!a.includes(o.id))},R(t.options,"debugColumns","getCenterLeafColumns"))}};function ka(t){return t||(typeof document<"u"?document:null)}var ze={size:150,minSize:20,maxSize:2**53-1},ct=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Na={getDefaultColumnDef:()=>ze,getInitialState:t=>({columnSizing:{},columnSizingInfo:ct(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:z("columnSizing",t),onColumnSizingInfoChange:z("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{let n=e.getState().columnSizing[t.id];return Math.min(Math.max(t.columnDef.minSize??ze.minSize,n??t.columnDef.size??ze.size),t.columnDef.maxSize??ze.maxSize)},t.getStart=j(n=>[n,_e(e,n),e.getState().columnSizing],(n,l)=>l.slice(0,t.getIndex(n)).reduce((a,o)=>a+o.getSize(),0),R(e.options,"debugColumns","getStart")),t.getAfter=j(n=>[n,_e(e,n),e.getState().columnSizing],(n,l)=>l.slice(t.getIndex(n)+1).reduce((a,o)=>a+o.getSize(),0),R(e.options,"debugColumns","getAfter")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:l,...a}=n;return a})},t.getCanResize=()=>(t.columnDef.enableResizing??!0)&&(e.options.enableColumnResizing??!0),t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0,l=a=>{a.subHeaders.length?a.subHeaders.forEach(l):n+=a.column.getSize()??0};return l(t),n},t.getStart=()=>{if(t.index>0){let n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{let l=e.getColumn(t.column.id),a=l==null?void 0:l.getCanResize();return o=>{if(!l||!a||(o.persist==null||o.persist(),gt(o)&&o.touches&&o.touches.length>1))return;let i=t.getSize(),s=t?t.getLeafHeaders().map(x=>[x.column.id,x.column.getSize()]):[[l.id,l.getSize()]],d=gt(o)?Math.round(o.touches[0].clientX):o.clientX,u={},g=(x,S)=>{typeof S=="number"&&(e.setColumnSizingInfo(b=>{let y=e.options.columnResizeDirection==="rtl"?-1:1,v=(S-((b==null?void 0:b.startOffset)??0))*y,_=Math.max(v/((b==null?void 0:b.startSize)??0),-.999999);return b.columnSizingStart.forEach(F=>{let[k,I]=F;u[k]=Math.round(Math.max(I+I*_,0)*100)/100}),{...b,deltaOffset:v,deltaPercentage:_}}),(e.options.columnResizeMode==="onChange"||x==="end")&&e.setColumnSizing(b=>({...b,...u})))},m=x=>g("move",x),c=x=>{g("end",x),e.setColumnSizingInfo(S=>({...S,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=ka(n),w={moveHandler:x=>m(x.clientX),upHandler:x=>{p==null||p.removeEventListener("mousemove",w.moveHandler),p==null||p.removeEventListener("mouseup",w.upHandler),c(x.clientX)}},f={moveHandler:x=>(x.cancelable&&(x.preventDefault(),x.stopPropagation()),m(x.touches[0].clientX),!1),upHandler:x=>{var S;p==null||p.removeEventListener("touchmove",f.moveHandler),p==null||p.removeEventListener("touchend",f.upHandler),x.cancelable&&(x.preventDefault(),x.stopPropagation()),c((S=x.touches[0])==null?void 0:S.clientX)}},h=Va()?{passive:!1}:!1;gt(o)?(p==null||p.addEventListener("touchmove",f.moveHandler,h),p==null||p.addEventListener("touchend",f.upHandler,h)):(p==null||p.addEventListener("mousemove",w.moveHandler,h),p==null||p.addEventListener("mouseup",w.upHandler,h)),e.setColumnSizingInfo(x=>({...x,startOffset:d,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:l.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{t.setColumnSizing(e?{}:t.initialState.columnSizing??{})},t.resetHeaderSizeInfo=e=>{t.setColumnSizingInfo(e?ct():t.initialState.columnSizingInfo??ct())},t.getTotalSize=()=>{var e;return((e=t.getHeaderGroups()[0])==null?void 0:e.headers.reduce((n,l)=>n+l.getSize(),0))??0},t.getLeftTotalSize=()=>{var e;return((e=t.getLeftHeaderGroups()[0])==null?void 0:e.headers.reduce((n,l)=>n+l.getSize(),0))??0},t.getCenterTotalSize=()=>{var e;return((e=t.getCenterHeaderGroups()[0])==null?void 0:e.headers.reduce((n,l)=>n+l.getSize(),0))??0},t.getRightTotalSize=()=>{var e;return((e=t.getRightHeaderGroups()[0])==null?void 0:e.headers.reduce((n,l)=>n+l.getSize(),0))??0}}},Te=null;function Va(){if(typeof Te=="boolean")return Te;let t=!1;try{let e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return Te=t,Te}function gt(t){return t.type==="touchstart"}var Pa={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:z("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(l=>({...l,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var l;let n=t.columns;return(n.length?n.some(a=>a.getIsVisible()):(l=e.getState().columnVisibility)==null?void 0:l[t.id])??!0},t.getCanHide=()=>(t.columnDef.enableHiding??!0)&&(e.options.enableHiding??!0),t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=j(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(l=>l.column.getIsVisible()),R(e.options,"debugRows","_getAllVisibleCells")),t.getVisibleCells=j(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,l,a)=>[...n,...l,...a],R(e.options,"debugRows","getVisibleCells"))},createTable:t=>{let e=(n,l)=>j(()=>[l(),l().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),R(t.options,"debugColumns",n));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{t.setColumnVisibility(n?{}:t.initialState.columnVisibility??{})},t.toggleAllColumnsVisible=n=>{n??(n=!t.getIsAllColumnsVisible()),t.setColumnVisibility(t.getAllLeafColumns().reduce((l,a)=>({...l,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var l;t.toggleAllColumnsVisible((l=n.target)==null?void 0:l.checked)}}};function _e(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}var Aa={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},Da={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:z("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;let l=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof l=="string"||typeof l=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>(t.columnDef.enableGlobalFilter??!0)&&(e.options.enableGlobalFilter??!0)&&(e.options.enableFilters??!0)&&((e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))??!0)&&!!t.accessorFn},createTable:t=>{t.getGlobalAutoFilterFn=()=>Q.includesString,t.getGlobalFilterFn=()=>{var n;let{globalFilterFn:e}=t.options;return De(e)?e:e==="auto"?t.getGlobalAutoFilterFn():((n=t.options.filterFns)==null?void 0:n[e])??Q[e]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},Ea={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:z("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{if(!e){t._queue(()=>{e=!0});return}if(t.options.autoResetAll??t.options.autoResetExpanded??!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=l=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(l),t.toggleAllRowsExpanded=l=>{l??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=l=>{var a;t.setExpanded(l?{}:((a=t.initialState)==null?void 0:a.expanded)??{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(l=>l.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>l=>{l.persist==null||l.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{let l=t.getState().expanded;return l===!0||Object.values(l).some(Boolean)},t.getIsAllRowsExpanded=()=>{let l=t.getState().expanded;return typeof l=="boolean"?l===!0:!(!Object.keys(l).length||t.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},t.getExpandedDepth=()=>{let l=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(a=>{let o=a.split(".");l=Math.max(l,o.length)}),l},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(l=>{let a=l===!0?!0:!!(l!=null&&l[t.id]),o={};if(l===!0?Object.keys(e.getRowModel().rowsById).forEach(i=>{o[i]=!0}):o=l,n??(n=!a),!a&&n)return{...o,[t.id]:!0};if(a&&!n){let{[t.id]:i,...s}=o;return s}return l})},t.getIsExpanded=()=>{let n=e.getState().expanded;return!!((e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))??(n===!0||(n==null?void 0:n[t.id])))},t.getCanExpand=()=>{var n;return(e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))??((e.options.enableExpanding??!0)&&!!((n=t.subRows)!=null&&n.length))},t.getIsAllParentsExpanded=()=>{let n=!0,l=t;for(;n&&l.parentId;)l=e.getRow(l.parentId,!0),n=l.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{let n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},mt=0,pt=10,ft=()=>({pageIndex:mt,pageSize:pt}),za={getInitialState:t=>({...t,pagination:{...ft(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:z("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{if(!e){t._queue(()=>{e=!0});return}if(t.options.autoResetAll??t.options.autoResetPageIndex??!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=l=>t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(a=>Z(l,a)),t.resetPagination=l=>{t.setPagination(l?ft():t.initialState.pagination??ft())},t.setPageIndex=l=>{t.setPagination(a=>{let o=Z(l,a.pageIndex),i=t.options.pageCount===void 0||t.options.pageCount===-1?2**53-1:t.options.pageCount-1;return o=Math.max(0,Math.min(o,i)),{...a,pageIndex:o}})},t.resetPageIndex=l=>{var a;t.setPageIndex(l?mt:((a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)??mt)},t.resetPageSize=l=>{var a;t.setPageSize(l?pt:((a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)??pt)},t.setPageSize=l=>{t.setPagination(a=>{let o=Math.max(1,Z(l,a.pageSize)),i=a.pageSize*a.pageIndex,s=Math.floor(i/o);return{...a,pageIndex:s,pageSize:o}})},t.setPageCount=l=>t.setPagination(a=>{let o=Z(l,t.options.pageCount??-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...a,pageCount:o}}),t.getPageOptions=j(()=>[t.getPageCount()],l=>{let a=[];return l&&l>0&&(a=[...Array(l)].fill(null).map((o,i)=>i)),a},R(t.options,"debugTable","getPageOptions")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{let{pageIndex:l}=t.getState().pagination,a=t.getPageCount();return a===-1?!0:a===0?!1:l<a-1},t.previousPage=()=>t.setPageIndex(l=>l-1),t.nextPage=()=>t.setPageIndex(l=>l+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>t.options.pageCount??Math.ceil(t.getRowCount()/t.getState().pagination.pageSize),t.getRowCount=()=>t.options.rowCount??t.getPrePaginationRowModel().rows.length}},ht=()=>({top:[],bottom:[]}),Ta={getInitialState:t=>({rowPinning:ht(),...t}),getDefaultOptions:t=>({onRowPinningChange:z("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,l,a)=>{let o=l?t.getLeafRows().map(d=>{let{id:u}=d;return u}):[],i=a?t.getParentRows().map(d=>{let{id:u}=d;return u}):[],s=new Set([...i,t.id,...o]);e.setRowPinning(d=>n==="bottom"?{top:((d==null?void 0:d.top)??[]).filter(u=>!(s!=null&&s.has(u))),bottom:[...((d==null?void 0:d.bottom)??[]).filter(u=>!(s!=null&&s.has(u))),...Array.from(s)]}:n==="top"?{top:[...((d==null?void 0:d.top)??[]).filter(u=>!(s!=null&&s.has(u))),...Array.from(s)],bottom:((d==null?void 0:d.bottom)??[]).filter(u=>!(s!=null&&s.has(u)))}:{top:((d==null?void 0:d.top)??[]).filter(u=>!(s!=null&&s.has(u))),bottom:((d==null?void 0:d.bottom)??[]).filter(u=>!(s!=null&&s.has(u)))})},t.getCanPin=()=>{let{enableRowPinning:n,enablePinning:l}=e.options;return typeof n=="function"?n(t):n??l??!0},t.getIsPinned=()=>{let n=[t.id],{top:l,bottom:a}=e.getState().rowPinning,o=n.some(s=>l==null?void 0:l.includes(s)),i=n.some(s=>a==null?void 0:a.includes(s));return o?"top":i?"bottom":!1},t.getPinnedIndex=()=>{var l,a;let n=t.getIsPinned();return n?((a=(l=n==="top"?e.getTopRows():e.getBottomRows())==null?void 0:l.map(o=>{let{id:i}=o;return i}))==null?void 0:a.indexOf(t.id))??-1:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n;return t.setRowPinning(e?ht():((n=t.initialState)==null?void 0:n.rowPinning)??ht())},t.getIsSomeRowsPinned=e=>{var l,a,o;let n=t.getState().rowPinning;return e?!!((l=n[e])!=null&&l.length):!!((a=n.top)!=null&&a.length||(o=n.bottom)!=null&&o.length)},t._getPinnedRows=(e,n,l)=>(t.options.keepPinnedRows??!0?(n??[]).map(a=>{let o=t.getRow(a,!0);return o.getIsAllParentsExpanded()?o:null}):(n??[]).map(a=>e.find(o=>o.id===a))).filter(Boolean).map(a=>({...a,position:l})),t.getTopRows=j(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),R(t.options,"debugRows","getTopRows")),t.getBottomRows=j(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),R(t.options,"debugRows","getBottomRows")),t.getCenterRows=j(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,l)=>{let a=new Set([...n??[],...l??[]]);return e.filter(o=>!a.has(o.id))},R(t.options,"debugRows","getCenterRows"))}},Oa={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:z("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>t.setRowSelection(e?{}:t.initialState.rowSelection??{}),t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=e===void 0?!t.getIsAllRowsSelected():e;let l={...n},a=t.getPreGroupedRowModel().flatRows;return e?a.forEach(o=>{o.getCanSelect()&&(l[o.id]=!0)}):a.forEach(o=>{delete l[o.id]}),l})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{let l=e===void 0?!t.getIsAllPageRowsSelected():e,a={...n};return t.getRowModel().rows.forEach(o=>{xt(a,o.id,l,!0,t)}),a}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=j(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?wt(t,n):{rows:[],flatRows:[],rowsById:{}},R(t.options,"debugTable","getSelectedRowModel")),t.getFilteredSelectedRowModel=j(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?wt(t,n):{rows:[],flatRows:[],rowsById:{}},R(t.options,"debugTable","getFilteredSelectedRowModel")),t.getGroupedSelectedRowModel=j(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?wt(t,n):{rows:[],flatRows:[],rowsById:{}},R(t.options,"debugTable","getGroupedSelectedRowModel")),t.getIsAllRowsSelected=()=>{let e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState(),l=!!(e.length&&Object.keys(n).length);return l&&e.some(a=>a.getCanSelect()&&!n[a.id])&&(l=!1),l},t.getIsAllPageRowsSelected=()=>{let e=t.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=t.getState(),l=!!e.length;return l&&e.some(a=>!n[a.id])&&(l=!1),l},t.getIsSomeRowsSelected=()=>{let e=Object.keys(t.getState().rowSelection??{}).length;return e>0&&e<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{let e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,l)=>{let a=t.getIsSelected();e.setRowSelection(o=>{if(n=n===void 0?!a:n,t.getCanSelect()&&a===n)return o;let i={...o};return xt(i,t.id,n,(l==null?void 0:l.selectChildren)??!0,e),i})},t.getIsSelected=()=>{let{rowSelection:n}=e.getState();return bt(t,n)},t.getIsSomeSelected=()=>{let{rowSelection:n}=e.getState();return St(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{let{rowSelection:n}=e.getState();return St(t,n)==="all"},t.getCanSelect=()=>typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):e.options.enableRowSelection??!0,t.getCanSelectSubRows=()=>typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):e.options.enableSubRowSelection??!0,t.getCanMultiSelect=()=>typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):e.options.enableMultiRowSelection??!0,t.getToggleSelectedHandler=()=>{let n=t.getCanSelect();return l=>{var a;n&&t.toggleSelected((a=l.target)==null?void 0:a.checked)}}}},xt=(t,e,n,l,a)=>{var o;let i=a.getRow(e,!0);n?(i.getCanMultiSelect()||Object.keys(t).forEach(s=>delete t[s]),i.getCanSelect()&&(t[e]=!0)):delete t[e],l&&(o=i.subRows)!=null&&o.length&&i.getCanSelectSubRows()&&i.subRows.forEach(s=>xt(t,s.id,n,l,a))};function wt(t,e){let n=t.getState().rowSelection,l=[],a={},o=function(i,s){return i.map(d=>{var u;let g=bt(d,n);if(g&&(l.push(d),a[d.id]=d),(u=d.subRows)!=null&&u.length&&(d={...d,subRows:o(d.subRows)}),g)return d}).filter(Boolean)};return{rows:o(e.rows),flatRows:l,rowsById:a}}function bt(t,e){return e[t.id]??!1}function St(t,e,n){var l;if(!((l=t.subRows)!=null&&l.length))return!1;let a=!0,o=!1;return t.subRows.forEach(i=>{if(!(o&&!a)&&(i.getCanSelect()&&(bt(i,e)?o=!0:a=!1),i.subRows&&i.subRows.length)){let s=St(i,e);s==="all"?o=!0:(s==="some"&&(o=!0),a=!1)}}),a?"all":o?"some":!1}var yt=/([0-9]+)/gm,La=(t,e,n)=>Un(ee(t.getValue(n)).toLowerCase(),ee(e.getValue(n)).toLowerCase()),Ha=(t,e,n)=>Un(ee(t.getValue(n)),ee(e.getValue(n))),Ga=(t,e,n)=>Ct(ee(t.getValue(n)).toLowerCase(),ee(e.getValue(n)).toLowerCase()),qa=(t,e,n)=>Ct(ee(t.getValue(n)),ee(e.getValue(n))),$a=(t,e,n)=>{let l=t.getValue(n),a=e.getValue(n);return l>a?1:l<a?-1:0},Ba=(t,e,n)=>Ct(t.getValue(n),e.getValue(n));function Ct(t,e){return t===e?0:t>e?1:-1}function ee(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function Un(t,e){let n=t.split(yt).filter(Boolean),l=e.split(yt).filter(Boolean);for(;n.length&&l.length;){let a=n.shift(),o=l.shift(),i=parseInt(a,10),s=parseInt(o,10),d=[i,s].sort();if(isNaN(d[0])){if(a>o)return 1;if(o>a)return-1;continue}if(isNaN(d[1]))return isNaN(i)?-1:1;if(i>s)return 1;if(s>i)return-1}return n.length-l.length}var Fe={alphanumeric:La,alphanumericCaseSensitive:Ha,text:Ga,textCaseSensitive:qa,datetime:$a,basic:Ba},Ua=[ja,Pa,Ia,Bn,Ra,_a,Aa,Da,{getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:z("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{let n=e.getFilteredRowModel().flatRows.slice(10),l=!1;for(let a of n){let o=a==null?void 0:a.getValue(t.id);if(Object.prototype.toString.call(o)==="[object Date]")return Fe.datetime;if(typeof o=="string"&&(l=!0,o.split(yt).length>1))return Fe.alphanumeric}return l?Fe.text:Fe.basic},t.getAutoSortDir=()=>{var n;return typeof((n=e.getFilteredRowModel().flatRows[0])==null?void 0:n.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var n;if(!t)throw Error();return De(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():((n=e.options.sortingFns)==null?void 0:n[t.columnDef.sortingFn])??Fe[t.columnDef.sortingFn]},t.toggleSorting=(n,l)=>{let a=t.getNextSortingOrder(),o=n!=null;e.setSorting(i=>{let s=i==null?void 0:i.find(c=>c.id===t.id),d=i==null?void 0:i.findIndex(c=>c.id===t.id),u=[],g,m=o?n:a==="desc";return g=i!=null&&i.length&&t.getCanMultiSort()&&l?s?"toggle":"add":i!=null&&i.length&&d!==i.length-1?"replace":s?"toggle":"replace",g==="toggle"&&(o||a||(g="remove")),g==="add"?(u=[...i,{id:t.id,desc:m}],u.splice(0,u.length-(e.options.maxMultiSortColCount??2**53-1))):u=g==="toggle"?i.map(c=>c.id===t.id?{...c,desc:m}:c):g==="remove"?i.filter(c=>c.id!==t.id):[{id:t.id,desc:m}],u})},t.getFirstSortDir=()=>t.columnDef.sortDescFirst??e.options.sortDescFirst??t.getAutoSortDir()==="desc"?"desc":"asc",t.getNextSortingOrder=n=>{let l=t.getFirstSortDir(),a=t.getIsSorted();return a?a!==l&&(e.options.enableSortingRemoval??!0)&&(!n||(e.options.enableMultiRemove??!0))?!1:a==="desc"?"asc":"desc":l},t.getCanSort=()=>(t.columnDef.enableSorting??!0)&&(e.options.enableSorting??!0)&&!!t.accessorFn,t.getCanMultiSort=()=>t.columnDef.enableMultiSort??e.options.enableMultiSort??!!t.accessorFn,t.getIsSorted=()=>{var l;let n=(l=e.getState().sorting)==null?void 0:l.find(a=>a.id===t.id);return n?n.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n;return((n=e.getState().sorting)==null?void 0:n.findIndex(l=>l.id===t.id))??-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(l=>l.id!==t.id):[])},t.getToggleSortingHandler=()=>{let n=t.getCanSort();return l=>{n&&(l.persist==null||l.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(l):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n;t.setSorting(e?[]:((n=t.initialState)==null?void 0:n.sorting)??[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},Fa,Ea,za,Ta,Oa,Na];function Wa(t){let e=[...Ua,...t._features??[]],n={_features:e},l=n._features.reduce((u,g)=>Object.assign(u,g.getDefaultOptions==null?void 0:g.getDefaultOptions(n)),{}),a=u=>n.options.mergeOptions?n.options.mergeOptions(l,u):{...l,...u},o={...t.initialState??{}};n._features.forEach(u=>{o=(u.getInitialState==null?void 0:u.getInitialState(o))??o});let i=[],s=!1,d={_features:e,options:{...l,...t},initialState:o,_queue:u=>{i.push(u),s||(s=!0,Promise.resolve().then(()=>{for(;i.length;)i.shift()();s=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{n.setState(n.initialState)},setOptions:u=>{n.options=a(Z(u,n.options))},getState:()=>n.options.state,setState:u=>{n.options.onStateChange==null||n.options.onStateChange(u)},_getRowId:(u,g,m)=>(n.options.getRowId==null?void 0:n.options.getRowId(u,g,m))??`${m?[m.id,g].join("."):g}`,getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:(u,g)=>{let m=(g?n.getPrePaginationRowModel():n.getRowModel()).rowsById[u];if(!m&&(m=n.getCoreRowModel().rowsById[u],!m))throw Error();return m},_getDefaultColumnDef:j(()=>[n.options.defaultColumn],u=>(u??(u={}),{header:g=>{let m=g.header.column.columnDef;return m.accessorKey?m.accessorKey:m.accessorFn?m.id:null},cell:g=>{var m;return((m=g.renderValue())==null||m.toString==null?void 0:m.toString())??null},...n._features.reduce((g,m)=>Object.assign(g,m.getDefaultColumnDef==null?void 0:m.getDefaultColumnDef()),{}),...u}),R(t,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>n.options.columns,getAllColumns:j(()=>[n._getColumnDefs()],u=>{let g=function(m,c,p){return p===void 0&&(p=0),m.map(w=>{let f=va(n,w,p,c),h=w;return f.columns=h.columns?g(h.columns,f,p+1):[],f})};return g(u)},R(t,"debugColumns","getAllColumns")),getAllFlatColumns:j(()=>[n.getAllColumns()],u=>u.flatMap(g=>g.getFlatColumns()),R(t,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:j(()=>[n.getAllFlatColumns()],u=>u.reduce((g,m)=>(g[m.id]=m,g),{}),R(t,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:j(()=>[n.getAllColumns(),n._getOrderColumnsFn()],(u,g)=>g(u.flatMap(m=>m.getLeafColumns())),R(t,"debugColumns","getAllLeafColumns")),getColumn:u=>n._getAllFlatColumnsById()[u]};Object.assign(n,d);for(let u=0;u<n._features.length;u++){let g=n._features[u];g==null||g.createTable==null||g.createTable(n)}return n}Yt=function(){return t=>j(()=>[t.options.data],e=>{let n={rows:[],flatRows:[],rowsById:{}},l=function(a,o,i){o===void 0&&(o=0);let s=[];for(let u=0;u<a.length;u++){let g=it(t,t._getRowId(a[u],u,i),a[u],u,o,void 0,i==null?void 0:i.id);if(n.flatRows.push(g),n.rowsById[g.id]=g,s.push(g),t.options.getSubRows){var d;g.originalSubRows=t.options.getSubRows(a[u],u),(d=g.originalSubRows)!=null&&d.length&&(g.subRows=l(g.originalSubRows,o+1,g))}}return s};return n.rows=l(e),n},R(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))};function Ka(t){let e=[],n=l=>{var a;e.push(l),(a=l.subRows)!=null&&a.length&&l.getIsExpanded()&&l.subRows.forEach(n)};return t.rows.forEach(n),{rows:e,flatRows:t.flatRows,rowsById:t.rowsById}}function Ya(t,e,n){return n.options.filterFromLeafRows?Ja(t,e,n):Xa(t,e,n)}function Ja(t,e,n){let l=[],a={},o=n.options.maxLeafRowFilterDepth??100,i=function(s,d){d===void 0&&(d=0);let u=[];for(let m=0;m<s.length;m++){var g;let c=s[m],p=it(n,c.id,c.original,c.index,c.depth,void 0,c.parentId);if(p.columnFilters=c.columnFilters,(g=c.subRows)!=null&&g.length&&d<o){if(p.subRows=i(c.subRows,d+1),c=p,e(c)&&!p.subRows.length){u.push(c),a[c.id]=c,l.push(c);continue}if(e(c)||p.subRows.length){u.push(c),a[c.id]=c,l.push(c);continue}}else c=p,e(c)&&(u.push(c),a[c.id]=c,l.push(c))}return u};return{rows:i(t),flatRows:l,rowsById:a}}function Xa(t,e,n){let l=[],a={},o=n.options.maxLeafRowFilterDepth??100,i=function(s,d){d===void 0&&(d=0);let u=[];for(let m=0;m<s.length;m++){let c=s[m];if(e(c)){var g;if((g=c.subRows)!=null&&g.length&&d<o){let p=it(n,c.id,c.original,c.index,c.depth,void 0,c.parentId);p.subRows=i(c.subRows,d+1),c=p}u.push(c),l.push(c),a[c.id]=c}}return u};return{rows:i(t),flatRows:l,rowsById:a}}Jt=function(){return t=>j(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,l)=>{if(!e.rows.length||!(n!=null&&n.length)&&!l){for(let m=0;m<e.flatRows.length;m++)e.flatRows[m].columnFilters={},e.flatRows[m].columnFiltersMeta={};return e}let a=[],o=[];(n??[]).forEach(m=>{let c=t.getColumn(m.id);if(!c)return;let p=c.getFilterFn();p&&a.push({id:m.id,filterFn:p,resolvedValue:(p.resolveFilterValue==null?void 0:p.resolveFilterValue(m.value))??m.value})});let i=(n??[]).map(m=>m.id),s=t.getGlobalFilterFn(),d=t.getAllLeafColumns().filter(m=>m.getCanGlobalFilter());l&&s&&d.length&&(i.push("__global__"),d.forEach(m=>{o.push({id:m.id,filterFn:s,resolvedValue:(s.resolveFilterValue==null?void 0:s.resolveFilterValue(l))??l})}));let u,g;for(let m=0;m<e.flatRows.length;m++){let c=e.flatRows[m];if(c.columnFilters={},a.length)for(let p=0;p<a.length;p++){u=a[p];let w=u.id;c.columnFilters[w]=u.filterFn(c,w,u.resolvedValue,f=>{c.columnFiltersMeta[w]=f})}if(o.length){for(let p=0;p<o.length;p++){g=o[p];let w=g.id;if(g.filterFn(c,w,g.resolvedValue,f=>{c.columnFiltersMeta[w]=f})){c.columnFilters.__global__=!0;break}}c.columnFilters.__global__!==!0&&(c.columnFilters.__global__=!1)}}return Ya(e.rows,m=>{for(let c=0;c<i.length;c++)if(m.columnFilters[i[c]]===!1)return!1;return!0},t)},R(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))};function Za(t){return e=>j(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(n,l)=>{if(!l.rows.length)return l;let{pageSize:a,pageIndex:o}=n,{rows:i,flatRows:s,rowsById:d}=l,u=a*o,g=u+a;i=i.slice(u,g);let m;m=e.options.paginateExpandedRows?{rows:i,flatRows:s,rowsById:d}:Ka({rows:i,flatRows:s,rowsById:d}),m.flatRows=[];let c=p=>{m.flatRows.push(p),p.subRows.length&&p.subRows.forEach(c)};return m.rows.forEach(c),m},R(e.options,"debugTable","getPaginationRowModel"))}Xt=function(){return t=>j(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;let l=t.getState().sorting,a=[],o=l.filter(d=>{var u;return(u=t.getColumn(d.id))==null?void 0:u.getCanSort()}),i={};o.forEach(d=>{let u=t.getColumn(d.id);u&&(i[d.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});let s=d=>{let u=d.map(g=>({...g}));return u.sort((g,m)=>{for(let c=0;c<o.length;c+=1){let p=o[c],w=i[p.id],f=w.sortUndefined,h=(p==null?void 0:p.desc)??!1,x=0;if(f){let S=g.getValue(p.id),b=m.getValue(p.id),y=S===void 0,v=b===void 0;if(y||v){if(f==="first")return y?-1:1;if(f==="last")return y?1:-1;x=y&&v?0:y?f:-f}}if(x===0&&(x=w.sortingFn(g,m,p.id)),x!==0)return h&&(x*=-1),w.invertSorting&&(x*=-1),x}return g.index-m.index}),u.forEach(g=>{var m;a.push(g),(m=g.subRows)!=null&&m.length&&(g.subRows=s(g.subRows))}),u};return{rows:s(n.rows),flatRows:a,rowsById:n.rowsById}},R(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))},at=function(t,e){return t?Qa(t)?C.createElement(t,e):t:null};function Qa(t){return eo(t)||typeof t=="function"||to(t)}function eo(t){return typeof t=="function"&&(()=>{let e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function to(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}dn=function(t){let e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=C.useState(()=>({current:Wa(e)})),[l,a]=C.useState(()=>n.current.initialState);return n.current.setOptions(o=>({...o,...t,state:{...l,...t.state},onStateChange:i=>{a(i),t.onStateChange==null||t.onStateChange(i)}})),n.current};const no={getInitialState:t=>({columnFormatting:{},...t}),getDefaultOptions:t=>({enableColumnFormatting:!0,onColumnFormattingChange:z("columnFormatting",t),locale:navigator.language}),createColumn:(t,e)=>{t.getColumnFormatting=()=>e.getState().columnFormatting[t.id],t.getCanFormat=()=>{var n,l;return(e.options.enableColumnFormatting&&((n=t.columnDef.meta)==null?void 0:n.dataType)!=="unknown"&&((l=t.columnDef.meta)==null?void 0:l.dataType)!==void 0)??!1},t.setColumnFormatting=n=>{var l,a;(a=(l=e.options).onColumnFormattingChange)==null||a.call(l,o=>({...o,[t.id]:n}))},t.applyColumnFormatting=n=>{var o,i;let l=(o=t.columnDef.meta)==null?void 0:o.dataType,a=(i=t.getColumnFormatting)==null?void 0:i.call(t);return a?K(n,{format:a,dataType:l,locale:e.options.locale}):n}}},lo=Ai(t=>({percentFormatter:new Intl.NumberFormat(t,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),dateFormatter:new Intl.DateTimeFormat(t,{dateStyle:"short"}),dateTimeFormatter:new Intl.DateTimeFormat(t,{dateStyle:"short",timeStyle:"long",timeZone:"UTC"}),timeFormatter:new Intl.DateTimeFormat(t,{timeStyle:"long",timeZone:"UTC"}),integerFormatter:new Intl.NumberFormat(t,{maximumFractionDigits:0})})),K=(t,e)=>{let{format:n,dataType:l,locale:a}=e,{percentFormatter:o,dateFormatter:i,dateTimeFormatter:s,timeFormatter:d,integerFormatter:u}=lo(a);if(t==null||t==="")return"";switch(l){case"time":return t;case"datetime":case"date":{let g=new Date(t);switch(n){case"Date":return i.format(g);case"Datetime":return s.format(g);case"Time":return d.format(g);default:return t}}case"integer":case"number":{let g=Number.parseFloat(t);switch(n){case"Auto":return G(g,a);case"Percent":return o.format(g);case"Scientific":return zt(g,{shouldRound:!0,locale:a});case"Engineering":return us(g,a);case"Integer":return u.format(g);default:return t}}case"string":switch(n){case"Uppercase":return t.toUpperCase();case"Lowercase":return t.toLowerCase();case"Capitalize":return t.charAt(0).toUpperCase()+t.slice(1);case"Title":return t.split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1).toLowerCase()).join(" ");default:return t}case"boolean":switch(n){case"Yes/No":return t?"Yes":"No";case"On/Off":return t?"On":"Off";default:return t}case void 0:case"unknown":return t;default:return ce(l),t}};function ao(t,e){switch(t){case"Date":return String(K(new Date,{format:"Date",dataType:"date",locale:e}));case"Datetime":return String(K(new Date,{format:"Datetime",dataType:"date",locale:e}));case"Time":return String(K(new Date,{format:"Time",dataType:"date",locale:e}));case"Percent":return String(K(.1234,{format:"Percent",dataType:"number",locale:e}));case"Scientific":return String(K(12345678910,{format:"Scientific",dataType:"number",locale:e}));case"Engineering":return String(K(12345678910,{format:"Engineering",dataType:"number",locale:e}));case"Integer":return String(K(1234.567,{format:"Integer",dataType:"number",locale:e}));case"Auto":return String(K(1234.567,{format:"Auto",dataType:"number",locale:e}));default:return null}}const oo={date:["Date","Datetime","Time"],datetime:["Date","Datetime","Time"],time:[],integer:["Auto","Percent","Scientific","Engineering","Integer"],number:["Auto","Percent","Scientific","Engineering","Integer"],string:["Uppercase","Lowercase","Capitalize","Title"],boolean:["Yes/No","On/Off"],unknown:[]};var Wn=P(A());function ro(t,e){var i,s,d;let n=(i=t.columnDef.meta)==null?void 0:i.dataType,l=n?oo[n]:[];if(l.length===0||!((s=t.getCanFormat)!=null&&s.call(t)))return null;let a=pi[n||"unknown"],o=(d=t.getColumnFormatting)==null?void 0:d.call(t);return(0,r.jsxs)(Re,{children:[(0,r.jsxs)(Vt,{children:[(0,r.jsx)(a,{className:"mo-dropdown-icon"}),"Format"]}),(0,r.jsx)(tt,{children:(0,r.jsxs)(Pe,{children:[(0,r.jsxs)("div",{className:"text-xs text-muted-foreground px-2 py-1",children:["Locale: ",e]}),!!o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V,{variant:"danger",onClick:()=>t.setColumnFormatting(void 0),children:"Clear"},"clear"),(0,r.jsx)(je,{})]}),l.map(u=>(0,r.jsxs)(V,{onClick:()=>t.setColumnFormatting(u),children:[(0,r.jsx)("span",{className:M(o===u&&"font-semibold"),children:u}),(0,r.jsx)("span",{className:"ml-auto pl-5 text-xs text-muted-foreground",children:ao(u,e)})]},u))]})})]})}function io(t){var e;return!((e=t.getCanWrap)!=null&&e.call(t))||!t.getColumnWrapping?null:t.getColumnWrapping()==="wrap"?(0,r.jsxs)(V,{onClick:()=>t.toggleColumnWrapping("nowrap"),children:[(0,r.jsx)(bn,{className:"mo-dropdown-icon"}),"No wrap text"]}):(0,r.jsxs)(V,{onClick:()=>t.toggleColumnWrapping("wrap"),children:[(0,r.jsx)(Kt,{className:"mo-dropdown-icon"}),"Wrap text"]})}function so(t){var e;return!((e=t.getCanPin)!=null&&e.call(t))||!t.getIsPinned?null:t.getIsPinned()===!1?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(V,{onClick:()=>t.pin("left"),children:[(0,r.jsx)(Bi,{className:"mo-dropdown-icon"}),"Freeze left"]}),(0,r.jsxs)(V,{onClick:()=>t.pin("right"),children:[(0,r.jsx)(Gi,{className:"mo-dropdown-icon"}),"Freeze right"]})]}):(0,r.jsxs)(V,{onClick:()=>t.pin(!1),children:[(0,r.jsx)(xn,{className:"mo-dropdown-icon"}),"Unfreeze"]})}function uo(t){var e;return!((e=t.getCanCopy)!=null&&e.call(t))||t.id.startsWith("__m_column__")?null:(0,r.jsxs)(V,{onClick:async()=>await lt(t.id),children:[(0,r.jsx)(Jl,{className:"mo-dropdown-icon"}),"Copy column name"]})}var Kn=Sn,Yn=Bt;function co(t,e){if(!t.getCanSort())return null;let n=t.getIsSorted(),l=t.getSortIndex(),a=e==null?void 0:e.getState().sorting,o=(a==null?void 0:a.length)&&a.length>1,i=()=>(0,r.jsx)("span",{className:"ml-auto text-xs font-medium",children:l+1}),s=()=>n?o?(0,r.jsxs)(V,{onClick:()=>e==null?void 0:e.resetSorting(),children:[(0,r.jsx)(et,{className:"mo-dropdown-icon"}),"Clear all sorts"]}):(0,r.jsxs)(V,{onClick:()=>t.clearSorting(),children:[(0,r.jsx)(et,{className:"mo-dropdown-icon"}),"Clear sort"]}):null,d=u=>{if(n===u)t.clearSorting();else{let g=u==="desc";t.toggleSorting(g,!0)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(V,{onClick:()=>d("asc"),className:n==="asc"?"bg-accent":"",children:[(0,r.jsx)(Kn,{className:"mo-dropdown-icon"}),"Asc",n==="asc"&&i()]}),(0,r.jsxs)(V,{onClick:()=>d("desc"),className:n==="desc"?"bg-accent":"",children:[(0,r.jsx)(Yn,{className:"mo-dropdown-icon"}),"Desc",n==="desc"&&i()]}),s(),(0,r.jsx)(je,{})]})}function go(t){if(!t.getCanSort())return null;let e=t.getIsSorted(),n=t.getFilterValue()!==void 0,l;return l=n&&e?Mn:n?_n:e?e==="desc"?Yn:Kn:et,(0,r.jsx)(l,{className:"h-3 w-3"})}function mo(t){var n;let e=(n=t.columnDef.meta)==null?void 0:n.dtype;return e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex-1 px-2 text-xs text-muted-foreground font-bold",children:e}),(0,r.jsx)(je,{})]}):null}const po=t=>{let e=(0,Wn.c)(5),{column:n}=t,l;e[0]===n?l=e[1]:(l=()=>n.setFilterValue(void 0),e[0]=n,e[1]=l);let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(Fn,{className:"mo-dropdown-icon"}),e[2]=a):a=e[2];let o;return e[3]===l?o=e[4]:(o=(0,r.jsxs)(V,{onClick:l,children:[a,"Clear filter"]}),e[3]=l,e[4]=o),o};function fo(t,e){var n,l;return!t.getCanFilter()||((n=t.columnDef.meta)==null?void 0:n.dataType)==="boolean"||!((l=t.columnDef.meta)!=null&&l.filterType)?null:(0,r.jsx)(Re,{children:(0,r.jsxs)(V,{onClick:()=>e(!0),children:[(0,r.jsx)(Zi,{className:"mo-dropdown-icon"}),"Filter by values"]})})}const vt=t=>{let e=(0,Wn.c)(8),{onApply:n,onClear:l,clearButtonDisabled:a}=t,o;e[0]===n?o=e[1]:(o=(0,r.jsx)(D,{variant:"link",size:"sm",onClick:n,children:"Apply"}),e[0]=n,e[1]=o);let i;e[2]!==a||e[3]!==l?(i=(0,r.jsx)(D,{variant:"linkDestructive",size:"sm",className:"",onClick:l,disabled:a,children:"Clear"}),e[2]=a,e[3]=l,e[4]=i):i=e[4];let s;return e[5]!==o||e[6]!==i?(s=(0,r.jsxs)("div",{className:"flex gap-2 px-2 justify-between",children:[o,i]}),e[5]=o,e[6]=i,e[7]=s):s=e[7],s};da=function(t){return Ve.collect(t,([e])=>e,([,[e]])=>e)},$t="__select__",ot="_marimo_row_id",ra="too_many";function ho(t){var e,n;if(t)return(n=(e=/^datetime(?:64)?\[[^,]+,([^,]+)]$/.exec(t))==null?void 0:e[1])==null?void 0:n.trim()}function xo(t,e){let n=new Map;for(let l of e){if(l.includes("__select__"))continue;let[a]=l.split("_"),o=t.getRow(a);if(!o)continue;let i=o.getAllCells().find(d=>d.id===l);if(!i)continue;let s=n.get(a)??[];s.push(Le({value:i.getValue()})),n.set(a,s)}return wo([...n.values()])}function wo(t){return t.map(e=>e.join("	")).join(`
`)}function Oe(t,e,n){var x,S;let l=t.getRow(e.rowId),a=t.getRow(n.rowId);if(!l||!a)return[];let o=l.index,i=a.index,s=(x=t.getColumn(e.columnId))==null?void 0:x.getIndex(),d=(S=t.getColumn(n.columnId))==null?void 0:S.getIndex();if(s===void 0||d===void 0)return[];let u=Math.min(o,i),g=Math.max(o,i),m=Math.min(s,d),c=Math.max(s,d),p=[];p.length=(g-u+1)*(c-m+1);let w=0,f=t.getAllColumns().map(b=>b.id),h=t.getRowModel().rows;for(let b=u;b<=g;b++){let y=h[b].id;for(let v=m;v<=c;v++){let _=f[v];p[w++]=bo(y,_)}}return p.length=w,p}function bo(t,e){return`${t}_${e}`}function So(){return{selectedCells:new Set,copiedCells:new Set,selectedStartCell:null,focusedCell:null,isSelecting:!1}}var{valueAtom:se,useActions:yo,createActions:Ls,reducer:Hs}=Di(So,{setSelectedCells:(t,e)=>({...t,selectedCells:e}),setSelectedStartCell:(t,e)=>({...t,selectedStartCell:e}),setFocusedCell:(t,e)=>({...t,focusedCell:e}),setIsSelecting:(t,e)=>({...t,isSelecting:e}),setCopiedCells:(t,e)=>({...t,copiedCells:e}),clearSelection:t=>({...t,selectedCells:new Set,selectedStartCell:null,focusedCell:null}),selectAllCells:(t,e)=>{let n=e.getRowModel().rows.flatMap(l=>l.getAllCells().map(a=>a.id));return{...t,selectedCells:new Set(n)}},toggleCurrentRowSelection:(t,e)=>{var l,a;let n=t.focusedCell;return n!=null&&n.rowId&&((a=(l=e.getRow(n==null?void 0:n.rowId))==null?void 0:l.toggleSelected)==null||a.call(l)),t},updateSelection:(t,{newCell:e,isShiftKey:n,table:l})=>{if(n&&t.selectedStartCell){let a=Oe(l,t.selectedStartCell,e);return{...t,selectedCells:new Set(a),focusedCell:e}}else return{...t,selectedCells:new Set([e.cellId]),selectedStartCell:e,focusedCell:e}},updateRangeSelection:(t,{cell:e,table:n})=>{if(!t.selectedStartCell)return t;let l={rowId:e.row.id,columnId:e.column.id,cellId:e.id},a=Oe(n,t.selectedStartCell,l);return a.length>1&&Ro(),{...t,selectedCells:new Set(a)}},handleCopy:(t,{table:e,onCopyComplete:n})=>{let l=window.getSelection();return l&&l.toString().length>0?t:(lt(xo(e,t.selectedCells)),n(),{...t,copiedCells:t.selectedCells})},navigate:(t,{direction:e,isShiftKey:n,table:l})=>{let a=t.focusedCell??t.selectedStartCell;if(!a)return t;let o;if(e==="up"||e==="down"){let s=l.getRowModel().rows,d=s.findIndex(g=>g.id===a.rowId);if(d<0)return t;let u=e==="up"?s[d-1]:s[d+1];if(!u)return t;o=u.getAllCells().find(g=>g.column.id===a.columnId)}if(e==="left"||e==="right"){let s=l.getRow(a.rowId).getAllCells(),d=s.findIndex(u=>u.id===a.cellId);if(d<0)return t;o=e==="left"?s[d-1]:s[d+1]}if(!o)return t;let i={rowId:o.row.id,columnId:o.column.id,cellId:o.id};if(n&&t.selectedStartCell){let s=Oe(l,t.selectedStartCell,i);return{...t,selectedCells:new Set(s),focusedCell:i}}else return{...t,selectedCells:new Set([i.cellId]),selectedStartCell:i,focusedCell:i}},handleCellMouseDown:(t,{cell:e,isShiftKey:n,isCtrlKey:l,table:a})=>{let o={rowId:e.row.id,columnId:e.column.id,cellId:e.id};if(n&&t.selectedStartCell){let i=Oe(a,t.selectedStartCell,o);return{...t,selectedCells:new Set(i),isSelecting:!0}}return l?t:t.selectedCells.size===1&&t.selectedCells.has(o.cellId)?{...t,selectedCells:new Set,selectedStartCell:null,focusedCell:null}:{...t,selectedCells:new Set([o.cellId]),selectedStartCell:o,focusedCell:o,isSelecting:!0}}});const Co=re(t=>t(se).selectedCells),vo=re(t=>t(se).copiedCells);re(t=>t(se).selectedStartCell),re(t=>t(se).focusedCell),re(t=>t(se).isSelecting);const jo=t=>re(e=>{let n=e(Co),l=e(vo);return{isSelected:n.has(t),isCopied:l.has(t)}}),Ro=()=>{var t;window.getSelection&&((t=window.getSelection())==null||t.empty())};var _o=P(A());const Jn=(0,C.memo)(t=>{let e=(0,_o.c)(9),{cellId:n,className:l}=t,a;e[0]===n?a=e[1]:(a=jo(n),e[0]=n,e[1]=a);let{isSelected:o,isCopied:i}=Al(a);if(!o&&!i)return null;let s=o&&"bg-(--green-3)",d=i&&"bg-(--green-4) transition-colors duration-150",u;e[2]!==l||e[3]!==s||e[4]!==d?(u=M("absolute inset-0 pointer-events-none",s,d,l),e[2]=l,e[3]=s,e[4]=d,e[5]=u):u=e[5];let g;return e[6]!==n||e[7]!==u?(g=(0,r.jsx)("div",{"data-cell-id":n,className:u}),e[6]=n,e[7]=u,e[8]=g):g=e[8],g});Jn.displayName="CellRangeSelectionIndicator";var Fo=P(A());const Mo=t=>{let e=(0,Fo.c)(30),{table:n}=t,l=yo(),a;e[0]!==l||e[1]!==n?(a=()=>{l.handleCopy({table:n,onCopyComplete:()=>{setTimeout(()=>{l.setCopiedCells(new Set)},500)}})},e[0]=l,e[1]=n,e[2]=a):a=e[2];let o=ie(a),i;e[3]!==l||e[4]!==n?(i=(b,y)=>{l.updateSelection({newCell:b,isShiftKey:y,table:n})},e[3]=l,e[4]=n,e[5]=i):i=e[5];let s=ie(i),d;e[6]!==l||e[7]!==n?(d=(b,y)=>{l.navigate({direction:y,isShiftKey:b.shiftKey,table:n})},e[6]=l,e[7]=n,e[8]=d):d=e[8];let u=ie(d),g;e[9]!==l||e[10]!==o||e[11]!==u||e[12]!==n?(g=b=>{e:switch(b.key){case"c":X.isMetaOrCtrl(b)&&o();break e;case"ArrowDown":b.preventDefault(),u(b,"down");break e;case"ArrowUp":b.preventDefault(),u(b,"up");break e;case"ArrowLeft":b.preventDefault(),u(b,"left");break e;case"ArrowRight":b.preventDefault(),u(b,"right");break e;case"Enter":b.preventDefault(),l.toggleCurrentRowSelection(n);break e;case"Escape":l.clearSelection();break e;case"a":(b.metaKey||b.ctrlKey)&&(b.preventDefault(),l.selectAllCells(n))}},e[9]=l,e[10]=o,e[11]=u,e[12]=n,e[13]=g):g=e[13];let m=ie(g),c;e[14]!==l||e[15]!==n?(c=(b,y)=>{l.handleCellMouseDown({cell:y,isShiftKey:b.shiftKey,isCtrlKey:b.ctrlKey,table:n})},e[14]=l,e[15]=n,e[16]=c):c=e[16];let p=ie(c),w;e[17]===l?w=e[18]:(w=()=>{l.setIsSelecting(!1)},e[17]=l,e[18]=w);let f=ie(w),h;e[19]!==l||e[20]!==n?(h=(b,y)=>{b.buttons===1&&l.updateRangeSelection({cell:y,table:n})},e[19]=l,e[20]=n,e[21]=h):h=e[21];let x=ie(h),S;return e[22]!==l.clearSelection||e[23]!==p||e[24]!==x||e[25]!==f||e[26]!==m||e[27]!==o||e[28]!==s?(S={handleCellMouseDown:p,handleCellMouseUp:f,handleCellMouseOver:x,handleCopy:o,handleCellsKeyDown:m,updateSelection:s,clearSelection:l.clearSelection},e[22]=l.clearSelection,e[23]=p,e[24]=x,e[25]=f,e[26]=m,e[27]=o,e[28]=s,e[29]=S):S=e[29],S};var Io=P(A()),ko=re(t=>t(se).focusedCell);function No(t){let e=(0,Io.c)(2),n;e[0]===t?n=e[1]:(n=l=>{l!=null&&l.cellId&&setTimeout(()=>{var o;let a=(o=t.current)==null?void 0:o.querySelector(`[data-cell-id="${l.cellId}"]`);if(!a){ve.warn("[ScrollIntoView] Could not find cell with ID:",l.cellId);return}a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},0)},e[0]=t,e[1]=n),Ri(ko,n)}function Vo(t,e){var l;if(!((l=t.getRowModel().rows)!=null&&l.length))return null;let n=a=>a.map(o=>o.headers.map(i=>{let{className:s,style:d}=Xn(i.column);return(0,r.jsx)(ks,{className:M("h-auto min-h-10 whitespace-pre align-top",s),style:d,ref:u=>{Ao(u,t,i.column)},children:i.isPlaceholder?null:at(i.column.columnDef.header,i.getContext())},i.id)}));return(0,r.jsx)(Is,{className:M(e&&"sticky top-0 z-10"),children:(0,r.jsxs)(Ht,{children:[n(t.getLeftHeaderGroups()),n(t.getCenterHeaderGroups()),n(t.getRightHeaderGroups())]})})}const Po=({table:t,columns:e,rowViewerPanelOpen:n,getRowIndex:l,viewedRowIdx:a})=>{var w;let o=(0,C.useRef)(null);No(o);let{handleCellMouseDown:i,handleCellMouseUp:s,handleCellMouseOver:d,handleCellsKeyDown:u}=Mo({table:t});function g(f,h){let x=/{{(\w+)}}/g,S=new Map;for(let b of h){let y=Le({value:b.getValue(),nullAsEmptyString:!0});S.set(b.column.id,y)}return f.replaceAll(x,(b,y)=>{let v=S.get(y);return v===void 0?`{{${y}}}`:v})}let m=f=>f.map(h=>{var v,_;let{className:x,style:S}=Xn(h.column),b=Object.assign({},((v=h.getUserStyling)==null?void 0:v.call(h))||{},S),y=((_=h.getHoverTitle)==null?void 0:_.call(h))??void 0;return(0,r.jsxs)(aa,{tabIndex:0,className:M("whitespace-pre truncate max-w-[300px] outline-hidden",h.column.getColumnWrapping&&h.column.getColumnWrapping()==="wrap"&&"whitespace-pre-wrap min-w-[200px]","px-1.5 py-[0.18rem]",x),style:b,title:y,onMouseDown:F=>i(F,h),onMouseUp:s,onMouseOver:F=>d(F,h),children:[(0,r.jsx)(Jn,{cellId:h.id}),(0,r.jsx)("div",{className:"relative",children:at(h.column.columnDef.cell,h.getContext())})]},h.id)}),c=f=>{var h;if(n){let x=(l==null?void 0:l(f.original,f.index))??f.index;(h=f.focusRow)==null||h.call(f,x)}},p=t.getState().cellHoverTemplate||null;return(0,r.jsx)(Ns,{onKeyDown:u,ref:o,children:(w=t.getRowModel().rows)!=null&&w.length?t.getRowModel().rows.map(f=>{var b;let h=n?(l==null?void 0:l(f.original,f.index))??f.index:void 0,x=n&&a===h,S;if(p){let y=((b=f.getVisibleCells)==null?void 0:b.call(f))??[...f.getLeftVisibleCells(),...f.getCenterVisibleCells(),...f.getRightVisibleCells()];S=p?g(p,y):void 0}return(0,r.jsxs)(Ht,{"data-state":f.getIsSelected()&&"selected",title:S,className:M("border-t h-6",n&&"cursor-pointer",x&&"bg-(--blue-3) hover:bg-(--blue-3) data-[state=selected]:bg-(--blue-4)"),onClick:()=>c(f),children:[m(f.getLeftVisibleCells()),m(f.getCenterVisibleCells()),m(f.getRightVisibleCells())]},f.id)}):(0,r.jsx)(Ht,{children:(0,r.jsx)(aa,{colSpan:e.length,className:"h-24 text-center",children:"No results."})})})};function Xn(t){let e=t.getIsPinned(),n=e==="left"&&t.getIsLastColumn("left"),l=e==="right"&&t.getIsFirstColumn("right");return{className:M(e&&"bg-inherit","shadow-r z-10"),style:{boxShadow:n&&t.id!=="__select__"?"-4px 0 4px -4px var(--slate-8) inset":l?"4px 0 4px -4px var(--slate-8) inset":void 0,left:e==="left"?`${t.getStart("left")}px`:void 0,right:e==="right"?`${t.getAfter("right")}px`:void 0,opacity:1,position:e?"sticky":"relative",zIndex:e?1:0,width:t.getSize()}}}function Ao(t,e,n){t&&e.getState().columnSizing[n.id]!==t.getBoundingClientRect().width&&e.setColumnSizing(l=>({...l,[n.id]:t.getBoundingClientRect().width}))}function Le(t){let{value:e,nullAsEmptyString:n=!1}=t;return typeof e=="object"&&e?JSON.stringify(e):e===null&&n?"":String(e)}var jt=30;Qt=({column:t,header:e,className:n,calculateTopKRows:l,table:a})=>{let[o,i]=(0,C.useState)(!1),{locale:s}=ge();if(!e)return null;if(!t.getCanSort()&&!t.getCanFilter())return(0,r.jsx)("div",{className:M(n),children:e});let d=t.getFilterValue()!==void 0,u=!t.getIsSorted()&&!d;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Dt,{modal:!1,children:[(0,r.jsx)(Pt,{asChild:!0,children:(0,r.jsxs)("div",{className:M("group flex items-center my-1 space-between w-full select-none gap-2 border hover:border-border border-transparent hover:bg-(--slate-3) data-[state=open]:bg-(--slate-3) data-[state=open]:border-border rounded px-1 -mx-1",n),"data-testid":"data-table-sort-button",children:[(0,r.jsx)("span",{className:"flex-1",children:e}),(0,r.jsx)("span",{className:M("h-5 py-1 px-1",u&&"invisible group-hover:visible data-[state=open]:visible"),children:go(t)})]})}),(0,r.jsxs)(At,{align:"start",children:[mo(t),co(t,a),uo(t),so(t),io(t),ro(t,s),(0,r.jsx)(je,{}),Do(t),fo(t,i),d&&(0,r.jsx)(po,{column:t})]})]}),o&&(0,r.jsx)(Oo,{setIsFilterValueOpen:i,calculateTopKRows:l,column:t})]})};function Do(t){var l;if(!t.getCanFilter())return null;let e=(l=t.columnDef.meta)==null?void 0:l.filterType;if(!e)return null;let n=(0,r.jsxs)(Vt,{children:[(0,r.jsx)(tn,{className:"mo-dropdown-icon"}),"Filter"]});return e==="boolean"?(0,r.jsxs)(Re,{children:[n,(0,r.jsx)(tt,{children:(0,r.jsx)(Pe,{children:(0,r.jsx)(Eo,{column:t})})})]}):e==="text"?(0,r.jsxs)(Re,{children:[n,(0,r.jsx)(tt,{children:(0,r.jsx)(Pe,{children:(0,r.jsx)(To,{column:t})})})]}):e==="number"?(0,r.jsxs)(Re,{children:[n,(0,r.jsx)(tt,{children:(0,r.jsx)(Pe,{children:(0,r.jsx)(zo,{column:t})})})]}):(e==="select"||e==="time"||e==="datetime"||e==="date"||ce(e),null)}var Zn={is_null:"is_null",is_not_null:"is_not_null"},Qn=({column:t,defaultItem:e,operator:n,setOperator:l})=>{let a=o=>{l(o),(o==="is_null"||o==="is_not_null")&&t.setFilterValue(W.text({operator:o}))};return(0,r.jsxs)(Kl,{value:n,onValueChange:o=>a(o),children:[(0,r.jsx)(Wl,{className:M("border-border shadow-none! ring-0! w-full mb-0.5",(n==="is_null"||n==="is_not_null")&&"mb-2"),children:(0,r.jsx)($l,{defaultValue:n})}),(0,r.jsxs)(Ul,{children:[e&&(0,r.jsx)(Ze,{value:e,children:ji(e)}),(0,r.jsx)(zi,{}),(0,r.jsx)(Ze,{value:Zn.is_null,children:"Is null"}),(0,r.jsx)(Ze,{value:Zn.is_not_null,children:"Is not null"})]})]})},Eo=({column:t})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V,{onClick:()=>t.setFilterValue(W.boolean({value:!0,operator:"is_true"})),children:"True"}),(0,r.jsx)(V,{onClick:()=>t.setFilterValue(W.boolean({value:!1,operator:"is_false"})),children:"False"}),(0,r.jsx)(je,{}),(0,r.jsx)(V,{onClick:()=>t.setFilterValue(W.boolean({operator:"is_null"})),children:"Is null"}),(0,r.jsx)(V,{onClick:()=>t.setFilterValue(W.boolean({operator:"is_not_null"})),children:"Is not null"})]}),zo=({column:t})=>{let e=t.getFilterValue(),n=e!==void 0,[l,a]=(0,C.useState)((e==null?void 0:e.operator)??"between"),[o,i]=(0,C.useState)(e==null?void 0:e.min),[s,d]=(0,C.useState)(e==null?void 0:e.max),u=(0,C.useRef)(null),g=(0,C.useRef)(null),m=(c={})=>{t.setFilterValue(W.number({min:c.min??o,max:c.max??s,operator:l==="between"?void 0:l}))};return(0,r.jsxs)("div",{className:"flex flex-col gap-1 pt-3 px-2",children:[(0,r.jsx)(Qn,{column:t,defaultItem:"between",operator:l,setOperator:a}),l==="between"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)(Zl,{ref:u,value:o,onChange:c=>i(c),"aria-label":"min",placeholder:"min",onKeyDown:c=>{var p;c.key==="Enter"&&m({min:Number.parseFloat(c.currentTarget.value)}),c.key==="Tab"&&((p=g.current)==null||p.focus())},className:"shadow-none! border-border hover:shadow-none!"}),(0,r.jsx)(kn,{className:"h-5 w-5 text-muted-foreground"}),(0,r.jsx)(Zl,{ref:g,value:s,onChange:c=>d(c),"aria-label":"max",onKeyDown:c=>{var p;c.key==="Enter"&&m({max:Number.parseFloat(c.currentTarget.value)}),c.key==="Tab"&&((p=u.current)==null||p.focus())},placeholder:"max",className:"shadow-none! border-border hover:shadow-none!"})]}),(0,r.jsx)(vt,{onApply:m,onClear:()=>{i(void 0),d(void 0),t.setFilterValue(void 0)},clearButtonDisabled:!n})]})]})},To=({column:t})=>{let e=t.getFilterValue(),n=e!==void 0,[l,a]=(0,C.useState)((e==null?void 0:e.text)??""),[o,i]=(0,C.useState)((e==null?void 0:e.operator)??"contains"),s=()=>{if(o!=="contains"){t.setFilterValue(W.text({operator:o}));return}if(l===""){t.setFilterValue(void 0);return}t.setFilterValue(W.text({text:l,operator:o}))};return(0,r.jsxs)("div",{className:"flex flex-col gap-1 pt-3 px-2",children:[(0,r.jsx)(Qn,{column:t,defaultItem:"contains",operator:o,setOperator:i}),o==="contains"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ns,{type:"text",icon:(0,r.jsx)(Vn,{className:"h-3 w-3 text-muted-foreground mb-1"}),value:l??"",onChange:d=>a(d.target.value),placeholder:"Text...",onKeyDown:d=>{d.key==="Enter"&&s()},className:"shadow-none! border-border hover:shadow-none!"}),(0,r.jsx)(vt,{onApply:s,onClear:()=>{a(""),t.setFilterValue(void 0)},clearButtonDisabled:!n})]})]})},Oo=({setIsFilterValueOpen:t,calculateTopKRows:e,column:n})=>{let[l,a]=(0,C.useState)(new Set),[o,i]=(0,C.useState)(""),{data:s,isPending:d,error:u}=ws(async()=>e?(await e({column:n.id,k:jt})).data:null,[]),g=(0,C.useMemo)(()=>{if(!s)return[];try{return s.filter(([f,h])=>f===void 0?!1:String(f).toLowerCase().includes(o.toLowerCase()))}catch(f){return ve.error("Error filtering data",f),[]}},[s,o]),m;d&&(m=(0,r.jsx)(Xl,{size:"medium",className:"mx-auto mt-12 mb-10"})),u&&(m=(0,r.jsx)(na,{error:u,className:"my-10 mx-4"}));let c=f=>{a(h=>{let x=h.has(f),S=new Set(h);return x?S.delete(f):S.add(f),S})},p=f=>{s&&a(f?new Set(g.map(([h])=>h)):new Set)},w=()=>{if(l.size===0){n.setFilterValue(void 0);return}n.setFilterValue(W.select({options:[...l],operator:"in"}))};if(s){let f=l.size===g.length;m=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Ms,{className:"text-sm outline-hidden",shouldFilter:!1,children:[(0,r.jsx)(Rs,{placeholder:"Search",autoFocus:!0,onValueChange:h=>i(h.trim())}),(0,r.jsx)(_s,{children:"No results found."}),(0,r.jsxs)(Fs,{className:"border-b",children:[g.length>0&&(0,r.jsxs)(la,{value:"__select-all__",className:"border-b rounded-none px-3",onSelect:()=>p(!f),children:[(0,r.jsx)(Je,{checked:l.size===g.length,"aria-label":"Select all",className:"mr-3 h-3.5 w-3.5"}),(0,r.jsx)("span",{className:"font-bold flex-1",children:n.id}),(0,r.jsx)("span",{className:"font-bold",children:"Count"})]}),g.map(([h,x],S)=>{let b=l.has(h),y=Le({value:h});return(0,r.jsxs)(la,{value:y,className:"not-last:border-b rounded-none px-3",onSelect:()=>c(h),children:[(0,r.jsx)(Je,{checked:b,"aria-label":"Select row",className:"mr-3 h-3.5 w-3.5"}),(0,r.jsx)("span",{className:"flex-1 overflow-hidden max-h-20 line-clamp-3",children:y}),(0,r.jsx)("span",{className:"ml-3",children:x})]},S)})]}),g.length===jt&&(0,r.jsxs)("span",{className:"text-xs text-muted-foreground mt-1.5 text-center",children:["Only showing the top ",jt," values"]})]}),(0,r.jsx)(vt,{onApply:w,onClear:()=>{a(new Set)},clearButtonDisabled:l.size===0})]})}return(0,r.jsxs)(ba,{open:!0,onOpenChange:f=>!f&&t(!1),className:"w-80 p-0",children:[(0,r.jsx)(vs,{className:"absolute top-2 right-2",children:(0,r.jsx)(D,{variant:"link",size:"sm",onClick:()=>t(!1),children:(0,r.jsx)(Bl,{className:"h-4 w-4"})})}),(0,r.jsx)("div",{className:"flex flex-col gap-1.5 py-2",children:m})]})};function Lo(t,e){let[n,l]=C.useState(t);return C.useEffect(()=>{let a=setTimeout(()=>{l(t)},e);return()=>{clearTimeout(a)}},[t,e]),n}qt=function(t={}){let{threshold:e=1,root:n=null,rootMargin:l="0px"}=t,[a,o]=C.useState(null),i=C.useRef(null);return[C.useCallback(s=>{if(i.current&&(i.current=(i.current.disconnect(),null)),(s==null?void 0:s.nodeType)===Node.ELEMENT_NODE){let d=new IntersectionObserver(([u])=>{o(u)},{threshold:e,root:n,rootMargin:l});d.observe(s),i.current=d}},[e,n,l]),a]},ha=function(t){let[e,n]=C.useState(t),[l,a]=C.useState(null);return t!==e&&(a(e),n(t)),l};var Ho=P(A());Zt=t=>{let e=(0,Ho.c)(13),{milliseconds:n,children:l,fallback:a,visibility:o,threshold:i,rootMargin:s}=t,d=o===void 0?!1:o,u=i===void 0?0:i,g=s===void 0?"0px":s,[m,c]=(0,C.useState)(!1),[p,w]=(0,C.useState)(!1),f;e[0]!==g||e[1]!==u?(f={threshold:u,root:null,rootMargin:g},e[0]=g,e[1]=u,e[2]=f):f=e[2];let[h,x]=qt(f),S;e[3]===(x==null?void 0:x.isIntersecting)?S=e[4]:(S=()=>{x!=null&&x.isIntersecting&&w(!0)},e[3]=x==null?void 0:x.isIntersecting,e[4]=S);let b=x==null?void 0:x.isIntersecting,y;e[5]===b?y=e[6]:(y=[b],e[5]=b,e[6]=y),(0,C.useEffect)(S,y);let v,_;e[7]===n?(v=e[8],_=e[9]):(v=()=>{let L=setTimeout(()=>{c(!0)},n);return()=>{clearTimeout(L)}},_=[n],e[7]=n,e[8]=v,e[9]=_),(0,C.useEffect)(v,_);let F=d&&!p?!1:m,k=d?h:null,I=F?l:a,E;return e[10]!==k||e[11]!==I?(E=(0,r.jsx)("div",{ref:k,children:I}),e[10]=k,e[11]=I,e[12]=E):E=e[12],E};var He=P(A());const el=t=>{let e=(0,He.c)(15),{date:n,type:l,children:a}=t;if(!n||Number.isNaN(new Date(n).getTime()))return a;let o;e[0]===n?o=e[1]:(o=new Date(n),e[0]=n,e[1]=o);let i=o,s;e[2]===i?s=e[3]:(s=(0,r.jsx)("div",{className:"text-muted-foreground mb-2",children:(0,r.jsx)($o,{date:i})}),e[2]=i,e[3]=s);let d;e[4]!==i||e[5]!==l?(d=(0,r.jsx)("div",{className:"space-y-1",children:l==="datetime"?(0,r.jsx)(Go,{date:i}):(0,r.jsx)(qo,{date:i})}),e[4]=i,e[5]=l,e[6]=d):d=e[6];let u;e[7]!==s||e[8]!==d?(u=(0,r.jsxs)("div",{className:"min-w-[240px] p-1 text-sm",children:[s,d]}),e[7]=s,e[8]=d,e[9]=u):u=e[9];let g=u,m;e[10]===a?m=e[11]:(m=(0,r.jsx)("span",{children:a}),e[10]=a,e[11]=m);let c;return e[12]!==g||e[13]!==m?(c=(0,r.jsx)(q,{content:g,delayDuration:200,children:m}),e[12]=g,e[13]=m,e[14]=c):c=e[14],c};var Go=t=>{let e=(0,He.c)(26),{date:n}=t,{locale:l}=ge(),a;e[0]===l?a=e[1]:(a=Intl.DateTimeFormat(l).resolvedOptions(),e[0]=l,e[1]=a);let o=a.timeZone,i=n.getUTCMilliseconds()!==0,s;e[2]===i?s=e[3]:(s=i?{timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}:{timeZone:"UTC",dateStyle:"long",timeStyle:"medium"},e[2]=i,e[3]=s);let d=nt(s),u;e[4]!==i||e[5]!==o?(u=i?{timeZone:o,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}:{timeZone:o,dateStyle:"long",timeStyle:"medium"},e[4]=i,e[5]=o,e[6]=u):u=e[6];let g=nt(u),m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)("span",{className:"bg-muted rounded-md py-1 px-2 w-fit ml-auto",children:"UTC"}),e[7]=m):m=e[7];let c;e[8]!==n||e[9]!==d?(c=d.format(n),e[8]=n,e[9]=d,e[10]=c):c=e[10];let p;e[11]===c?p=e[12]:(p=(0,r.jsxs)("div",{className:"grid grid-cols-[fit-content(40px)_1fr] gap-4 items-center justify-items-end",children:[m,(0,r.jsx)("span",{children:c})]}),e[11]=c,e[12]=p);let w;e[13]===o?w=e[14]:(w=(0,r.jsx)("span",{className:"bg-muted rounded-md py-1 px-2 w-fit ml-auto",children:o}),e[13]=o,e[14]=w);let f;e[15]!==n||e[16]!==g?(f=g.format(n),e[15]=n,e[16]=g,e[17]=f):f=e[17];let h;e[18]===f?h=e[19]:(h=(0,r.jsx)("span",{children:f}),e[18]=f,e[19]=h);let x;e[20]!==w||e[21]!==h?(x=(0,r.jsxs)("div",{className:"grid grid-cols-[fit-content(40px)_1fr] gap-4 items-center justify-items-end",children:[w,h]}),e[20]=w,e[21]=h,e[22]=x):x=e[22];let S;return e[23]!==x||e[24]!==p?(S=(0,r.jsxs)(r.Fragment,{children:[p,x]}),e[23]=x,e[24]=p,e[25]=S):S=e[25],S},qo=t=>{let e=(0,He.c)(6),{date:n}=t,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={timeZone:"UTC",dateStyle:"long"},e[0]=l):l=e[0];let a=nt(l),o;e[1]!==n||e[2]!==a?(o=a.format(n),e[1]=n,e[2]=a,e[3]=o):o=e[3];let i;return e[4]===o?i=e[5]:(i=(0,r.jsx)("span",{children:o}),e[4]=o,e[5]=i),i},$o=t=>{let e=(0,He.c)(6),{date:n}=t,{locale:l}=ge(),a,o;if(e[0]!==n||e[1]!==l){o=Symbol.for("react.early_return_sentinel");e:{let s=new Intl.RelativeTimeFormat(l,{numeric:"auto"}),d=(new Date().getTime()-n.getTime())/1e3;for(let[u,g,m]of[[60,1,"second"],[60,60,"minute"],[24,3600,"hour"],[365,86400,"day"],[1/0,31536e3,"year"]]){let c=d/g;if(c<u){let p=-Number(c.toFixed(1));o=(0,r.jsx)("span",{children:s.format(p,m)});break e}}a=s.format(0,"second")}e[0]=n,e[1]=l,e[2]=a,e[3]=o}else a=e[2],o=e[3];if(o!==Symbol.for("react.early_return_sentinel"))return o;let i;return e[4]===a?i=e[5]:(i=(0,r.jsx)("span",{children:a}),e[4]=a,e[5]=i),i},Bo=P(A()),Uo=t=>{let e=0;for(let n=0;n<t.length;n++){let l=t.charCodeAt(n);e=(e<<5)-e+l,e=Math.trunc(e)}return e},Wo=({numBars:t,maxHeight:e,seed:n})=>{let l=[],a=Uo(n);for(let o=0;o<t;o++){a=(a*9301+49297)%233280;let i=a/233280,s=Math.abs(Math.floor(i*e));l.push(s)}return l};const Ko=t=>{let e=(0,Bo.c)(11),{seed:n,width:l,height:a}=t,o=l/9,i=a-15,s;if(e[0]!==o||e[1]!==a||e[2]!==n||e[3]!==i||e[4]!==l){let d=Wo({numBars:9,maxHeight:i,seed:n}),u;e[6]!==a||e[7]!==l?(u={width:l,height:a},e[6]=a,e[7]=l,e[8]=u):u=e[8];let g;e[9]===o?g=e[10]:(g=(m,c)=>(0,r.jsx)("div",{className:"bg-(--slate-5) animate-pulse",style:{width:o-2,height:m}},c),e[9]=o,e[10]=g),s=(0,r.jsx)("div",{className:"flex items-end gap-px pb-2",style:u,children:d.map(g)}),e[0]=o,e[1]=a,e[2]=n,e[3]=i,e[4]=l,e[5]=s}else s=e[5];return s};var Ge={slate1:"#fcfcfd",slate2:"#f9f9fb",slate3:"#f0f0f3",slate4:"#e8e8ec",slate5:"#e0e1e6",slate6:"#d9d9e0",slate7:"#cdced6",slate8:"#b9bbc6",slate9:"#8b8d98",slate10:"#80838d",slate11:"#60646c",slate12:"#1c2024"},T={mint1:"#f9fefd",mint2:"#f2fbf9",mint3:"#ddf9f2",mint4:"#c8f4e9",mint5:"#b3ecde",mint6:"#9ce0d0",mint7:"#7ecfbd",mint8:"#4cbba5",mint9:"#86ead4",mint10:"#7de0cb",mint11:"#027864",mint12:"#16433c"},fe={orange1:"#fefcfb",orange2:"#fff7ed",orange3:"#ffefd6",orange4:"#ffdfb5",orange5:"#ffd19a",orange6:"#ffc182",orange7:"#f5ae73",orange8:"#ec9455",orange9:"#f76b15",orange10:"#ef5f00",orange11:"#cc4e00",orange12:"#582d1d"};function Yo(t,e,n){return{...n,layer:[{mark:{type:"bar",color:T.mint11},encoding:{x:{field:t,type:"quantitative",bin:!0},y:{aggregate:"count",type:"quantitative",axis:null}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:t,type:"quantitative",bin:!0,axis:{title:null,labelFontSize:8.5,labelOpacity:.5,labelExpr:"(datum.value >= 10000 || datum.value <= -10000) ? format(datum.value, '.2e') : format(datum.value, '.2~f')"}},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:t,type:"quantitative",bin:!0,title:t,format:e},{aggregate:"count",type:"quantitative",title:"Count",format:",d"}]}}]}}function Jo(t,e,n,l){let a=e==="date"?"%Y-%m-%d":e==="time"?"%H:%M:%S":"%Y-%m-%dT%H:%M:%S";return{...n,layer:[{mark:{type:"bar",color:T.mint11},encoding:{x:{field:t,type:"temporal",axis:null,bin:!0,scale:l},y:{aggregate:"count",type:"quantitative",axis:null},color:{condition:{test:`datum["bin_maxbins_10_${t}_range"] === "null"`,value:fe.orange11},value:T.mint11}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:t,type:"temporal",axis:null,bin:!0,scale:l},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:`bin_maxbins_10_${t}`,type:"temporal",format:a,bin:{binned:!0},title:`${t} (start)`},{field:`bin_maxbins_10_${t}_end`,type:"temporal",format:a,bin:{binned:!0},title:`${t} (end)`},{aggregate:"count",type:"quantitative",title:"Count",format:",d"}],color:{condition:{test:`datum["bin_maxbins_10_${t}_range"] === "null"`,value:fe.orange11},value:T.mint11}}}]}}function Xo(t,e,n){return{...e,mark:{type:"bar",color:T.mint11},encoding:{y:{field:t,type:"nominal",axis:{labelExpr:"datum.label === 'true' || datum.label === 'True'  ? 'True' : 'False'",tickWidth:0,title:null,labelColor:Ge.slate9}},x:{aggregate:"count",type:"quantitative",axis:null,scale:{type:"linear"}},tooltip:[{field:t,type:"nominal",title:"Value"},{aggregate:"count",type:"quantitative",title:"Count",format:",d"}]},layer:[{mark:{type:"bar",color:T.mint11,height:n}},{mark:{type:"text",align:"left",baseline:"middle",dx:3,color:Ge.slate9},encoding:{text:{aggregate:"count",type:"quantitative"}}}]}}var tl="%-I:%M:%S %p";function Zo(t){var n;if(t.length===0)return{};let e=(n=t.find(l=>l.bin_start!==null))==null?void 0:n.bin_start;if(!e||typeof e=="number"&&e.toString().length===4)return{};if(typeof e=="string"&&e.length===8)return{type:"temporal",timeUnit:"hoursminutesseconds",format:tl};if(typeof e=="string"&&e.length===10)return{type:"temporal",timeUnit:"yearmonthdate"};if(typeof e=="string"&&e.length===19){let l=e,a=t[t.length-1].bin_end;try{let o=new Date(l);if(new Date(a).getTime()-o.getTime()<1e3*60*60*24)return{type:"temporal",timeUnit:"hoursminutesseconds",format:tl}}catch(o){ve.debug("Error parsing date",o)}return{type:"temporal",timeUnit:"yearmonthdatehoursminutes"}}return ve.debug("Unknown time unit",e),{type:"temporal",timeUnit:"yearmonthdate"}}function nl(t){if(t.length===0)return 1;let e=t.filter(d=>d.bin_start!==null&&d.bin_end!==null);if(e.length===0)return 1;let n=e[0].bin_start,l=e[0].bin_end,a,o;if(typeof n=="number"&&typeof l=="number"){let d=e[0],u=e[e.length-1];a=d.bin_start,o=u.bin_end}else if(typeof n=="string"||typeof l=="string"){let d=e[0],u=e[e.length-1],g=new Date(d.bin_start).getTime(),m=new Date(u.bin_end).getTime();a=g,o=m}else{let d=e[0],u=e[e.length-1];a=d.bin_start.getTime(),o=u.bin_end.getTime()}let i=o-a;if(i===0)return 1;let s=i/e.length;return Math.max(s,1)}var ll=20,qe=30,al=70,ol=5,Qo="ARROW1";ds("arrow",Ps);let rl;fn=(ue=class{constructor(e,n,l,a,o,i){Ne(this,"columnStats",new Map);Ne(this,"columnBinValues",new Map);Ne(this,"columnValueCounts",new Map);if(this.data=e,this.fieldTypes=n,this.stats=l,this.binValues=a,this.valueCounts=o,this.opts=i,typeof this.data=="string")if(this.data.startsWith("./@file")||this.data.startsWith("/@file"))this.dataSpec={url:Ni(this.data).href},this.sourceName="source_0";else if(Ui(this.data)){this.sourceName="data_0";let s=Ji(Wi(this.data));s.startsWith(Qo)?this.dataSpec={values:Yi(s),format:{type:"arrow"}}:this.parseCsv(s)}else this.parseCsv(this.data),this.sourceName="data_0";else this.dataSpec={values:this.data},this.sourceName="source_0";this.columnBinValues=new Map(Object.entries(a)),this.columnValueCounts=new Map(Object.entries(o)),this.columnStats=new Map(Object.entries(l))}getColumnStats(e){return this.columnStats.get(e)}getHeaderSummary(e){return{stats:this.columnStats.get(e),type:this.fieldTypes[e],spec:this.opts.includeCharts?this.getVegaSpec(e):void 0}}parseCsv(e){this.dataSpec={values:zl(e)}}getVegaSpec(e){if(!this.data)return null;let n=this.opts.usePreComputedValues,l=this.columnBinValues.get(e),a=this.columnValueCounts.get(e),o=a&&a.length>0,i=this.dataSpec,s=this.columnStats.get(e);n&&(o?i={values:a,name:"value_counts"}:(s!=null&&s.nulls&&(l==null||l.push({bin_start:null,bin_end:null,count:s.nulls})),i={values:l,name:"bin_values"}));let d={background:"transparent",data:i,config:{view:{stroke:"transparent"},axis:{domain:!1}},height:100},u=this.fieldTypes[e];e=e.replaceAll(".","\\."),e=e.replaceAll("[","\\[").replaceAll("]","\\]"),e=e.replaceAll(":","\\:");let g=this.getScale();switch(u){case"date":case"datetime":case"time":{if(!n)return Jo(e,u,d,g);let m=nl(l||[]),c=Zo(l||[]);if((l==null?void 0:l.length)===1)return{...d,mark:{type:"bar",color:T.mint11},encoding:{x:{field:"bin_start",type:"nominal",axis:null},y:{field:"count",type:"quantitative",axis:null},tooltip:[{field:"bin_start",type:"temporal",...c,title:`${e} (start)`},{field:"bin_end",type:"temporal",...c,title:`${e} (end)`}]}};let p={height:qe,width:al,layer:[{mark:{type:"bar",color:T.mint11,stroke:T.mint11,strokeWidth:0},params:[{name:"hover",select:{type:"point",on:"mouseover",clear:"mouseout"}}],encoding:{x:{field:"bin_start",type:"temporal",bin:{binned:!0,step:m},axis:null},x2:{field:"bin_end",type:"temporal",axis:null},y:{field:"count",type:"quantitative",axis:null},strokeWidth:{condition:{param:"hover",empty:!1,value:.5},value:0}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:"bin_start",type:"temporal",bin:{binned:!0,step:m},axis:null},x2:{field:"bin_end",type:"temporal",bin:{binned:!0,step:m},axis:null},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:"bin_start",type:"temporal",...c,title:`${e} (start)`},{field:"bin_end",type:"temporal",...c,title:`${e} (end)`},{field:"count",type:"quantitative",title:"Count",format:",d"}]}}]},w={height:qe,width:ol,layer:[{mark:{type:"bar",color:fe.orange11},encoding:{x:{field:"bin_start",type:"nominal",axis:null},y:{field:"count",type:"quantitative",axis:null}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:"bin_start",type:"nominal",axis:null},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:"count",type:"quantitative",title:"nulls",format:",d"}]}}],transform:[{filter:"datum['bin_start'] === null && datum['bin_end'] === null"}]},f=p,h=d;return s!=null&&s.nulls&&(h={...d,config:{...d.config,concat:{spacing:0}},resolve:{scale:{y:"shared"}}},f={hconcat:[w,p]}),{...h,...f}}case"integer":case"number":{let m=u==="integer"?",d":".2f",c=nl(l||[]);if(!n)return Yo(e,m,d);let p=this.columnStats.get(e),w={height:qe,width:al,layer:[{mark:{type:"bar",color:T.mint11,stroke:T.mint11,strokeWidth:0},params:[{name:"hover",select:{type:"point",on:"mouseover",clear:"mouseout"}}],encoding:{x:{field:"bin_start",type:"quantitative",bin:{binned:!0,step:c}},x2:{field:"bin_end",axis:null},y:{field:"count",type:"quantitative",axis:null},strokeWidth:{condition:{param:"hover",empty:!1,value:.5},value:0}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:"bin_start",type:"quantitative",bin:{binned:!0,step:c},axis:{title:null,labelFontSize:8.5,labelOpacity:.5,labelExpr:"(datum.value >= 10000 || datum.value <= -10000) ? format(datum.value, '.2e') : format(datum.value, '.2~f')",values:[p==null?void 0:p.min,p==null?void 0:p.p25,p==null?void 0:p.median,p==null?void 0:p.p75,p==null?void 0:p.p95,p==null?void 0:p.max].filter(S=>S!==void 0)}},x2:{field:"bin_end"},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:"bin_range",type:"nominal",title:e},{field:"count",type:"quantitative",title:"Count",format:",d"}]},transform:[{calculate:`format(datum.bin_start, '${m}') + ' - ' + format(datum.bin_end, '${m}')`,as:"bin_range"}]}]},f={height:qe,width:ol,layer:[{mark:{type:"bar",color:fe.orange11},encoding:{x:{field:"bin_start",type:"nominal",axis:null},y:{field:"count",type:"quantitative",axis:null}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:"bin_start",type:"nominal",axis:null},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:"count",type:"quantitative",title:"nulls",format:",d"}]}}],transform:[{filter:"datum['bin_start'] === null && datum['bin_end'] === null"}]},h=w,x=d;return p!=null&&p.nulls&&(x={...d,config:{...d.config,concat:{spacing:0}},resolve:{scale:{y:"shared"}}},h={hconcat:[f,w]}),{...x,...h}}case"boolean":{if(!n||!(s!=null&&s.true)||!(s!=null&&s.false))return Xo(e,d,ll);let m=s!=null&&s.nulls?11:ll,c=[{value:"true",count:s.true},{value:"false",count:s.false}];s!=null&&s.nulls&&c.push({value:"null",count:s.nulls});let p={field:"count",type:"quantitative",format:",d"},w=[],f=Number(s.total)||Number(s.true)+Number(s.false)+Number(s.nulls);return Number.isNaN(f)||(p={field:"count_with_percent",type:"nominal",title:"Count"},w=[{calculate:`format(datum.count, ',d') + ' (' + format(datum.count / ${f} * 100, '.1f') + '%)'`,as:"count_with_percent"}]),{...d,data:{values:c,name:"boolean_values"},mark:{type:"bar",color:T.mint11},encoding:{y:{field:"value",type:"nominal",sort:["true","false","null"],scale:s!=null&&s.nulls?{paddingInner:1}:void 0,axis:{labelExpr:"datum.label === 'true' || datum.label === 'True'  ? 'True' : datum.label === 'false' || datum.label === 'False' ? 'False' : 'Null'",tickWidth:0,title:null,labelColor:Ge.slate9}},x:{field:"count",type:"quantitative",axis:null,scale:{type:"linear"}},color:{field:"value",type:"nominal",scale:{domain:["true","false","null"],range:[T.mint11,T.mint11,fe.orange11]},legend:null},tooltip:[{field:"value",type:"nominal",title:e},p]},transform:w,layer:[{mark:{type:"bar",color:T.mint11,height:m}},{mark:{type:"text",align:"left",baseline:"middle",dx:3,color:Ge.slate9},encoding:{text:{field:"count",type:"quantitative",format:",d"}}}]}}case"string":{if(!n||!o)return null;let m=Number(s==null?void 0:s.total)||a.reduce((S,b)=>S+b.count,0),c="value",p=[],w=0;for(let S of a){let b=w+S.count,y=(w+b)/2,v=(b-w)/m;p.push({count:S.count,value:S.value,xStart:w,xEnd:b,xMid:y,proportion:v}),w=b}let f=[{calculate:m?`datum.count / ${m}`:"0",as:"percent"}],h={mark:{type:"bar"},params:[{name:"hover_bar",select:{type:"point",on:"mouseover",clear:"mouseout"}}],encoding:{x:{field:"xStart",type:"quantitative",axis:null},x2:{field:"xEnd",type:"quantitative"},color:{condition:[{param:"hover_bar",value:T.mint11},{test:`datum.${c} == "None" || datum.${c} == "null"`,value:fe.orange11}],value:T.mint8,legend:null},tooltip:[{field:c,type:"nominal",title:e},{field:"count_with_percent",type:"nominal",title:"Count"}]},transform:[{calculate:`format(datum.count, ',d') + ' (' + format(datum.count / ${m} * 100, '.1f') + '%)'`,as:"count_with_percent"}]},x={mark:{type:"text",color:"white",fontSize:8.5,ellipsis:" ",clip:!0},encoding:{x:{field:"xMid",type:"quantitative",axis:null},text:{field:"clipped_text"}},transform:[{calculate:`datum.proportion > 0.5 ? slice(datum.${c}, 0, 8) : datum.proportion > 0.2 ? slice(datum.${c}, 0, 3) : datum.proportion > 0.1 ? slice(datum.${c}, 0, 1) : ''`,as:"clipped_text"}]};return{...d,data:{values:p,name:"value_counts"},layer:[h,x],transform:f}}case"unknown":return null;default:return ce(u),null}}getScale(){return{align:0,paddingInner:0,paddingOuter:{expr:`length(data('${this.sourceName}')) == 2 ? 1 : length(data('${this.sourceName}')) == 3 ? 0.5 : length(data('${this.sourceName}')) == 4 ? 0 : 0`}}}},Ne(ue,"EMPTY",new ue([],{},{},{},{},{includeCharts:!1,usePreComputedValues:!1})),ue),rl=P(A()),an=C.createContext(fn.EMPTY);var er=C.lazy(()=>Gl(()=>import("./esm-D8TEQuHf.js").then(async t=>(await t.__tla,t)),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(t=>({default:t.VegaLite}))),tr=Fi();const nr=t=>{let e=(0,rl.c)(19),{columnId:n}=t,{locale:l}=ge(),a=C.use(an),{theme:o}=ql(),i,s,d;if(e[0]!==a||e[1]!==n||e[2]!==l||e[3]!==o){let{spec:g,type:m,stats:c}=a.getHeaderSummary(n),p=null;if(g){let h;e[7]===n?h=e[8]:(h=(0,r.jsx)(Ko,{seed:n,width:80,height:40}),e[7]=n,e[8]=h);let x=h,S;e[9]===Symbol.for("react.memo_cache_sentinel")?(S={minWidth:"unset",maxHeight:"40px"},e[9]=S):S=e[9];let b=(0,r.jsx)(C.Suspense,{fallback:x,children:(0,r.jsx)(er,{spec:g,width:70,height:30,renderer:"svg",loader:tr,style:S,actions:!1,theme:o==="dark"?"dark":"vox"})}),y;e[10]!==x||e[11]!==b?(y=(0,r.jsx)(Zt,{milliseconds:200,visibility:!0,rootMargin:"200px",fallback:x,children:b}),e[10]=x,e[11]=b,e[12]=y):y=e[12],p=y}let w;e[13]===l?w=e[14]:(w=(h,x)=>(0,r.jsx)(el,{date:h,type:x,children:is(h,x,l)}),e[13]=l,e[14]=w);let f=w;i="flex flex-col items-center text-xs text-muted-foreground align-end",s=p,d=(()=>{if(!c)return null;switch(m){case"date":case"datetime":return g?(0,r.jsxs)("div",{className:"flex justify-between w-full px-2 whitespace-pre",children:[(0,r.jsx)("span",{children:f(c.min,m)}),c.min===c.max?null:(0,r.jsxs)("span",{children:["-",f(c.max,m)]})]}):(0,r.jsxs)("div",{className:"flex flex-col whitespace-pre",children:[(0,r.jsxs)("span",{children:["min: ",f(c.min,m)]}),(0,r.jsxs)("span",{children:["max: ",f(c.max,m)]}),(0,r.jsxs)("span",{children:["unique: ",G(c.unique,l)]})]});case"integer":case"number":return g?null:(0,r.jsxs)("div",{className:"flex flex-col whitespace-pre",children:[(0,r.jsxs)("span",{children:["min:"," ",typeof c.min=="number"?zt(c.min,{shouldRound:!0,locale:l}):c.min]}),(0,r.jsxs)("span",{children:["max:"," ",typeof c.max=="number"?zt(c.max,{shouldRound:!0,locale:l}):c.max]}),(0,r.jsxs)("span",{children:["unique: ",G(c.unique,l)]})]});case"boolean":return g?null:(0,r.jsxs)("div",{className:"flex flex-col whitespace-pre",children:[(0,r.jsxs)("span",{children:["true: ",G(c.true,l)]}),(0,r.jsxs)("span",{children:["false: ",G(c.false,l)]})]});case"time":return null;case"string":return g?null:(0,r.jsx)("div",{className:"flex flex-col whitespace-pre",children:(0,r.jsxs)("span",{children:["unique: ",G(c.unique,l)]})});case"unknown":return(0,r.jsx)("div",{className:"flex flex-col whitespace-pre",children:(0,r.jsxs)("span",{children:["nulls: ",G(c.nulls,l)]})});default:return ce(m),null}})(),e[0]=a,e[1]=n,e[2]=l,e[3]=o,e[4]=i,e[5]=s,e[6]=d}else i=e[4],s=e[5],d=e[6];let u;return e[15]!==i||e[16]!==s||e[17]!==d?(u=(0,r.jsxs)("div",{className:i,children:[s,d]}),e[15]=i,e[16]=s,e[17]=d,e[18]=u):u=e[18],u};var lr=P(A()),ar=new Xi;const or=t=>{let e=(0,lr.c)(13),{text:n,channel:l,wrapText:a}=t,o=l==="stdout"||l==="stderr",i;e[0]===a?i=e[1]:(i=p=>(0,r.jsx)("span",{className:a?"whitespace-pre-wrap break-words":"whitespace-pre",dangerouslySetInnerHTML:{__html:ar.ansi_to_html(p)}}),e[0]=a,e[1]=i);let s=i,d=!o&&(a?"whitespace-pre-wrap break-words":"whitespace-pre"),u=l==="output"&&"font-prose",g;e[2]!==l||e[3]!==d||e[4]!==u?(g=M(d,u,l),e[2]=l,e[3]=d,e[4]=u,e[5]=g):g=e[5];let m;e[6]!==s||e[7]!==o||e[8]!==n?(m=o?s(n):n,e[6]=s,e[7]=o,e[8]=n,e[9]=m):m=e[9];let c;return e[10]!==g||e[11]!==m?(c=(0,r.jsx)("span",{className:g,children:m}),e[10]=g,e[11]=m,e[12]=c):c=e[12],c};var Rt=P(A());let il;hn=()=>{let t=(0,Rt.c)(1),e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,r.jsx)(Qi,{className:"w-10 h-10 animate-spin",strokeWidth:1}),(0,r.jsx)("span",{children:"Loading chart..."})]}),t[0]=e):e=t[0],e},ia=t=>{let e=(0,Rt.c)(2),{error:n}=t,l;return e[0]===n?l=e[1]:(l=(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(na,{error:n})}),e[0]=n,e[1]=l),l},fa=t=>{let e=(0,Rt.c)(8),{children:n,className:l}=t,a;e[0]===l?a=e[1]:(a=M("flex flex-col items-center justify-center gap-4",l),e[0]=l,e[1]=a);let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(nn,{className:"w-10 h-10 text-muted-foreground"}),e[2]=o):o=e[2];let i;e[3]===n?i=e[4]:(i=(0,r.jsx)("span",{className:"text-md font-semibold text-muted-foreground",children:n}),e[3]=n,e[4]=i);let s;return e[5]!==a||e[6]!==i?(s=(0,r.jsxs)("div",{className:a,children:[o,i]}),e[5]=a,e[6]=i,e[7]=s):s=e[7],s},il={getInitialState:t=>({...t,cellHoverTemplate:null})},ua=async function(t){return Array.isArray(t)?t:t.startsWith("{")||t.startsWith("[")?fi(t):(t=await Mi(t,{type:"json"},{handleBigIntAndNumberLike:!0}),t)};function $e(t){if(t&&typeof t=="object"&&"_marimo_row_id"in t)return String(t[ot])}function rr(t){return $e(t)??t.id}const ir={getInitialState:t=>({...t,cellHoverTexts:{}}),createCell:(t,e,n,l)=>{t.getHoverTitle=()=>{var i;let a=l.getState().cellHoverTexts,o=rr(n);return((i=a==null?void 0:a[o])==null?void 0:i[e.id])??void 0}}};function sl(t){return $e(t)??t.id}const sr={getInitialState:t=>({...t,cellSelection:[]}),getDefaultOptions:t=>({onCellSelectionChange:z("cellSelection",t),enableCellSelection:!1}),createTable:t=>{t.setCellSelection=e=>{var n,l;t.setState(a=>({...a,cellSelection:Ii.asUpdater(e)(a.cellSelection)})),(l=(n=t.options).onCellSelectionChange)==null||l.call(n,e)},t.resetCellSelection=e=>{t.setCellSelection&&t.setCellSelection(()=>e??[])}},createCell:(t,e,n,l)=>{t.getIsSelected=()=>(l.getState().cellSelection??[]).some(a=>a.rowId===sl(n)&&a.columnName===e.id),t.toggleSelected=a=>{var u;if(!l.setCellSelection)return;let o=e.id,i=((u=t.getIsSelected)==null?void 0:u.call(t))||!1,s=a===void 0?!i:a,d=sl(n);s&&!i?l.options.enableMultiCellSelection?l.setCellSelection(g=>[{rowId:d,columnName:o},...g]):l.setCellSelection(g=>[{rowId:d,columnName:o}]):i&&!s&&(l.options.enableMultiCellSelection?l.setCellSelection(g=>g.filter(m=>!(m.rowId===d&&m.columnName===o))):l.setCellSelection(g=>[]))}}};function ur(t){return $e(t)??t.id}const dr={getInitialState:t=>({...t,cellStyling:{}}),createCell:(t,e,n,l)=>{t.getUserStyling=()=>{var i;let a=l.getState().cellStyling,o=ur(n);return((i=a==null?void 0:a[o])==null?void 0:i[e.id])||{}}}},cr={getInitialState:t=>({columnWrapping:{},...t}),getDefaultOptions:t=>({enableColumnWrapping:!0,onColumnWrappingChange:z("columnWrapping",t)}),createColumn:(t,e)=>{t.getColumnWrapping=()=>e.getState().columnWrapping[t.id]||"nowrap",t.getCanWrap=()=>e.options.enableColumnWrapping??!1,t.toggleColumnWrapping=n=>{var l,a;(a=(l=e.options).onColumnWrappingChange)==null||a.call(l,o=>{let i=o[t.id]||"nowrap";return n?{...o,[t.id]:n}:{...o,[t.id]:i==="nowrap"?"wrap":"nowrap"}})}}},gr={getDefaultOptions:t=>({enableCopyColumn:!0}),createColumn:(t,e)=>{t.getCanCopy=()=>e.options.enableCopyColumn??!1}},mr=({filters:t,table:e})=>{let n=nt({hour:"2-digit",minute:"2-digit",second:"2-digit"});if(!t||t.length===0)return null;function l(a){let o=pr(a.value,n);return o?(0,r.jsxs)(as,{variant:"secondary",className:"dark:invert",children:[a.id," ",o," ",(0,r.jsx)("span",{className:"cursor-pointer opacity-60 hover:opacity-100 pl-1 py-[2px]",onClick:()=>{e.setColumnFilters(i=>i.filter(s=>s.id!==a.id))},children:(0,r.jsx)(Bl,{className:"w-3.5 h-3.5"})})]},a.id):null}return(0,r.jsx)("div",{className:"flex flex-wrap gap-2 px-1",children:t.map(l)})};function pr(t,e){var n,l,a,o;if("type"in t){if(t.operator==="is_null")return"is null";if(t.operator==="is_not_null")return"is not null";if(t.type==="number")return Be(t.min,t.max);if(t.type==="date")return Be((n=t.min)==null?void 0:n.toISOString(),(l=t.max)==null?void 0:l.toISOString());if(t.type==="time")return Be(t.min?e.format(t.min):void 0,t.max?e.format(t.max):void 0);if(t.type==="datetime")return Be((a=t.min)==null?void 0:a.toISOString(),(o=t.max)==null?void 0:o.toISOString());if(t.type==="boolean")return`is ${t.value?"True":"False"}`;if(t.type==="select")return`is in [${t.options.map(i=>Le({value:i})).join(", ")}]`;if(t.type==="text")return`contains "${t.text}"`;ce(t)}}function Be(t,e){if(!(t===void 0&&e===void 0))return t===e?`== ${t}`:t===void 0?`<= ${e}`:e===void 0?`>= ${t}`:`${t} - ${e}`}const fr={getInitialState:t=>({...t,focusedRowIdx:-1}),getDefaultOptions:t=>({enableFocusRow:!0,onFocusRowChange:z("focusedRowIdx",t)}),createRow:(t,e)=>{t.focusRow=n=>{var l,a;(a=(l=e.options).onFocusRowChange)==null||a.call(l,n)},t.getFocusedRowIdx=()=>e.getState().focusedRowIdx}};var hr=(t,e)=>t===e;sn=function(t,e=hr){let[n,l]=(0,C.useState)(t),a=(0,C.useRef)(t);return e(a.current,t)||(l(t),a.current=t),[n,l]};function xr(t,e){let[n,l]=sn({left:ul(t),right:e},_i);return{columnPinning:n,setColumnPinning:a=>{l(o=>{let i=typeof a=="function"?a(o):a;return{left:ul(i.left),right:i.right}})}}}function ul(t){return!t||t.length===0?[]:t.includes("__select__")?t:[$t,...t]}var Me=Symbol("scope"),_t=Symbol("originalBuildingBlocks");function dl(t,e){return t===e||t.size===e.size&&Array.from(t).every(e.has.bind(e))}function wr(t){return(_t in t?t[_t]:Pl(t)).slice(0,6)}function Ue(t){return"write"in t}var cl={};function br({atomSet:t=new Set,atomFamilySet:e=new Set,parentStore:n,name:l}){let a=Me in n?n[Me]:void 0,o=new WeakMap,i=new WeakMap,s=new WeakMap,d={getAtom:g,cleanup(){for(let h of u)h()},prepareWriteAtom(h,x,S,b){if(x.read===Ft&&Ue(x)&&Ue(h)&&x.write!==gl&&d!==S){let{write:y}=x;return h.write=f(x.write.bind(x),S,b),()=>{h.write=y}}}};for(let h of t)o.set(h,[p(h,d),d]);let u=new Set;for(let h of e){for(let S of h.getParams()){let b=h(S);o.has(b)||o.set(b,[p(b,d),d])}let x=h.unstable_listen(S=>{S.type==="CREATE"&&!o.has(S.atom)?o.set(S.atom,[p(S.atom,d),d]):t.has(S.atom)||o.delete(S.atom)});u.add(x)}function g(h,x){var S,b;if(o.has(h))return o.get(h);if(x===d)return i.has(h)||i.set(h,[p(h,x),x]),i.get(h);let y=x??cl;if(a){if(!((S=s.get(y))!=null&&S.has(h))){let[v,_]=a.getAtom(h,x);m(c(v,h,_),h,x,_)}return s.get(y).get(h)}return(b=s.get(y))!=null&&b.has(h)||m(c(h,h),h),s.get(y).get(h)}function m(h,x,S,b){let y=S??cl;s.has(y)||s.set(y,new WeakMap),s.get(y).set(x,[h,b].filter(Boolean))}function c(h,x,S){return x.read===Ft?h:p(x,S)}function p(h,x){let S=Object.getOwnPropertyDescriptors(h);Object.entries(S).filter(([y])=>["read","write","debugLabel"].includes(y)).forEach(([,y])=>y.configurable=!0);let b=Object.create(Object.getPrototypeOf(h),S);return b.originalAtom=h,b.read!==Ft&&(b.read=w(h.read.bind(h),x)),Ue(b)&&Ue(h)&&b.write!==gl&&(b.write=f(h.write.bind(h),x)),b}function w(h,x){return function(S,b){return h(function(y){let[v]=g(y,x);return S(v)},b)}}function f(h,x,S=x){return function(b,y,...v){return h(function(_){let[F]=g(_,x);return b(F)},function(_,...F){let[k]=g(_,x),I=d.prepareWriteAtom(k,_,x,S);try{return y(k,...F)}finally{I==null||I()}},...v)}}return Sr(n,d)}var{read:Ft,write:gl}=re(null);function Sr(t,e){let n=wr(t),l={};n[6]=l,n[9]=f=>{var h;return(h=f.unstable_onInit)==null?void 0:h.call(f,a)};let a=ci(...n),o=Pl(a),i=[...o];function s(f){return(h,...x)=>{let[S]=e.getAtom(h);return f(S,...x)}}function d(f){let h={get:s(f.get.bind(f)),set:s(f.set.bind(f))};return"has"in f&&(h.has=s(f.has.bind(f))),"delete"in f&&(h.delete=s(f.delete.bind(f))),h}function u(f){return{get size(){return f.size},add:s(f.add.bind(f)),has:s(f.has.bind(f)),clear:f.clear.bind(f),forEach:h=>f.forEach(s(h)),*[Symbol.iterator](){for(let h of f)yield e.getAtom(h)[0]}}}function g(f){if(!f)return;let h=s(f);return h.add=(x,S)=>x===void 0?f.add(void 0,S):f.add(e.getAtom(x)[0],S),h}let m=[d(i[0]),d(i[1]),d(i[2]),u(i[3]),i[4],i[5],{get c(){return g(l.c)},set c(f){l.c=f},get m(){return g(l.m)},set m(f){l.m=f},get u(){return g(l.u)},set u(f){l.u=f},get f(){return l.f},set f(f){l.f=f}},s(i[7]),s(i[8]),i[9],s(i[10]),s(i[11]),i[12],i[13],s(i[14]),s(i[15]),s(i[16]),s(i[17]),s(i[18]),s(i[19])];Object.assign(o,m);let{get:c,set:p,sub:w}=a;return Object.assign(a,{get(f){let[h]=e.getAtom(f);return c(h)},set(f,...h){let[x,S]=e.getAtom(f),b=e.prepareWriteAtom(x,f,S,e);try{return p(x,...h)}finally{b==null||b()}},sub(f,h){let[x]=e.getAtom(f);return w(x,h)},[Me]:e,[_t]:i})}function yr(t){let{atoms:e=[],atomFamilies:n=[],children:l,scope:a,name:o}=t,i=Vl(),s=Array.from(e,f=>Array.isArray(f)?f[0]:f),d=new Set(s),u=new Set(n);function g(){return{scope:a??br({atomSet:d,atomFamilySet:u,parentStore:i,name:o}),hasChanged(f){return i!==f.parentStore||!dl(d,f.atomSet)||!dl(u,f.atomFamilySet)||a!==f.providedScope}}}let[m,c]=(0,C.useState)(g),{hasChanged:p,scope:w}=m;return p({atomSet:d,atomFamilySet:u,parentStore:i,providedScope:a})&&(w[Me].cleanup(),c(g)),pe(Array.from(e).filter(Array.isArray),{store:w}),(0,C.useEffect)(()=>w[Me].cleanup,[w]),(0,C.createElement)(gi,{store:w},l)}var Cr=P(A());const vr=t=>{let e=(0,Cr.c)(3),{children:n}=t,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[se],e[0]=l):l=e[0];let a;return e[1]===n?a=e[2]:(a=(0,r.jsx)(yr,{atoms:l,children:n}),e[1]=n,e[2]=a),a},jr=({hidden:t,value:e,handleSearch:n,onHide:l,reloading:a})=>{var g;let[o,i]=(0,C.useState)(e),s=Lo(o,500),d=ie(n),u=C.useRef(null);return(0,C.useEffect)(()=>{d(s)},[s,d]),t||((g=u.current)==null||g.focus()),t&&o!==""&&i(""),(0,r.jsxs)("div",{className:M("flex items-center space-x-2 h-8 px-2 border-b transition-all overflow-hidden duration-300 opacity-100",t&&"h-0 border-none opacity-0"),children:[(0,r.jsx)(Et,{className:"w-4 h-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"text",ref:u,className:"w-full h-full border-none bg-transparent focus:outline-hidden text-sm",value:o,onKeyDown:m=>{m.key==="Escape"&&l()},onChange:m=>i(m.target.value),placeholder:"Search"}),a&&(0,r.jsx)(Xl,{size:"small"})]})};var Rr=P(A()),_r=[{label:"CSV",format:"csv",icon:Ae},{label:"JSON",format:"json",icon:Dl},{label:"Parquet",format:"parquet",icon:yn}],Fr=[{label:"TSV",format:"tsv",description:"Best for Excel and Google Sheets",icon:Ae},{label:"JSON",format:"json",description:"Raw JSON data",icon:Dl},{label:"CSV",format:"csv",description:"Comma-separated values",icon:Ae}];const Mr=t=>{let e=(0,Rr.c)(17),n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsxs)(D,{"data-testid":"download-as-button",size:"xs",variant:"link",children:["Download ",(0,r.jsx)(Nt,{className:"w-3 h-3 ml-1"})]}),e[0]=n):n=e[0];let l=n,a;e[1]===t?a=e[2]:(a=f=>t.downloadAs({format:f}).catch(kr),e[1]=t,e[2]=a);let o=a,i;e[3]===o?i=e[4]:(i=async f=>{let h;e:switch(f){case"tsv":h=xi(await ml(await o("json")));break e;case"json":{let x=await ml(await o("json"));h=JSON.stringify(x,null,2);break e}case"csv":h=await Ir(await o("csv"));break e;default:ce(f);return}await lt(h),kt({title:"Copied to clipboard"})},e[3]=o,e[4]=i);let s=i,d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=(0,r.jsx)(Pt,{asChild:!0,children:l}),e[5]=d):d=e[5];let u;e[6]===o?u=e[7]:(u=_r.map(f=>(0,r.jsxs)(V,{onSelect:async()=>{let h=await o(f.format),x=f.format;Li(h,`download.${x}`)},children:[(0,r.jsx)(f.icon,{className:"mo-dropdown-icon"}),f.label]},f.label)),e[6]=o,e[7]=u);let g;e[8]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)(je,{}),e[8]=g):g=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsxs)(Vt,{children:[(0,r.jsx)(jn,{className:"mo-dropdown-icon"}),"Copy to clipboard"]}),e[9]=m):m=e[9];let c;e[10]===s?c=e[11]:(c=Fr.map(f=>(0,r.jsxs)(V,{onSelect:()=>s(f.format),children:[(0,r.jsx)(f.icon,{className:"mo-dropdown-icon"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{children:f.label}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:f.description})]})]},f.label)),e[10]=s,e[11]=c);let p;e[12]===c?p=e[13]:(p=(0,r.jsxs)(Re,{children:[m,(0,r.jsx)(Pe,{children:c})]}),e[12]=c,e[13]=p);let w;return e[14]!==u||e[15]!==p?(w=(0,r.jsxs)(Dt,{modal:!1,children:[d,(0,r.jsxs)(At,{side:"bottom",className:"no-print",children:[u,g,p]})]}),e[14]=u,e[15]=p,e[16]=w):w=e[16],w};function ml(t){return fetch(t).then(e=>{if(!e.ok)throw Error(e.statusText);return e.json()})}function Ir(t){return fetch(t).then(e=>{if(!e.ok)throw Error(e.statusText);return e.text()})}function kr(t){throw kt({title:"Failed to download",description:"message"in t?t.message:String(t)}),t}const Nr=({table:t,selection:e,onSelectAllRowsChange:n,totalColumns:l,tableLoading:a,showPageSizeSelector:o})=>{let{locale:i}=ge(),s=()=>{let{rowSelection:p,cellSelection:w}=t.getState(),f=Object.keys(p).length,h=t.getIsAllPageRowsSelected(),x=t.getRowCount(),S=f===x,b=e==="single-cell"||e==="multi-cell";return b&&(f=w.length,h=!1,S=!1),h&&!S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{children:[G(f,i)," selected"]}),(0,r.jsxs)(D,{size:"xs","data-testid":"select-all-button",variant:"link",className:"h-4",onMouseDown:X.preventFocus,onClick:()=>{n?n(!0):t.toggleAllRowsSelected(!0)},children:["Select all ",G(x,i)]})]}):f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{children:[G(f,i)," selected"]}),(0,r.jsx)(D,{size:"xs","data-testid":"clear-selection-button",variant:"link",className:"h-4",onMouseDown:X.preventFocus,onClick:()=>{b?t.resetCellSelection&&t.resetCellSelection():n?n(!1):t.toggleAllRowsSelected(!1)},children:"Clear selection"})]}):(0,r.jsx)("span",{children:mn(x,l,i)})},d=Math.min(t.getState().pagination.pageIndex+1,t.getPageCount()),u=t.getPageCount(),g=t.getState().pagination.pageSize,m=p=>{a||p()},c=[...new Set([5,10,25,50,100,g])].sort((p,w)=>p-w);return(0,r.jsxs)("div",{className:"flex flex-1 items-center justify-between px-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:s()}),o&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs whitespace-nowrap mr-1",children:[(0,r.jsxs)(Kl,{value:g.toString(),onValueChange:p=>t.setPageSize(Number(p)),children:[(0,r.jsx)(Wl,{className:"w-11 h-[18px] shadow-none! !hover:shadow-none ring-0! border-border text-xs p-1",children:(0,r.jsx)($l,{})}),(0,r.jsx)(Ul,{children:(0,r.jsxs)(Ti,{children:[(0,r.jsx)(Ei,{children:"Rows per page"}),[...c].map(p=>{let w=p.toString();return(0,r.jsx)(Ze,{value:w,children:w},p)})]})})]}),(0,r.jsx)("span",{children:"/ page"})]})]}),(0,r.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,r.jsxs)(D,{size:"xs",variant:"outline","data-testid":"first-page-button",className:"hidden h-6 w-6 p-0 lg:flex",onClick:()=>m(()=>t.setPageIndex(0)),onMouseDown:X.preventFocus,disabled:!t.getCanPreviousPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,r.jsx)(en,{className:"h-4 w-4"})]}),(0,r.jsxs)(D,{size:"xs",variant:"outline","data-testid":"previous-page-button",className:"h-6 w-6 p-0",onClick:()=>m(()=>t.previousPage()),onMouseDown:X.preventFocus,disabled:!t.getCanPreviousPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,r.jsx)(Oi,{className:"h-4 w-4"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center text-xs font-medium gap-1",children:[(0,r.jsx)("span",{children:"Page"}),(0,r.jsx)(Vr,{currentPage:d,totalPages:u,onPageChange:p=>m(()=>t.setPageIndex(p))}),(0,r.jsxs)("span",{className:"shrink-0",children:["of ",G(u,i)]})]}),(0,r.jsxs)(D,{size:"xs",variant:"outline","data-testid":"next-page-button",className:"h-6 w-6 p-0",onClick:()=>m(()=>t.nextPage()),onMouseDown:X.preventFocus,disabled:!t.getCanNextPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,r.jsx)(Hi,{className:"h-4 w-4"})]}),(0,r.jsxs)(D,{size:"xs",variant:"outline","data-testid":"last-page-button",className:"hidden h-6 w-6 p-0 lg:flex",onClick:()=>m(()=>t.setPageIndex(t.getPageCount()-1)),onMouseDown:X.preventFocus,disabled:!t.getCanNextPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,r.jsx)(Ut,{className:"h-4 w-4"})]})]})]})},Vr=({currentPage:t,totalPages:e,onPageChange:n})=>{let l=i=>(0,r.jsx)("option",{value:i+1,children:i+1},i),a=i=>(0,r.jsx)("option",{disabled:!0,value:`__${i}__`,children:"..."},`__${i}__`),o=()=>{if(e<=100)return Xe(e).map(m=>l(m));let i=Math.floor(e/2),s=Xe(10).map(m=>l(m)),d=Xe(10).map(m=>l(i-5+m)),u=Xe(10).map(m=>l(e-10+m)),g=[...s,a(1),...d,a(2),...u];return t>10&&t<=i-5&&g.splice(10,1,a(1),l(t-1),a(11)),t>i+5&&t<=e-10&&g.splice(-11,1,a(2),l(t-1),a(22)),g};return(0,r.jsx)("select",{className:"cursor-pointer border rounded",value:t,"data-testid":"page-select",onChange:i=>n(Number(i.target.value)-1),children:o()})};cn=function(t,e){return`${G(t,e)} ${new El("row").pluralize(t)}`};let pl;mn=(t,e,n)=>[t==="too_many"?"Unknown":cn(t,n),`${G(e,n)} ${new El("column").pluralize(e)}`].join(", "),pl=({enableSearch:t,onSearchQueryChange:e,isSearchEnabled:n,setIsSearchEnabled:l,pagination:a,totalColumns:o,selection:i,onRowSelectionChange:s,table:d,downloadAs:u,getRowIds:g,toggleDisplayHeader:m,showChartBuilder:c,showColumnExplorer:p,showPageSizeSelector:w,togglePanel:f,isPanelOpen:h,tableLoading:x})=>(0,r.jsxs)("div",{className:"flex items-center shrink-0 pt-1",children:[e&&t&&(0,r.jsx)(q,{content:"Search",children:(0,r.jsx)(D,{variant:"text",size:"xs",className:"mb-0",onClick:()=>l(!n),children:(0,r.jsx)(Et,{className:"w-4 h-4 text-muted-foreground"})})}),c&&(0,r.jsx)(q,{content:"Chart builder",children:(0,r.jsx)(D,{variant:"text",size:"xs",className:"mb-0",onClick:m,children:(0,r.jsx)(vn,{className:"w-4 h-4 text-muted-foreground"})})}),f&&h!==void 0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q,{content:"Toggle row viewer",children:(0,r.jsx)(D,{variant:"text",size:"xs",onClick:()=>f("row-viewer"),children:(0,r.jsx)(Nn,{className:M("w-4 h-4 text-muted-foreground",h("row-viewer")&&"text-primary")})})}),p&&(0,r.jsx)(q,{content:"Toggle column explorer",children:(0,r.jsx)(D,{variant:"text",size:"xs",onClick:()=>f("column-explorer"),children:(0,r.jsx)(Cn,{className:M("w-4 h-4 text-muted-foreground",h("column-explorer")&&"text-primary")})})})]}),a&&(0,r.jsx)(Nr,{totalColumns:o,selection:i,onSelectAllRowsChange:S=>{if(!s)return;if(!S){s({});return}let b=()=>{let y=Array.from({length:d.getRowCount()},(v,_)=>[_,!0]);s(Object.fromEntries(y))};if(!g){b();return}g({}).then(y=>{if(y.error){kt({title:"Not available",description:y.error,variant:"danger"});return}y.all_rows?b():s(Object.fromEntries(y.row_ids.map(v=>[v,!0])))})},table:d,tableLoading:x,showPageSizeSelector:w}),(0,r.jsx)("div",{className:"ml-auto",children:u&&(0,r.jsx)(Mr,{downloadAs:u})})]}),rn=(0,C.memo)(({wrapperClassName:t,className:e,maxHeight:n,columns:l,data:a,selection:o,totalColumns:i,totalRows:s,manualSorting:d=!1,sorting:u,setSorting:g,rowSelection:m,cellSelection:c,cellStyling:p,hoverTemplate:w,cellHoverTexts:f,paginationState:h,setPaginationState:x,downloadAs:S,manualPagination:b=!1,pagination:y=!1,onRowSelectionChange:v,onCellSelectionChange:_,getRowIds:F,enableSearch:k=!1,searchQuery:I,onSearchQueryChange:E,showFilters:L=!1,filters:Y,onFiltersChange:he,reloading:te,freezeColumnsLeft:xe,freezeColumnsRight:we,toggleDisplayHeader:ne,showChartBuilder:be,showPageSizeSelector:Se,showColumnExplorer:le,togglePanel:ye,isPanelOpen:B,viewedRowIdx:ae,onViewedRowChange:oe})=>{let[de,ke]=C.useState(!1),[Ce,Il]=C.useState(!1),{locale:ai}=ge(),{columnPinning:oi,setColumnPinning:ri}=xr(xe,we);C.useEffect(()=>{let H;return te?H=setTimeout(()=>{Il(!0)},300):Il(!1),()=>{H&&clearTimeout(H)}},[te]);function kl(H,Ye){return h?Ye+(b?h.pageIndex*h.pageSize:0):Ye}let Ke=dn({_features:[Bn,cr,no,sr,dr,ir,il,gr,fr],data:a,columns:l,getCoreRowModel:Yt(),rowCount:s==="too_many"?void 0:s,...x?{onPaginationChange:x,getRowId:(H,Ye)=>{let Nl=$e(H);if(Nl)return Nl;let si=kl(H,Ye);return String(si)}}:{},locale:ai,manualPagination:b,getPaginationRowModel:Za(),...g?{onSortingChange:g}:{},manualSorting:d,enableMultiSort:!0,getSortedRowModel:Xt(),manualFiltering:!0,enableColumnFilters:L,getFilteredRowModel:Jt(),onColumnFiltersChange:he,onRowSelectionChange:v,onCellSelectionChange:_,enableCellSelection:o==="single-cell"||o==="multi-cell",enableMultiCellSelection:o==="multi-cell",onColumnPinningChange:ri,enableFocusRow:!0,onFocusRowChange:oe,state:{...u?{sorting:u}:{},columnFilters:Y,...h?{pagination:h}:y&&!h?{}:{pagination:{pageIndex:0,pageSize:a.length}},rowSelection:m??{},cellSelection:c??[],cellStyling:p,columnPinning:oi,cellHoverTemplate:w,cellHoverTexts:f??{}}}),ii=(B==null?void 0:B("row-viewer"))??!1,It=C.useRef(null);return C.useEffect(()=>{if(!It.current)return;let H=It.current.parentElement;H&&(n?(H.style.maxHeight=`${n}px`,H.style.overflow||(H.style.overflow="auto")):H.style.removeProperty("max-height"))},[n]),(0,r.jsxs)("div",{className:M(t,"flex flex-col space-y-1"),children:[(0,r.jsx)(mr,{filters:Y,table:Ke}),(0,r.jsxs)("div",{className:M(e||"rounded-md border overflow-hidden"),children:[E&&k&&(0,r.jsx)(jr,{value:I||"",onHide:()=>ke(!1),handleSearch:E,hidden:!de,reloading:te}),(0,r.jsxs)(Vs,{className:"relative",ref:It,children:[Ce&&(0,r.jsx)("thead",{className:"absolute top-0 left-0 h-[3px] w-1/2 bg-primary animate-slide"}),Vo(Ke,!!n),(0,r.jsx)(vr,{children:(0,r.jsx)(Po,{table:Ke,columns:l,rowViewerPanelOpen:ii,getRowIndex:kl,viewedRowIdx:ae})})]})]}),(0,r.jsx)(pl,{enableSearch:k,totalColumns:i,onSearchQueryChange:E,isSearchEnabled:de,setIsSearchEnabled:ke,pagination:y,selection:o,onRowSelectionChange:v,table:Ke,downloadAs:S,getRowIds:F,toggleDisplayHeader:ne,showChartBuilder:be,showPageSizeSelector:Se,showColumnExplorer:le,togglePanel:ye,isPanelOpen:B,tableLoading:te})]})});var We=P(A()),Pr=25;on=({contents:t})=>{let e=(0,C.useMemo)(()=>zl(t),[t]),[n,l]=(0,C.useState)({pageIndex:0,pageSize:Pr}),a=(0,C.useMemo)(()=>pn(e),[e]),o=(0,C.useMemo)(()=>gn({rowHeaders:Pi.EMPTY,selection:null,fieldTypes:a}),[a]);return(0,r.jsx)(rn,{data:e,totalRows:e.length,columns:o,totalColumns:o.length,manualPagination:!1,paginationState:n,setPaginationState:l,wrapperClassName:"h-full justify-between pb-1 px-1",pagination:!0,className:"rounded-none border-b flex overflow-hidden",rowSelection:Ve.EMPTY})},ca=t=>{let e=(0,We.c)(5),{mime:n,base64:l}=t,a;e[0]!==l||e[1]!==n?(a=Qe(l,n),e[0]=l,e[1]=n,e[2]=a):a=e[2];let o;return e[3]===a?o=e[4]:(o=(0,r.jsx)("img",{src:a,alt:"Preview"}),e[3]=a,e[4]=o),o},ga=t=>{let e=(0,We.c)(5),{mime:n,base64:l}=t,a;e[0]!==l||e[1]!==n?(a=Qe(l,n),e[0]=l,e[1]=n,e[2]=a):a=e[2];let o;return e[3]===a?o=e[4]:(o=(0,r.jsx)("audio",{controls:!0,src:a}),e[3]=a,e[4]=o),o},sa=t=>{let e=(0,We.c)(5),{mime:n,base64:l}=t,a;e[0]!==l||e[1]!==n?(a=Qe(l,n),e[0]=l,e[1]=n,e[2]=a):a=e[2];let o;return e[3]===a?o=e[4]:(o=(0,r.jsx)("video",{controls:!0,src:a}),e[3]=a,e[4]=o),o},pa=t=>{let e=(0,We.c)(5),{mime:n,base64:l}=t,a;e[0]!==l||e[1]!==n?(a=Qe(l,n),e[0]=l,e[1]=n,e[2]=a):a=e[2];let o;return e[3]===a?o=e[4]:(o=(0,r.jsx)("iframe",{src:a,title:"PDF Viewer",className:"w-full h-full"}),e[3]=a,e[4]=o),o};function Ar(t,e){let{state:n}=t,l=n.doc;if(e<=0||e>l.lines)return ve.warn(`Invalid line number: ${e}. Document has ${l.lines} lines.`),!1;let a=l.line(e);if(a.text.includes("breakpoint()"))return!0;let o=a.text.match(/^(\s*)/),i=`${o?o[1]:""}breakpoint()
`,s=a.from;return t.dispatch({changes:{from:s,to:s,insert:i},selection:{anchor:s+i.length-1,head:s+i.length-1},scrollIntoView:!0,effects:[Vi.scrollIntoView(s,{y:"center"})]}),t.focus(),!0}var fl=P(A()),hl="item";const Dr=t=>{var ke;let e=(0,fl.c)(53),{onRefactorWithAI:n,traceback:l}=t,a;e[0]===l?a=e[1]:(a=Ql({html:l,additionalReplacements:[zr,Tr]}),e[0]=l,e[1]=a);let o=a,[i,s]=(0,C.useState)(!0),d=Er(l),u=Al(ki),g;e[2]===l?g=e[3]:(g=(ke=bi(l))==null?void 0:ke.at(0),e[2]=l,e[3]=g);let m=g,c=Ce=>{n==null||n({prompt:`My code gives the following error:

${d}`,triggerImmediately:Ce})},[p,w]=d.split(":",2),f=i?hl:"",h;e[4]===Symbol.for("react.memo_cache_sentinel")?(h=()=>s(Lr),e[4]=h):h=e[4];let x=i?"rotate-180":"rotate-0",S;e[5]===x?S=e[6]:(S=M("h-4 w-4 text-muted-foreground transition-transform duration-200 shrink-0",x),e[5]=x,e[6]=S);let b;e[7]===S?b=e[8]:(b=(0,r.jsx)(Nt,{className:S}),e[7]=S,e[8]=b);let y=p||"Error",v;e[9]===y?v=e[10]:(v=(0,r.jsxs)("span",{className:"text-destructive",children:[y,":"]}),e[9]=y,e[10]=v);let _;e[11]!==w||e[12]!==v?(_=(0,r.jsxs)("div",{className:"text-sm inline font-mono",children:[v," ",w]}),e[11]=w,e[12]=v,e[13]=_):_=e[13];let F;e[14]!==_||e[15]!==b?(F=(0,r.jsxs)("div",{className:"flex gap-2 h-10 px-2 hover:bg-muted rounded-sm select-none items-center cursor-pointer transition-all",onClick:h,children:[b,_]}),e[14]=_,e[15]=b,e[16]=F):F=e[16];let k;e[17]===o?k=e[18]:(k=(0,r.jsx)(cs,{className:"text-muted-foreground px-4 pt-2 text-xs overflow-auto",children:o}),e[17]=o,e[18]=k);let I;e[19]!==F||e[20]!==k?(I=(0,r.jsxs)(gs,{value:hl,className:"border-none",children:[F,k]}),e[19]=F,e[20]=k,e[21]=I):I=e[21];let E;e[22]!==I||e[23]!==f?(E=(0,r.jsx)(ms,{type:"single",collapsible:!0,value:f,children:I}),e[22]=I,e[23]=f,e[24]=E):E=e[24];let L;e[25]!==u||e[26]!==c||e[27]!==n?(L=n&&u&&(0,r.jsx)(es,{tooltip:"Fix with AI",openPrompt:()=>c(!1),applyAutofix:()=>c(!0)}),e[25]=u,e[26]=c,e[27]=n,e[28]=L):L=e[28];let Y;e[29]===m?Y=e[30]:(Y=m&&m.kind==="cell"&&!Tl()&&(0,r.jsx)(q,{content:"Attach pdb to the exception point.",children:(0,r.jsxs)(D,{size:"xs",variant:"outline",onClick:()=>{Hl().sendPdb({cellId:m.cellId})},children:[(0,r.jsx)(rt,{className:"h-3 w-3 mr-2"}),"Launch debugger"]})}),e[29]=m,e[30]=Y);let he;e[31]===Symbol.for("react.memo_cache_sentinel")?(he=(0,r.jsx)(Pt,{asChild:!0,children:(0,r.jsxs)(D,{size:"xs",variant:"text",children:["Get help",(0,r.jsx)(Nt,{className:"h-3 w-3 ml-1"})]})}),e[31]=he):he=e[31];let te=`https://www.google.com/search?q=${encodeURIComponent(d)}`,xe;e[32]===Symbol.for("react.memo_cache_sentinel")?(xe=(0,r.jsx)(Et,{className:"h-4 w-4 mr-2"}),e[32]=xe):xe=e[32];let we;e[33]===Symbol.for("react.memo_cache_sentinel")?(we=(0,r.jsx)(Yl,{className:"h-3 w-3 ml-auto"}),e[33]=we):we=e[33];let ne;e[34]===te?ne=e[35]:(ne=(0,r.jsx)(V,{asChild:!0,children:(0,r.jsxs)("a",{target:"_blank",href:te,rel:"noreferrer",children:[xe,"Search on Google",we]})}),e[34]=te,e[35]=ne);let be;e[36]===Symbol.for("react.memo_cache_sentinel")?(be=(0,r.jsx)(In,{className:"h-4 w-4 mr-2"}),e[36]=be):be=e[36];let Se;e[37]===Symbol.for("react.memo_cache_sentinel")?(Se=(0,r.jsx)(V,{asChild:!0,children:(0,r.jsxs)("a",{target:"_blank",href:"https://marimo.io/discord?ref=notebook",rel:"noopener",children:[be,"Ask in Discord",(0,r.jsx)(Yl,{className:"h-3 w-3 ml-auto"})]})}),e[37]=Se):Se=e[37];let le;e[38]===l?le=e[39]:(le=()=>{let Ce=document.createElement("div");Ce.innerHTML=l,lt(Ce.textContent||"")},e[38]=l,e[39]=le);let ye;e[40]===Symbol.for("react.memo_cache_sentinel")?(ye=(0,r.jsx)(Jl,{className:"h-4 w-4 mr-2"}),e[40]=ye):ye=e[40];let B;e[41]===le?B=e[42]:(B=(0,r.jsxs)(V,{onClick:le,children:[ye,"Copy to clipboard"]}),e[41]=le,e[42]=B);let ae;e[43]!==ne||e[44]!==B?(ae=(0,r.jsxs)(Dt,{children:[he,(0,r.jsxs)(At,{align:"end",className:"w-56",children:[ne,Se,B]})]}),e[43]=ne,e[44]=B,e[45]=ae):ae=e[45];let oe;e[46]!==L||e[47]!==Y||e[48]!==ae?(oe=(0,r.jsxs)("div",{className:"flex gap-2",children:[L,Y,ae]}),e[46]=L,e[47]=Y,e[48]=ae,e[49]=oe):oe=e[49];let de;return e[50]!==E||e[51]!==oe?(de=(0,r.jsxs)("div",{className:"flex flex-col gap-2 min-w-full w-fit",children:[E,oe]}),e[50]=E,e[51]=oe,e[52]=de):de=e[52],de};function Er(t){var n,l;let e=document.createElement("div");return e.innerHTML=t,((l=(n=e.textContent)==null?void 0:n.split(`
`).filter(Boolean))==null?void 0:l.at(-1))||""}const zr=t=>{let e=wi(t);if((e==null?void 0:e.kind)==="cell"){let n=(0,r.jsx)(Or,{});return(0,r.jsx)("span",{className:"nb",children:(0,r.jsxs)("span",{className:"inline-flex items-center",children:[(0,r.jsx)(As,{cellId:e.cellId,lineNumber:e.lineNumber}),!Tl()&&(0,r.jsx)(q,{content:n,children:(0,r.jsx)("button",{type:"button",className:"ml-1 p-1 rounded-sm hover:bg-muted transition-all inline",children:(0,r.jsx)(rt,{onClick:()=>{let l=Si(e.cellId);l&&Ar(l,e.lineNumber)},className:"h-3 w-3"})})})]})})}if((e==null?void 0:e.kind)==="file")return(0,r.jsx)("div",{className:"inline-block cursor-pointer text-destructive hover:underline",onClick:n=>{Hl().openFile({path:e.filePath,lineNumber:e.lineNumber})},children:(0,r.jsxs)("span",{className:"nb",children:['"',e.filePath,'"']})})},Tr=t=>{var e;if(t instanceof Ll.Text&&((e=t.nodeValue)!=null&&e.includes("File"))&&t.next instanceof Ll.Element&&yi(t.next))return(0,r.jsx)(r.Fragment,{children:t.nodeValue.replace("File","Cell")})};var Or=()=>{let t=(0,fl.c)(1),e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:["Insert a ",(0,r.jsx)(Ss,{className:"inline",children:"breakpoint()"})," at this line"]}),t[0]=e):e=t[0],e};function Lr(t){return!t}function Hr(t){switch(t){case"text/html":return"\u{1F310}";case"text/plain":return"\u{1F4C4}";case"application/json":return"\u{1F4E6}";case"image/png":case"image/tiff":case"image/avif":case"image/bmp":case"image/gif":case"image/jpeg":return"\u{1F5BC}\uFE0F";case"image/svg+xml":return"\u{1F3A8}";case"video/mp4":case"video/mpeg":return"\u{1F3A5}";case"application/vnd.marimo+error":return"\u{1F6A8}";case"application/vnd.marimo+traceback":return"\u{1F40D}";case"text/csv":return"\u{1F4CA}";case"text/markdown":return"\u{1F4DD}";case"application/vnd.vegalite.v5+json":case"application/vnd.vega.v5+json":return"\u{1F4CA}";case"application/vnd.marimo+mimebundle":return"\u{1F4E6}";default:return"\u2753"}}var Ie=P(A()),Gr=C.lazy(()=>Gl(()=>import("./esm-D8TEQuHf.js").then(async t=>(await t.__tla,t)),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(t=>({default:t.VegaLite})));me=(0,C.memo)(t=>{let e=(0,Ie.c)(44),{message:n,onRefactorWithAI:l,cellId:a,wrapText:o}=t,{theme:i}=ql(),s;e:{let c=n.data;switch(n.mimetype){case"application/json":case"application/vnd.marimo+mimebundle":case"application/vnd.vegalite.v5+json":case"application/vnd.vega.v5+json":{let p;e[0]===c?p=e[1]:(p=typeof c=="string"?JSON.parse(c):c,e[0]=c,e[1]=p),s=p;break e}default:s=void 0}}let d=s,{channel:u,data:g,mimetype:m}=n;if(g==null)return null;switch(m){case"text/html":{J(typeof g=="string",`Expected string data for mime=${m}. Got ${typeof g}`);let c;return e[2]!==u||e[3]!==g?(c=(0,r.jsx)(fs,{className:u,html:g}),e[2]=u,e[3]=g,e[4]=c):c=e[4],c}case"text/plain":{J(typeof g=="string",`Expected string data for mime=${m}. Got ${typeof g}`);let c;return e[5]!==u||e[6]!==g||e[7]!==o?(c=(0,r.jsx)(or,{channel:u,text:g,wrapText:o}),e[5]=u,e[6]=g,e[7]=o,e[8]=c):c=e[8],c}case"application/json":{let c;return e[9]!==u||e[10]!==d?(c=(0,r.jsx)(ta,{className:u,data:d,format:"auto"}),e[9]=u,e[10]=d,e[11]=c):c=e[11],c}case"image/png":case"image/tiff":case"image/avif":case"image/bmp":case"image/gif":case"image/jpeg":{J(typeof g=="string",`Expected string data for mime=${m}. Got ${typeof g}`);let c;return e[12]!==u||e[13]!==g?(c=(0,r.jsx)(xs,{className:u,src:g,alt:""}),e[12]=u,e[13]=g,e[14]=c):c=e[14],c}case"image/svg+xml":{J(typeof g=="string",`Expected string data for mime=${m}. Got ${typeof g}`);let c;return e[15]===g?c=e[16]:(c=Ql({html:g}),e[15]=g,e[16]=c),c}case"video/mp4":case"video/mpeg":{J(typeof g=="string",`Expected string data for mime=${m}. Got ${typeof g}`);let c;return e[17]!==u||e[18]!==g?(c=(0,r.jsx)(hs,{className:u,src:g}),e[17]=u,e[18]=g,e[19]=c):c=e[19],c}case"application/vnd.marimo+error":{J(Array.isArray(g),"Expected array data");let c;return e[20]!==a||e[21]!==g?(c=(0,r.jsx)(ts,{cellId:a,errors:g}),e[20]=a,e[21]=g,e[22]=c):c=e[22],c}case"application/vnd.marimo+traceback":{J(typeof g=="string",`Expected string data for mime=${m}. Got ${typeof g}`);let c;return e[23]!==a||e[24]!==g||e[25]!==l?(c=(0,r.jsx)(Dr,{onRefactorWithAI:l,traceback:g,cellId:a}),e[23]=a,e[24]=g,e[25]=l,e[26]=c):c=e[26],c}case"text/csv":{J(typeof g=="string",`Expected string data for mime=${m}. Got ${typeof g}`);let c;return e[27]===g?c=e[28]:(c=(0,r.jsx)(on,{contents:g}),e[27]=g,e[28]=c),c}case"text/latex":case"text/markdown":{J(typeof g=="string",`Expected string data for mime=${m}. Got ${typeof g}`);let c=i==="dark"?"dark":"light",p;return e[29]!==g||e[30]!==c?(p=(0,r.jsx)(ys,{theme:c,value:g,readOnly:!0,editable:!1,language:"markdown"}),e[29]=g,e[30]=c,e[31]=p):p=e[31],p}case"application/vnd.vegalite.v5+json":case"application/vnd.vega.v5+json":{let c;e[32]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(hn,{}),e[32]=c):c=e[32];let p=d,w=i==="dark"?"dark":void 0,f;return e[33]!==p||e[34]!==w?(f=(0,r.jsx)(C.Suspense,{fallback:c,children:(0,r.jsx)(Gr,{spec:p,theme:w})}),e[33]=p,e[34]=w,e[35]=f):f=e[35],f}case"application/vnd.marimo+mimebundle":{let c=d,p;return e[36]!==u||e[37]!==c?(p=(0,r.jsx)(xl,{channel:u,data:c}),e[36]=u,e[37]=c,e[38]=p):p=e[38],p}case"application/vnd.jupyter.widget-view+json":{let c;e[39]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)("b",{children:"Jupyter widgets are not supported in marimo."}),e[39]=c):c=e[39];let p;e[40]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)("br",{}),e[40]=p):p=e[40];let w;return e[41]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.jsxs)(bs,{kind:"warn",children:[c," ",p,"Please migrate this widget to"," ",(0,r.jsx)("a",{href:"https://github.com/manzt/anywidget",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-(--amber-12)",children:"anywidget"}),"."]}),e[41]=w):w=e[41],w}default:{ce(m);let c;return e[42]===m?c=e[43]:(c=(0,r.jsxs)("div",{className:"text-destructive",children:["Unsupported mimetype: ",m]}),e[42]=m,e[43]=c),c}}}),me.displayName="OutputRenderer";var xl=(0,C.memo)(t=>{let e=(0,Ie.c)(35),{data:n,channel:l,cellId:a}=t,o=Array.isArray(n)?n[0]:n,i;e[0]===o?i=e[1]:(i=Ve.keys(o),e[0]=o,e[1]=i);let s=i[0];if(!s)return null;if(Object.keys(o).length===1){let S=o[s],b;e[2]!==l||e[3]!==s||e[4]!==S?(b={channel:l,data:S,mimetype:s},e[2]=l,e[3]=s,e[4]=S,e[5]=b):b=e[5];let y;return e[6]!==a||e[7]!==b?(y=(0,r.jsx)(me,{cellId:a,message:b}),e[6]=a,e[7]=b,e[8]=y):y=e[8],y}let d,u,g,m,c,p,w;if(e[9]!==a||e[10]!==l||e[11]!==s||e[12]!==o){let S=Ve.entries(o);S.sort(qr),d=Ts,p=s,w="vertical",m="flex",c=(0,r.jsx)(zs,{className:"self-start max-h-none flex flex-col gap-2 mr-4 shrink-0",children:S.map($r)}),u="flex-1";let b;e[20]!==a||e[21]!==l?(b=y=>{let[v,_]=y;return(0,r.jsx)(Es,{value:v,children:(0,r.jsx)(Ol,{children:(0,r.jsx)(me,{cellId:a,message:{channel:l,data:_,mimetype:v}})})},v)},e[20]=a,e[21]=l,e[22]=b):b=e[22],g=S.map(b),e[9]=a,e[10]=l,e[11]=s,e[12]=o,e[13]=d,e[14]=u,e[15]=g,e[16]=m,e[17]=c,e[18]=p,e[19]=w}else d=e[13],u=e[14],g=e[15],m=e[16],c=e[17],p=e[18],w=e[19];let f;e[23]!==u||e[24]!==g?(f=(0,r.jsx)("div",{className:u,children:g}),e[23]=u,e[24]=g,e[25]=f):f=e[25];let h;e[26]!==m||e[27]!==c||e[28]!==f?(h=(0,r.jsxs)("div",{className:m,children:[c,f]}),e[26]=m,e[27]=c,e[28]=f,e[29]=h):h=e[29];let x;return e[30]!==d||e[31]!==p||e[32]!==w||e[33]!==h?(x=(0,r.jsx)(d,{defaultValue:p,orientation:w,children:h}),e[30]=d,e[31]=p,e[32]=w,e[33]=h,e[34]=x):x=e[34],x});xl.displayName="MimeBundleOutputRenderer",ln=C.memo(t=>{let e=(0,Ie.c)(17),{output:n,cellId:l,stale:a,loading:o,allowExpand:i,forceExpand:s,className:d}=t;if(n===null||n.channel==="output"&&n.data==="")return null;let u=a?"This output is stale":void 0,g=i?bl:wl,m;e[0]===l?m=e[1]:(m=hi.create(l),e[0]=l,e[1]=m);let c=a&&"marimo-output-stale",p=o&&"marimo-output-loading",w;e[2]!==d||e[3]!==c||e[4]!==p?(w=M(c,p,d),e[2]=d,e[3]=c,e[4]=p,e[5]=w):w=e[5];let f;e[6]!==l||e[7]!==n?(f=(0,r.jsx)(me,{cellId:l,message:n}),e[6]=l,e[7]=n,e[8]=f):f=e[8];let h;return e[9]!==g||e[10]!==l||e[11]!==s||e[12]!==m||e[13]!==w||e[14]!==f||e[15]!==u?(h=(0,r.jsx)(Ol,{children:(0,r.jsx)(g,{title:u,cellId:l,forceExpand:s,id:m,className:w,children:f})}),e[9]=g,e[10]=l,e[11]=s,e[12]=m,e[13]=w,e[14]=f,e[15]=u,e[16]=h):h=e[16],h}),ln.displayName="OutputArea";var wl=C.forwardRef((t,e)=>{let n=(0,Ie.c)(3),l;return n[0]!==t||n[1]!==e?(l=(0,r.jsx)("div",{ref:e,...t}),n[0]=t,n[1]=e,n[2]=l):l=n[2],l});wl.displayName="Div";var bl=C.memo(t=>{let e=(0,Ie.c)(24),{cellId:n,children:l,forceExpand:a,...o}=t,i=(0,C.useRef)(null),[s,d]=Ki(n),[u,g]=(0,C.useState)(!1),m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{if(!i.current)return;let _=i.current,F=new ResizeObserver(()=>{g(_.scrollHeight>_.clientHeight)});return F.observe(_),()=>{F.disconnect()}},e[0]=m):m=e[0],(0,C.useEffect)(m,[o.id]);let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=async()=>{var _;await((_=i.current)==null?void 0:_.requestFullscreen())},e[1]=c):c=e[1];let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(q,{content:"Fullscreen",side:"left",children:(0,r.jsx)(D,{"data-testid":"fullscreen-output-button",className:"hover-action hover:bg-muted p-1 hover:border-border border border-transparent",onClick:c,onMouseDown:X.preventFocus,size:"xs",variant:"text",children:(0,r.jsx)(Rn,{className:"size-4",strokeWidth:1.25})})}),e[2]=p):p=e[2];let w;e[3]!==a||e[4]!==s||e[5]!==u||e[6]!==d?(w=(u||s)&&!a&&(0,r.jsx)(D,{"data-testid":"expand-output-button",className:M("hover:border-border border border-transparent hover:bg-muted",!s&&"hover-action"),onClick:()=>d(!s),size:"xs",variant:"text",children:s?(0,r.jsx)(q,{content:"Collapse output",side:"left",children:(0,r.jsx)(qi,{className:"h-4 w-4"})}):(0,r.jsx)(q,{content:"Expand output",side:"left",children:(0,r.jsx)(et,{className:"h-4 w-4"})})}),e[3]=a,e[4]=s,e[5]=u,e[6]=d,e[7]=w):w=e[7];let f;e[8]===w?f=e[9]:(f=(0,r.jsx)("div",{className:"relative print:hidden",children:(0,r.jsxs)("div",{className:"absolute -right-9 top-1 z-1 flex flex-col gap-1",children:[p,w]})}),e[8]=w,e[9]=f);let h=M("relative fullscreen:bg-background fullscreen:flex fullscreen:items-center fullscreen:justify-center","fullscreen:items-center-safe",o.className),x;e[10]!==a||e[11]!==s?(x=s||a?{maxHeight:"none"}:void 0,e[10]=a,e[11]=s,e[12]=x):x=e[12];let S;e[13]!==l||e[14]!==o||e[15]!==h||e[16]!==x?(S=(0,r.jsx)("div",{...o,"data-cell-role":"output",className:h,ref:i,style:x,children:l}),e[13]=l,e[14]=o,e[15]=h,e[16]=x,e[17]=S):S=e[17];let b;e[18]!==f||e[19]!==S?(b=(0,r.jsxs)("div",{children:[f,S]}),e[18]=f,e[19]=S,e[20]=b):b=e[20];let y;e[21]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsx)("div",{className:"increase-pointer-area-x contents print:hidden"}),e[21]=y):y=e[21];let v;return e[22]===b?v=e[23]:(v=(0,r.jsxs)(r.Fragment,{children:[b,y]}),e[22]=b,e[23]=v),v});bl.displayName="ExpandableOutput";function qr(t,e){let[n]=t;return n==="text/html"?-1:0}function $r(t){let[e]=t;return(0,r.jsx)(Ds,{value:e,className:"flex items-center space-x-2",children:(0,r.jsx)(q,{delayDuration:200,content:e,side:"right",children:(0,r.jsx)("span",{children:Hr(e)})})},e)}var Br=P(A());const Ur=t=>{let e=(0,Br.c)(6),{value:n}=t,l;e[0]!==n.data||e[1]!==n.mimetype?(l={channel:"output",data:n.data,mimetype:n.mimetype,timestamp:0},e[0]=n.data,e[1]=n.mimetype,e[2]=l):l=e[2];let a=l,o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=M("flex items-center space-x-2"),e[3]=o):o=e[3];let i;return e[4]===a?i=e[5]:(i=(0,r.jsx)("div",{className:o,children:(0,r.jsx)(me,{message:a})}),e[4]=a,e[5]=i),i};function Mt(t){return typeof t=="object"&&!!t&&"mimetype"in t&&"data"in t}function Wr(t){if(Mt(t))return[t];if(typeof t=="object"&&t&&("_serialized_mime_bundle"in t||"serialized_mime_bundle"in t)){let e=t,n=e._serialized_mime_bundle||e.serialized_mime_bundle;if(Mt(n))return[n]}if(Array.isArray(t)&&t.every(Mt))return t.map(e=>e)}function Kr(t,e){if(t.length<=e)return t;let n=[],l=t.length/e;for(let o=0;o<e-1;o++){let i=Math.floor(o*l);n.push(t[i])}let a=t.at(-1);return n.push(a),n}var Sl=P(A()),yl=/(https?:\/\/\S+)/,Yr=/\.(png|jpe?g|gif|webp|svg|ico)(\?.*)?$/i,Cl=/^data:image\//i,Jr=["avatars.githubusercontent.com"],Xr=t=>{let e=(0,Sl.c)(14),{url:n}=t,[l,a]=(0,C.useState)(!1),[o,i]=(0,C.useState)(!1);if(l){let w;return e[0]===n?w=e[1]:(w=(0,r.jsx)(jl,{url:n}),e[0]=n,e[1]=w),w}let s,d;e[2]===Symbol.for("react.memo_cache_sentinel")?(s=()=>i(!0),d=()=>i(!1),e[2]=s,e[3]=d):(s=e[2],d=e[3]);let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=()=>a(!0),e[4]=u):u=e[4];let g;e[5]===n?g=e[6]:(g=(0,r.jsx)(Tt,{asChild:!0,children:(0,r.jsx)("div",{className:"flex max-h-[80px] overflow-hidden cursor-pointer",onMouseEnter:s,onMouseLeave:d,children:(0,r.jsx)("img",{src:n,alt:"URL preview",className:"object-contain rounded max-h-[80px]",onError:u})})}),e[5]=n,e[6]=g);let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=()=>a(!0),e[7]=m):m=e[7];let c;e[8]===n?c=e[9]:(c=(0,r.jsx)(Ot,{className:"z-50 p-2 bg-popover rounded-md shadow-lg border w-fit",align:"start",side:"right",children:(0,r.jsx)("img",{src:n,alt:"URL preview",className:"object-contain max-h-[500px] rounded",onError:m})}),e[8]=n,e[9]=c);let p;return e[10]!==o||e[11]!==g||e[12]!==c?(p=(0,r.jsxs)(Lt,{open:o,onOpenChange:i,children:[g,c]}),e[10]=o,e[11]=g,e[12]=c,e[13]=p):p=e[13],p};function Zr(t){return Cl.test(t)?[{type:"image",url:t}]:t.split(yl).filter(e=>e.trim()!=="").map(e=>yl.test(e)?Yr.test(e)||Cl.test(e)||Jr.some(n=>e.includes(n))?{type:"image",url:e}:{type:"url",url:e}:{type:"text",value:e})}const vl=({parts:t})=>t.map((e,n)=>e.type==="url"?(0,r.jsx)(jl,{url:e.url},n):e.type==="image"?(0,r.jsx)(Xr,{url:e.url},n):e.value);var jl=t=>{let e=(0,Sl.c)(3),{url:n}=t,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=X.stopPropagation(),e[0]=l):l=e[0];let a;return e[1]===n?a=e[2]:(a=(0,r.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",onClick:l,className:"text-link hover:underline",children:n}),e[1]=n,e[2]=a),a},Qr=50,ei="__select__";function Rl(t){return typeof t=="string"?["string","string"]:typeof t=="number"?["number","number"]:t instanceof Date?["datetime","datetime"]:typeof t=="boolean"?["boolean","boolean"]:["unknown","object"]}pn=function(t){if(t.length===0||typeof t[0]!="object")return[];let e={};return Kr(t,10).forEach(n=>{typeof n!="object"||!n||Object.entries(n).forEach(([l,a])=>{e[l]||(e[l]=Rl(a)),a!=null&&(e[l]=Rl(a))})}),Ve.entries(e)},ma="__m_column__",gn=function({rowHeaders:t,selection:e,fieldTypes:n,chartSpecModel:l,textJustifyColumns:a,wrappedColumns:o,headerTooltip:i,showDataTypes:s,calculateTopKRows:d}){let u=new Set(t.map(([f])=>f)),g=$i.keyBy(n,f=>f[0]),m=f=>{var S,b;let h=(S=g.get(f))==null?void 0:S[1],x=u.has(f);if(x||!h){let y=(b=t.find(([v])=>v===f))==null?void 0:b[1];return{rowHeader:x,dtype:y==null?void 0:y[1],dataType:y==null?void 0:y[0]}}return{rowHeader:x,filterType:ni(h[0]),dtype:h[1],dataType:h[0]}},c=[...u,...n.map(([f])=>f)],p=c.indexOf(ot);p!==-1&&c.splice(p,1);let w=c.map((f,h)=>({id:f||`__m_column__${h}`,accessorFn:x=>x[f],header:({column:x,table:S})=>{var I;let b=l==null?void 0:l.getColumnStats(f),y=(I=x.columnDef.meta)==null?void 0:I.dtype,v=i==null?void 0:i[f],_=s&&y?(0,r.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:y}),b&&typeof b.nulls=="number"&&b.nulls>0&&(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(nulls: ",b.nulls,")"]})]}):null,F=(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:M("font-bold",v&&"underline decoration-dotted"),children:f===""?" ":f}),_]}),k=(0,r.jsx)(Qt,{header:v?(0,r.jsx)(q,{content:v,delayDuration:300,children:F}):F,column:x,calculateTopKRows:d,table:S});return u.has(f)?k:(0,r.jsxs)("div",{className:"flex flex-col h-full pt-0.5 pb-3 justify-between items-start",children:[k,(0,r.jsx)(nr,{columnId:f})]})},cell:({column:x,renderValue:S,getValue:b,cell:y})=>{var E;function v(){var L;e!=="single-cell"&&e!=="multi-cell"||((L=y.toggleSelected)==null||L.call(y))}let _=a==null?void 0:a[f],F=o==null?void 0:o.includes(f),k=((E=y==null?void 0:y.getIsSelected)==null?void 0:E.call(y))||!1,I=un({column:x,renderValue:S,getValue:b,selectCell:v,cellStyles:li(_,F,(e==="single-cell"||e==="multi-cell")&&!k,k)});return u.has(f)?(0,r.jsx)("b",{children:I}):I},filterFn:void 0,enableSorting:!!f,meta:m(f)}));return(e==="single"||e==="multi")&&w.unshift({id:ei,maxSize:40,header:({table:f})=>e==="multi"?(0,r.jsx)(Je,{"data-testid":"select-all-checkbox",checked:f.getIsAllPageRowsSelected(),onCheckedChange:h=>f.toggleAllPageRowsSelected(!!h),"aria-label":"Select all",className:"mx-1.5 my-4"}):null,cell:({row:f})=>(0,r.jsx)(Je,{"data-testid":"select-row-checkbox",checked:f.getIsSelected(),onCheckedChange:h=>f.toggleSelected(!!h),"aria-label":"Select row",className:"mx-2",onMouseDown:h=>{h.stopPropagation()}}),enableSorting:!1,enableHiding:!1}),w};var _l=({cellStyles:t,selectCell:e,rawStringValue:n,contentClassName:l,buttonText:a,children:o})=>(0,r.jsx)(Wt,{container:null,children:(0,r.jsxs)(Lt,{children:[(0,r.jsx)(Tt,{className:M(t,"w-fit outline-hidden"),onClick:e,onMouseDown:i=>{i.stopPropagation()},children:(0,r.jsx)("span",{className:"cursor-pointer hover:text-link",title:n,children:n})}),(0,r.jsxs)(Ot,{className:l,align:"start",alignOffset:10,children:[(0,r.jsx)(js,{className:"absolute top-2 right-2",children:(0,r.jsx)(D,{variant:"link",size:"xs",children:a??"Close"})}),o]})]})});function ti(t){return t==null?!0:typeof t!="object"}function ni(t){if(t!==void 0)switch(t){case"string":return"text";case"number":return"number";case"integer":return"number";case"date":return"date";case"datetime":return"datetime";case"time":return"time";case"boolean":return"boolean";default:return}}function li(t,e,n,l){return M(n&&"cursor-pointer",l&&"relative before:absolute before:inset-0 before:bg-(--blue-3) before:rounded before:-z-10 before:mx-[-4px] before:my-[-2px]","w-full","text-left","truncate",t==="center"&&"text-center",t==="right"&&"text-right",e&&"whitespace-pre-wrap min-w-[200px] break-words")}function Fl(t){if(t==null)return"";try{return JSON.stringify(t)}catch{return String(t)}}function Ml({value:t,dataType:e,dtype:n,format:l,locale:a}){let o=e==="date"?"date":"datetime",i=ho(n);return(0,r.jsx)(el,{date:t,type:o,children:l?os(t,l):ss(t,i,a)})}un=function({column:t,renderValue:e,getValue:n,selectCell:l,cellStyles:a}){var g,m,c;let o=n(),i=(g=t.getColumnFormatting)==null?void 0:g.call(t),s=(m=t.columnDef.meta)==null?void 0:m.dataType,d=(c=t.columnDef.meta)==null?void 0:c.dtype;if(s==="datetime"&&typeof o=="string")try{let p=new Date(o),w=rs(o);return(0,r.jsx)(An,{children:f=>Ml({value:p,dataType:s,dtype:d,format:w,locale:f})})}catch(p){ve.error("Error parsing datetime, fallback to string",p)}if(o instanceof Date)return(0,r.jsx)(An,{children:p=>Ml({value:o,dataType:s,dtype:d,locale:p})});if(typeof o=="string"){let p=String(i?t.applyColumnFormatting(o):e()),w=Zr(p);return w.some(f=>f.type!=="text")||p.length<Qr?(0,r.jsx)("div",{onClick:l,className:a,children:(0,r.jsx)(vl,{parts:w})}):(0,r.jsx)(_l,{cellStyles:a,selectCell:l,rawStringValue:p,contentClassName:"max-h-64 overflow-auto whitespace-pre-wrap break-words text-sm",buttonText:"X",children:(0,r.jsx)(vl,{parts:w})})}if(i)return(0,r.jsx)("div",{onClick:l,className:a,children:t.applyColumnFormatting(o)});if(ti(o)){let p=e();return(0,r.jsx)("div",{onClick:l,className:a,children:p==null?"":String(p)})}let u=Wr(o);return u?(0,r.jsx)("div",{onClick:l,className:a,children:u.map((p,w)=>(0,r.jsx)(Ur,{value:p},w))}):Array.isArray(o)||typeof o=="object"?(0,r.jsx)(_l,{cellStyles:a,selectCell:l,rawStringValue:Fl(o),children:(0,r.jsx)(ta,{data:o,format:"tree",className:"max-h-64"})}):(0,r.jsx)("div",{onClick:l,className:a,children:Fl(o)})}});export{at as A,Gt as B,qt as C,$t as D,ot as E,oa as F,Bt as G,Ut as H,Wt as I,Kt as L,Yt as M,Jt as N,ra as O,Xt as P,Ae as R,Zt as S,Qt as T,en as U,tn as V,nn as W,ia as _,Os as __tla,ln as a,an as b,on as c,sa as d,rn as f,ua as g,sn as h,un as i,dn as j,da as k,ca as l,cn as m,gn as n,me as o,mn as p,pn as r,ga as s,ma as t,pa as u,fa as v,ha as w,fn as x,hn as y,xn as z};
