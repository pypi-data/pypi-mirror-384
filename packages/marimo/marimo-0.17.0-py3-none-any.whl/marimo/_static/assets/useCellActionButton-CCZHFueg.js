import{s as V}from"./chunk-DZLz74EQ.js";import{i as se,r as C}from"./react-7g8sREeT.js";import{At as ie,D as ne,Mt as re,Nr as de,Qn as ce,b as he,jt as me,tr as pe,ut as K}from"./cells-BEhFXxEH.js";import{n as ke,t as fe}from"./jsx-runtime-DvsdsEjx.js";import{a as ue,o as ye,r as xe}from"./utils-DLuqCLqV.js";import{r as be}from"./requests-BW3DqHQI.js";import{t as je}from"./use-toast-BKA5A0CC.js";import{t as c}from"./createLucideIcon-Dz-D6iuz.js";import{_ as Q,g as G}from"./select-DIqNYEaz.js";import{a as ge,r as ve}from"./download-RtEDTktT.js";import{t as Ce}from"./chevron-right-kGH9aJGk.js";import{t as $}from"./circle-plus-D3eehM55.js";import{t as we}from"./circle-x-CPCvpiTN.js";import{n as ze,t as Ie}from"./eye-off-wMFrY47K.js";import{t as We}from"./image-OhmwC5mR.js";import{t as Me}from"./link-C2C5_yfA.js";import{t as _e}from"./play-C5VC4Hal.js";import{t as Te}from"./sparkles-DLotTEZ2.js";import{t as Ae}from"./trash-2-Cex53SxB.js";import{r as Ne}from"./mode-kUHLEZT6.js";import{a as Se,c as Be,n as De}from"./dialog-gSaRWBIN.js";import{n as Ee}from"./ImperativeModal-DSAh6fUR.js";import{t as Re}from"./copy-BxPDuBrN.js";import{t as He}from"./label-CFxcdBki.js";import{t as Le}from"./useDeleteCell-CIqS2s5l.js";import{n as F}from"./add-missing-import-0FwDfOhv.js";import{n as qe,t as Oe}from"./icons-15z_NdNZ.js";import{n as Pe}from"./state-5DtoeNLQ.js";import{t as Ue}from"./switch-C2Bk9ykO.js";import{n as J}from"./name-cell-input-BeEPAsoA.js";import{t as X}from"./multi-icon-Bc23tsjq.js";import{r as Fe,t as Ve}from"./useSplitCell-CqQvrYlc.js";var Y=c("chevrons-down",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]),Z=c("chevrons-up",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]),Ke=c("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),ee=c("scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),Qe=c("text-cursor-input",[["path",{d:"M12 20h-1a2 2 0 0 1-2-2 2 2 0 0 1-2 2H6",key:"1528k5"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M6 4h1a2 2 0 0 1 2 2 2 2 0 0 1 2-2h1",key:"1mj8rg"}],["path",{d:"M9 6v12",key:"velyjx"}]]),te=c("zap-off",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),le=c("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Ge(a){let e=document.getElementById(de.create(a));e&&(e.classList.add("printing-output"),ve(e,"result.png").finally(()=>{e.classList.remove("printing-output")}))}function $e(a){let e=new URL(window.location.href);return e.hash=`scrollTo=${encodeURIComponent(a)}`,e.toString()}function Je(a){var r;let e=(r=a.match(/scrollTo=([^&]+)/))==null?void 0:r[1];return e?decodeURIComponent(e.split("&")[0]):null}function oe(a){return a==="_"?!1:!!(a&&a.trim().length>0)}var Xe=V(ke()),t=V(fe());function Ye(a){let e=(0,Xe.c)(54),{cell:r,closePopover:b}=a,{createNewCell:d,updateCellConfig:h,updateCellName:m,moveCell:p,sendToTop:A,sendToBottom:N,addColumnBreakpoint:S,clearCellOutput:B}=ne(),D=Ve(),E=Fe(r==null?void 0:r.cellId),R=!C(he),H=Le(),{openModal:w}=Ee(),L=se(Pe),q=C(xe),j=C(ye),ae=C(Ne),g=C(ue),{saveCellConfig:k}=be();if(!r||ae){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0],l}let{cellId:o,config:s,getEditorView:n,name:i,hasOutput:z,hasConsoleOutput:O,status:v}=r,I;e[1]!==o||e[2]!==s.disabled||e[3]!==k||e[4]!==h?(I=async()=>{let l={disabled:!s.disabled};await k({configs:{[o]:l}}),h({cellId:o,config:l})},e[1]=o,e[2]=s.disabled,e[3]=k,e[4]=h,e[5]=I):I=e[5];let W=I,M;e[6]!==o||e[7]!==s.hide_code||e[8]!==n||e[9]!==k||e[10]!==h?(M=async()=>{let l={hide_code:!s.hide_code};await k({configs:{[o]:l}}),h({cellId:o,config:l});let U=n();U&&(l.hide_code?U.contentDOM.blur():U.focus())},e[6]=o,e[7]=s.hide_code,e[8]=n,e[9]=k,e[10]=h,e[11]=M):M=e[11];let P=M,_;e[12]===Symbol.for("react.memo_cache_sentinel")?(_=(0,t.jsx)(Qe,{size:13,strokeWidth:1.5}),e[12]=_):_=e[12];let f;e[13]!==o||e[14]!==i||e[15]!==w||e[16]!==m?(f=()=>{w((0,t.jsxs)(De,{children:[(0,t.jsx)(Se,{children:(0,t.jsx)(Be,{children:"Rename cell"})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(He,{htmlFor:"cell-name",children:"Cell name"}),(0,t.jsx)(J,{placeholder:"cell name",value:i,onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),l.stopPropagation(),w(null))},onChange:l=>m({cellId:o,name:l})})]})]}))},e[13]=o,e[14]=i,e[15]=w,e[16]=m,e[17]=f):f=e[17];let u;e[18]!==o||e[19]!==m?(u=l=>m({cellId:o,name:l}),e[18]=o,e[19]=m,e[20]=u):u=e[20];let y;e[21]===b?y=e[22]:(y=()=>b==null?void 0:b(),e[21]=b,e[22]=y);let x;e[23]!==i||e[24]!==u||e[25]!==y?(x=(0,t.jsx)(J,{placeholder:"cell name",value:i,onChange:u,onEnterKey:y}),e[23]=i,e[24]=u,e[25]=y,e[26]=x):x=e[26];let T;return e[27]!==S||e[28]!==q||e[29]!==g||e[30]!==j||e[31]!==R||e[32]!==o||e[33]!==B||e[34]!==s.disabled||e[35]!==s.hide_code||e[36]!==d||e[37]!==H||e[38]!==n||e[39]!==O||e[40]!==z||e[41]!==p||e[42]!==i||e[43]!==E||e[44]!==N||e[45]!==A||e[46]!==L||e[47]!==D||e[48]!==v||e[49]!==f||e[50]!==x||e[51]!==W||e[52]!==P?(T=[[{icon:_,label:"Name",disableClick:!0,handle:lt,handleHeadless:f,rightElement:x},{icon:(0,t.jsx)(_e,{size:13,strokeWidth:1.5}),label:"Run cell",hotkey:"cell.run",hidden:v==="running"||v==="queued"||v==="disabled-transitively"||s.disabled,handle:()=>E()},{icon:(0,t.jsx)(Te,{size:13,strokeWidth:1.5}),label:"AI completion",hidden:!q,handle:()=>{L(l=>(l==null?void 0:l.cellId)===o?null:{cellId:o})},hotkey:"cell.aiCompletion"},{icon:(0,t.jsx)(ee,{size:13,strokeWidth:1.5}),label:"Split cell",hotkey:"cell.splitCell",handle:()=>D({cellId:o})},{icon:(0,t.jsx)(We,{size:13,strokeWidth:1.5}),label:"Export output as PNG",hidden:!z,handle:()=>Ge(o)},{icon:(0,t.jsx)(ze,{size:13,strokeWidth:1.5}),label:"Format cell",hotkey:"cell.format",handle:()=>{let l=n();l&&pe({[o]:l})}},{icon:s.hide_code?(0,t.jsx)(ie,{size:13,strokeWidth:1.5}):(0,t.jsx)(Ie,{size:13,strokeWidth:1.5}),label:s.hide_code?"Show code":"Hide code",handle:P,hotkey:"cell.hideCode"},{icon:s.disabled?(0,t.jsx)(te,{size:13,strokeWidth:1.5}):(0,t.jsx)(le,{size:13,strokeWidth:1.5}),label:"Reactive execution",rightElement:(0,t.jsx)(Ue,{"data-testid":"cell-disable-switch",checked:!s.disabled,size:"sm",onCheckedChange:W}),handle:W},{icon:(0,t.jsx)(we,{size:13,strokeWidth:1.5}),label:"Clear output",hidden:!(z||O),handle:()=>{B({cellId:o})}}],[{icon:(0,t.jsx)(Oe,{}),label:"Convert to Markdown",hotkey:"cell.viewAsMarkdown",handle:()=>{let l=n();l&&(F({autoInstantiate:j,createNewCell:d}),K(l,{language:"markdown",keepCodeAsIs:!1}))}},{icon:(0,t.jsx)(me,{size:13,strokeWidth:1.5}),label:"Convert to SQL",handle:()=>{let l=n();l&&(F({autoInstantiate:j,createNewCell:d}),K(l,{language:"sql",keepCodeAsIs:!1}))}},{icon:(0,t.jsx)(qe,{}),label:"Toggle as Python",handle:()=>{let l=n();l&&(F({autoInstantiate:j,createNewCell:d}),ce(l,"python",{force:!0}))}}],[{icon:(0,t.jsxs)(X,{children:[(0,t.jsx)($,{size:13,strokeWidth:1.5}),(0,t.jsx)(G,{size:8,strokeWidth:2})]}),label:"Create cell above",hotkey:"cell.createAbove",handle:()=>d({cellId:o,before:!0})},{icon:(0,t.jsxs)(X,{children:[(0,t.jsx)($,{size:13,strokeWidth:1.5}),(0,t.jsx)(Q,{size:8,strokeWidth:2})]}),label:"Create cell below",hotkey:"cell.createBelow",handle:()=>d({cellId:o,before:!1})},{icon:(0,t.jsx)(G,{size:13,strokeWidth:1.5}),label:"Move cell up",hotkey:"cell.moveUp",handle:()=>p({cellId:o,before:!0})},{icon:(0,t.jsx)(Q,{size:13,strokeWidth:1.5}),label:"Move cell down",hotkey:"cell.moveDown",handle:()=>p({cellId:o,before:!1})},{icon:(0,t.jsx)(ge,{size:13,strokeWidth:1.5}),label:"Move cell left",hotkey:"cell.moveLeft",handle:()=>p({cellId:o,direction:"left"}),hidden:g!=="columns"},{icon:(0,t.jsx)(Ce,{size:13,strokeWidth:1.5}),label:"Move cell right",hotkey:"cell.moveRight",handle:()=>p({cellId:o,direction:"right"}),hidden:g!=="columns"},{icon:(0,t.jsx)(Z,{size:13,strokeWidth:1.5}),label:"Send to top",hotkey:"cell.sendToTop",handle:()=>A({cellId:o,scroll:!1})},{icon:(0,t.jsx)(Y,{size:13,strokeWidth:1.5}),label:"Send to bottom",hotkey:"cell.sendToBottom",handle:()=>N({cellId:o,scroll:!1})},{icon:(0,t.jsx)(re,{size:13,strokeWidth:1.5}),label:"Break into new column",hotkey:"cell.addColumnBreakpoint",hidden:g!=="columns",handle:()=>S({cellId:o})}],[{icon:(0,t.jsx)(Me,{size:13,strokeWidth:1.5}),label:"Copy link to cell",disabled:!oe(i),tooltip:oe(i)?void 0:"Only named cells can be linked to",handle:async()=>{await Re($e(i)),je({description:"Link copied to clipboard"})}}],[{label:"Delete",hidden:!R,variant:"danger",icon:(0,t.jsx)(Ae,{size:13,strokeWidth:1.5}),handle:()=>{H({cellId:o})}}]].map(et).filter(Ze),e[27]=S,e[28]=q,e[29]=g,e[30]=j,e[31]=R,e[32]=o,e[33]=B,e[34]=s.disabled,e[35]=s.hide_code,e[36]=d,e[37]=H,e[38]=n,e[39]=O,e[40]=z,e[41]=p,e[42]=i,e[43]=E,e[44]=N,e[45]=A,e[46]=L,e[47]=D,e[48]=v,e[49]=f,e[50]=x,e[51]=W,e[52]=P,e[53]=T):T=e[53],T}function Ze(a){return a.length>0}function et(a){return a.filter(tt)}function tt(a){return!a.hidden}function lt(a){a==null||a.stopPropagation(),a==null||a.preventDefault()}export{ee as a,Y as c,te as i,Je as n,Ke as o,le as r,Z as s,Ye as t};
