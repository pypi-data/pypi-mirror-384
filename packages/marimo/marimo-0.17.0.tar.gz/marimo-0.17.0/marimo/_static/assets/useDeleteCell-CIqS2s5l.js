import{s as m}from"./chunk-DZLz74EQ.js";import{D as p,S as I,b as h}from"./cells-BEhFXxEH.js";import{n as C,t as v}from"./jsx-runtime-DvsdsEjx.js";import{r as f}from"./invariant-B43sqCFA.js";import{t as x}from"./useEventListener-g9rPKvBX.js";import{t as _}from"./button-g1jf7cM6.js";import{r as b}from"./requests-BW3DqHQI.js";import{t as g}from"./use-toast-BKA5A0CC.js";import{n as y}from"./useEvent-itkPNnCe.js";import{n as j}from"./renderShortcut-Bjp5Xukk.js";var w=m(C()),d=m(v());const u=e=>{let t=(0,w.c)(7),l;t[0]===e?l=t[1]:(l=n=>{var s;(n.ctrlKey||n.metaKey)&&n.key==="z"&&(n.preventDefault(),n.stopPropagation(),(s=e.onClick)==null||s.call(e,n))},t[0]=e,t[1]=l);let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r={capture:!0},t[2]=r):r=t[2],x(window,"keydown",l,r);let o=e.children??"Undo",i;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,d.jsx)(j,{className:"ml-2",shortcut:"cmd-z"}),t[3]=i):i=t[3];let a;return t[4]!==o||t[5]!==e?(a=(0,d.jsxs)(_,{"data-testid":"undo-button",size:"sm",variant:"outline",...e,children:[o," ",i]}),t[4]=o,t[5]=e,t[6]=a):a=t[6],a};var k=m(C());function z(){let e=(0,k.c)(4),{deleteCell:t,undoDeleteCell:l}=p(),{sendDeleteCell:r}=b(),o;return e[0]!==t||e[1]!==r||e[2]!==l?(o=i=>{var s;if(f.get(h))return;let{cellId:a}=i,n=(((s=f.get(I).cellData[a])==null?void 0:s.code)??"").trim()==="";if(t({cellId:a}),r({cellId:a}).catch(()=>{l()}),!n){let{dismiss:c}=g({title:"Cell deleted",description:"You can bring it back by clicking undo or through the command palette.",action:(0,d.jsx)(u,{"data-testid":"undo-delete-button",onClick:()=>{l(),D()}})}),D=c}},e[0]=t,e[1]=r,e[2]=l,e[3]=o):o=e[3],y(o)}function S(){let e=(0,k.c)(4),{deleteCell:t,undoDeleteCell:l}=p(),{sendDeleteCell:r}=b(),o;return e[0]!==t||e[1]!==r||e[2]!==l?(o=async i=>{if(f.get(h))return;let{cellIds:a}=i;for(let c of a)await r({cellId:c}).then(()=>{t({cellId:c})});let{dismiss:n}=g({title:"Cells deleted",action:(0,d.jsx)(u,{"data-testid":"undo-delete-button",onClick:()=>{for(let c of a)l();s()}})}),s=n},e[0]=t,e[1]=r,e[2]=l,e[3]=o):o=e[3],y(o)}export{S as n,u as r,z as t};
