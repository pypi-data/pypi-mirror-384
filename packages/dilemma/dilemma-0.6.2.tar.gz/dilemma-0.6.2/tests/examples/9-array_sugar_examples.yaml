- name: at_least_sugar_basic
  category: array_sugar
  description: "Test 'at least N of X has predicate' natural language sugar"
  expression: "at least 2 of users matches | age >= 25 |"
  expected: true
  context:
      users:
        - name: "Alice"
          age: 25
        - name: "Bob"
          age: 30
        - name: "Charlie"
          age: 20

- name: at_most_sugar_basic
  category: array_sugar
  description: "Test 'at most N of X has predicate' natural language sugar"
  expression: "at most 1 of products matches | price > 100 |"
  expected: true
  context:
      products:
        - name: "Widget A"
          price: 50
        - name: "Widget B"
          price: 150
        - name: "Widget C"
          price: 75

- name: exactly_sugar_basic
  category: array_sugar
  description: "Test 'exactly N of X has predicate' natural language sugar"
  expression: "exactly 2 of employees matches | department == 'Engineering' |"
  expected: true
  context:
      employees:
        - name: "Alice"
          department: "Engineering"
        - name: "Bob"
          department: "Marketing"
        - name: "Charlie"
          department: "Engineering"

- name: any_of_sugar_basic
  category: array_sugar
  description: "Test 'any of X has predicate' natural language sugar"
  expression: "any of tasks matches | status == 'urgent' |"
  expected: true
  context:
      tasks:
        - id: 1
          status: "normal"
        - id: 2
          status: "urgent"
        - id: 3
          status: "low"

- name: all_of_sugar_basic
  category: array_sugar
  description: "Test 'all of X has predicate' natural language sugar"
  expression: "all of orders matches | paid == true |"
  expected: false
  context:
      orders:
        - id: 1
          paid: true
        - id: 2
          paid: false
        - id: 3
          paid: true

- name: none_of_sugar_basic
  category: array_sugar
  description: "Test 'none of X has predicate' natural language sugar"
  expression: "none of items matches | defective == true |"
  expected: true
  context:
      items:
        - id: 1
          defective: false
        - id: 2
          defective: false
        - id: 3
          defective: false

- name: sugar_complex_condition
  category: array_sugar
  description: "Test sugar with complex boolean predicates"
  expression: "at least 1 of users matches | age > 21 and active == true |"
  expected: true
  context:
      users:
        - name: "Alice"
          age: 25
          active: true
        - name: "Bob"
          age: 18
          active: true
        - name: "Charlie"
          age: 30
          active: false

- name: sugar_in_logical_expression
  category: array_sugar
  description: "Test sugar combined with logical operators"
  expression: "exactly 2 of team matches |role == 'developer'| and any of team matches |role == 'lead'|"
  expected: true
  context:
      team:
        - name: "Alice"
          role: "lead"
        - name: "Bob"
          role: "developer"
        - name: "Charlie"
          role: "developer"
        - name: "David"
          role: "designer"

- name: sugar_with_string_matching
  category: array_sugar
  description: "Test sugar with string pattern matching"
  expression: "at least 2 of files matches | name like '*.txt' |"
  expected: true
  context:
      files:
        - name: "document.txt"
          size: 1024
        - name: "readme.txt"
          size: 512
        - name: "image.jpg"
          size: 2048

- name: sugar_with_nested_properties
  category: array_sugar
  description: "Test sugar with nested object property access"
  expression: "exactly 1 of projects matches | team.size > 5 |"
  expected: true
  context:
      projects:
        - name: "Project A"
          team:
            size: 3
            lead: "Alice"
        - name: "Project B"
          team:
            size: 7
            lead: "Bob"
        - name: "Project C"
          team:
            size: 4
            lead: "Charlie"

- name: sugar_zero_count
  category: array_sugar
  description: "Test sugar expressions that should count zero"
  expression: "exactly 0 of users matches |age > 100| and none of users matches |name == 'Nobody'|"
  expected: true
  context:
      users:
        - name: "Alice"
          age: 25
        - name: "Bob"
          age: 30

- name: sugar_empty_collection
  category: array_sugar
  description: "Test sugar with empty collections"
  expression: "exactly 0 of empty_list matches |value > 0| and all of empty_list matches |value < 1000|"
  expected: true
  context:
      empty_list: []

- name: sugar_comparison_result
  category: array_sugar
  description: "Test using sugar result in comparisons"
  expression: "exactly 3 of scores matches | points > 80 | == true"
  expected: true
  context:
      scores:
        - player: "Alice"
          points: 95
        - player: "Bob"
          points: 72
        - player: "Charlie"
          points: 88
        - player: "David"
          points: 91

- name: sugar_arithmetic_context
  category: array_sugar
  description: "Test sugar in arithmetic context (boolean to number conversion)"
  expression: "at least 1 of items matches | value > 5 | + 2"
  expected: 3
  context:
      items:
        - value: 10
        - value: 2
        - value: 8

- name: sugar_multiple_conditions
  category: array_sugar
  description: "Test multiple sugar conditions in one expression"
  expression: "at least 2 of users matches |active == true| and at most 1 of users matches |role == 'admin'|"
  expected: true
  context:
      users:
        - name: "Alice"
          active: true
          role: "user"
        - name: "Bob"
          active: true
          role: "admin"
        - name: "Charlie"
          active: false
          role: "user"
