<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <record id="view_mbl_tree_lead_line_isp_infos" model="ir.ui.view">
    <field name="name">crm.lead.line mobile ISP infos tree view (in crm lead)</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <tree editable="bottom">
        <field name="active" invisible="1"/>
        <button type="object" name="get_formview_action" string="Open" icon="fa-edit" context="{'crm_lead_id': id, 'is_mobile': True}"/>
        <field name="id" attrs="{'readonly':True}"/>
        <field name="product_id" attrs="{'readonly':True}"/>
        <field name="mobile_isp_info_phone_number"/>
        <field name="create_reason"/>
        <field name="mobile_isp_info_icc" attrs="{'readonly':False}"/>
        <field name="tree_view_notes"/>
      </tree>
    </field>
  </record>
  <record id="view_ba_tree_lead_line_isp_infos" model="ir.ui.view">
    <field name="name">crm.lead.line broadband ISP infos tree view (in crm lead)</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <tree editable="bottom">
        <field name="active" invisible="1"/>
        <button type="object" name="get_formview_action" string="Open" icon="fa-edit" context="{'crm_lead_id': id, 'is_mobile': False}"/>
        <field name="id" attrs="{'readonly':True}"/>
        <field name="product_id" attrs="{'readonly':True}"/>
        <field name="broadband_isp_info_phone_number"/>
        <field name="create_reason"/>
        <field name="broadband_isp_info_service_street"/>
        <field name="broadband_isp_info_service_city"/>
        <field name="broadband_isp_info_service_state_id"/>
        <field name="tree_view_notes"/>
      </tree>
    </field>
  </record>
  <record id="view_tree_lead_line_mobile" model="ir.ui.view">
    <field name="name">crm.lead.line tree view mobile (in main menu)</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <tree string="Mobile Lead Lines">
        <field name="id"/>
        <field name="id" widget="open_tab"/>
        <field name="partner_id"/>
        <field name="partner_category_id" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
        <field name="create_date"/>
        <field name="create_user_id"/>
        <field name="product_id"/>
        <field name="stage_id"/>
        <field name="tree_view_notes"/>
        <field name="mobile_isp_info_type"/>
        <field name="mobile_isp_info_icc"/>
        <field name="mobile_isp_info_phone_number"/>
      </tree>
    </field>
  </record>
  <record id="view_form_lead_line_mobile" model="ir.ui.view">
    <field name="name">crm.lead.line mobile form view</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <form string="Mobile Lead Line Form" duplicate="0">
        <header>
          <button name="action_archive" string="Archive" type="object" class="oe_highlight" confirm="Are you sure you want to archive this crm lead line?" attrs="{'invisible': [('active','=',False)]}"/>
          <button name="action_restore" string="Restore" type="object" class="oe_highlight" attrs="{'invisible': [('active','=',True)]}"/>
        </header>
        <sheet>
          <group name="left">
            <field name="active" invisible="1"/>
            <group>
              <field name="mobile_isp_info_icc" attrs="{'readonly':False}"/>
              <field name="mobile_isp_info_has_sim" attrs="{'readonly':False}"/>
              <field name="product_id"/>
            </group>
            <group>
              <field name="lead_id" attrs="{'readonly':True}"/>
              <field name="stage_id" attrs="{'readonly':True}"/>
            </group>
            <group>
              <field name="partner_id"/>
              <field name="partner_category_id" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
            </group>
            <group>
              <field name="iban"/>
              <field name="confirmed_documentation" attrs="{'readonly':True}"/>
              <field name="create_date"/>
            </group>
          </group>
          <group name="right">
            <group>
              <field name="mobile_isp_info"/>
              <field name="mobile_isp_info_type"/>
              <field name="mobile_isp_info_phone_number"/>
            </group>
            <group string="Delivery address">
              <field name="mobile_isp_info_delivery_street"/>
              <field name="mobile_isp_info_delivery_street2" attrs="{'invisible': [('mobile_isp_info_delivery_street2' ,'=', False)]}"/>
              <field name="mobile_isp_info_delivery_zip_code"/>
              <field name="mobile_isp_info_delivery_city"/>
              <field name="mobile_isp_info_delivery_state_id"/>
            </group>
          </group>
          <notebook>
            <page string="Notes">
              <field name="notes"/>
            </page>
            <page string="Other addresses">
              <group string="Invoice address" attrs="{'invisible': [('mobile_isp_info_invoice_street' ,'=', False)]}">
                <field name="mobile_isp_info_invoice_street"/>
                <field name="mobile_isp_info_invoice_street2" attrs="{'invisible': [('mobile_isp_info_invoice_street2' ,'=', False)]}"/>
                <field name="mobile_isp_info_invoice_zip_code"/>
                <field name="mobile_isp_info_invoice_city"/>
                <field name="mobile_isp_info_invoice_state_id"/>
              </group>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>
  <record id="action_crm_lead_line_mobile" model="ir.actions.act_window">
    <field name="name">Mobile Lead Lines</field>
    <field name="binding_model_id" ref="crm_lead_product.model_crm_lead_line"/>
    <field name="res_model">crm.lead.line</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">[('is_mobile','=',True)]</field>
  </record>
  <record model="ir.actions.act_window.view" id="action_crm_lead_line_mobile_tree">
    <field name="sequence">0</field>
    <field name="view_mode">tree</field>
    <field name="view_id" ref="view_tree_lead_line_mobile"/>
    <field name="act_window_id" ref="action_crm_lead_line_mobile"/>
  </record>
  <record model="ir.actions.act_window.view" id="action_crm_lead_line_mobile_form">
    <field name="sequence">1</field>
    <field name="view_mode">form</field>
    <field name="view_id" ref="view_form_lead_line_mobile"/>
    <field name="act_window_id" ref="action_crm_lead_line_mobile"/>
  </record>
  <menuitem id="menu_crm_lead_line_mobile" name="Mobile Lead Lines" action="action_crm_lead_line_mobile" web_icon="somconnexio,static/description/mobile_lead_lines.png"/>
  <record id="view_tree_lead_line_broadband" model="ir.ui.view">
    <field name="name">crm.lead.line broadband (in main menu)</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <tree string="Broadband Lead lines">
        <field name="id"/>
        <field name="id" widget="open_tab"/>
        <field name="partner_id"/>
        <field name="partner_category_id" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
        <field name="create_date"/>
        <field name="create_user_id"/>
        <field name="product_id"/>
        <field name="stage_id"/>
        <field name="broadband_isp_info_type"/>
        <field name="broadband_isp_info_phone_number"/>
        <field name="broadband_isp_info_service_street"/>
        <field name="tree_view_notes"/>
        <field name="broadband_isp_info_service_city"/>
        <field name="broadband_isp_info_service_state_id"/>
      </tree>
    </field>
  </record>
  <record id="view_form_lead_line_broadband" model="ir.ui.view">
    <field name="name">crm.lead.line broadband form view</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <form string="Broadband Lead Line Form" duplicate="0">
        <header>
          <button name="action_archive" string="Archive" type="object" class="oe_highlight" confirm="Are you sure you want to archive this crm lead line?" attrs="{'invisible': [('active','=',False)]}"/>
          <button name="action_restore" string="Restore" type="object" class="oe_highlight" attrs="{'invisible': [('active','=',True)]}"/>
        </header>
        <sheet>
          <field name="active" invisible="1"/>
          <group name="left">
            <group>
              <field name="product_id"/>
            </group>
            <group>
              <field name="lead_id" attrs="{'readonly':True}"/>
              <field name="stage_id" attrs="{'readonly':True}"/>
            </group>
            <group>
              <field name="partner_id"/>
              <field name="partner_category_id" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
              <field name="iban"/>
            </group>
            <group>
              <field name="confirmed_documentation" attrs="{'readonly':True}"/>
              <field name="create_date"/>
            </group>
          </group>
          <group name="right">
            <group>
              <field name="is_4G" invisible="1"/>
              <field name="check_phone_number" attrs="{'invisible': ['|',('is_4G','=',True),('broadband_isp_info_type','=','new')]}"/>
              <field name="broadband_isp_info_no_previous_phone_number" attrs="{'invisible': [('broadband_isp_info_no_previous_phone_number','=',False)],                             'readonly':True}"/>
              <field name="broadband_isp_info"/>
              <field name="broadband_isp_info_type"/>
              <field name="broadband_isp_info_phone_number"/>
            </group>
            <group string="Service address">
              <field name="broadband_isp_info_service_street"/>
              <field name="broadband_isp_info_service_street2" attrs="{'invisible': [('broadband_isp_info_service_street2' ,'=', False)]}"/>
              <field name="broadband_isp_info_service_zip_code"/>
              <field name="broadband_isp_info_service_city"/>
              <field name="broadband_isp_info_service_state_id"/>
            </group>
          </group>
          <notebook>
            <page string="Notes">
              <field name="notes"/>
            </page>
            <page string="Other addresses">
              <group string="Invoice address" attrs="{'invisible': [('broadband_isp_info_invoice_street' ,'=', False)]}">
                <field name="broadband_isp_info_invoice_street"/>
                <field name="broadband_isp_info_invoice_street2" attrs="{'invisible': [('broadband_isp_info_invoice_street2' ,'=', False)]}"/>
                <field name="broadband_isp_info_invoice_city"/>
                <field name="broadband_isp_info_invoice_state_id"/>
              </group>
              <group string="Delivery address" attrs="{'invisible': [('broadband_isp_info_delivery_street' ,'=', False)]}">
                <field name="broadband_isp_info_delivery_street"/>
                <field name="broadband_isp_info_delivery_street2" attrs="{'invisible': [('broadband_isp_info_delivery_street2' ,'=', False)]}"/>
                <field name="broadband_isp_info_delivery_city"/>
                <field name="broadband_isp_info_delivery_state_id"/>
              </group>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>
  <record id="action_crm_lead_line_broadband" model="ir.actions.act_window">
    <field name="name">Broadband Lead Lines</field>
    <field name="binding_model_id" ref="crm_lead_product.model_crm_lead_line"/>
    <field name="res_model">crm.lead.line</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">[('is_mobile','=',False)]</field>
  </record>
  <record model="ir.actions.act_window.view" id="action_crm_lead_line_broadband_tree">
    <field name="sequence">0</field>
    <field name="view_mode">tree</field>
    <field name="view_id" ref="view_tree_lead_line_broadband"/>
    <field name="act_window_id" ref="action_crm_lead_line_broadband"/>
  </record>
  <record model="ir.actions.act_window.view" id="action_crm_lead_line_broadband_form">
    <field name="sequence">1</field>
    <field name="view_mode">form</field>
    <field name="view_id" ref="view_form_lead_line_broadband"/>
    <field name="act_window_id" ref="action_crm_lead_line_broadband"/>
  </record>
  <menuitem id="menu_crm_lead_line_broadband" name="Broadband Lead Lines" action="action_crm_lead_line_broadband" web_icon="somconnexio,static/description/broadband_lead_lines.png"/>
  <record id="crm_lead_line_search_view" model="ir.ui.view">
    <field name="name">crm.lead.line search view</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <search>
        <field name="name" filter_domain="['|', '|', '|', '|',                                   ('partner_id', 'ilike', self),                                   ('product_id', 'ilike', self),                                   ('mobile_isp_info_phone_number', 'ilike', self),                                   ('broadband_isp_info_phone_number', 'ilike', self),                                   ('lead_id.partner_id.vat', 'ilike', self),                               ]"/>
        <field string="Service street" name="broadband_isp_info_service_street"/>
        <field string="Service zip code" name="broadband_isp_info_service_zip_code"/>
        <field string="Service city" name="broadband_isp_info_service_city"/>
        <filter string="New" name="stage_id" domain="[('stage_id', '=', %(crm.stage_lead1)d)]"/>
        <filter string="Paused" name="stage_id" domain="[('stage_id', '=', %(crm.stage_lead2)d)]"/>
        <filter string="Remesa" name="stage_id" domain="[('stage_id', '=', %(crm.stage_lead3)d)]"/>
        <filter string="Won" name="stage_id" domain="[('stage_id', '=', %(crm.stage_lead4)d)]"/>
        <filter string="Cancelled" name="stage_id" domain="[('stage_id', '=', %(somconnexio.stage_lead5)d)]"/>
        <separator/>
        <filter string="New service" name="type" domain="['|', ('mobile_isp_info_type', '=', 'new'),                               ('broadband_isp_info_type', '=', 'new')]"/>
        <filter string="Portability" name="type" domain="['|', ('mobile_isp_info_type', '=', 'portability'),                          ('broadband_isp_info_type', '=', 'portability')]"/>
      </search>
    </field>
  </record>
</odoo>
