<?xml version="1.0"?>
<odoo>
  <record id="action_sending_new_sim_letter" model="ir.actions.report">
    <field name="name">New Sim Sending Letter</field>
    <field name="model">contract.contract</field>
    <field name="report_type">qweb-pdf</field>
    <field name="report_name">somconnexio.new_sim_sending_letter_template</field>
    <field name="report_file">somconnexio.new_sim_sending_letter_template</field>
    <field name="binding_model_id" ref="contract.model_contract_contract"/>
    <field name="binding_type">report</field>
    <field name="paperformat_id" ref="base.paperformat_euro"/>
  </record>
  <!-- Main template -->
  <template id="new_sim_sending_letter_template">
    <t t-call="web.html_container">
      <!-- for doc (contract) in report -->
      <t t-foreach="docs" t-as="doc">
        <t t-call="somconnexio.new_sim_sending_letter_lang_template" t-lang="doc.partner_id.lang"/>
      </t>
    </t>
  </template>
  <!-- Translatable template -->
  <template id="new_sim_sending_letter_lang_template">
    <!-- Re-browse of the record with the partner lang -->
    <t t-set="doc" t-value="doc.with_context({'lang':doc.partner_id.lang})"/>
    <meta charset="UTF-8"/>
    <div class="page">
      <div class="oe_structure" style="margin-left: 10em;"/>
      <div style="margin-left: 3em;"><p style="padding-bottom: 4em;"/><div class="recipient" style="padding: 3em; text-align: right;"><strong><t t-esc="doc.partner_id.name"/></strong><br/><t t-esc="doc.mobile_contract_service_info_id.delivery_street"/><br/><t t-if="doc.mobile_contract_service_info_id.delivery_street2"><t t-esc="doc.mobile_contract_service_info_id.delivery_street2"/></t><t t-esc="doc.mobile_contract_service_info_id.delivery_zip_code"/>
                        -
                        <t t-esc="doc.mobile_contract_service_info_id.delivery_city"/><br/>
                        <t t-esc="doc.mobile_contract_service_info_id.delivery_state_id.name"/><br/>
                    </div>
                    El Prat de Llobregat <t t-esc="datetime.date.today().strftime('%d/%m/%Y')"/><br/><br/>
                    Hola <t t-esc="doc.partner_id.firstname"/>,<br/>
                    Com pots veure...<br/><br/>
                    <div class="stand-out-message" style="background: #863158; color: white; text-align: center; padding: 1em; margin: 1em; font-weight: bold">
                        Aquí tens la nova SIM de Som Connexió per a la línia
                        <t t-esc="doc.mobile_contract_service_info_id.phone_number"/>
                    </div>
                    <div class="body" style="margin-top: 2em;">
                        Avisa'ns quan la rebis i te l'activarem.<br/><br/><br/>

                        Si tens qualsevol dubte, ens pots trobar a:<br/><br/>

                        <strong>Telèfon:</strong><br/>
                        93 131 17 28 (de dilluns a divendres de 10h a 14h)<br/>
                        693 761 723 (només per urgències, de 9h a 21h, tots els dies de la setmana).<br/><br/>
                        <strong>Correu:</strong><br/>
                        <a href="mailto:serveis@somconnexio.coop">serveis@somconnexio.coop</a><br/><br/>

                        Si tens una urgència fora d'aquest horari, envia un correu electrònic amb la paraula URGENT a l'assumpte, a
                        <a href="mailto:serveis@somconnexio.coop">serveis@somconnexio.coop</a><br/><br/><br/>

                        <p style="page-break-after:always">L'equip Som Connexió</p>
                    </div>
                </div>
      <div class="oe_structure"/>
    </div>
  </template>
</odoo>
