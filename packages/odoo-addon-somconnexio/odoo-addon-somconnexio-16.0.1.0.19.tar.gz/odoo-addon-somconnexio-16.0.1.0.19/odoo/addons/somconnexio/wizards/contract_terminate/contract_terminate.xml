<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <record id="contract_contract_terminate_form_view" model="ir.ui.view">
    <field name="name">contract.contract.terminate.form.view</field>
    <field name="model">contract.contract.terminate</field>
    <field name="inherit_id" ref="contract.contract_contract_terminate_form_view"/>
    <field name="arch" type="xml">
      <field name="terminate_reason_id" position="after">
        <field name="terminate_user_reason_id" widget="selection"/>
        <field name="will_force_other_mobiles_to_quit_pack" invisible="1"/>
      </field>
      <button name="terminate_contract" position="attributes">
        <attribute name="attrs">{'invisible': [
            ('will_force_other_mobiles_to_quit_pack','=',True),
            ('terminate_reason_id','not in', [%(somconnexio.reason_provider_change)d,
                                              %(somconnexio.reason_move_to_home_with_connexion)d,
                                              %(somconnexio.reason_location_change_from_SC_to_SC)d,
                                             ])
            ]}</attribute>
      </button>
      <button name="terminate_contract" position="after">
        <button name="terminate_contract" string="Terminate Contract" type="object" class="oe_highlight" confirm="Terminate contract will create change tariff ticket in OTRS and break packs. At 6pm, changes will be made to mobile lines that are no longer in packs. Are you sure?" attrs="{'invisible': [                     '|', ('will_force_other_mobiles_to_quit_pack','=',False),                          ('terminate_reason_id','in', [%(somconnexio.reason_provider_change)d,                                                        %(somconnexio.reason_move_to_home_with_connexion)d,                                                        %(somconnexio.reason_location_change_from_SC_to_SC)d,                                                       ])                    ]}"/>
      </button>
    </field>
  </record>
</odoo>
