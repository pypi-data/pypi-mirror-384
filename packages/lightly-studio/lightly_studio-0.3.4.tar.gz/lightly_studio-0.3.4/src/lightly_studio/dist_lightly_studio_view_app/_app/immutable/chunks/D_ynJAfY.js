var _e=Object.defineProperty;var Ct=e=>{throw TypeError(e)};var pe=(e,t,s)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var N=(e,t,s)=>pe(e,typeof t!="symbol"?t+"":t,s),ht=(e,t,s)=>t.has(e)||Ct("Cannot "+s);var S=(e,t,s)=>(ht(e,t,"read from private field"),s?s.call(e):t.get(e)),U=(e,t,s)=>t.has(e)?Ct("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),Q=(e,t,s,r)=>(ht(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),V=(e,t,s)=>(ht(e,t,"access private method"),s);import{aR as be,aS as ye,aT as me,F as ot,G as C,H as Bt,O as St,P as B,Q as xt,R as Jt,V as Y,U as Qt,T as Xt,M as gt,Z as we,g as x,ac as Se,J as Ae,K as Te,L as Ot,N as z,a3 as Pe,aJ as Ee,ap as Lt,W as Ie,an as Mt,aH as Zt,C as zt,aU as ut,S as Wt,aV as ft,aW as Ne,aX as vt,al as tt,az as Ce,aY as Oe,aG as Le,aZ as Me,E as Re,x as te,a_ as ee,a$ as ke,a4 as se,b0 as De,b1 as Fe,v as Ge,b2 as He,b3 as Ue,b4 as Ve,b5 as qe,b6 as $e,b7 as je,b8 as Ke,b9 as Ye,aP as Be,aO as xe,o as re,m as R,w as lt,ak as Rt,aa as kt,Y as Dt,h as Ft,b as Je}from"./Frwd2CjB.js";import{c as Qe,d as Xe}from"./Dug7Bq1S.js";import{i as Ze,n as ze,a as We}from"./H60ATh8g.js";import{c as ie}from"./DzX_yyqb.js";import{o as ts}from"./D5w4xp5l.js";import{R as es,j as ss,e as rs,k as is,l as as,m as ns}from"./H4l0JFh9.js";function Gs(e,t,s){C&&Bt();var r=e,i=Qt,n,a,u=null,h=be()?ye:me;function v(){n&&Xt(n),u!==null&&(u.lastChild.remove(),r.before(u),u=null),n=a}ot(()=>{if(h(i,i=t())){var p=r,y=Jt();y&&(u=document.createDocumentFragment(),u.append(p=St())),a=B(()=>s(p)),y?xt.add_callback(v):v()}}),C&&(r=Y)}function Hs(e,t){return t}function os(e,t,s){for(var r=e.items,i=[],n=t.length,a=0;a<n;a++)Oe(t[a].e,i,!0);var u=n>0&&i.length===0&&s!==null;if(u){var h=s.parentNode;Le(h),h.append(s),r.clear(),k(e,t[0].prev,t[n-1].next)}Me(i,()=>{for(var v=0;v<n;v++){var p=t[v];u||(r.delete(p.k),k(e,p.prev,p.next)),tt(p.e,!u)}})}function Us(e,t,s,r,i,n=null){var a=e,u={flags:t,items:new Map,first:null},h=(t&ee)!==0;if(h){var v=e;a=C?gt(we(v)):v.appendChild(St())}C&&Bt();var p=null,y=!1,g=new Map,A=Se(()=>{var T=s();return zt(T)?T:T==null?[]:Zt(T)}),c,_;function d(){us(_,c,u,g,a,i,t,r,s),n!==null&&(c.length===0?p?Wt(p):p=B(()=>n(a)):p!==null&&Xt(p,()=>{p=null}))}ot(()=>{_??(_=Re),c=x(A);var T=c.length;if(y&&T===0)return;y=T===0;let P=!1;if(C){var m=Ae(a)===Te;m!==(T===0)&&(a=Ot(),gt(a),z(!1),P=!0)}if(C){for(var b=null,w,o=0;o<T;o++){if(Y.nodeType===Pe&&Y.data===Ee){a=Y,P=!0,z(!1);break}var f=c[o],l=r(f,o);w=yt(Y,u,b,null,f,l,o,i,t,s),u.items.set(l,w),b=w}T>0&&gt(Ot())}if(C)T===0&&n&&(p=B(()=>n(a)));else if(Jt()){var E=new Set,I=xt;for(o=0;o<T;o+=1){f=c[o],l=r(f,o);var H=u.items.get(l)??g.get(l);H?t&(ft|ut)&&ae(H,f,o,t):(w=yt(null,u,null,null,f,l,o,i,t,s,!0),g.set(l,w)),E.add(l)}for(const[L,it]of u.items)E.has(L)||I.skipped_effects.add(it.e);I.add_callback(d)}else d();P&&z(!0),x(A)}),C&&(a=Y)}function us(e,t,s,r,i,n,a,u,h){var Tt,Pt,Et,It;var v=(a&ke)!==0,p=(a&(ft|ut))!==0,y=t.length,g=s.items,A=s.first,c=A,_,d=null,T,P=[],m=[],b,w,o,f;if(v)for(f=0;f<y;f+=1)b=t[f],w=u(b,f),o=g.get(w),o!==void 0&&((Tt=o.a)==null||Tt.measure(),(T??(T=new Set)).add(o));for(f=0;f<y;f+=1){if(b=t[f],w=u(b,f),o=g.get(w),o===void 0){var l=r.get(w);if(l!==void 0){r.delete(w),g.set(w,l);var E=d?d.next:c;k(s,d,l),k(s,l,E),_t(l,E,i),d=l}else{var I=c?c.e.nodes_start:i;d=yt(I,s,d,d===null?s.first:d.next,b,w,f,n,a,h)}g.set(w,d),P=[],m=[],c=d.next;continue}if(p&&ae(o,b,f,a),o.e.f&vt&&(Wt(o.e),v&&((Pt=o.a)==null||Pt.unfix(),(T??(T=new Set)).delete(o))),o!==c){if(_!==void 0&&_.has(o)){if(P.length<m.length){var H=m[0],L;d=H.prev;var it=P[0],ct=P[P.length-1];for(L=0;L<P.length;L+=1)_t(P[L],H,i);for(L=0;L<m.length;L+=1)_.delete(m[L]);k(s,it.prev,ct.next),k(s,d,it),k(s,ct,H),c=H,d=ct,f-=1,P=[],m=[]}else _.delete(o),_t(o,c,i),k(s,o.prev,o.next),k(s,o,d===null?s.first:d.next),k(s,d,o),d=o;continue}for(P=[],m=[];c!==null&&c.k!==w;)c.e.f&vt||(_??(_=new Set)).add(c),m.push(c),c=c.next;if(c===null)continue;o=c}P.push(o),d=o,c=o.next}if(c!==null||_!==void 0){for(var J=_===void 0?[]:Zt(_);c!==null;)c.e.f&vt||J.push(c),c=c.next;var dt=J.length;if(dt>0){var ge=a&ee&&y===0?i:null;if(v){for(f=0;f<dt;f+=1)(Et=J[f].a)==null||Et.measure();for(f=0;f<dt;f+=1)(It=J[f].a)==null||It.fix()}os(s,J,ge)}}v&&te(()=>{var Nt;if(T!==void 0)for(o of T)(Nt=o.a)==null||Nt.apply()}),e.first=s.first&&s.first.e,e.last=d&&d.e;for(var ve of r.values())tt(ve.e);r.clear()}function ae(e,t,s,r){r&ft&&Lt(e.v,t),r&ut?Lt(e.i,s):e.i=s}function yt(e,t,s,r,i,n,a,u,h,v,p){var y=(h&ft)!==0,g=(h&Ne)===0,A=y?g?Ie(i,!1,!1):Mt(i):i,c=h&ut?Mt(a):a,_={i:c,v:A,k:n,a:null,e:null,prev:s,next:r};try{if(e===null){var d=document.createDocumentFragment();d.append(e=St())}return _.e=B(()=>u(e,A,c,v),C),_.e.prev=s&&s.e,_.e.next=r&&r.e,s===null?p||(t.first=_):(s.next=_,s.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function _t(e,t,s){for(var r=e.next?e.next.e.nodes_start:s,i=t?t.e.nodes_start:s,n=e.e.nodes_start;n!==null&&n!==r;){var a=Ce(n);i.before(n),n=a}}function k(e,t,s){t===null?e.first=s:(t.next=s,t.e.next=s&&s.e),s!==null&&(s.prev=t,s.e.prev=t&&t.e)}function fs(e,t){var s=void 0,r;ot(()=>{s!==(s=t())&&(r&&(tt(r),r=null),s&&(r=B(()=>{se(()=>s(e))})))})}function ne(e){var t,s,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(s=ne(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function ls(){for(var e,t,s=0,r="",i=arguments.length;s<i;s++)(e=arguments[s])&&(t=ne(e))&&(r&&(r+=" "),r+=t);return r}function cs(e){return typeof e=="object"?ls(e):e??""}const Gt=[...` 	
\r\fÂ \v\uFEFF`];function ds(e,t,s){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),s){for(var i in s)if(s[i])r=r?r+" "+i:i;else if(r.length)for(var n=i.length,a=0;(a=r.indexOf(i,a))>=0;){var u=a+n;(a===0||Gt.includes(r[a-1]))&&(u===r.length||Gt.includes(r[u]))?r=(a===0?"":r.substring(0,a))+r.substring(u+1):a=u}}return r===""?null:r}function Ht(e,t=!1){var s=t?" !important;":";",r="";for(var i in e){var n=e[i];n!=null&&n!==""&&(r+=" "+i+": "+n+s)}return r}function pt(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function hs(e,t){if(t){var s="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var n=!1,a=0,u=!1,h=[];r&&h.push(...Object.keys(r).map(pt)),i&&h.push(...Object.keys(i).map(pt));var v=0,p=-1;const _=e.length;for(var y=0;y<_;y++){var g=e[y];if(u?g==="/"&&e[y-1]==="*"&&(u=!1):n?n===g&&(n=!1):g==="/"&&e[y+1]==="*"?u=!0:g==='"'||g==="'"?n=g:g==="("?a++:g===")"&&a--,!u&&n===!1&&a===0){if(g===":"&&p===-1)p=y;else if(g===";"||y===_-1){if(p!==-1){var A=pt(e.substring(v,p).trim());if(!h.includes(A)){g!==";"&&y++;var c=e.substring(v,y).trim();s+=" "+c+";"}}v=y+1,p=-1}}}}return r&&(s+=Ht(r)),i&&(s+=Ht(i,!0)),s=s.trim(),s===""?null:s}return e==null?null:String(e)}function gs(e,t,s,r,i,n){var a=e.__className;if(C||a!==s||a===void 0){var u=ds(s,r,n);(!C||u!==e.getAttribute("class"))&&(u==null?e.removeAttribute("class"):t?e.className=u:e.setAttribute("class",u)),e.__className=s}else if(n&&i!==n)for(var h in n){var v=!!n[h];(i==null||v!==!!i[h])&&e.classList.toggle(h,v)}return n}function bt(e,t={},s,r){for(var i in s){var n=s[i];t[i]!==n&&(s[i]==null?e.style.removeProperty(i):e.style.setProperty(i,n,r))}}function vs(e,t,s,r){var i=e.__style;if(C||i!==t){var n=hs(t,r);(!C||n!==e.getAttribute("style"))&&(n==null?e.removeAttribute("style"):e.style.cssText=n),e.__style=t}else r&&(Array.isArray(r)?(bt(e,s==null?void 0:s[0],r[0]),bt(e,s==null?void 0:s[1],r[1],"important")):bt(e,s,r));return r}function mt(e,t,s=!1){if(e.multiple){if(t==null)return;if(!zt(t))return De();for(var r of e.options)r.selected=t.includes(Ut(r));return}for(r of e.options){var i=Ut(r);if(Fe(i,t)){r.selected=!0;return}}(!s||t!==void 0)&&(e.selectedIndex=-1)}function _s(e){var t=new MutationObserver(()=>{mt(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ge(()=>{t.disconnect()})}function Ut(e){return"__value"in e?e.__value:e.value}const X=Symbol("class"),Z=Symbol("style"),oe=Symbol("is custom element"),ue=Symbol("is html");function ps(e){if(C){var t=!1,s=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;at(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var i=e.checked;at(e,"checked",null),e.checked=i}}};e.__on_r=s,te(s),Ke()}}function Vs(e,t){var s=At(e);s.value===(s.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function bs(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function at(e,t,s,r){var i=At(e);C&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=s)&&(t==="loading"&&(e[Ye]=s),s==null?e.removeAttribute(t):typeof s!="string"&&fe(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function ys(e,t,s,r,i=!1,n=!1){if(C&&i&&e.tagName==="INPUT"){var a=e,u=a.type==="checkbox"?"defaultChecked":"defaultValue";u in s||ps(a)}var h=At(e),v=h[oe],p=!h[ue];let y=C&&v;y&&z(!1);var g=t||{},A=e.tagName==="OPTION";for(var c in t)c in s||(s[c]=null);s.class?s.class=cs(s.class):(r||s[X])&&(s.class=null),s[Z]&&(s.style??(s.style=null));var _=fe(e);for(const o in s){let f=s[o];if(A&&o==="value"&&f==null){e.value=e.__value="",g[o]=f;continue}if(o==="class"){var d=e.namespaceURI==="http://www.w3.org/1999/xhtml";gs(e,d,f,r,t==null?void 0:t[X],s[X]),g[o]=f,g[X]=s[X];continue}if(o==="style"){vs(e,f,t==null?void 0:t[Z],s[Z]),g[o]=f,g[Z]=s[Z];continue}var T=g[o];if(!(f===T&&!(f===void 0&&e.hasAttribute(o)))){g[o]=f;var P=o[0]+o[1];if(P!=="$$")if(P==="on"){const l={},E="$$"+o;let I=o.slice(2);var m=We(I);if(Ze(I)&&(I=I.slice(0,-7),l.capture=!0),!m&&T){if(f!=null)continue;e.removeEventListener(I,g[E],l),g[E]=null}if(f!=null)if(m)e[`__${I}`]=f,Xe([I]);else{let H=function(L){g[o].call(this,L)};g[E]=Qe(I,e,H,l)}else m&&(e[`__${I}`]=void 0)}else if(o==="style")at(e,o,f);else if(o==="autofocus")je(e,!!f);else if(!v&&(o==="__value"||o==="value"&&f!=null))e.value=e.__value=f;else if(o==="selected"&&A)bs(e,f);else{var b=o;p||(b=ze(b));var w=b==="defaultValue"||b==="defaultChecked";if(f==null&&!v&&!w)if(h[o]=null,b==="value"||b==="checked"){let l=e;const E=t===void 0;if(b==="value"){let I=l.defaultValue;l.removeAttribute(b),l.defaultValue=I,l.value=l.__value=E?I:null}else{let I=l.defaultChecked;l.removeAttribute(b),l.defaultChecked=I,l.checked=E?I:!1}}else e.removeAttribute(o);else w||_.includes(b)&&(v||typeof f!="string")?(e[b]=f,b in h&&(h[b]=Qt)):typeof f!="function"&&at(e,b,f)}}}return y&&z(!0),g}function qs(e,t,s=[],r=[],i,n=!1,a=!1){qe(s,r,u=>{var h=void 0,v={},p=e.nodeName==="SELECT",y=!1;if(ot(()=>{var A=t(...u.map(x)),c=ys(e,h,A,i,n,a);y&&p&&"value"in A&&mt(e,A.value);for(let d of Object.getOwnPropertySymbols(v))A[d]||tt(v[d]);for(let d of Object.getOwnPropertySymbols(A)){var _=A[d];d.description===$e&&(!h||_!==h[d])&&(v[d]&&tt(v[d]),v[d]=B(()=>fs(e,()=>_))),c[d]=_}h=c}),p){var g=e;se(()=>{mt(g,h.value,!0),_s(g)})}y=!0})}function At(e){return e.__attributes??(e.__attributes={[oe]:e.nodeName.includes("-"),[ue]:e.namespaceURI===He})}var Vt=new Map;function fe(e){var t=e.getAttribute("is")||e.nodeName,s=Vt.get(t);if(s)return s;Vt.set(t,s=[]);for(var r,i=e,n=Element.prototype;n!==i;){r=Ve(i);for(var a in r)r[a].set&&s.push(a);i=Ue(i)}return s}const ms="data-no-translate",$s="paraglide:lang",js="paraglide_lang",le={},ws=()=>xe(le),Ks=e=>{Be(le,e)};function Ys(){const e=ws();function t(r,i){return typeof r!="string"||!e?r:e.translateHref(r,i)}function s(r,i){if(r[ms])return r;for(const{attribute_name:n,lang_attribute_name:a}of i)if(n in r){const u=r[n],h=a?r[a]:void 0;r[n]=t(u,typeof h=="string"?h:void 0)}return r}return[t,s]}const ce={setting_id:"00000000-0000-0000-0000-000000000000",grid_view_sample_rendering:"contain",key_hide_annotations:"v",key_go_back:"Escape",show_annotation_text_labels:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},G=lt(ce),$=lt(!1),K=lt(null),W=lt(!1),qt=re(G,e=>e.grid_view_sample_rendering||"contain"),$t=re(G,e=>e.show_annotation_text_labels??!0),jt=async()=>{if(G.set(ce),!(R(W)||R($))){$.set(!0),K.set(null);try{const{data:e}=await ts();e&&(G.set(e),W.set(!0))}catch(e){K.set(String(e))}finally{$.set(!1)}}},de=async e=>{$.set(!0),K.set(null);try{const t=R(G),s={setting_id:t.setting_id||"",grid_view_sample_rendering:e.grid_view_sample_rendering||t.grid_view_sample_rendering||"contain",key_hide_annotations:e.key_hide_annotations||t.key_hide_annotations||"v",key_go_back:e.key_go_back||t.key_go_back||"Escape",show_annotation_text_labels:e.show_annotation_text_labels!==void 0?e.show_annotation_text_labels:t.show_annotation_text_labels??!0,created_at:t.created_at||new Date().toISOString(),updated_at:new Date().toISOString()},r=await ie.POST("/api/settings",{body:s,headers:{"Content-Type":"application/json"}});if(r.error){const i=JSON.stringify(r.error);return console.error("Settings API error:",i),K.set(i),{success:!1,error:i}}return r.data?(G.set(r.data),{success:!0}):{success:!1,error:"No data returned from API"}}catch(t){const s=String(t);return console.error("Error saving settings:",s),K.set(s),{success:!1,error:s}}finally{$.set(!1)}},Ss=async e=>de({grid_view_sample_rendering:e}),As=async e=>{const t=!!e,r={...R(G),show_annotation_text_labels:t};try{const i=await ie.POST("/api/settings",{body:r,headers:{"Content-Type":"application/json"}});return i.error?(console.error("API error saving setting:",i.error),{success:!1,error:JSON.stringify(i.error)}):i.data?(G.set(i.data),{success:!0}):{success:!1,error:"No data returned from API"}}catch(i){return console.error("Error saving annotation text label setting:",i),{success:!1,error:String(i)}}};function Bs(){return!R(W)&&!R($)&&jt(),{settingsStore:G,isLoadingStore:$,errorStore:K,isLoadedStore:W,gridViewSampleRenderingStore:qt,showAnnotationTextLabelsStore:$t,initSettings:jt,saveSettings:de,updateGridViewSampleRendering:Ss,updateShowAnnotationTextLabels:As,get settings(){return R(G)},get isLoading(){return R($)},get error(){return R(K)},get isLoaded(){return R(W)},get getGridViewSampleRendering(){return R(qt)},get getShowAnnotationTextLabels(){return R($t)}}}var D,O,j,F,q,Yt,xs=(Yt=class extends es{constructor(t){super();U(this,F);U(this,D);U(this,O);U(this,j);this.mutationId=t.mutationId,Q(this,O,t.mutationCache),Q(this,D,[]),this.state=t.state||Ts(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){S(this,D).includes(t)||(S(this,D).push(t),this.clearGcTimeout(),S(this,O).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Q(this,D,S(this,D).filter(s=>s!==t)),this.scheduleGc(),S(this,O).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){S(this,D).length||(this.state.status==="pending"?this.scheduleGc():S(this,O).remove(this))}continue(){var t;return((t=S(this,j))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,n,a,u,h,v,p,y,g,A,c,_,d,T,P,m,b,w,o,f;Q(this,j,ss({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(l,E)=>{V(this,F,q).call(this,{type:"failed",failureCount:l,error:E})},onPause:()=>{V(this,F,q).call(this,{type:"pause"})},onContinue:()=>{V(this,F,q).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,O).canRun(this)}));const s=this.state.status==="pending",r=!S(this,j).canStart();try{if(!s){V(this,F,q).call(this,{type:"pending",variables:t,isPaused:r}),await((n=(i=S(this,O).config).onMutate)==null?void 0:n.call(i,t,this));const E=await((u=(a=this.options).onMutate)==null?void 0:u.call(a,t));E!==this.state.context&&V(this,F,q).call(this,{type:"pending",context:E,variables:t,isPaused:r})}const l=await S(this,j).start();return await((v=(h=S(this,O).config).onSuccess)==null?void 0:v.call(h,l,t,this.state.context,this)),await((y=(p=this.options).onSuccess)==null?void 0:y.call(p,l,t,this.state.context)),await((A=(g=S(this,O).config).onSettled)==null?void 0:A.call(g,l,null,this.state.variables,this.state.context,this)),await((_=(c=this.options).onSettled)==null?void 0:_.call(c,l,null,t,this.state.context)),V(this,F,q).call(this,{type:"success",data:l}),l}catch(l){try{throw await((T=(d=S(this,O).config).onError)==null?void 0:T.call(d,l,t,this.state.context,this)),await((m=(P=this.options).onError)==null?void 0:m.call(P,l,t,this.state.context)),await((w=(b=S(this,O).config).onSettled)==null?void 0:w.call(b,void 0,l,this.state.variables,this.state.context,this)),await((f=(o=this.options).onSettled)==null?void 0:f.call(o,void 0,l,t,this.state.context)),l}finally{V(this,F,q).call(this,{type:"error",error:l})}}finally{S(this,O).runNext(this)}}},D=new WeakMap,O=new WeakMap,j=new WeakMap,F=new WeakSet,q=function(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),rs.batch(()=>{S(this,D).forEach(r=>{r.onMutationUpdate(t)}),S(this,O).notify({mutation:this,type:"updated",action:t})})},Yt);function Ts(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}function Js(e){return{onFetch:(t,s)=>{var p,y,g,A,c;const r=t.options,i=(g=(y=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:y.fetchMore)==null?void 0:g.direction,n=((A=t.state.data)==null?void 0:A.pages)||[],a=((c=t.state.data)==null?void 0:c.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const v=async()=>{let _=!1;const d=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(t.signal.aborted?_=!0:t.signal.addEventListener("abort",()=>{_=!0}),t.signal)})},T=is(t.options,t.fetchOptions),P=async(m,b,w)=>{if(_)return Promise.reject();if(b==null&&m.pages.length)return Promise.resolve(m);const o={client:t.client,queryKey:t.queryKey,pageParam:b,direction:w?"backward":"forward",meta:t.options.meta};d(o);const f=await T(o),{maxPages:l}=t.options,E=w?as:ns;return{pages:E(m.pages,f,l),pageParams:E(m.pageParams,b,l)}};if(i&&n.length){const m=i==="backward",b=m?he:wt,w={pages:n,pageParams:a},o=b(r,w);u=await P(w,o,m)}else{const m=e??n.length;do{const b=h===0?a[0]??r.initialPageParam:wt(r,u);if(h>0&&b==null)break;u=await P(u,b),h++}while(h<m)}return u};t.options.persister?t.fetchFn=()=>{var _,d;return(d=(_=t.options).persister)==null?void 0:d.call(_,v,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=v}}}function wt(e,{pages:t,pageParams:s}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}function he(e,{pages:t,pageParams:s}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,s[0],s):void 0}function Qs(e,t){return t?wt(e,t)!=null:!1}function Xs(e,t){return!t||!e.getPreviousPageParam?!1:he(e,t)!=null}function Zs(...e){return e.filter(Boolean).join(" ")}const Ps=typeof document<"u";let Kt=0;var et,st,rt;class Es{constructor(){U(this,et,Rt(kt([])));U(this,st,Rt(kt([])));U(this,rt,t=>{const s=this.toasts.findIndex(r=>r.id===t);return s===-1?null:s});N(this,"addToast",t=>{Ps&&this.toasts.unshift(t)});N(this,"updateToast",({id:t,data:s,type:r,message:i})=>{const n=this.toasts.findIndex(u=>u.id===t),a=this.toasts[n];this.toasts[n]={...a,...s,id:t,title:i,type:r,updated:!0}});N(this,"create",t=>{var u;const{message:s,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||t.id&&((u=t.id)==null?void 0:u.length)>0?t.id:Kt++,n=t.dismissable===void 0?!0:t.dismissable,a=t.type===void 0?"default":t.type;return Ft(()=>{this.toasts.find(v=>v.id===i)?this.updateToast({id:i,data:t,type:a,message:s,dismissable:n}):this.addToast({...r,id:i,title:s,dismissable:n,type:a})}),i});N(this,"dismiss",t=>(Ft(()=>{if(t===void 0){this.toasts=this.toasts.map(r=>({...r,dismiss:!0}));return}const s=this.toasts.findIndex(r=>r.id===t);this.toasts[s]&&(this.toasts[s]={...this.toasts[s],dismiss:!0})}),t));N(this,"remove",t=>{if(t===void 0){this.toasts=[];return}const s=S(this,rt).call(this,t);if(s!==null)return this.toasts.splice(s,1),t});N(this,"message",(t,s)=>this.create({...s,type:"default",message:t}));N(this,"error",(t,s)=>this.create({...s,type:"error",message:t}));N(this,"success",(t,s)=>this.create({...s,type:"success",message:t}));N(this,"info",(t,s)=>this.create({...s,type:"info",message:t}));N(this,"warning",(t,s)=>this.create({...s,type:"warning",message:t}));N(this,"loading",(t,s)=>this.create({...s,type:"loading",message:t}));N(this,"promise",(t,s)=>{if(!s)return;let r;s.loading!==void 0&&(r=this.create({...s,promise:t,type:"loading",message:typeof s.loading=="string"?s.loading:s.loading()}));const i=t instanceof Promise?t:t();let n=r!==void 0;return i.then(a=>{if(typeof a=="object"&&a&&"ok"in a&&typeof a.ok=="boolean"&&!a.ok){n=!1;const u=Is(a);this.create({id:r,type:"error",message:u})}else if(s.success!==void 0){n=!1;const u=typeof s.success=="function"?s.success(a):s.success;this.create({id:r,type:"success",message:u})}}).catch(a=>{if(s.error!==void 0){n=!1;const u=typeof s.error=="function"?s.error(a):s.error;this.create({id:r,type:"error",message:u})}}).finally(()=>{var a;n&&(this.dismiss(r),r=void 0),(a=s.finally)==null||a.call(s)}),r});N(this,"custom",(t,s)=>{const r=(s==null?void 0:s.id)||Kt++;return this.create({component:t,id:r,...s}),r});N(this,"removeHeight",t=>{this.heights=this.heights.filter(s=>s.toastId!==t)});N(this,"setHeight",t=>{const s=S(this,rt).call(this,t.toastId);if(s===null){this.heights.push(t);return}this.heights[s]=t});N(this,"reset",()=>{this.toasts=[],this.heights=[]})}get toasts(){return x(S(this,et))}set toasts(t){Dt(S(this,et),t,!0)}get heights(){return x(S(this,st))}set heights(t){Dt(S(this,st),t,!0)}}et=new WeakMap,st=new WeakMap,rt=new WeakMap;function Is(e){return e&&typeof e=="object"&&"status"in e?`HTTP error! Status: ${e.status}`:`Error! ${e}`}const M=new Es;function Ns(e,t){return M.create({message:e,...t})}var nt;class zs{constructor(){U(this,nt,Je(()=>M.toasts.filter(t=>!t.dismiss)))}get toasts(){return x(S(this,nt))}}nt=new WeakMap;const Cs=Ns,Ws=Object.assign(Cs,{success:M.success,info:M.info,warning:M.warning,error:M.error,custom:M.custom,message:M.message,promise:M.promise,dismiss:M.dismiss,loading:M.loading,getActiveToasts:()=>M.toasts.filter(e=>!e.dismiss)});export{js as L,xs as M,zs as S,qs as a,gs as b,cs as c,vs as d,Us as e,Ks as f,Ys as g,$s as h,Hs as i,Js as j,Gs as k,M as l,Zs as m,Z as n,ls as o,Xs as p,Qs as q,Ts as r,at as s,Ws as t,Bs as u,ps as v,Vs as w};
