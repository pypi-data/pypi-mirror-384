import{F,I as N,P as B,n as M,al as W,G,V as Q}from"./Frwd2CjB.js";function se(r,t,...e){var s=r,n=M,i;F(()=>{n!==(n=t())&&(i&&(W(i),i=null),i=B(()=>n(s,...e)))},N),G&&(s=Q)}const J=/\{[^{}]+\}/g,V=()=>{var r,t;return typeof process=="object"&&Number.parseInt((t=(r=process==null?void 0:process.versions)==null?void 0:r.node)==null?void 0:t.substring(0,2))>=18&&process.versions.undici};function Y(){return Math.random().toString(36).slice(2,11)}function K(r){let{baseUrl:t="",Request:e=globalThis.Request,fetch:s=globalThis.fetch,querySerializer:n,bodySerializer:i,headers:f,requestInitExt:l=void 0,..._}={...r};l=V()?l:void 0,t=P(t);const y=[];async function h(a,o){const{baseUrl:m,fetch:z=s,Request:ne=e,headers:D,params:R={},parseAs:T="json",querySerializer:j,bodySerializer:I=i??Z,body:C,...$}=o||{};m&&(t=P(m));let U=typeof n=="function"?n:O(n);j&&(U=typeof j=="function"?j:O({...typeof n=="object"?n:{},...j}));const q=C===void 0?void 0:I(C),v=q===void 0||q instanceof FormData?{}:{"Content-Type":"application/json"},k={redirect:"follow",..._,...$,body:q,headers:re(v,f,D,R.header)};let g,E,b=new e(ee(a,{baseUrl:t,params:R,querySerializer:U}),k);for(const u in $)u in b||(b[u]=$[u]);if(y.length){g=Y(),E=Object.freeze({baseUrl:t,fetch:z,parseAs:T,querySerializer:U,bodySerializer:I});for(const u of y)if(u&&typeof u=="object"&&typeof u.onRequest=="function"){const d=await u.onRequest({request:b,schemaPath:a,params:R,options:E,id:g});if(d){if(!(d instanceof e))throw new Error("onRequest: must return new Request() when modifying the request");b=d}}}let c;try{c=await z(b,l)}catch(u){let d=u;if(y.length)for(let p=y.length-1;p>=0;p--){const S=y[p];if(S&&typeof S=="object"&&typeof S.onError=="function"){const w=await S.onError({request:b,error:d,schemaPath:a,params:R,options:E,id:g});if(w){if(w instanceof Response){d=void 0,c=w;break}if(w instanceof Error){d=w;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(d)throw d}if(y.length)for(let u=y.length-1;u>=0;u--){const d=y[u];if(d&&typeof d=="object"&&typeof d.onResponse=="function"){const p=await d.onResponse({request:b,response:c,schemaPath:a,params:R,options:E,id:g});if(p){if(!(p instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");c=p}}}if(c.status===204||c.headers.get("Content-Length")==="0")return c.ok?{data:void 0,response:c}:{error:void 0,response:c};if(c.ok)return T==="stream"?{data:c.body,response:c}:{data:await c[T](),response:c};let x=await c.text();try{x=JSON.parse(x)}catch{}return{error:x,response:c}}return{request(a,o,m){return h(o,{...m,method:a.toUpperCase()})},GET(a,o){return h(a,{...o,method:"GET"})},PUT(a,o){return h(a,{...o,method:"PUT"})},POST(a,o){return h(a,{...o,method:"POST"})},DELETE(a,o){return h(a,{...o,method:"DELETE"})},OPTIONS(a,o){return h(a,{...o,method:"OPTIONS"})},HEAD(a,o){return h(a,{...o,method:"HEAD"})},PATCH(a,o){return h(a,{...o,method:"PATCH"})},TRACE(a,o){return h(a,{...o,method:"TRACE"})},use(...a){for(const o of a)if(o){if(typeof o!="object"||!("onRequest"in o||"onResponse"in o||"onError"in o))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");y.push(o)}},eject(...a){for(const o of a){const m=y.indexOf(o);m!==-1&&y.splice(m,1)}}}}function A(r,t,e){if(t==null)return"";if(typeof t=="object")throw new Error("Deeply-nested arrays/objects arenâ€™t supported. Provide your own `querySerializer()` to handle these.");return`${r}=${(e==null?void 0:e.allowReserved)===!0?t:encodeURIComponent(t)}`}function L(r,t,e){if(!t||typeof t!="object")return"";const s=[],n={simple:",",label:".",matrix:";"}[e.style]||"&";if(e.style!=="deepObject"&&e.explode===!1){for(const l in t)s.push(l,e.allowReserved===!0?t[l]:encodeURIComponent(t[l]));const f=s.join(",");switch(e.style){case"form":return`${r}=${f}`;case"label":return`.${f}`;case"matrix":return`;${r}=${f}`;default:return f}}for(const f in t){const l=e.style==="deepObject"?`${r}[${f}]`:f;s.push(A(l,t[f],e))}const i=s.join(n);return e.style==="label"||e.style==="matrix"?`${n}${i}`:i}function H(r,t,e){if(!Array.isArray(t))return"";if(e.explode===!1){const i={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[e.style]||",",f=(e.allowReserved===!0?t:t.map(l=>encodeURIComponent(l))).join(i);switch(e.style){case"simple":return f;case"label":return`.${f}`;case"matrix":return`;${r}=${f}`;default:return`${r}=${f}`}}const s={simple:",",label:".",matrix:";"}[e.style]||"&",n=[];for(const i of t)e.style==="simple"||e.style==="label"?n.push(e.allowReserved===!0?i:encodeURIComponent(i)):n.push(A(r,i,e));return e.style==="label"||e.style==="matrix"?`${s}${n.join(s)}`:n.join(s)}function O(r){return function(e){const s=[];if(e&&typeof e=="object")for(const n in e){const i=e[n];if(i!=null){if(Array.isArray(i)){if(i.length===0)continue;s.push(H(n,i,{style:"form",explode:!0,...r==null?void 0:r.array,allowReserved:(r==null?void 0:r.allowReserved)||!1}));continue}if(typeof i=="object"){s.push(L(n,i,{style:"deepObject",explode:!0,...r==null?void 0:r.object,allowReserved:(r==null?void 0:r.allowReserved)||!1}));continue}s.push(A(n,i,r))}}return s.join("&")}}function X(r,t){let e=r;for(const s of r.match(J)??[]){let n=s.substring(1,s.length-1),i=!1,f="simple";if(n.endsWith("*")&&(i=!0,n=n.substring(0,n.length-1)),n.startsWith(".")?(f="label",n=n.substring(1)):n.startsWith(";")&&(f="matrix",n=n.substring(1)),!t||t[n]===void 0||t[n]===null)continue;const l=t[n];if(Array.isArray(l)){e=e.replace(s,H(n,l,{style:f,explode:i}));continue}if(typeof l=="object"){e=e.replace(s,L(n,l,{style:f,explode:i}));continue}if(f==="matrix"){e=e.replace(s,`;${A(n,l)}`);continue}e=e.replace(s,f==="label"?`.${encodeURIComponent(l)}`:encodeURIComponent(l))}return e}function Z(r){return r instanceof FormData?r:JSON.stringify(r)}function ee(r,t){var n;let e=`${t.baseUrl}${r}`;(n=t.params)!=null&&n.path&&(e=X(e,t.params.path));let s=t.querySerializer(t.params.query??{});return s.startsWith("?")&&(s=s.substring(1)),s&&(e+=`?${s}`),e}function re(...r){const t=new Headers;for(const e of r){if(!e||typeof e!="object")continue;const s=e instanceof Headers?e.entries():Object.entries(e);for(const[n,i]of s)if(i===null)t.delete(n);else if(Array.isArray(i))for(const f of i)t.append(n,f);else i!==void 0&&t.set(n,i)}return t}function P(r){return r.endsWith("/")?r.substring(0,r.length-1):r}const oe="/images",te="/",ae=K({baseUrl:te,fetch});export{oe as P,te as a,ae as c,se as s};
