import"./CWj6FrbW.js";import{p as R,f as J,n as H,a as N,c as q,r as X,g as f,b as mt,au as St,s as ut,t as Mt,u as xt,ak as it,Y as L,aa as Zt}from"./Frwd2CjB.js";import{c as $,a as B,f as nt,t as Dt}from"./CiaNZCBa.js";import{s as E,P as It}from"./DzX_yyqb.js";import{s as lt,r as K,p as tt,b as et}from"./Dafy4oEQ.js";import{I as ct,J as Et,e as ht,M as Rt,Q as bt,T as gt,R as vt,U as yt}from"./Cqo0Vpvt.js";import{a as rt,g as Nt,s as _t,d as Vt}from"./D_ynJAfY.js";import{i as kt}from"./-DXuGN29.js";import{f as At,u as Yt,g as Ct}from"./DD63uD-T.js";import{o as qt}from"./DQ8aZ1o-.js";import{s as j,p as ot,a as Xt,y as Ht}from"./DmjAI-UV.js";import{s as Kt}from"./H60ATh8g.js";function Ft(n,e){R(e,!0);/**
 * @license @lucide/svelte v0.482.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=K(e,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"m9 18 6-6-6-6"}]];ct(n,lt({name:"chevron-right"},()=>a,{get iconNode(){return c},children:(r,l)=>{var i=$(),_=J(i);E(_,()=>e.children??H),B(r,i)},$$slots:{default:!0}})),N()}function Se(n,e){R(e,!0);/**
 * @license @lucide/svelte v0.482.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=K(e,["$$slots","$$events","$$legacy"]);const c=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];ct(n,lt({name:"database"},()=>a,{get iconNode(){return c},children:(r,l)=>{var i=$(),_=J(i);E(_,()=>e.children??H),B(r,i)},$$slots:{default:!0}})),N()}function Ze(n,e){R(e,!0);/**
 * @license @lucide/svelte v0.482.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=K(e,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];ct(n,lt({name:"house"},()=>a,{get iconNode(){return c},children:(r,l)=>{var i=$(),_=J(i);E(_,()=>e.children??H),B(r,i)},$$slots:{default:!0}})),N()}function Gt(n,e){R(e,!0);/**
 * @license @lucide/svelte v0.482.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=K(e,["$$slots","$$events","$$legacy"]);const c=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];ct(n,lt({name:"zoom-in"},()=>a,{get iconNode(){return c},children:(r,l)=>{var i=$(),_=J(i);E(_,()=>e.children??H),B(r,i)},$$slots:{default:!0}})),N()}function Ot(n,e){R(e,!0);/**
 * @license @lucide/svelte v0.482.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let a=K(e,["$$slots","$$events","$$legacy"]);const c=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];ct(n,lt({name:"zoom-out"},()=>a,{get iconNode(){return c},children:(r,l)=>{var i=$(),_=J(i);E(_,()=>e.children??H),B(r,i)},$$slots:{default:!0}})),N()}function Qt(n){return new Et([document.querySelectorAll(n)],[document.documentElement])}var Ut=nt("<nav><!></nav>");function De(n,e){R(e,!0);let a=tt(e,"ref",15),c=K(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Ut();rt(r,()=>({class:e.class,"aria-label":"breadcrumb",...c}));var l=q(r);E(l,()=>e.children??H),X(r),et(r,i=>a(i),()=>a()),B(n,r),N()}var Wt=nt("<li><!></li>");function Ie(n,e){R(e,!0);let a=tt(e,"ref",15,null),c=K(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Wt();rt(r,i=>({class:i,...c}),[()=>ht("inline-flex items-center gap-1.5",e.class)]);var l=q(r);E(l,()=>e.children??H),X(r),et(r,i=>a(i),()=>a()),B(n,r),N()}var Lt=nt("<li><!></li>");function Ee(n,e){R(e,!0);let a=tt(e,"ref",15,null),c=K(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Lt();rt(r,d=>({role:"presentation","aria-hidden":"true",class:d,...c}),[()=>ht("[&>svg]:size-3.5",e.class)]);var l=q(r);{var i=d=>{var p=$(),M=J(p);E(M,()=>e.children??H),B(d,p)},_=d=>{Ft(d,{})};kt(l,d=>{e.children?d(i):d(_,!1)})}X(r),et(r,d=>a(d),()=>a()),B(n,r),N()}var jt=nt("<a><!></a>");function Re(n,e){R(e,!0);let a=tt(e,"ref",15,null),c=tt(e,"href",3,void 0),r=K(e,["$$slots","$$events","$$legacy","ref","class","href","child","children"]);const l=mt(()=>({class:ht("hover:text-foreground transition-colors",e.class),href:c(),...r})),i=Nt(),[_,d]=i;var p=$(),M=J(p);{var G=P=>{var w=$(),Z=J(w);E(Z,()=>e.child,()=>({props:f(l)})),B(P,w)},x=P=>{var w=jt();rt(w,S=>({...S}),[()=>d({...f(l)},[{attribute_name:"href",lang_attribute_name:"hreflang"}])]);var Z=q(w);E(Z,()=>e.children??H),X(w),et(w,S=>a(S),()=>a()),B(P,w)};kt(M,P=>{e.child?P(G):P(x,!1)})}B(n,p),N()}var Jt=nt("<ol><!></ol>");function Ne(n,e){R(e,!0);let a=tt(e,"ref",15,null),c=K(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Jt();rt(r,i=>({class:i,...c}),[()=>ht("text-muted-foreground flex flex-wrap items-center gap-1.5 break-words text-sm sm:gap-2.5",e.class)]);var l=q(r);E(l,()=>e.children??H),X(r),et(r,i=>a(i),()=>a()),B(n,r),N()}var $t=nt("<span><!></span>");function Ve(n,e){R(e,!0);let a=tt(e,"ref",15,null),c=K(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=$t();rt(r,i=>({role:"link","aria-disabled":"true","aria-current":"page",class:i,...c}),[()=>ht("text-foreground font-normal",e.class)]);var l=q(r);E(l,()=>e.children??H),X(r),et(r,i=>a(i),()=>a()),B(n,r),N()}const Ae=n=>`${It}/sample/${n}`,Ye=({sampleId:n,datasetId:e})=>{const a=At({path:{sample_id:n,dataset_id:e}}),c=Yt(),r=Ct(a);return{refetch:()=>{c.invalidateQueries({queryKey:a.queryKey})},sample:r}};var te=1e-12;function zt(n){return((n=Math.exp(n))+1/n)/2}function ee(n){return((n=Math.exp(n))-1/n)/2}function ne(n){return((n=Math.exp(2*n))-1)/(n+1)}const oe=function n(e,a,c){function r(l,i){var _=l[0],d=l[1],p=l[2],M=i[0],G=i[1],x=i[2],P=M-_,w=G-d,Z=P*P+w*w,S,h;if(Z<te)h=Math.log(x/p)/e,S=function(k){return[_+k*P,d+k*w,p*Math.exp(e*k*h)]};else{var D=Math.sqrt(Z),I=(x*x-p*p+c*Z)/(2*p*a*D),O=(x*x-p*p-c*Z)/(2*x*a*D),V=Math.log(Math.sqrt(I*I+1)-I),g=Math.log(Math.sqrt(O*O+1)-O);h=(g-V)/e,S=function(k){var A=k*h,W=zt(V),at=p/(a*D)*(W*ne(e*A+V)-ee(V));return[_+at*P,d+at*w,p*W/zt(e*A+V)]}}return S.duration=h*1e3*e/Math.SQRT2,S}return r.rho=function(l){var i=Math.max(.001,+l),_=i*i,d=_*_;return n(i,_,d)},r}(Math.SQRT2,2,4),ft=n=>()=>n;function ae(n,{sourceEvent:e,target:a,transform:c,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:c,enumerable:!0,configurable:!0},_:{value:r}})}function pt(n){n.stopImmediatePropagation()}function st(n){n.preventDefault(),n.stopImmediatePropagation()}function ie(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function re(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function wt(){return this.__zoom||bt}function se(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function ue(){return navigator.maxTouchPoints||"ontouchstart"in this}function le(n,e,a){var c=n.invertX(e[0][0])-a[0][0],r=n.invertX(e[1][0])-a[1][0],l=n.invertY(e[0][1])-a[0][1],i=n.invertY(e[1][1])-a[1][1];return n.translate(r>c?(c+r)/2:Math.min(0,c)||Math.max(0,r),i>l?(l+i)/2:Math.min(0,l)||Math.max(0,i))}function ce(){var n=ie,e=re,a=le,c=se,r=ue,l=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],_=250,d=oe,p=Rt("start","zoom","end"),M,G,x,P=500,w=150,Z=0,S=10;function h(t){t.property("__zoom",wt).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",W).on("dblclick.zoom",at).filter(r).on("touchstart.zoom",Tt).on("touchmove.zoom",Bt).on("touchend.zoom touchcancel.zoom",Pt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(t,s,o,u){var m=t.selection?t.selection():t;m.property("__zoom",wt),t!==m?V(t,s,o,u):m.interrupt().each(function(){g(this,arguments).event(u).start().zoom(null,typeof s=="function"?s.apply(this,arguments):s).end()})},h.scaleBy=function(t,s,o,u){h.scaleTo(t,function(){var m=this.__zoom.k,v=typeof s=="function"?s.apply(this,arguments):s;return m*v},o,u)},h.scaleTo=function(t,s,o,u){h.transform(t,function(){var m=e.apply(this,arguments),v=this.__zoom,y=o==null?O(m):typeof o=="function"?o.apply(this,arguments):o,b=v.invert(y),z=typeof s=="function"?s.apply(this,arguments):s;return a(I(D(v,z),y,b),m,i)},o,u)},h.translateBy=function(t,s,o,u){h.transform(t,function(){return a(this.__zoom.translate(typeof s=="function"?s.apply(this,arguments):s,typeof o=="function"?o.apply(this,arguments):o),e.apply(this,arguments),i)},null,u)},h.translateTo=function(t,s,o,u,m){h.transform(t,function(){var v=e.apply(this,arguments),y=this.__zoom,b=u==null?O(v):typeof u=="function"?u.apply(this,arguments):u;return a(bt.translate(b[0],b[1]).scale(y.k).translate(typeof s=="function"?-s.apply(this,arguments):-s,typeof o=="function"?-o.apply(this,arguments):-o),v,i)},u,m)};function D(t,s){return s=Math.max(l[0],Math.min(l[1],s)),s===t.k?t:new gt(s,t.x,t.y)}function I(t,s,o){var u=s[0]-o[0]*t.k,m=s[1]-o[1]*t.k;return u===t.x&&m===t.y?t:new gt(t.k,u,m)}function O(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function V(t,s,o,u){t.on("start.zoom",function(){g(this,arguments).event(u).start()}).on("interrupt.zoom end.zoom",function(){g(this,arguments).event(u).end()}).tween("zoom",function(){var m=this,v=arguments,y=g(m,v).event(u),b=e.apply(m,v),z=o==null?O(b):typeof o=="function"?o.apply(m,v):o,F=Math.max(b[1][0]-b[0][0],b[1][1]-b[0][1]),T=m.__zoom,Y=typeof s=="function"?s.apply(m,v):s,Q=d(T.invert(z).concat(F/T.k),Y.invert(z).concat(F/Y.k));return function(C){if(C===1)C=Y;else{var U=Q(C),dt=F/U[2];C=new gt(dt,z[0]-U[0]*dt,z[1]-U[1]*dt)}y.zoom(null,C)}})}function g(t,s,o){return!o&&t.__zooming||new k(t,s)}function k(t,s){this.that=t,this.args=s,this.active=0,this.sourceEvent=null,this.extent=e.apply(t,s),this.taps=0}k.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,s){return this.mouse&&t!=="mouse"&&(this.mouse[1]=s.invert(this.mouse[0])),this.touch0&&t!=="touch"&&(this.touch0[1]=s.invert(this.touch0[0])),this.touch1&&t!=="touch"&&(this.touch1[1]=s.invert(this.touch1[0])),this.that.__zoom=s,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var s=j(this.that).datum();p.call(t,this.that,new ae(t,{sourceEvent:this.sourceEvent,target:h,transform:this.that.__zoom,dispatch:p}),s)}};function A(t,...s){if(!n.apply(this,arguments))return;var o=g(this,s).event(t),u=this.__zoom,m=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,c.apply(this,arguments)))),v=ot(t);if(o.wheel)(o.mouse[0][0]!==v[0]||o.mouse[0][1]!==v[1])&&(o.mouse[1]=u.invert(o.mouse[0]=v)),clearTimeout(o.wheel);else{if(u.k===m)return;o.mouse=[v,u.invert(v)],vt(this),o.start()}st(t),o.wheel=setTimeout(y,w),o.zoom("mouse",a(I(D(u,m),o.mouse[0],o.mouse[1]),o.extent,i));function y(){o.wheel=null,o.end()}}function W(t,...s){if(x||!n.apply(this,arguments))return;var o=t.currentTarget,u=g(this,s,!0).event(t),m=j(t.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",F,!0),v=ot(t,o),y=t.clientX,b=t.clientY;Xt(t.view),pt(t),u.mouse=[v,this.__zoom.invert(v)],vt(this),u.start();function z(T){if(st(T),!u.moved){var Y=T.clientX-y,Q=T.clientY-b;u.moved=Y*Y+Q*Q>Z}u.event(T).zoom("mouse",a(I(u.that.__zoom,u.mouse[0]=ot(T,o),u.mouse[1]),u.extent,i))}function F(T){m.on("mousemove.zoom mouseup.zoom",null),Ht(T.view,u.moved),st(T),u.event(T).end()}}function at(t,...s){if(n.apply(this,arguments)){var o=this.__zoom,u=ot(t.changedTouches?t.changedTouches[0]:t,this),m=o.invert(u),v=o.k*(t.shiftKey?.5:2),y=a(I(D(o,v),u,m),e.apply(this,s),i);st(t),_>0?j(this).transition().duration(_).call(V,y,u,t):j(this).call(h.transform,y,u,t)}}function Tt(t,...s){if(n.apply(this,arguments)){var o=t.touches,u=o.length,m=g(this,s,t.changedTouches.length===u).event(t),v,y,b,z;for(pt(t),y=0;y<u;++y)b=o[y],z=ot(b,this),z=[z,this.__zoom.invert(z),b.identifier],m.touch0?!m.touch1&&m.touch0[2]!==z[2]&&(m.touch1=z,m.taps=0):(m.touch0=z,v=!0,m.taps=1+!!M);M&&(M=clearTimeout(M)),v&&(m.taps<2&&(G=z[0],M=setTimeout(function(){M=null},P)),vt(this),m.start())}}function Bt(t,...s){if(this.__zooming){var o=g(this,s).event(t),u=t.changedTouches,m=u.length,v,y,b,z;for(st(t),v=0;v<m;++v)y=u[v],b=ot(y,this),o.touch0&&o.touch0[2]===y.identifier?o.touch0[0]=b:o.touch1&&o.touch1[2]===y.identifier&&(o.touch1[0]=b);if(y=o.that.__zoom,o.touch1){var F=o.touch0[0],T=o.touch0[1],Y=o.touch1[0],Q=o.touch1[1],C=(C=Y[0]-F[0])*C+(C=Y[1]-F[1])*C,U=(U=Q[0]-T[0])*U+(U=Q[1]-T[1])*U;y=D(y,Math.sqrt(C/U)),b=[(F[0]+Y[0])/2,(F[1]+Y[1])/2],z=[(T[0]+Q[0])/2,(T[1]+Q[1])/2]}else if(o.touch0)b=o.touch0[0],z=o.touch0[1];else return;o.zoom("touch",a(I(y,b,z),o.extent,i))}}function Pt(t,...s){if(this.__zooming){var o=g(this,s).event(t),u=t.changedTouches,m=u.length,v,y;for(pt(t),x&&clearTimeout(x),x=setTimeout(function(){x=null},P),v=0;v<m;++v)y=u[v],o.touch0&&o.touch0[2]===y.identifier?delete o.touch0:o.touch1&&o.touch1[2]===y.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),o.taps===2&&(y=ot(y,this),Math.hypot(G[0]-y[0],G[1]-y[1])<S)){var b=j(this).on("dblclick.zoom");b&&b.apply(this,arguments)}}}return h.wheelDelta=function(t){return arguments.length?(c=typeof t=="function"?t:ft(+t),h):c},h.filter=function(t){return arguments.length?(n=typeof t=="function"?t:ft(!!t),h):n},h.touchable=function(t){return arguments.length?(r=typeof t=="function"?t:ft(!!t),h):r},h.extent=function(t){return arguments.length?(e=typeof t=="function"?t:ft([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),h):e},h.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],h):[l[0],l[1]]},h.translateExtent=function(t){return arguments.length?(i[0][0]=+t[0][0],i[1][0]=+t[1][0],i[0][1]=+t[0][1],i[1][1]=+t[1][1],h):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},h.constrain=function(t){return arguments.length?(a=t,h):a},h.duration=function(t){return arguments.length?(_=+t,h):_},h.interpolate=function(t){return arguments.length?(d=t,h):d},h.on=function(){var t=p.on.apply(p,arguments);return t===p?h:t},h.clickDistance=function(t){return arguments.length?(Z=(t=+t)*t,h):Math.sqrt(Z)},h.tapDistance=function(t){return arguments.length?(S=+t,h):S},h}function he(n,e){let a=n.scaleIndependentXForm;a||(a=n.scaleIndependentXForm=e.createSVGTransform(),n.transform.baseVal.appendItem(a));const c=n.parentNode;if(c){const r=c.getScreenCTM();if(r){const l=r.inverse().multiply(e.getScreenCTM());l.e=l.f=0,a.setMatrix(l)}}}var fe=nt('<div class="pointer-events-auto absolute bottom-0 left-1 z-20 flex select-none items-center gap-1 rounded-lg bg-muted bg-opacity-80 shadow-md backdrop-blur-sm"><!> <div class="h-6 w-px bg-white bg-opacity-20"></div> <!> <div class="w-[32px] text-center text-sm text-muted-foreground" data-testid="zoom-level"> </div> <!></div>');function me(n,e){var a=fe(),c=q(a);yt(c,{variant:"ghost","data-testid":"zoom-reset",size:"sm",get onclick(){return e.onZoomReset},get disabled(){return e.isResetDisabled},children:(d,p)=>{St();var M=Dt("Reset");B(d,M)},$$slots:{default:!0}});var r=ut(c,4);yt(r,{title:"zoom out",variant:"ghost",size:"icon","data-testid":"zoom-out",get onclick(){return e.onZoomOut},get disabled(){return e.isZoominDisabled},children:(d,p)=>{Ot(d,{class:"h-4 w-4"})},$$slots:{default:!0}});var l=ut(r,2),i=q(l);X(l);var _=ut(l,2);yt(_,{title:"zoom in",variant:"ghost",size:"icon","data-testid":"zoom-in",get onclick(){return e.onZoomIn},get disabled(){return e.isZoomoutDisabled},children:(d,p)=>{Gt(d,{class:"h-4 w-4"})},$$slots:{default:!0}}),X(a),Mt(d=>Kt(i,`${d??""}%`),[()=>Math.round(e.scale*100)]),B(n,a)}var de=nt('<div class="relative flex h-full w-full select-none items-center justify-center"><!> <svg class="z-10 h-full w-full" preserveAspectRatio="xMidYMid meet"><g><!></g></svg> <svg class="pointer-events-none absolute inset-0" preserveAspectRatio="xMidYMid meet"></svg></div>');function Ce(n,e){R(e,!0);let a=it(null),c=it(null);const r=tt(e,"cursor",3,"auto");let l=it(800),i=it(600);xt(()=>{if(!f(a))return;L(l,f(a).clientWidth,!0),L(i,f(a).clientHeight,!0);const g=new ResizeObserver(()=>{f(a)&&(L(l,f(a).clientWidth,!0),L(i,f(a).clientHeight,!0))});return g.observe(f(a)),()=>g.disconnect()});const _=10,d=mt(()=>{const g={x:0,y:0,width:e.width,height:e.height};if(e.boundingBox){Z();const{x:k,y:A,width:W,height:at}=e.boundingBox;return{x:Math.round(Math.max(0,k-_)),y:Math.round(Math.max(0,A-_)),width:Math.round(Math.min(e.width-k,W+_*2)),height:Math.round(Math.min(e.height-A,at+_*2))}}return g});let p=it(Zt({k:1,x:0,y:0}));const M=mt(()=>{if(!f(a))return 1;const g=f(l)/e.width,k=f(i)/e.height,A=Math.min(g,k);return f(p).k*A}),G=mt(()=>{if(!f(a))return 1;let g=f(M);if(e.boundingBox){const k=e.width/f(d).width,A=e.height/f(d).height,W=Math.min(k,A);g*=W}return g});let x=it(null);const P=()=>{f(a)&&(L(x,ce().on("zoom",g=>{L(p,g.transform,!0)}).filter(g=>(!g.ctrlKey||g.type==="wheel")&&!g.button&&!(g.type==="mousedown"&&g.button===2)).wheelDelta(g=>-g.deltaY*.002),!0),j(f(a)).call(f(x)).on("dblclick.zoom",null))},w=g=>{if(!f(a)||!f(x))return;const k=g?1.5:.75;j(f(a)).transition().duration(300).call(f(x).scaleBy,k)},Z=()=>{!f(a)||!f(x)||j(f(a)).transition().duration(300).call(f(x).transform,bt)};qt(()=>{P()}),xt(()=>{f(p).k,Qt(".unscaled").each(function(){he(this,f(c))})});var S=de(),h=q(S);me(h,{get scale(){return f(M)},onZoomIn:()=>w(!0),onZoomOut:()=>w(!1),onZoomReset:Z});var D=ut(h,2),I=q(D),O=q(I);E(O,()=>e.zoomableContent,()=>({scale:f(G)})),X(I),X(D),et(D,g=>L(a,g),()=>f(a));var V=ut(D,2);_t(V,"viewBox","0 0 1024 768"),et(V,g=>L(c,g),()=>f(c)),X(S),Mt(()=>{Vt(D,`cursor: ${r()};`),_t(D,"viewBox",`${f(d).x} ${f(d).y} ${f(d).width} ${f(d).height}`),_t(I,"transform",`translate(${f(p).x}, ${f(p).y}) scale(${f(p).k})`)}),B(n,S),N()}export{De as B,Se as D,Ze as H,Ce as Z,Ne as a,Ie as b,Re as c,Ee as d,Ve as e,Ae as g,Ye as u};
