[tox]
min_version = 4.0
env_list = 
    py{310,311,312}
    type
    lint
    security

[testenv]
description = Run tests with pytest
package = wheel
wheel_build_env = .pkg
deps = 
    pytest>=7.0.0
    pytest-cov>=4.0.0
    pytest-mock>=3.10.0
commands = 
    pytest tests/ -v --cov=masster --cov-report=term-missing

[testenv:type]
description = Run type checking with mypy
deps = 
    mypy>=1.0.0
commands = 
    mypy src/masster --ignore-missing-imports

[testenv:lint]
description = Run linting checks
deps = 
    flake8>=6.0.0
    black>=23.0.0
commands = 
    flake8 src/masster tests
    black --check src/masster tests

[testenv:security]
description = Run security checks
deps = 
    safety>=2.0.0
    bandit>=1.7.0
commands = 
    safety check
    bandit -r src/masster

[testenv:docs]
description = Build documentation
deps = 
    sphinx>=5.0.0
    sphinx-rtd-theme>=1.2.0
    sphinxcontrib-napoleon>=0.7
commands = 
    sphinx-build -W -b html docs docs/_build/html

[testenv:build]
description = Build package
deps = 
    build>=0.10.0
    twine>=4.0.0
commands = 
    python -m build
    twine check dist/*
