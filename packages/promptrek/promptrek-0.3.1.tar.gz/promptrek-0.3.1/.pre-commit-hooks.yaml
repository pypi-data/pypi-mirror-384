# Pre-commit hooks for PrompTrek
# Users can reference this repository in their .pre-commit-config.yaml
#
# Example usage:
#   repos:
#     - repo: https://github.com/flamingquaks/promptrek
#       rev: v0.0.1
#       hooks:
#         - id: promptrek-validate
#         - id: promptrek-prevent-generated

- id: promptrek-validate
  name: Validate PrompTrek files
  description: Validates .promptrek.yaml files for syntax and schema errors
  entry: promptrek validate
  language: python
  files: \.promptrek\.ya?ml$
  pass_filenames: true
  stages: [pre-commit]

- id: promptrek-prevent-generated
  name: Prevent committing generated files
  description: Blocks commits of AI editor files generated by promptrek
  entry: promptrek check-generated
  language: python
  files: |
    (?x)(
      # GitHub Copilot files
      ^\.github/(copilot-instructions\.md|instructions/.*\.instructions\.md|prompts/.*\.prompt\.md)$|
      # Cursor files
      ^(\.cursorrules|\.cursor/.*|\.cursorignore|\.cursorindexingignore|AGENTS\.md)$|
      # Continue files
      ^(config\.yaml|\.continue/.*)$|
      # Claude files
      ^(\.claude/.*|CLAUDE\.md)$|
      # Cline files
      ^\.cline-rules/.*$|
      # Kiro files
      ^\.kiro/.*$|
      # Tabnine files
      ^\.tabnine/.*$|
      # Amazon Q files
      ^\.amazonq/.*$|
      # JetBrains files
      ^(\.idea/ai-assistant\.xml|\.jetbrains/.*)$|
      # Other AI editor files
      ^\.ai-prompts/.*
    )
  stages: [pre-commit]
  always_run: false
  pass_filenames: true

- id: promptrek-check-local-vars
  name: Prevent committing local variables
  description: Blocks commits of variables.promptrek.yaml containing user-specific variables
  entry: promptrek check-generated
  language: python
  files: variables\.promptrek\.ya?ml$
  stages: [pre-commit]
  always_run: false
  pass_filenames: true
