commondata: &commondata
  container: ubuntu-20.04
  envsetup: poky/oe-init-build-env
  distro: poky
  target: core-image-minimal
  local_conf: [
  ]
  environment: {
  }
commonsources:
      - &poky {url: http://git.yoctoproject.org/git/poky, branch: kirkstone}
      - &mclang {url: https://github.com/kraj/meta-clang, branch: kirkstone}
      - &moe {url: https://github.com/openembedded/meta-openembedded,branch: kirkstone}
commonbblayers_conf:
  - &bbl_clang BBLAYERS += '../meta-clang/'
  - &bbl_oe BBLAYERS += '../meta-openembedded/meta-oe/'
  - &bbl_python BBLAYERS += '../meta-openembedded/meta-python/'
  - &bbl_networking BBLAYERS += '../meta-openembedded/meta-networking/'
specificsources:
      - &marm {url: https://git.yoctoproject.org/meta-arm, branch: kirkstone}
      - &mintel {url: https://git.yoctoproject.org/meta-intel, branch: kirkstone}
      - &mqcom {url: https://git.yoctoproject.org/meta-qcom, branch: master}
      - &mti {url: https://git.yoctoproject.org/meta-ti, branch: kirkstone}
specificbblayers_conf:
  - &bbl_arm BBLAYERS += '../meta-arm/meta-arm/'
  - &bbl_arm_bsp BBLAYERS += '../meta-arm/meta-arm-bsp/'
  - &bbl_arm_tc BBLAYERS += '../meta-arm/meta-arm-toolchain/'
  - &bbl_intel BBLAYERS += '../meta-intel/'
  - &bbl_qcom BBLAYERS += '../meta-qcom/'
  - &bbl_ti BBLAYERS += '../meta-ti/meta-ti-bsp'
specificsources:
version: 1
name: Poky test builds
description: Build Poky for various HWs
jobs:
- name: build-kirkstone
  bakes:
    - <<: *commondata
      machine: am57xx-evm
      sources:
         git_trees: [ *poky, *mclang, *moe, *marm, *mti ]
      bblayers_conf: [ *bbl_clang, *bbl_oe, *bbl_python, *bbl_networking, *bbl_ti, *bbl_arm, *bbl_arm_tc ]

    - <<: *commondata
      machine: dragonboard-410c
      sources:
         git_trees: [ *poky, *mclang, *moe, *mqcom ]
      bblayers_conf: [ *bbl_clang, *bbl_oe, *bbl_python, *bbl_networking, *bbl_qcom ]

    - <<: *commondata
      machine: dragonboard-845c
      sources:
         git_trees: [ *poky, *mclang, *moe, *mqcom ]
      bblayers_conf: [ *bbl_clang, *bbl_oe, *bbl_python, *bbl_networking, *bbl_qcom ]

    - <<: *commondata
      machine: intel-core2-32
      sources:
         git_trees: [ *poky, *mclang, *moe, *mintel ]
      bblayers_conf: [ *bbl_clang, *bbl_oe, *bbl_python, *bbl_networking, *bbl_intel ]

    - <<: *commondata
      machine: intel-corei7-64
      sources:
         git_trees: [ *poky, *mclang, *moe, *mintel ]
      bblayers_conf: [ *bbl_clang, *bbl_oe, *bbl_python, *bbl_networking, *bbl_intel ]

    - <<: *commondata
      machine: juno
      sources:
         git_trees: [ *poky, *mclang, *moe, *marm ]
      bblayers_conf: [ *bbl_clang, *bbl_oe, *bbl_python, *bbl_networking, *bbl_arm, *bbl_arm_bsp, *bbl_arm_tc ]

    - <<: *commondata
      machine: qemuarm64
      sources:
         git_trees: [ *poky, *mclang, *moe ]
      bblayers_conf: [ *bbl_clang, *bbl_oe, *bbl_python, *bbl_networking ]

    - <<: *commondata
      machine: qemuarm
      sources:
         git_trees: [ *poky, *mclang, *moe ]
      bblayers_conf: [ *bbl_clang, *bbl_oe, *bbl_python, *bbl_networking ]

    - <<: *commondata
      machine: qemuarmv5
      sources:
         git_trees: [ *poky, *mclang, *moe ]
      bblayers_conf: [ *bbl_clang, *bbl_oe, *bbl_python, *bbl_networking ]

    - <<: *commondata
      machine: qemux86-64
      sources:
         git_trees: [ *poky, *mclang, *moe ]
      bblayers_conf: [ *bbl_clang, *bbl_oe, *bbl_python, *bbl_networking ]

    - <<: *commondata
      machine: qemux86
      sources:
         git_trees: [ *poky, *mclang, *moe ]
      bblayers_conf: [ *bbl_clang, *bbl_oe, *bbl_python, *bbl_networking ]

