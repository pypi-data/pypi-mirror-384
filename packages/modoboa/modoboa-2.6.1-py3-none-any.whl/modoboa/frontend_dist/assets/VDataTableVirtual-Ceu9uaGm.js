import{c as ge,a as be,b as fe,u as ye,p as pe,d as Ve,e as Te,f as xe,g as Ie,h as De,i as we,j as S,k as R,m as Se,l as Re,n as Pe}from"./VDataTable-CVJjOdhF.js";import{u as ke,m as Be,a as Fe}from"./VSelect-CzmrBwOO.js";import{I as Ge,J as He,R as Ee,a7 as s,i as g,a6 as P,T as Ne,a as d,v as b,P as Oe,e as o,a2 as f}from"./index-D9OmnhdE.js";import{u as Ue,m as _e}from"./filter-CfvL3jIf.js";import{V as k}from"./VTable-C08Q6ok2.js";import{u as je}from"./tag-jImTUiWx.js";const ze=He({...Oe(Re(),["hideDefaultFooter"]),...Se(),...Be(),..._e()},"VDataTableVirtual"),Le=Ge()({name:"VDataTableVirtual",props:ze(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,B){let{attrs:F,slots:a}=B;const{groupBy:u}=ge(e),{sortBy:i,multiSort:G,mustSort:H}=be(e),{disableSort:E}=Ee(e),{columns:c,headers:N,filterFunctions:O,sortFunctions:U,sortRawFunctions:_}=fe(e,{groupBy:u,showSelect:s(()=>e.showSelect),showExpand:s(()=>e.showExpand)}),{items:j}=ye(e,c),y=s(()=>e.search),{filteredItems:z}=Ue(e,j,y,{transform:t=>t.columns,customKeyFilter:O}),{toggleSort:A}=pe({sortBy:i,multiSort:G,mustSort:H}),{sortByWithGroups:C,opened:J,extractRows:K,isGroupOpen:W,toggleGroup:q}=Ve({groupBy:u,sortBy:i,disableSort:E}),{sortedItems:L}=Te(e,z,C,{transform:t=>({...t.raw,...t.columns}),sortFunctions:U,sortRawFunctions:_}),{flatItems:v}=xe(L,u,J),m=g(()=>K(v.value)),{isSelected:M,select:Q,selectAll:X,toggleSelect:Y,someSelected:Z,allSelected:$}=Ie(e,{allItems:m,currentPage:m}),{isExpanded:ee,toggleExpand:ae}=De(e),{containerRef:te,markerRef:le,paddingTop:re,paddingBottom:oe,computedItems:se,handleItemResize:ne,handleScroll:de,handleScrollend:ue,calculateVisibleItems:ie,scrollToIndex:ce}=ke(e,v),me=g(()=>se.value.map(t=>t.raw));we({sortBy:i,page:P(1),itemsPerPage:P(-1),groupBy:u,search:y}),Ne({VDataTableRows:{hideNoData:s(()=>e.hideNoData),noDataText:s(()=>e.noDataText),loading:s(()=>e.loading),loadingText:s(()=>e.loadingText)}});const l=g(()=>({sortBy:i.value,toggleSort:A,someSelected:Z.value,allSelected:$.value,isSelected:M,select:Q,selectAll:X,toggleSelect:Y,isExpanded:ee,toggleExpand:ae,isGroupOpen:W,toggleGroup:q,items:m.value.map(t=>t.raw),internalItems:m.value,groupedItems:v.value,columns:c.value,headers:N.value}));return je(()=>{const t=S.filterProps(e),ve=R.filterProps(e),he=k.filterProps(e);return d(k,b({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},he,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var r;return(r=a.top)==null?void 0:r.call(a,l.value)},wrapper:()=>{var r,p,V,T,x,I;return o("div",{ref:te,onScrollPassive:de,onScrollend:ue,class:"v-table__wrapper",style:{height:f(e.height)}},[o("table",null,[(r=a.colgroup)==null?void 0:r.call(a,l.value),!e.hideDefaultHeader&&o("thead",{key:"thead"},[d(S,t,a)]),(p=a.thead)==null?void 0:p.call(a,l.value),!e.hideDefaultBody&&o("tbody",{key:"tbody"},[o("tr",{ref:le,style:{height:f(re.value),border:0}},[o("td",{colspan:c.value.length,style:{height:0,border:0}},null)]),(V=a["body.prepend"])==null?void 0:V.call(a,l.value),d(R,b(F,ve,{items:me.value}),{...a,item:n=>d(Fe,{key:n.internalItem.index,renderless:!0,"onUpdate:height":h=>ne(n.internalItem.index,h)},{default:h=>{var w;let{itemRef:D}=h;return((w=a.item)==null?void 0:w.call(a,{...n,itemRef:D}))??d(Pe,b(n.props,{ref:D,key:n.internalItem.index,index:n.internalItem.index}),a)}})}),(T=a["body.append"])==null?void 0:T.call(a,l.value),o("tr",{style:{height:f(oe.value),border:0}},[o("td",{colspan:c.value.length,style:{height:0,border:0}},null)])]),(x=a.tbody)==null?void 0:x.call(a,l.value),(I=a.tfoot)==null?void 0:I.call(a,l.value)])])},bottom:()=>{var r;return(r=a.bottom)==null?void 0:r.call(a,l.value)}})}),{calculateVisibleItems:ie,scrollToIndex:ce}}});export{Le as V};
