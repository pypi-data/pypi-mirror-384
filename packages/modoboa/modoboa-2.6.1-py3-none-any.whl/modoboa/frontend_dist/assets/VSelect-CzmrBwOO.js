import{V as fe,b as Ce}from"./VTextField-BBIziqiv.js";import{I as ie,J as G,z as $,e as x,F as Y,v as U,Q as xe,a6 as q,aa as ve,h as W,i as E,bC as Re,ba as Ve,az as ue,S as Ae,a0 as we,an as be,aR as De,a7 as Se,b9 as Fe,d as Be,a as C,a2 as ne,a1 as _e,y as Oe,K as Ee,O as me,a5 as Le,aq as se,P as Me,ao as pe,ap as he,M as ze,bD as He,as as qe,k as Ke}from"./index-D9OmnhdE.js";import{a as Ne}from"./VInput-ssnfbpwr.js";import{d as Ue,f as $e,p as je,V as We,a as ge}from"./forwardRefs-GE5Osi9V.js";import{q as Je,c as ye,b as Qe,e as Xe}from"./VAvatar-Wz1UmZ2b.js";import{g as Ye,d as Ge,V as Ze}from"./VMenu-BPG7b7dT.js";import{d as ke,u as ce,b as Pe,a as et,m as tt}from"./tag-jImTUiWx.js";import{V as lt}from"./VCheckboxBtn-BMf4a9DP.js";import{V as nt}from"./VChip-B1E7xQW1.js";const at=G({renderless:Boolean,...Pe()},"VVirtualScrollItem"),ot=ie()({name:"VVirtualScrollItem",inheritAttrs:!1,props:at(),emits:{"update:height":t=>!0},setup(t,c){let{attrs:n,emit:d,slots:o}=c;const{resizeRef:f,contentRect:v}=ke(void 0,"border");$(()=>{var a;return(a=v.value)==null?void 0:a.height},a=>{a!=null&&d("update:height",a)}),ce(()=>{var a,i;return t.renderless?x(Y,null,[(a=o.default)==null?void 0:a.call(o,{itemRef:f})]):x("div",U({ref:f,class:["v-virtual-scroll__item",t.class],style:t.style},n),[(i=o.default)==null?void 0:i.call(o)])})}}),ut=-1,st=1,re=100,rt=G({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function it(t,c){const n=xe(),d=q(0);ve(()=>{d.value=parseFloat(t.itemHeight||0)});const o=q(0),f=q(Math.ceil((parseInt(t.height)||n.height.value)/(d.value||16))||1),v=q(0),a=q(0),i=W(),b=W();let s=0;const{resizeRef:L,contentRect:R}=ke();ve(()=>{L.value=i.value});const S=E(()=>{var e;return i.value===document.documentElement?n.height.value:((e=R.value)==null?void 0:e.height)||parseInt(t.height)||0}),A=E(()=>!!(i.value&&b.value&&S.value&&d.value));let m=Array.from({length:c.value.length}),g=Array.from({length:c.value.length});const k=q(0);let y=-1;function M(e){return m[e]||d.value}const z=Re(()=>{const e=performance.now();g[0]=0;const l=c.value.length;for(let r=1;r<=l-1;r++)g[r]=(g[r-1]||0)+M(r-1);k.value=Math.max(k.value,performance.now()-e)},k),p=$(A,e=>{e&&(p(),s=b.value.offsetTop,z.immediate(),O(),~y&&we(()=>{be&&window.requestAnimationFrame(()=>{le(y),y=-1})}))});Ve(()=>{z.clear()});function Z(e,l){const r=m[e],V=d.value;d.value=V?Math.min(d.value,l):l,(r!==l||V!==d.value)&&(m[e]=l,z())}function F(e){return e=ue(e,0,c.value.length-1),g[e]||0}function _(e){return ct(g,e)}let j=0,K=0,J=0;$(S,(e,l)=>{l&&(O(),e<l&&requestAnimationFrame(()=>{K=0,O()}))});let Q=-1;function ee(){if(!i.value||!b.value)return;const e=i.value.scrollTop,l=performance.now();l-J>500?(K=Math.sign(e-j),s=b.value.offsetTop):K=e-j,j=e,J=l,window.clearTimeout(Q),Q=window.setTimeout(N,500),O()}function N(){!i.value||!b.value||(K=0,J=0,window.clearTimeout(Q),O())}let te=-1;function O(){cancelAnimationFrame(te),te=requestAnimationFrame(ae)}function ae(){if(!i.value||!S.value)return;const e=j-s,l=Math.sign(K),r=Math.max(0,e-re),V=ue(_(r),0,c.value.length),B=e+S.value+re,u=ue(_(B)+1,V+1,c.value.length);if((l!==ut||V<o.value)&&(l!==st||u>f.value)){const T=F(o.value)-F(V),I=F(u)-F(f.value);Math.max(T,I)>re?(o.value=V,f.value=u):(V<=0&&(o.value=V),u>=c.value.length&&(f.value=u))}v.value=F(o.value),a.value=F(c.value.length)-F(f.value)}function le(e){const l=F(e);!i.value||e&&!l?y=e:i.value.scrollTop=l}const oe=E(()=>c.value.slice(o.value,f.value).map((e,l)=>{const r=l+o.value;return{raw:e,index:r,key:Ae(e,t.itemKey,r)}}));return $(c,()=>{m=Array.from({length:c.value.length}),g=Array.from({length:c.value.length}),z.immediate(),O()},{deep:1}),{calculateVisibleItems:O,containerRef:i,markerRef:b,computedItems:oe,paddingTop:v,paddingBottom:a,scrollToIndex:le,handleScroll:ee,handleScrollend:N,handleItemResize:Z}}function ct(t,c){let n=t.length-1,d=0,o=0,f=null,v=-1;if(t[n]<c)return n;for(;d<=n;)if(o=d+n>>1,f=t[o],f>c)n=o-1;else if(f<c)v=o,d=o+1;else return f===c?o:d;return v}const dt=G({items:{type:Array,default:()=>[]},renderless:Boolean,...rt(),...Pe(),...tt()},"VVirtualScroll"),ft=ie()({name:"VVirtualScroll",props:dt(),setup(t,c){let{slots:n}=c;const d=De("VVirtualScroll"),{dimensionStyles:o}=et(t),{calculateVisibleItems:f,containerRef:v,markerRef:a,handleScroll:i,handleScrollend:b,handleItemResize:s,scrollToIndex:L,paddingTop:R,paddingBottom:S,computedItems:A}=it(t,Se(()=>t.items));return Fe(()=>t.renderless,()=>{function m(){var y,M;const k=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[k]("scroll",i,{passive:!0}),document[k]("scrollend",b)):((y=v.value)==null||y[k]("scroll",i,{passive:!0}),(M=v.value)==null||M[k]("scrollend",b))}Be(()=>{v.value=Ye(d.vnode.el,!0),m(!0)}),Ve(m)}),ce(()=>{const m=A.value.map(g=>C(ot,{key:g.key,renderless:t.renderless,"onUpdate:height":k=>s(g.index,k)},{default:k=>{var y;return(y=n.default)==null?void 0:y.call(n,{item:g.raw,index:g.index,...k})}}));return t.renderless?x(Y,null,[x("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:ne(R.value)}},null),m,x("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ne(S.value)}},null)]):x("div",{ref:v,class:Oe(["v-virtual-scroll",t.class]),onScrollPassive:i,onScrollend:b,style:_e([o.value,t.style])},[x("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:ne(R.value),paddingBottom:ne(S.value)}},[m])])}),{calculateVisibleItems:f,scrollToIndex:L}}});function vt(t,c){const n=q(!1);let d;function o(a){cancelAnimationFrame(d),n.value=!0,d=requestAnimationFrame(()=>{d=requestAnimationFrame(()=>{n.value=!1})})}async function f(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(n.value){const i=$(n,()=>{i(),a()})}else a()})}async function v(a){var s,L;if(a.key==="Tab"&&((s=c.value)==null||s.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const i=(L=t.value)==null?void 0:L.$el;if(!i)return;(a.key==="Home"||a.key==="End")&&i.scrollTo({top:a.key==="Home"?0:i.scrollHeight,behavior:"smooth"}),await f();const b=i.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const R=i.getBoundingClientRect().top;for(const S of b)if(S.getBoundingClientRect().top>=R){S.focus();break}}else{const R=i.getBoundingClientRect().bottom;for(const S of[...b].reverse())if(S.getBoundingClientRect().bottom<=R){S.focus();break}}}return{onScrollPassive:o,onKeydown:v}}const mt=G({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ze,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...je({itemChildren:!1})},"Select"),pt=G({...mt(),...Me(Ce({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Je({transition:{component:Ge}})},"VSelect"),Tt=ie()({name:"VSelect",props:pt(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,c){let{slots:n}=c;const{t:d}=Ee(),o=W(),f=W(),v=W(),{items:a,transformIn:i,transformOut:b}=Ue(t),s=me(t,"modelValue",[],e=>i(e===null?[null]:Le(e)),e=>{const l=b(e);return t.multiple?l:l[0]??null}),L=E(()=>typeof t.counterValue=="function"?t.counterValue(s.value):typeof t.counterValue=="number"?t.counterValue:s.value.length),R=Ne(t),S=E(()=>s.value.map(e=>e.value)),A=q(!1);let m="",g=-1,k;const y=E(()=>t.hideSelected?a.value.filter(e=>!s.value.some(l=>(t.valueComparator||se)(l,e))):a.value),M=E(()=>t.hideNoData&&!y.value.length||R.isReadonly.value||R.isDisabled.value),z=me(t,"menu"),p=E({get:()=>z.value,set:e=>{var l;z.value&&!e&&((l=f.value)!=null&&l.Î¨openChildren.size)||e&&M.value||(z.value=e)}}),Z=Se(()=>p.value?t.closeText:t.openText),F=E(()=>{var e;return{...t.menuProps,activatorProps:{...((e=t.menuProps)==null?void 0:e.activatorProps)||{},"aria-haspopup":"listbox"}}}),_=W(),j=vt(_,o);function K(e){t.openOnClear&&(p.value=!0)}function J(){M.value||(p.value=!p.value)}function Q(e){pe(e)&&ee(e)}function ee(e){var P,H,w;if(!e.key||R.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(e.key)&&e.preventDefault(),["Enter","ArrowDown"," "].includes(e.key)&&(p.value=!0),["Escape","Tab"].includes(e.key)&&(p.value=!1),e.key==="Home"?(P=_.value)==null||P.focus("first"):e.key==="End"&&((H=_.value)==null||H.focus("last"));const l=1e3;if(!pe(e))return;const r=performance.now();r-k>l&&(m="",g=-1),m+=e.key.toLowerCase(),k=r;const V=y.value;function B(){let h=u();return h||m.at(-1)===m.at(-2)&&(m=m.slice(0,-1),h=u(),h)||(g=-1,h=u(),h)?h:(m=e.key.toLowerCase(),u())}function u(){for(let h=g+1;h<V.length;h++){const X=V[h];if(X.title.toLowerCase().startsWith(m))return[X,h]}}const T=B();if(!T)return;const[I,D]=T;g=D,(w=_.value)==null||w.focus(D),t.multiple||(s.value=[I])}function N(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e.props.disabled)if(t.multiple){const r=s.value.findIndex(B=>(t.valueComparator||se)(B.value,e.value)),V=l??!~r;if(~r){const B=V?[...s.value,e]:[...s.value];B.splice(r,1),s.value=B}else V&&(s.value=[...s.value,e])}else{const r=l!==!1;s.value=r?[e]:[],we(()=>{p.value=!1})}}function te(e){var l;(l=_.value)!=null&&l.$el.contains(e.relatedTarget)||(p.value=!1)}function O(){var e;t.eager&&((e=v.value)==null||e.calculateVisibleItems())}function ae(){var e;A.value&&((e=o.value)==null||e.focus())}function le(e){A.value=!0}function oe(e){if(e==null)s.value=[];else if(he(o.value,":autofill")||he(o.value,":-webkit-autofill")){const l=a.value.find(r=>r.title===e);l&&N(l)}else o.value&&(o.value.value="")}return $(p,()=>{if(!t.hideSelected&&p.value&&s.value.length){const e=y.value.findIndex(l=>s.value.some(r=>(t.valueComparator||se)(r.value,l.value)));be&&window.requestAnimationFrame(()=>{var l;e>=0&&((l=v.value)==null||l.scrollToIndex(e))})}}),$(()=>t.items,(e,l)=>{p.value||A.value&&!l.length&&e.length&&(p.value=!0)}),ce(()=>{const e=!!(t.chips||n.chip),l=!!(!t.hideNoData||y.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),r=s.value.length>0,V=fe.filterProps(t),B=r||!A.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return C(fe,U({ref:o},V,{modelValue:s.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":oe,focused:A.value,"onUpdate:focused":u=>A.value=u,validationValue:s.externalValue,counterValue:L.value,dirty:r,class:["v-select",{"v-select--active-menu":p.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length,"v-select--selection-slot":!!n.selection},t.class],style:t.style,inputmode:"none",placeholder:B,"onClick:clear":K,"onMousedown:control":J,onBlur:te,onKeydown:ee,"aria-label":d(Z.value),title:d(Z.value)}),{...n,default:()=>x(Y,null,[C(Ze,U({ref:f,modelValue:p.value,"onUpdate:modelValue":u=>p.value=u,activator:"parent",contentClass:"v-select__content",disabled:M.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:O,onAfterLeave:ae},F.value),{default:()=>[l&&C(We,U({ref:_,selected:S.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:Q,onFocusin:le,tabindex:"-1","aria-live":"polite","aria-label":`${t.label}-list`,color:t.itemColor??t.color},j,t.listProps),{default:()=>{var u,T,I;return[(u=n["prepend-item"])==null?void 0:u.call(n),!y.value.length&&!t.hideNoData&&(((T=n["no-data"])==null?void 0:T.call(n))??C(ge,{key:"no-data",title:d(t.noDataText)},null)),C(ft,{ref:v,renderless:!0,items:y.value,itemKey:"value"},{default:D=>{var de;let{item:P,index:H,itemRef:w}=D;const h=He(P.props),X=U(P.props,{ref:w,key:P.value,onClick:()=>N(P,null)});return((de=n.item)==null?void 0:de.call(n,{item:P,index:H,props:X}))??C(ge,U(X,{role:"option"}),{prepend:Te=>{let{isSelected:Ie}=Te;return x(Y,null,[t.multiple&&!t.hideSelected?C(lt,{key:P.value,modelValue:Ie,ripple:!1,tabindex:"-1"},null):void 0,h.prependAvatar&&C(Qe,{image:h.prependAvatar},null),h.prependIcon&&C(ye,{icon:h.prependIcon},null)])}})}}),(I=n["append-item"])==null?void 0:I.call(n)]}})]}),s.value.map((u,T)=>{function I(w){w.stopPropagation(),w.preventDefault(),N(u,!1)}const D={"onClick:close":I,onKeydown(w){w.key!=="Enter"&&w.key!==" "||(w.preventDefault(),w.stopPropagation(),I(w))},onMousedown(w){w.preventDefault(),w.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},P=e?!!n.chip:!!n.selection,H=P?qe(e?n.chip({item:u,index:T,props:D}):n.selection({item:u,index:T})):void 0;if(!(P&&!H))return x("div",{key:u.value,class:"v-select__selection"},[e?n.chip?C(Xe,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:u.title}}},{default:()=>[H]}):C(nt,U({key:"chip",closable:t.closableChips,size:"small",text:u.title,disabled:u.props.disabled},D),null):H??x("span",{class:"v-select__selection-text"},[u.title,t.multiple&&T<s.value.length-1&&x("span",{class:"v-select__selection-comma"},[Ke(",")])])])})]),"append-inner":function(){var D,P;for(var u=arguments.length,T=new Array(u),I=0;I<u;I++)T[I]=arguments[I];return x(Y,null,[(D=n["append-inner"])==null?void 0:D.call(n,...T),t.menuIcon?C(ye,{class:"v-select__menu-icon",color:(P=o.value)==null?void 0:P.fieldIconColor,icon:t.menuIcon},null):void 0])}})}),$e({isFocused:A,menu:p,select:N},o)}});export{Tt as V,ot as a,vt as b,mt as c,ft as d,rt as m,it as u};
