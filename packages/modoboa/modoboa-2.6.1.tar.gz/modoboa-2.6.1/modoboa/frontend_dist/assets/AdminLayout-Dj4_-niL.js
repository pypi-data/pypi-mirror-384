import{b as D,u as g,h as l,i as p,j as t,g as c,c as b,o as x}from"./index-D9OmnhdE.js";import{p as _}from"./parameters-DlTg3gyZ.js";import{_ as N}from"./ConnectedLayout-CiKHST8t.js";import{u as h}from"./parameters.store-eTs-B-pe.js";import{u as f}from"./global.store-CxPrtY0_.js";import"./theme-tqh89n3L.js";import"./VContainer-f9kXL-37.js";/* empty css              */import"./tag-jImTUiWx.js";import"./VApp-1CFpPM0s.js";import"./layout-CuwY6Rle.js";import"./ssrBoot-DaeAGyhc.js";import"./logos-BOVDV-my.js";import"./layout.store-uEYOXtgD.js";import"./VAvatar-Wz1UmZ2b.js";import"./VProgressCircular-Bdwj7JuI.js";import"./forwardRefs-GE5Osi9V.js";import"./VMenu-BPG7b7dT.js";import"./VBadge-C08Ii4Nb.js";import"./VCard-BrQzTMsm.js";import"./VRow-DGPh2Qmm.js";import"./VSheet-C07oo1bg.js";const X={__name:"AdminLayout",async setup(L){let a,e;const{$gettext:i}=D(),A=g(),s=f(),r=h(),n=l(!1),d=l("/rspamd"),u=l([]),M=p(()=>A.authUser),R=p(()=>r.imapMigrationEnabled),S=()=>{window.location=d.value},I=p(()=>{const o=[{text:i("Dashboard"),to:{name:"Dashboard"},exact:!0,icon:"mdi-view-dashboard-outline"},{text:i("Domains"),to:{name:"DomainList"},icon:"mdi-domain",roles:[t.DOMAIN_ADMIN,t.RESELLER,t.SUPER_ADMIN]},{text:i("Identities"),to:{name:"Identities"},icon:"mdi-account",roles:[t.DOMAIN_ADMIN,t.RESELLER,t.SUPER_ADMIN]},{text:i("Alarms"),to:{name:"Alarms"},icon:"mdi-bell"},{icon:"mdi-history",text:i("Monitoring"),roles:[t.SUPER_ADMIN,t.RESELLER,t.DOMAIN_ADMIN],children:[{text:i("Statistics"),to:{name:"Statistics"},roles:[t.SUPER_ADMIN]},{text:i("Audit trail"),to:{name:"AuditTrail"},roles:[t.SUPER_ADMIN]},{text:i("Messages"),to:{name:"MessageLog"},roles:[t.DOMAIN_ADMIN,t.RESELLER,t.SUPER_ADMIN]}]},{icon:"mdi-email-sync-outline",text:i("IMAP Migration"),roles:[t.SUPER_ADMIN,t.RESELLER],condition:()=>R.value,children:[{text:i("Email providers"),to:{name:"ProvidersList"},roles:[t.SUPER_ADMIN,t.RESELLER]},{text:i("Migrations"),to:{name:"MigrationsList"},roles:[t.RESELLER,t.SUPER_ADMIN]}]}],m=[];return u.value.forEach(E=>{m.push({text:E.label,to:{name:"ParametersEdit",params:{app:E.name}}})}),o.concat([{icon:"mdi-cog",text:i("Settings"),children:m,roles:[t.SUPER_ADMIN]},{icon:"mdi-email-check-outline",text:"Rspamd",action:S,roles:[t.SUPER_ADMIN],condition:()=>n.value},{icon:"mdi-information",text:i("Information"),roles:[t.SUPER_ADMIN],to:{name:"Information"},withBell:!0}])});if(M.value.role===t.SUPER_ADMIN){let o=([a,e]=c(()=>_.getGlobalApplications()),a=await a,e(),a);u.value=o.data,[a,e]=c(()=>s.fetchCapabilities()),await a,e(),s.capabilities.imap_migration&&r.imapMigrationEnabled===null&&(o=([a,e]=c(()=>_.getGlobalApplication("imap_migration")),a=await a,e(),a),r.imapMigrationEnabled=o.data.params.enabled_imapmigration),n.value="rspamd"in s.capabilities,n.value&&(d.value=s.capabilities.rspamd.location||"/rspamd")}return(o,m)=>(x(),b(N,{"menu-items":I.value},null,8,["menu-items"]))}};export{X as default};
