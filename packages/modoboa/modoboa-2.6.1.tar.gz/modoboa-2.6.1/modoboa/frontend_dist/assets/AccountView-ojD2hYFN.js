import{c as d,o,w as e,a as t,e as k,t as a,l as _,F as p,s as T,k as s,C as w,n as P,b as j,h as x,f,m as v,_ as U,B as G,j as B}from"./index-D9OmnhdE.js";import{u as z}from"./permissions-B-P8ks2E.js";import{a as Q}from"./accounts-DkNidbb0.js";import{p as H}from"./parameters-DlTg3gyZ.js";import{c as A,V,a as C}from"./VCard-BrQzTMsm.js";import{V as J}from"./VChip-B1E7xQW1.js";import{V as K}from"./VDataTable-CVJjOdhF.js";import{V as $,c as E,a as D}from"./VAvatar-Wz1UmZ2b.js";import{V as W}from"./VTextField-BBIziqiv.js";import{V as g,a as c}from"./VRow-DGPh2Qmm.js";import{V as X,a as Y}from"./VToolbar-CILwTR5O.js";import"./tag-jImTUiWx.js";import"./VProgressCircular-Bdwj7JuI.js";import"./VSelect-CzmrBwOO.js";import"./VInput-ssnfbpwr.js";import"./forwardRefs-GE5Osi9V.js";import"./ssrBoot-DaeAGyhc.js";import"./VMenu-BPG7b7dT.js";import"./VCheckboxBtn-BMf4a9DP.js";import"./VSelectionControl-BIXXUgD4.js";import"./VTable-C08Q6ok2.js";import"./filter-CfvL3jIf.js";/* empty css              */const Z={class:"headline"},ee={__name:"AccountAliases",props:{account:{type:Object,default:null}},setup(l){return(n,m)=>(o(),d(C,null,{default:e(()=>[t(A,null,{default:e(()=>[k("span",Z,a(n.$gettext("Aliases")),1)]),_:1}),t(V,null,{default:e(()=>[(o(!0),_(p,null,T(l.account.aliases,u=>(o(),d(J,{key:u,class:"mr-2 mt-2"},{default:e(()=>[s(a(u),1)]),_:2},1024))),128))]),_:1})]),_:1}))}},N="senderaddresses",M={getAll(){return w.get(`${N}/`)},getAllForMailbox(l){return w.get(`${N}/`,{params:{mailbox:l}})},create(l){return w.post(`${N}/`,l)},delete(l){return w.delete(`${N}/${l}/`)}},te={class:"headline"},ae={key:0},le={__name:"AccountSenderAddresses",props:{account:{type:Object,default:null}},setup(l){const n=P(),{$gettext:m}=j(),u=l,r=x([]),y=x(!1),i=x(""),q=[{title:m("Address"),key:"address"},{title:"",key:"actions",align:"end",sortable:!1}];function I(){r.value.push({}),y.value=!0}function R(){M.getAllForMailbox(u.account.mailbox.pk).then(h=>{r.value=h.data})}function L(){const h={address:i.value,mailbox:u.account.mailbox.pk};M.create(h).then(()=>{R(),i.value=null,y.value=!1,n.displayNotification({msg:m("Sender address added")})})}function O(h){M.delete(h.pk).then(()=>{R(),n.displayNotification({msg:m("Sender address deleted")})})}return R(),(h,S)=>(o(),d(C,null,{default:e(()=>[t(A,null,{default:e(()=>[k("span",te,a(f(m)("Sender addresses")),1)]),_:1}),t(V,null,{default:e(()=>[t(K,{headers:q,items:r.value,"no-data-text":f(m)("No sender address defined for this account")},{"item.address":e(({item:b})=>[b.pk?(o(),_("span",ae,a(b.address),1)):(o(),d(W,{key:1,modelValue:i.value,"onUpdate:modelValue":S[0]||(S[0]=F=>i.value=F),label:f(m)("Specify an email address")},{append:e(()=>[i.value?(o(),d($,{key:0,icon:"mdi-content-save",color:"primary",variant:"text",onClick:L})):v("",!0)]),_:1},8,["modelValue","label"]))]),"item.actions":e(({item:b})=>[b.pk?(o(),d($,{key:0,icon:"mdi-delete-outline",color:"red",title:f(m)("Remove this address"),variant:"text",onClick:F=>O(b)},null,8,["title","onClick"])):v("",!0)]),bottom:e(()=>S[1]||(S[1]=[])),_:2},1032,["items","no-data-text"]),y.value?v("",!0):(o(),d($,{key:0,size:"small",color:"primary",variant:"outlined",onClick:I},{default:e(()=>[t(E,{size:"small",icon:"mdi-plus"}),s(" "+a(f(m)("Add sender address")),1)]),_:1}))]),_:1})]),_:1}))}},ne={class:"headline"},oe={__name:"AccountSummary",props:{account:{type:Object,default:null}},setup(l){return(n,m)=>(o(),d(C,null,{default:e(()=>[t(A,null,{default:e(()=>[k("span",ne,a(n.$gettext("General information")),1)]),_:1}),t(V,null,{default:e(()=>[t(g,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Creation date")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(n.$date(l.account.date_joined)),1)]),_:1})]),_:1}),t(g,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Last login date")),1)]),_:1}),l.account.last_login?(o(),d(c,{key:0,cols:"6"},{default:e(()=>[s(a(n.$date(l.account.last_login)),1)]),_:1})):(o(),d(c,{key:1,cols:"6"},{default:e(()=>[s(a(n.$gettext("Never logged-in")),1)]),_:1}))]),_:1}),t(g,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Full name")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.first_name)+" "+a(l.account.last_name),1)]),_:1})]),_:1}),t(g,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Role")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.role),1)]),_:1})]),_:1}),t(g,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Secondary email")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.secondary_email),1)]),_:1})]),_:1}),t(g,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Phone number")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.phone_number),1)]),_:1})]),_:1}),t(g,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Enabled")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[t(E,{color:l.account.is_active?"success":"error",icon:l.account.is_active?"mdi-check-circle":"mdi-close-circle",variant:"flat"},null,8,["color","icon"])]),_:1})]),_:1}),l.account.mailbox?(o(),_(p,{key:0},[t(g,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Quota")),1)]),_:1}),l.account.mailbox.quota==="0"?(o(),d(c,{key:0,cols:"6"},{default:e(()=>[s(a(n.$gettext("Unlimited")),1)]),_:1})):(o(),d(c,{key:1,cols:"6"},{default:e(()=>[t(D,{color:l.account.mailbox.quota_usage<80?"primary":"warning","model-value":l.account.mailbox.quota_usage,height:"25",class:"white--text"},{default:e(({value:u})=>[s(a(Math.ceil(u))+"% ("+a(l.account.mailbox.quota)+" "+a(n.$gettext("MB"))+") ",1)]),_:1},8,["color","model-value"])]),_:1}))]),_:1}),l.account.mailbox.message_limit!==null&&l.account.mailbox.message_limit!==void 0?(o(),d(g,{key:0},{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Daily sending limit")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[l.account.mailbox.message_limit===0?(o(),_(p,{key:0},[s(a(n.$gettext("Sending forbidden")),1)],64)):(o(),d(D,{key:1,color:l.account.mailbox.sent_messages_in_percent<80?"primary":"warning","model-value":l.account.mailbox.sent_messages_in_percent,height:"25",class:"white--text"},{default:e(({value:u})=>[s(a(Math.ceil(u))+"% ("+a(l.account.mailbox.message_limit)+" "+a(n.$gettext("messages"))+") ",1)]),_:1},8,["color","model-value"]))]),_:1})]),_:1})):v("",!0)],64)):v("",!0)]),_:1})]),_:1}))}},se={class:"headline"},ue={key:1},ce={class:"text-disabled"},ie={__name:"DomainAdminDomains",props:{account:{type:Object,default:null}},setup(l){const{$gettext:n}=j();return(m,u)=>(o(),d(C,null,{default:e(()=>[t(A,null,{default:e(()=>[k("span",se,a(f(n)("Administered domains")),1)]),_:1}),t(V,null,{default:e(()=>[l.account.domains!==void 0&&l.account.domains.length?(o(!0),_(p,{key:0},T(l.account.domains,r=>(o(),d(g,{key:r},{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[s(a(r),1)]),_:2},1024)]),_:2},1024))),128)):(o(),_("div",ue,a(f(n)("No domain managed")),1)),k("div",ce,a(f(n)("Add/Remove from the domain page")),1)]),_:1})]),_:1}))}},de={class:"headline"},re={__name:"ResourcesView",props:{resources:{type:Array,default:null}},setup(l){const{$gettext:n}=j(),m=r=>r.name==="quota"?n("No quota"):n("Creation denied");function u(r){return r<50?"primary":r<80?"warning":"error"}return(r,y)=>(o(),d(C,null,{default:e(()=>[t(A,null,{default:e(()=>[k("span",de,a(f(n)("Resources usage")),1)]),_:1}),t(V,null,{default:e(()=>[(o(!0),_(p,null,T(l.resources,i=>(o(),_("div",{key:i.name,class:"mt-4"},[i.max_value===-1?(o(),_(p,{key:0},[s(a(i.label)+" ("+a(f(n)("Unlimited"))+") ",1)],64)):i.max_value===0?(o(),_(p,{key:1},[s(a(i.label)+" ("+a(m(i))+") ",1)],64)):(o(),_(p,{key:2},[s(a(i.label)+" ("+a(Math.ceil(i.usage))+"%) ",1),t(D,{"model-value":i.usage,color:u(i.usage)},null,8,["model-value","color"])],64))]))),128))]),_:1})]),_:1}))}},me={__name:"AccountView",setup(l){const n=G(),{canSetRole:m}=z(),u=x({pk:n.params.id}),r=x({});function y(){Q.get(n.params.id).then(i=>{u.value=i.data})}return m.value&&H.getGlobalApplication("limits").then(i=>{r.value=i.data}),y(),(i,q)=>(o(),_(p,null,[t(X,{flat:""},{default:e(()=>[t(Y,null,{default:e(()=>[s(a(i.$gettext("Account"))+" "+a(u.value.username)+" ",1),t($,{color:"primary",icon:"mdi-circle-edit-outline",to:{name:"AccountEdit",params:{id:u.value.pk}}},null,8,["to"]),t($,{color:"primary",icon:"mdi-reload",onClick:y})]),_:1})]),_:1}),t(g,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[t(oe,{account:u.value},null,8,["account"]),u.value.role===f(B).DOMAIN_ADMIN?(o(),d(ie,{key:0,class:"mt-2",account:u.value},null,8,["account"])):v("",!0)]),_:1}),t(c,{cols:"6"},{default:e(()=>[r.value.params&&r.value.params.enable_admin_limits&&u.value.role!==f(B).USER&&u.value.role!==f(B).SUPER_ADMIN?(o(),d(re,{key:0,resources:u.value.resources},null,8,["resources"])):v("",!0),u.value.aliases?(o(),d(ee,{key:1,class:"mt-2",account:u.value},null,8,["account"])):v("",!0),u.value.mailbox?(o(),d(le,{key:2,class:"mt-2",account:u.value},null,8,["account"])):v("",!0)]),_:1})]),_:1})],64))}},qe=U(me,[["__scopeId","data-v-388d62f6"]]);export{qe as default};
