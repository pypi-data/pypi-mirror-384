import{b as A,h as i,c as y,o as f,w as r,a as o,k as g,t as _,f as C,_ as L,l as b,F as I}from"./index-D9OmnhdE.js";import{l as N}from"./logs-DT7l7Npx.js";import{d as R}from"./index-DuzUMVLM.js";import{V as F}from"./VDataTableServer-BSZUbic1.js";import{V as D}from"./VChip-B1E7xQW1.js";import{V as h,a as O}from"./VToolbar-CILwTR5O.js";import{V as S}from"./VTextField-BBIziqiv.js";import{a as $}from"./VCard-BrQzTMsm.js";import"./VDataTable-CVJjOdhF.js";import"./VAvatar-Wz1UmZ2b.js";import"./tag-jImTUiWx.js";import"./VProgressCircular-Bdwj7JuI.js";import"./VSelect-CzmrBwOO.js";import"./VInput-ssnfbpwr.js";import"./forwardRefs-GE5Osi9V.js";import"./ssrBoot-DaeAGyhc.js";import"./VMenu-BPG7b7dT.js";import"./VCheckboxBtn-BMf4a9DP.js";import"./VSelectionControl-BIXXUgD4.js";import"./VTable-C08Q6ok2.js";import"./filter-CfvL3jIf.js";const z={__name:"AuditTrailList",setup(v){const{$gettext:t}=A(),s=i(!1),p=i([]),n=i(""),u=i(0),V=[{title:t("Date"),key:"date_created"},{title:t("Level"),key:"level"},{title:t("Logger"),key:"logger"},{title:t("Message"),key:"message"}],x=[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}];function T(a){return a==="INFO"?"primary":a==="WARNING"?"orange":a==="CRITICAL"||a==="ERROR"?"red":""}function m({page:a,itemsPerPage:l,sortBy:e,search:k}){let c;e.length&&(c=(e[0].order==="desc"?"-":"")+e[0].key);const w={ordering:c,page:a,page_size:l,search:k};s.value=!0,N.getAuditTrail(w).then(d=>{p.value=d.data.results,u.value=d.data.count,s.value=!1})}return m=R(m,500),(a,l)=>(f(),y($,{class:"mt-6"},{default:r(()=>[o(F,{headers:V,items:p.value,search:n.value,class:"elevation-0","items-length":u.value,"items-per-page-options":x,"onUpdate:options":m},{top:r(()=>[o(h,{flat:"",color:"white"},{default:r(()=>[o(S,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),"prepend-inner-icon":"mdi-magnify",placeholder:C(t)("Search"),variant:"outlined","hide-details":"",density:"compact",class:"flex-grow-0 w-33"},null,8,["modelValue","placeholder"])]),_:1})]),"item.level":r(({item:e})=>[o(D,{color:T(e.level),"text-color":"white",size:"small"},{default:r(()=>[g(_(e.level),1)]),_:2},1032,["color"])]),_:2},1032,["items","search","items-length"])]),_:1}))}},E={__name:"AuditTrailView",setup(v){return(t,s)=>(f(),b(I,null,[o(h,{flat:""},{default:r(()=>[o(O,null,{default:r(()=>[g(_(t.$gettext("Audit trail")),1)]),_:1})]),_:1}),o(z)],64))}},ie=L(E,[["__scopeId","data-v-5d9f29af"]]);export{ie as default};
