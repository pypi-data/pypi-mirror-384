import{S as Ie,i as Le,s as Se,v as Ee,d as _,w as Ce,x as He,y as Me,o as a,z as Ae,A as Ne,B as Pe,b as Z,c as n,u as se,m as Ue,e as c,f as P,q as S,h as v,j as u,k as x,r as Be,C as xe,a as me,g as ne,t as le,n as De}from"../chunks/BI_gvUUO.js";import"../chunks/IHki7fMi.js";function je(r){let t,e="Sign In";return{c(){t=u("span"),t.textContent=e},l(s){t=c(s,"SPAN",{"data-svelte-h":!0}),S(t)!=="svelte-6n3gky"&&(t.textContent=e)},m(s,f){Z(s,t,f)},p:De,d(s){s&&_(t)}}}function Ve(r){let t,e,s;return{c(){t=u("span"),e=le("Sign Out, "),s=le(r[2])},l(f){t=c(f,"SPAN",{});var b=P(t);e=ne(b,"Sign Out, "),s=ne(b,r[2]),b.forEach(_)},m(f,b){Z(f,t,b),n(t,e),n(t,s)},p(f,b){b&4&&me(s,f[2])},d(f){f&&_(t)}}}function Oe(r){let t,e,s=r[1]?"logged in":"not logged in",f,b;return{c(){t=u("span"),e=le("Checking... ("),f=le(s),b=le(")")},l(l){t=c(l,"SPAN",{});var o=P(t);e=ne(o,"Checking... ("),f=ne(o,s),b=ne(o,")"),o.forEach(_)},m(l,o){Z(l,t,o),n(t,e),n(t,f),n(t,b)},p(l,o){o&2&&s!==(s=l[1]?"logged in":"not logged in")&&me(f,s)},d(l){l&&_(t)}}}function ke(r){let t,e='<div class="bg-blue-600 text-white text-sm rounded-lg p-3 shadow-lg relative"><div class="flex items-start gap-2"><svg class="w-4 h-4 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <div><p class="font-medium">Sign in required</p> <p class="text-blue-100 text-xs mt-1">You need to sign in to use HuggingFace Inference Providers for text-to-speech generation.</p></div></div> <div class="absolute top-full left-1/2 transform -translate-x-1/2"><div class="w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-blue-600"></div></div></div>';return{c(){t=u("div"),t.innerHTML=e,this.h()},l(s){t=c(s,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-drpr74"&&(t.innerHTML=e),this.h()},h(){a(t,"class","absolute bottom-full left-0 right-0 mb-2 z-50")},m(s,f){Z(s,t,f)},d(s){s&&_(t)}}}function we(r){let t,e,s,f="Sign In with HuggingFace Token",b,l,o,G="<strong>Manual Token Entry:</strong> Please enter your HuggingFace token.",I,g,U=`1. Go to <a href="https://huggingface.co/settings/tokens" target="_blank" class="underline text-blue-600">HuggingFace Settings</a><br/>
            2. Create a new token with &quot;Inference API&quot; permissions<br/>
            3. Copy and paste it below`,Y,F,k,E,W="HuggingFace Token",J,m,K,Q,y,j,d="Cancel",i,w,R="Sign In",O,oe,T=r[6]&&ye(),h=r[5]&&Te(r);return{c(){t=u("div"),e=u("div"),s=u("h2"),s.textContent=f,b=x(),l=u("div"),o=u("p"),o.innerHTML=G,I=x(),g=u("p"),g.innerHTML=U,Y=x(),T&&T.c(),F=x(),k=u("div"),E=u("label"),E.textContent=W,J=x(),m=u("input"),K=x(),h&&h.c(),Q=x(),y=u("div"),j=u("button"),j.textContent=d,i=x(),w=u("button"),w.textContent=R,this.h()},l(A){t=c(A,"DIV",{class:!0});var z=P(t);e=c(z,"DIV",{class:!0});var L=P(e);s=c(L,"H2",{class:!0,"data-svelte-h":!0}),S(s)!=="svelte-1t0ehet"&&(s.textContent=f),b=v(L),l=c(L,"DIV",{class:!0});var C=P(l);o=c(C,"P",{class:!0,"data-svelte-h":!0}),S(o)!=="svelte-344vn4"&&(o.innerHTML=G),I=v(C),g=c(C,"P",{class:!0,"data-svelte-h":!0}),S(g)!=="svelte-1ffvpx3"&&(g.innerHTML=U),Y=v(C),T&&T.l(C),C.forEach(_),F=v(L),k=c(L,"DIV",{class:!0});var B=P(k);E=c(B,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(E)!=="svelte-vtbmxo"&&(E.textContent=W),J=v(B),m=c(B,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),K=v(B),h&&h.l(B),B.forEach(_),Q=v(L),y=c(L,"DIV",{class:!0});var $=P(y);j=c($,"BUTTON",{class:!0,"data-svelte-h":!0}),S(j)!=="svelte-csk0rj"&&(j.textContent=d),i=v($),w=c($,"BUTTON",{class:!0,"data-svelte-h":!0}),S(w)!=="svelte-1nxas5u"&&(w.textContent=R),$.forEach(_),L.forEach(_),z.forEach(_),this.h()},h(){a(s,"class","text-xl font-semibold mb-4"),a(o,"class","text-blue-800 mb-2"),a(g,"class","text-blue-700"),a(l,"class","mb-4 p-3 bg-blue-50 rounded-md text-sm"),a(E,"for","token"),a(E,"class","block text-sm font-medium text-gray-700 mb-2"),a(m,"id","token"),a(m,"type","password"),a(m,"placeholder","hf_..."),a(m,"class","w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"),a(k,"class","mb-4"),a(j,"class","px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"),a(w,"class","px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors"),a(y,"class","flex justify-end gap-3"),a(e,"class","bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl"),a(t,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50")},m(A,z){Z(A,t,z),n(t,e),n(e,s),n(e,b),n(e,l),n(l,o),n(l,I),n(l,g),n(l,Y),T&&T.m(l,null),n(e,F),n(e,k),n(k,E),n(k,J),n(k,m),xe(m,r[4]),n(k,K),h&&h.m(k,null),n(e,Q),n(e,y),n(y,j),n(y,i),n(y,w),O||(oe=[se(m,"input",r[15]),se(m,"keydown",r[16]),se(j,"click",r[10]),se(w,"click",r[11])],O=!0)},p(A,z){A[6]?T||(T=ye(),T.c(),T.m(l,null)):T&&(T.d(1),T=null),z&16&&m.value!==A[4]&&xe(m,A[4]),A[5]?h?h.p(A,z):(h=Te(A),h.c(),h.m(k,null)):h&&(h.d(1),h=null)},d(A){A&&_(t),T&&T.d(),h&&h.d(),O=!1,Ce(oe)}}}function ye(r){let t,e="<strong>Tip:</strong> You can also run <code>huggingface-cli login</code> in your terminal to automatically use your local token.";return{c(){t=u("p"),t.innerHTML=e,this.h()},l(s){t=c(s,"P",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1gg2uwy"&&(t.innerHTML=e),this.h()},h(){a(t,"class","text-blue-600 mt-2")},m(s,f){Z(s,t,f)},d(s){s&&_(t)}}}function Te(r){let t,e;return{c(){t=u("p"),e=le(r[5]),this.h()},l(s){t=c(s,"P",{class:!0});var f=P(t);e=ne(f,r[5]),f.forEach(_),this.h()},h(){a(t,"class","text-red-600 text-sm mt-1")},m(s,f){Z(s,t,f),n(t,e)},p(s,f){f&32&&me(e,s[5])},d(s){s&&_(t)}}}function Fe(r){let t,e,s,f='<div class="flex items-center gap-3"><img src="/assets/hf-studio-logo.png" alt="HF Logo" class="w-8 h-8"/> <h1 class="text-xl font-semibold">HFStudio<sup class="text-xs text-gray-500 ml-1">BETA</sup></h1></div>',b,l,o,G="Tasks",I,g,U,Y="üéôÔ∏è",F,k,E="Text to Speech",W,J,m,K="<span>üéµ</span> <span>Voice Cloning</span>",Q,y,j="<span>üéß</span> <span>Speech to Text</span>",d,i,w="<span>üéº</span> <span>Sound Effects</span>",R,O,oe="<span>üé∏</span> <span>Music Generation</span>",T,h,A="<span>üîä</span> <span>Audio Enhancement</span>",z,L,C,B,$,ue,fe,de,ee,pe,X,ge,_e;function be(p,M){return p[7]?Oe:p[1]?Ve:je}let ae=be(r),q=ae(r),N=r[8]&&!r[1]&&ke();const he=r[13].default,V=Ee(he,r,r[12],null);let H=r[3]&&we(r);return{c(){t=u("div"),e=u("aside"),s=u("div"),s.innerHTML=f,b=x(),l=u("nav"),o=u("div"),o.textContent=G,I=x(),g=u("button"),U=u("span"),U.textContent=Y,F=x(),k=u("span"),k.textContent=E,J=x(),m=u("button"),m.innerHTML=K,Q=x(),y=u("button"),y.innerHTML=j,d=x(),i=u("button"),i.innerHTML=w,R=x(),O=u("button"),O.innerHTML=oe,T=x(),h=u("button"),h.innerHTML=A,z=x(),L=u("div"),C=u("button"),B=u("img"),ue=x(),q.c(),fe=x(),N&&N.c(),de=x(),ee=u("main"),V&&V.c(),pe=x(),H&&H.c(),this.h()},l(p){t=c(p,"DIV",{class:!0});var M=P(t);e=c(M,"ASIDE",{class:!0});var te=P(e);s=c(te,"DIV",{class:!0,"data-svelte-h":!0}),S(s)!=="svelte-1vahj38"&&(s.innerHTML=f),b=v(te),l=c(te,"NAV",{class:!0});var D=P(l);o=c(D,"DIV",{class:!0,"data-svelte-h":!0}),S(o)!=="svelte-1x5465q"&&(o.textContent=G),I=v(D),g=c(D,"BUTTON",{class:!0});var re=P(g);U=c(re,"SPAN",{"data-svelte-h":!0}),S(U)!=="svelte-1yx42xi"&&(U.textContent=Y),F=v(re),k=c(re,"SPAN",{"data-svelte-h":!0}),S(k)!=="svelte-2j89jk"&&(k.textContent=E),re.forEach(_),J=v(D),m=c(D,"BUTTON",{class:!0,"data-svelte-h":!0}),S(m)!=="svelte-10dl8nf"&&(m.innerHTML=K),Q=v(D),y=c(D,"BUTTON",{class:!0,"data-svelte-h":!0}),S(y)!=="svelte-wf0x5d"&&(y.innerHTML=j),d=v(D),i=c(D,"BUTTON",{class:!0,"data-svelte-h":!0}),S(i)!=="svelte-x7bha3"&&(i.innerHTML=w),R=v(D),O=c(D,"BUTTON",{class:!0,"data-svelte-h":!0}),S(O)!=="svelte-1tyblmt"&&(O.innerHTML=oe),T=v(D),h=c(D,"BUTTON",{class:!0,"data-svelte-h":!0}),S(h)!=="svelte-1emrjb3"&&(h.innerHTML=A),D.forEach(_),z=v(te),L=c(te,"DIV",{class:!0});var ie=P(L);C=c(ie,"BUTTON",{class:!0});var ce=P(C);B=c(ce,"IMG",{src:!0,alt:!0,class:!0}),ue=v(ce),q.l(ce),ce.forEach(_),fe=v(ie),N&&N.l(ie),ie.forEach(_),te.forEach(_),de=v(M),ee=c(M,"MAIN",{class:!0});var ve=P(ee);V&&V.l(ve),ve.forEach(_),pe=v(M),H&&H.l(M),M.forEach(_),this.h()},h(){a(s,"class","p-4 border-b border-gray-200"),a(o,"class","mt-2 mb-1 px-2 text-xs font-medium text-gray-500 uppercase"),a(g,"class",W="w-full flex items-center gap-2 px-2 py-1.5 rounded-md hover:bg-gray-100 transition-colors text-left "+(r[0]==="tts"?"bg-gray-100":"")),a(m,"class","w-full flex items-center gap-2 px-2 py-1.5 rounded-md text-left opacity-40 cursor-not-allowed"),m.disabled=!0,a(y,"class","w-full flex items-center gap-2 px-2 py-1.5 rounded-md text-left opacity-40 cursor-not-allowed"),y.disabled=!0,a(i,"class","w-full flex items-center gap-2 px-2 py-1.5 rounded-md text-left opacity-40 cursor-not-allowed"),i.disabled=!0,a(O,"class","w-full flex items-center gap-2 px-2 py-1.5 rounded-md text-left opacity-40 cursor-not-allowed"),O.disabled=!0,a(h,"class","w-full flex items-center gap-2 px-2 py-1.5 rounded-md text-left opacity-40 cursor-not-allowed"),h.disabled=!0,a(l,"class","p-2 text-sm flex-1"),Ue(B.src,$="/assets/hf-logo.png")||a(B,"src",$),a(B,"alt","HF Logo"),a(B,"class","w-5 h-5"),C.disabled=r[7],a(C,"class","w-full px-6 py-3 bg-black text-white rounded-lg font-medium hover:bg-gray-800 transition-colors shadow-sm flex items-center justify-center gap-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed"),a(L,"class","p-2 relative"),a(e,"class","w-56 border-r border-gray-200 bg-white flex-shrink-0 flex flex-col h-full "),a(ee,"class","flex-1 overflow-auto"),a(t,"class","flex h-screen bg-white")},m(p,M){Z(p,t,M),n(t,e),n(e,s),n(e,b),n(e,l),n(l,o),n(l,I),n(l,g),n(g,U),n(g,F),n(g,k),n(l,J),n(l,m),n(l,Q),n(l,y),n(l,d),n(l,i),n(l,R),n(l,O),n(l,T),n(l,h),n(e,z),n(e,L),n(L,C),n(C,B),n(C,ue),q.m(C,null),n(L,fe),N&&N.m(L,null),n(t,de),n(t,ee),V&&V.m(ee,null),n(t,pe),H&&H.m(t,null),X=!0,ge||(_e=[se(g,"click",r[14]),se(C,"click",r[9])],ge=!0)},p(p,[M]){(!X||M&1&&W!==(W="w-full flex items-center gap-2 px-2 py-1.5 rounded-md hover:bg-gray-100 transition-colors text-left "+(p[0]==="tts"?"bg-gray-100":"")))&&a(g,"class",W),ae===(ae=be(p))&&q?q.p(p,M):(q.d(1),q=ae(p),q&&(q.c(),q.m(C,null))),(!X||M&128)&&(C.disabled=p[7]),p[8]&&!p[1]?N||(N=ke(),N.c(),N.m(L,null)):N&&(N.d(1),N=null),V&&V.p&&(!X||M&4096)&&Ae(V,he,p,p[12],X?Pe(he,p[12],M,null):Ne(p[12]),null),p[3]?H?H.p(p,M):(H=we(p),H.c(),H.m(t,null)):H&&(H.d(1),H=null)},i(p){X||(Me(V,p),X=!0)},o(p){He(V,p),X=!1},d(p){p&&_(t),q.d(),N&&N.d(),V&&V.d(p),H&&H.d(),ge=!1,Ce(_e)}}}function ze(r,t,e){let{$$slots:s={},$$scope:f}=t,b="tts",l=!1,o="",G=!1,I="",g="",U=!1,Y=!0,F=!1;Be(()=>{console.log("onMount called - starting auth check"),window.addEventListener("show-signin-popover",()=>{e(8,F=!0),setTimeout(()=>{e(8,F=!1)},4e3)}),k(),E(),document.addEventListener("visibilitychange",()=>{document.hidden||E()}),window.addEventListener("storage",E);const d=setInterval(E,1e3);return()=>{window.removeEventListener("storage",E),clearInterval(d)}});async function k(){try{console.log("Checking local token availability...");const i=await(await fetch("/api/auth/local-token")).json();console.log("Local token response:",i),i.available?(e(6,U=!0),localStorage.setItem("hf_access_token",i.token),console.log("Set local token in localStorage"),i.user_info&&i.user_info.name!=="Local User"?(e(1,l=!0),e(2,o=i.user_info.name.split(" ")[0]),console.log("Logged in with user info:",o)):(e(1,l=!0),e(2,o="Local User"),console.log("Logged in with local token (validation skipped due to rate limiting)"),console.log("isLoggedIn set to:",l,"username set to:",o))):(e(6,U=!1),console.log("No local token available"))}catch(d){console.log("Could not check local token availability:",d),e(6,U=!1)}finally{e(7,Y=!1),console.log("Finished checking auth, isLoggedIn:",l)}}function E(){const d=localStorage.getItem("hf_access_token");d&&!l?W(d):d||(e(1,l=!1),e(2,o=""))}async function W(d){try{console.log("Fetching user info for token:",d.substring(0,10)+"...");const i=await fetch("https://huggingface.co/api/whoami-v2",{headers:{Authorization:`Bearer ${d}`}});if(i.ok){const w=await i.json();e(1,l=!0);const R=w.name||w.fullname||w.login||w.username||"User";e(2,o=R.split(" ")[0]),console.log("Successfully fetched user info:",o)}else localStorage.removeItem("hf_access_token"),e(1,l=!1),e(2,o=""),console.log("Token validation failed:",i.status)}catch(i){localStorage.removeItem("hf_access_token"),e(1,l=!1),e(2,o=""),console.log("Error fetching user info:",i)}}async function J(){if(l)localStorage.removeItem("hf_access_token"),sessionStorage.removeItem("oauth_state"),e(1,l=!1),e(2,o="");else if(window.location.hostname.includes("hf.space")||window.location.hostname.includes("huggingface.co"))try{const i=await(await fetch("/api/auth/oauth-config")).json(),w=i.scopes||"read-repos write-repos manage-repos inference-api",R=`https://huggingface.co/oauth/authorize?client_id=${i.client_id}&redirect_uri=${encodeURIComponent(window.location.origin+"/auth/callback")}&scope=${encodeURIComponent(w)}&response_type=code&state=${Date.now()}`;window.location.href=R}catch(d){console.error("Failed to get OAuth config:",d),e(3,G=!0),e(4,I=""),e(5,g="")}else e(3,G=!0),e(4,I=""),e(5,g="")}function m(){e(3,G=!1),e(4,I=""),e(5,g="")}async function K(){if(!I.trim()){e(5,g="Please enter a token");return}if(!I.startsWith("hf_")){e(5,g='Token should start with "hf_"');return}try{const d=await fetch("https://huggingface.co/api/whoami-v2",{headers:{Authorization:`Bearer ${I.trim()}`}});if(d.ok){const i=await d.json();localStorage.setItem("hf_access_token",I.trim()),e(1,l=!0);const w=i.name||i.fullname||i.login||i.username||"User";e(2,o=w.split(" ")[0]),m()}else{const i=await d.text();console.log("Token validation error:",d.status,i),e(5,g=`Invalid token (${d.status}). Please check your token and try again.`)}}catch(d){console.error("Token validation error:",d),e(5,g="Error validating token. Please try again.")}}const Q=()=>e(0,b="tts");function y(){I=this.value,e(4,I)}const j=d=>d.key==="Enter"&&K();return r.$$set=d=>{"$$scope"in d&&e(12,f=d.$$scope)},[b,l,o,G,I,g,U,Y,F,J,m,K,f,s,Q,y,j]}class Re extends Ie{constructor(t){super(),Le(this,t,ze,Fe,Se,{})}}export{Re as component};
