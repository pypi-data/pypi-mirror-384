[build-system]
requires = ["setuptools>=77", "setuptools-scm[toml]"]
build-backend = "setuptools.build_meta"


[project]
name = "sqls"
authors = [
  { name = "Marko Durkovic", email = "marko@miding.de" },
]
classifiers = [
  "Development Status :: 4 - Beta",
  "Programming Language :: Python",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Programming Language :: Python :: 3.14",
  "Topic :: Database",
  "Typing :: Typed",
]
description = "SQL Toolkit for Python."
dependencies = []
dynamic = ["version"]
keywords = [
  "aio",
  "async",
  "database",
  "mariadb",
  "model",
  "mysql",
  "query",
  "postgresql",
  "sql",
  "sqlite3",
  "transaction",
]
license = "Apache-2.0"
readme = "README.rst"
requires-python = ">=3.10"

[project.optional-dependencies]
mysql = ["aiomysql"]
postgresql = ["asyncpg"]
sqlite = ["aiosqlite"]

[project.urls]
Homepage = "https://gitlab.com/durko/sqls"
Documentation = "https://durko.gitlab.io/sqls"
Source = "https://gitlab.com/durko/sqls"
Issues = "https://gitlab.com/durko/sqls/issues"
Changelog = "https://gitlab.com/durko/sqls/-/blob/master/CHANGES.rst"


[dependency-groups]
dev = [
  "mypy",
  "pytest",
  "pytest-asyncio",
  "pytest-cov",
  "reuse",
  "ruff",
  "sphinx",
  "sphinx-autodoc-typehints",
  "sphinx-rtd-theme",
  # from project
  "aiomysql",
  "asyncpg",
  "aiosqlite",
]


[tool.coverage]
report.exclude_lines = [
  "pragma: no cover",
  "if TYPE_CHECKING:",
  "if __name__ == '__main__':",
  "@overload",
]
report.show_missing = true
report.skip_covered = true
run.branch = true
run.source = ["src"]


[tool.mypy]
disallow_any_explicit = true
explicit_package_bases = true
mypy_path = "src"
strict = true


[tool.pytest.ini_options]
addopts = ["--verbose"]
asyncio_default_fixture_loop_scope = "function"
asyncio_mode = "auto"


[tool.ruff]
line-length = 100
namespace-packages = ["docs", "sqls"]

[tool.ruff.format]
quote-style = "single"

[tool.ruff.lint]
select = [
  "ALL",
  "D204",
  "D400",
  "D401",
  "D404",
  "D413",
]
ignore = [
  "FBT001",
  "FBT002",
  "FBT003",
  "PLC0415",
  "PLR2004",
  # allow asserts
  "S101",
  # trailing comma
  "COM812",
  # single line string concat
  "ISC001",
]

[tool.ruff.lint.isort]
combine-as-imports = true
force-wrap-aliases = true
known-first-party = ["sqls"]

[tool.ruff.lint.flake8-builtins]
builtins-allowed-modules = ['select']

[tool.ruff.lint.flake8-copyright]
notice-rgx = "(?i)# (C)opyright 2020 - 2025 Marko Durkovic\n# (S)PDX-License-Identifier: Apache-2.0"

[tool.ruff.lint.flake8-quotes]
avoid-escape = false
inline-quotes = "single"

[tool.ruff.lint.pydocstyle]
convention = "google"


[tool.setuptools_scm]
version_scheme = "only-version"
local_scheme = "no-local-version"
