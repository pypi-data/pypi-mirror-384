import{_ as k,s as O,x as z,r as l,f as u,o as r,d as c,c as p,g as d,a as i,w as s,b as n,t as y,m as b,F as w,h as T}from"./index-B5gNOk1p.js";const P={name:"TreeItem",components:{"tree-folder":O(()=>z(()=>Promise.resolve().then(()=>U),void 0))},inject:["fetchChildren"],props:{parent:{type:Object,required:!1,default:()=>({})},project:{type:Object,required:!0}},data(){return{count:0}},computed:{hasChildren(){var o;return this.project.type==="project"&&(((o=this.project.subprojects)==null?void 0:o.length)>0||this.project.repos>0||this.project.repos.length>0)},link(){return this.project.type==="project"?{name:"ecosystems",query:{ecosystem:this.$route.query.ecosystem,project:this.project.name}}:{name:"ecosystems",query:{ecosystem:this.$route.query.ecosystem,project:this.parent.name||this.$route.query.project,repo:this.project.uuid}}}},methods:{async getChildren(o){if(!o.isOpen&&!o.children){const t=await this.fetchChildren(o.name,{size:5});o.children=t.data.results,this.count=t.data.count}o.isOpen=!o.isOpen}}},F={class:"tree-list--row"},I={class:"d-flex align-center py-3 pr-3 pl-2"},N={class:"d-flex align-center"},V={key:1,class:"pl-8"},B={key:2,class:"icon-wrapper-secondary"},A={key:3,class:"icon-wrapper-primary"},E={class:"d-flex flex-fill flex-align-center"},M={class:"v-card-title text-subtitle-2 pl-0"},S={class:"d-flex align-center text-body-2 text-icon pr-1"};function D(o,t,e,C,x,_){var g;const f=l("v-btn"),a=l("v-icon"),j=l("router-link"),h=l("v-spacer"),v=l("v-tooltip"),q=l("tree-folder");return r(),u("li",F,[c("div",I,[c("div",N,[_.hasChildren?(r(),p(f,{key:0,category:"tertiary",icon:e.project.isOpen?"mdi-chevron-down":"mdi-chevron-right",onClick:t[0]||(t[0]=m=>_.getChildren(e.project)),density:"comfortable",variant:"text",class:"mr-1",color:"icon",size:"small"},null,8,["icon"])):(r(),u("div",V)),e.project.type==="project"?(r(),u("div",B,[i(a,{size:"small",color:"secondary"},{default:s(()=>t[1]||(t[1]=[n("mdi-folder-outline",-1)])),_:1,__:[1]})])):d("",!0),e.project.type==="repository"?(r(),u("div",A,[i(a,{size:"small",color:"primary"},{default:s(()=>t[2]||(t[2]=[n("mdi-source-branch",-1)])),_:1,__:[2]})])):d("",!0)]),c("div",E,[c("div",M,[i(j,{to:_.link},{default:s(()=>[n(y(e.project.title||e.project.name||e.project.uri),1)]),_:1},8,["to"])]),i(h),c("div",S,[((g=e.project.subprojects)==null?void 0:g.length)>0?(r(),p(v,{key:0,text:"Projects"},{activator:s(({props:m})=>[c("span",b(m,{class:"ml-2"}),[i(a,{size:"x-small",class:"mb-1"},{default:s(()=>t[3]||(t[3]=[n("mdi-folder-multiple-outline",-1)])),_:1,__:[3]}),n(" "+y(typeof e.project.subprojects=="number"?e.project.subprojects:e.project.subprojects.length),1)],16)]),_:1})):d("",!0),e.project.repos?(r(),p(v,{key:1,text:"Repositories"},{activator:s(({props:m})=>[c("span",b(m,{class:"ml-2"}),[i(a,{size:"x-small",class:"mb-1"},{default:s(()=>t[4]||(t[4]=[n("mdi-source-branch",-1)])),_:1,__:[4]}),n(" "+y(typeof e.project.repos=="number"?e.project.repos:e.project.repos.length),1)],16)]),_:1})):d("",!0),e.project.categories?(r(),p(v,{key:2,class:"ml-2",text:"Categories"},{activator:s(({props:m})=>[c("span",b(m,{class:"ml-2"}),[i(a,{size:"x-small",class:"mb-1"},{default:s(()=>t[5]||(t[5]=[n("mdi-shape-outline",-1)])),_:1,__:[5]}),n(" "+y(e.project.categories),1)],16)]),_:1})):d("",!0)])])]),e.project.isOpen&&_.hasChildren?(r(),p(q,{key:0,parent:e.project,projects:e.project.children,count:x.count},null,8,["parent","projects","count"])):d("",!0)])}const L=k(P,[["render",D],["__scopeId","data-v-bab2979c"]]),R={name:"TreeFolder",components:{TreeItem:L},props:{parent:{type:Object,required:!1,default:()=>({})},projects:{type:Array,required:!0},count:{type:Number,required:!1,default:0}},computed:{hasMoreChildren(){return this.parent.name&&this.count>5}}},G={class:"tree-list--folder"},H={key:0,class:"tree-list--row"},J={class:"py-3"};function K(o,t,e,C,x,_){const f=l("tree-item"),a=l("v-icon"),j=l("router-link");return r(),u("ul",G,[(r(!0),u(w,null,T(e.projects,h=>(r(),p(f,{key:h.id,project:h,parent:e.parent},null,8,["project","parent"]))),128)),_.hasMoreChildren?(r(),u("li",H,[c("p",J,[i(j,{to:{name:"ecosystems",query:{project:e.parent.name,ecosystem:this.$route.query.ecosystem}},class:"text-subtitle-2 text-primary"},{default:s(()=>[i(a,{start:"",size:"small",color:"primary"},{default:s(()=>t[0]||(t[0]=[n("mdi-plus",-1)])),_:1,__:[0]}),n(" "+y(e.count-5)+" more items ",1)]),_:1},8,["to"])])])):d("",!0)])}const Q=k(R,[["render",K],["__scopeId","data-v-312c359d"]]),U=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{Q as default};
