import{K as n}from"./index-B5gNOk1p.js";const l="(?:git+)?(?:git://+)?(?:https?://)?github.com/([a-zA-Z0-9](?:[a-zA-Z0-9]|-[a-zA-Z0-9]){1,38})/([a-zA-Z0-9-_]{1,100})(?:.+)?",u="(?:git+)?(?:https?://)?gitlab.com/([a-zA-Z0-9._][a-zA-Z0-9-._]{1,200}[a-zA-Z0-9-_]|[a-zA-Z0-9_])/((?:[a-zA-Z0-9._][a-zA-Z0-9-._]*(?:/)?)+)(?:.+)?",m="(?:https?://)?npmjs.com/package/(.+)",h="(?:https?://)?registry.npmjs.org/(.+)/-/.*",_="^(?:https?://)?pypi.org/project/([a-zA-Z0-9.-_]+)(?:.+)?",R=async t=>{var g,r,p;if(!t)return null;const a=t.match(_),e=t.match(m),o=t.match(h);if(a){const s=await n.get(`https://pypi.org/pypi/${a[1]}/json`);s.info.project_urls.Repository&&(t=s.info.project_urls.Repository)}else if(e){const s=await n.get(`https://api.npms.io/v2/package/${encodeURIComponent(e[1])}`);(g=s.data.collected.metadata.repository)!=null&&g.url&&(t=s.data.collected.metadata.repository.url)}else if(o){const s=await n.get(`https://api.npms.io/v2/package/${encodeURIComponent(o[1])}`);(r=s.data.collected.metadata.repository)!=null&&r.url&&(t=(p=s.data.collected.metadata.repository)==null?void 0:p.url)}const c=t.match(l);if(c)return{datasource:"github",url:`https://github.com/${c[1]}/${c[2]}`};const i=t.match(u);if(i)return{datasource:"gitlab",url:`https://gitlab.com/${i[1]}/${i[2]}`}},A=(t,a,e)=>{if(t==="git"||a==="commit")return{datasource_type:"git",category:a,uri:e};if(t==="github"){const o=e.match(l);return{datasource_type:"github",category:a,uri:e,backend_args:{owner:o[1],repository:o[2]}}}else throw Error(`'${t}' is not a valid datasource`)},E=(t,a)=>{var e;if(t&&((e=a.modelValue)==null?void 0:e.length)===0){const o=t.trim().replace(/\s+/g,"-").toLowerCase();a.$emit("update:modelValue",o)}};export{A as a,R as b,E as g};
