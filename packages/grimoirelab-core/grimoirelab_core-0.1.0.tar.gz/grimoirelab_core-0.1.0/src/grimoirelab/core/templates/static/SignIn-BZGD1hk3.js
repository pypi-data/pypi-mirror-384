import{_ as y,c as u,w as o,A as V,y as P,z as k,r as t,o as p,a as r,b as l,g as M,t as S,i as C}from"./index-B5gNOk1p.js";const $=k(),x={name:"SignIn",data:()=>({username:"",password:"",showPassword:!1,errorMessage:""}),computed:{disableSubmit(){return this.username.length<3||this.password.length<3}},methods:{async submit(){try{const e={username:this.username,password:this.password};await this.login(e)&&this.$router.push(this.$route.query.redirect??{name:"home"})}catch(e){e.response.data.detail?this.errorMessage=e.response.data.detail:e.response.data.errors?this.errorMessage=e.response.data.errors:this.errorMessage=e.message}},async login(e){const{username:s}=e,a=await V.auth.login(e);if(a.status===200)return P.set("gl_user",s,{sameSite:"strict",expires:14}),$.$patch({username:s}),a;{const d=await a.json();throw new Error(d.errors)}}}};function I(e,s,a,d,U,i){const c=t("v-card-title"),_=t("v-card-subtitle"),m=t("v-text-field"),f=t("v-alert"),w=t("v-btn"),v=t("v-form"),g=t("v-card-text"),b=t("v-card"),h=t("v-main");return p(),u(h,{class:"d-flex align-center"},{default:o(()=>[r(b,{class:"mx-auto pa-7",width:"500",variant:"text"},{default:o(()=>[r(c,{class:"display-1 mb-2"},{default:o(()=>s[3]||(s[3]=[l("Welcome",-1)])),_:1,__:[3]}),r(_,{class:"mb-3"},{default:o(()=>s[4]||(s[4]=[l("Please log in to continue",-1)])),_:1,__:[4]}),r(g,null,{default:o(()=>[r(v,{ref:"form"},{default:o(()=>[r(m,{modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=n=>e.username=n),label:"Username",id:"username",outlined:"",dense:""},null,8,["modelValue"]),r(m,{modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=n=>e.password=n),label:"Password",id:"password","append-inner-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",outlined:"",dense:"","onClick:appendInner":s[2]||(s[2]=n=>e.showPassword=!e.showPassword)},null,8,["modelValue","append-inner-icon","type"]),e.errorMessage?(p(),u(f,{key:0,text:"",type:"error",class:"mb-4"},{default:o(()=>[l(S(e.errorMessage),1)]),_:1})):M("",!0),r(w,{color:"primary",size:"default",variant:"flat",block:"",disabled:i.disableSubmit,onClick:C(i.submit,["prevent"])},{default:o(()=>s[5]||(s[5]=[l(" Log in ",-1)])),_:1,__:[5]},8,["disabled","onClick"])]),_:1},512)]),_:1})]),_:1})]),_:1})}const z=y(x,[["render",I]]);export{z as default};
