import{C as T}from"./Container-CLJQvqnD.js";import{I}from"./ItemsListing-C_NjfGm_.js";import{T as $}from"./Toolbar-GfWaAZNh.js";import{W as d}from"./WidgetRow-BWvPySYj.js";import{d as A,r as v,ae as b,m as V,s as a,q as L,c as g,b as c,w,o as i,h as n,e as m,u as l,bs as C,F as B,g as O,bt as R,M as o,bu as K,v as U}from"./index-BhOyEZK_.js";import{V as D}from"./VTextField-Sp-MxMBq.js";import"./index-CBho6rsP.js";import"./VContainer-DKHNP7rI.js";/* empty css              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Button-CKoakfK8.js";import"./VBtn-BOIOydWK.js";import"./ListItem-DC58B-Oa.js";import"./NowPlayingBadge.vue_vue_type_style_index_0_lang-BBvJ2GE2.js";import"./VInput-CthlhD7f.js";import"./MediaItemThumb-CbztwwtB.js";import"./PanelviewItemCompact-0b7dnUhV.js";import"./VSpacer-C-Bv7Ge7.js";import"./VInfiniteScroll-hhgaPcVh.js";import"./layout-D8AfXc1V.js";import"./VRow-CoIuIaw9.js";import"./VVirtualScroll-Cb6ed4Ze.js";import"./VAlert-BbF_x8Sn.js";import"./VToolbar-B9zhRGbf.js";const F={key:1},M={key:2},ne=A({__name:"Search",setup(P){const p=v(!1),t=v(),s=v(!1),f=v();b(()=>a.globalSearchTerm,()=>{clearTimeout(f.value),f.value=setTimeout(()=>{y(a.globalSearchTerm,a.globalSearchType)},1e3)},{immediate:!0}),b(()=>a.globalSearchType,()=>{y(a.globalSearchTerm,a.globalSearchType)});const y=async function(e,u){s.value=!0,localStorage.setItem("globalsearch",e||"");const r=a.globalSearchType?50:8,k=u?[u]:void 0;e?t.value=await U.search(e,k,r):t.value=void 0,s.value=!1};V(()=>{if(!a.globalSearchTerm){const e=localStorage.getItem("globalsearch");e&&e!=="null"&&(a.globalSearchTerm=e)}});const h=function(e){e.ctrlKey||e.altKey||e.metaKey||(!p.value&&e.key=="Backspace"&&a.globalSearchTerm?a.globalSearchTerm=a.globalSearchTerm.slice(0,-1):!p.value&&e.key.length==1&&(a.globalSearchTerm+=e.key))};document.addEventListener("keyup",h),L(()=>{document.removeEventListener("keyup",h)});const S=function(e){return t.value?e==o.TRACK?t.value.tracks:e==o.ARTIST?t.value.artists:e==o.ALBUM?t.value.albums:e==o.PLAYLIST?t.value.playlists:e==o.PODCAST?t.value.podcasts:e==o.AUDIOBOOK?t.value.audiobooks:e==o.RADIO?t.value.radio:[]:[]};return(e,u)=>(i(),g("section",null,[c($,{icon:"mdi-magnify",title:e.$t("global_search")},null,8,["title"]),c(T,{variant:"default"},{default:w(()=>[c(D,{id:"searchInput",modelValue:l(a).globalSearchTerm,"onUpdate:modelValue":u[0]||(u[0]=r=>l(a).globalSearchTerm=r),clearable:"","prepend-inner-icon":"mdi-magnify",label:e.$t("type_to_search"),"hide-details":"",variant:"outlined",onFocus:u[1]||(u[1]=r=>p.value=!0),onBlur:u[2]||(u[2]=r=>p.value=!1)},null,8,["modelValue","label"]),c(C,{modelValue:l(a).globalSearchType,"onUpdate:modelValue":u[3]||(u[3]=r=>l(a).globalSearchType=r),style:{"margin-top":"10px","margin-left":"10px"}},{default:w(()=>[(i(!0),g(B,null,O([void 0,l(o).TRACK,l(o).ARTIST,l(o).ALBUM,l(o).PLAYLIST,l(o).PODCAST,l(o).AUDIOBOOK,l(o).RADIO],r=>(i(),n(R,{key:r,text:e.$t(r?r+"s":"searchtype_all"),value:r},null,8,["text","value"]))),128))]),_:1},8,["modelValue"]),s.value?(i(),n(K,{key:0,color:"accent",height:"4",indeterminate:"",rounded:"",style:{"margin-top":"15px"}})):m("",!0),l(a).globalSearchType?s.value?m("",!0):(i(),g("div",M,[c(I,{itemtype:`${l(a).globalSearchType}s`,"show-provider":!0,"show-favorites-only-filter":!1,"show-select-button":!1,"show-refresh-button":!1,"load-items":async r=>S(l(a).globalSearchType),title:e.$t(`${l(a).globalSearchType}s`),"allow-key-hooks":!1,"show-search-button":!1,"infinite-scroll":!0,"sort-keys":[],style:{padding:"0"}},null,8,["itemtype","load-items","title"])])):(i(),g("div",F,[t.value&&!s.value?(i(),n(d,{key:0,"widget-row":{title:e.$t("tracks"),icon:"mdi-file-music",items:t.value.tracks}},null,8,["widget-row"])):m("",!0),t.value&&!s.value?(i(),n(d,{key:1,"widget-row":{title:e.$t("artists"),icon:"mdi-account-music",items:t.value.artists}},null,8,["widget-row"])):m("",!0),t.value&&!s.value?(i(),n(d,{key:2,"widget-row":{title:e.$t("albums"),icon:"mdi-album",items:t.value.albums}},null,8,["widget-row"])):m("",!0),t.value&&!s.value?(i(),n(d,{key:3,"widget-row":{title:e.$t("playlists"),icon:"mdi-playlist-music",items:t.value.playlists}},null,8,["widget-row"])):m("",!0),t.value&&!s.value?(i(),n(d,{key:4,"widget-row":{title:e.$t("podcasts"),icon:"mdi-podcast",items:t.value.podcasts}},null,8,["widget-row"])):m("",!0),t.value&&!s.value?(i(),n(d,{key:5,"widget-row":{title:e.$t("audiobooks"),icon:"mdi-book-play-outline",items:t.value.audiobooks}},null,8,["widget-row"])):m("",!0),t.value&&!s.value?(i(),n(d,{key:6,"widget-row":{title:e.$t("radios"),icon:"mdi-radio",items:t.value.radio}},null,8,["widget-row"])):m("",!0)]))]),_:1})]))}});export{ne as default};
