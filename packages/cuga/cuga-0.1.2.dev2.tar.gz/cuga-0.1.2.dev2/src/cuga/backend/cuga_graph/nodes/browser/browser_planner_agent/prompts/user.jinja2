{% if variables_history %}
<variables_history>
Use this variable history in order to get values based on original task and current step.
---
{{variables_history}}
</variables_history>
{% endif %}

**Previous steps**:
{% for item in stm_steps_history[:-1] %}
{{ loop.index }}. {{ item }}
{% endfor %}

**Last step**: {{ stm_steps_history[-1] }}
**Last step thoughts**:
"""
{% if previous_steps|length > 0 -%}
{{ previous_steps[-1]['thoughts'] }}
{% endif-%}
"""

---

**Current URL**: {{url}}.

**Elements accessibility tree**:
"""
{{elements_as_string}}
"""

**Original task**:
"""
{{sub_task}}
{% if task_analyzer_output['navigation_paths'] and task_analyzer_output['navigation_paths']['approaches']|length > 0 -%}

**Alternative navigation paths (Sorted by most optimal):**
{% for item in task_analyzer_output['navigation_paths']['approaches'] -%}
{{ loop.index }}. {{ item['approach'] }}
{% endfor -%}
{% endif -%}
"""