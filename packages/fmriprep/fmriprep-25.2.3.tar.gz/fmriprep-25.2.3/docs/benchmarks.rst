.. include:: links.rst

----------------------
Performance benchmarks
----------------------

Datasets and commands
---------------------

Datasets
~~~~~~~~
+------------+----------------------------------------------------------------------------------------+
| Dataset    | Description                                                                            |
+============+========================================================================================+
| A          | 6 T1w, 3 T2w, 2 PhaseDiff, 4 SE-BOLD (195 volumes / series; total 784), 4 sbref        |
+------------+----------------------------------------------------------------------------------------+
| B          | 2 T1w, 6 PEPolar fieldmaps, 8 SE-BOLD (4274 volumes total)                             |
+------------+----------------------------------------------------------------------------------------+

fMRIPrep versions and modes
~~~~~~~~~~~~~~~~~~~~~~~~~~~

All commands took the form ``fmriprep sourcedata/raw . participant $OPTIONS``.
The specific options for each version or mode are presented in the following table.

+------------+----------------------------------------------------------------------------------------+
| Version /  | Options                                                                                |
| Mode       |                                                                                        |
+============+========================================================================================+
| 23.1.4     | ``--cifti-output --output-spaces MNI152NLin2009cAsym``                                 |
+------------+----------------------------------------------------------------------------------------+
| 23.2.0a2 / | ``--level minimal --cifti-output --output-spaces MNI152NLin2009cAsym``                 |
| fit        |                                                                                        |
+------------+----------------------------------------------------------------------------------------+
| 23.2.0a2 / | ``--level full --cifti-output --output-spaces MNI152NLin2009cAsym``                    |
| fit +      |                                                                                        |
| transform  |                                                                                        |
+------------+----------------------------------------------------------------------------------------+

Machine details
~~~~~~~~~~~~~~~

Tests were run on a desktop machine running no other significant tests.

* Processor: Intel i9-10900 CPU @ 2.80GHz, 20-core
* Memory: 64GiB
* Storage: PC801 NVMe SK hynix 2TB
* OS: Ubuntu 22.04
* Environment: Docker images published to https://hub.docker.com/r/nipreps/fmriprep/

Benchmarks
----------

Dataset A
~~~~~~~~~

+------------+---------+---------+---------+---------+---------+
| Version /  | Runtime | Scratch | Scratch | Output  | Output  |
| Mode       |         | Size    | Files   | Size    | files   |
+============+=========+=========+=========+=========+=========+
| 23.1.4     | 2h24m   | 54.8GB  | 36.8K   | 2.30GB  | 176     |
+------------+---------+---------+---------+---------+---------+
| 23.2.0a2   | 1h35m   | 2.91GB  | 5.89K   | 602MB   | 128     |
| / fit      |         |         |         |         |         |
+------------+---------+---------+---------+---------+---------+
| 23.2.0a2   | 1h47m   | 19.8GB  | 10.0K   | 6.37GB  | 206     |
| / fit +    |         |         |         |         |         |
| transform  |         |         |         |         |         |
+------------+---------+---------+---------+---------+---------+

Dataset B
~~~~~~~~~

+------------+---------+---------+---------+---------+---------+
| Version /  | Runtime | Scratch | Scratch | Output  | Output  |
| Mode       |         | Size    | Files   | Size    | files   |
+============+=========+=========+=========+=========+=========+
| 23.1.4     | 4h25m   | 121GB   | 157K    | 5.10GB  | 286     |
+------------+---------+---------+---------+---------+---------+
| 23.2.0a2   | 1h29m   | 1.88GB  | 12.0K   | 543MB   | 206     |
| / fit      |         |         |         |         |         |
+------------+---------+---------+---------+---------+---------+
| 23.2.0a2   | 2h7m    | 56.5GB  | 19.8K   | 14.7GB  | 348     |
| / fit +    |         |         |         |         |         |
| transform  |         |         |         |         |         |
+------------+---------+---------+---------+---------+---------+
