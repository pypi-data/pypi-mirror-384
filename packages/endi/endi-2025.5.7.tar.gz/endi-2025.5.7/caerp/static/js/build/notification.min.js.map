{"version":3,"file":"notification.min.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAVA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAVA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AANA;AAAA;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AAAA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAEA;AAIA;AAIA;;;;;;;;;ACzEA;AACA;;;;;;;;;AAEA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjCA;;ACAA;AACA;AACA;AACA;AACA;AACA;;ACLA;;;;;;;;;;;ACCA;AACA;;;;;;;;;;AAEA;AAIA;AACA;AAIA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACjBA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACJA;AACA;;;;;;;;;;;;AACA;AAGA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACJA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACJA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;;;;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAGA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnDA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;ACJA;AACA;;;;;;;;;;;;;;;;;;ACFA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;;ACJA;;;;;;;;;AAEA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;ACJA;AACA;AACA;;;;AAEA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;;;;;;;;;;;;ACfA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACJA;;;;;;;;;AACA;AAGA;AACA;;;;;;;;;;;;;;;;;;;;ACNA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;ACJA;AACA;AACA;AACA;;AAEA;;;;;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AClBA;;ACAA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACNA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AChDA;;;;;AEAA;AACA;AACA;AACA;AACA","sources":["webpack://enDI/./src/stores/notifications.js","webpack://enDI/./src/views/notification/components/message/Notification.vue","webpack://enDI/./src/views/notification/components/message/Notification.vue?bfd2","webpack://enDI/./src/views/notification/components/message/Notification.vue?a4e4","webpack://enDI/./src/views/notification/components/message/const.js","webpack://enDI/./src/views/notification/components/message/NotificationList.vue","webpack://enDI/./src/views/notification/components/message/NotificationList.vue?4b0e","webpack://enDI/./src/views/notification/components/message/NotificationList.vue?aff8","webpack://enDI/./src/layouts/ModalLayout.vue","webpack://enDI/./src/layouts/ModalLayout.vue?dbeb","webpack://enDI/./src/layouts/ModalLayout.vue?4c8d","webpack://enDI/./src/views/notification/components/message/NotificationModal.vue","webpack://enDI/./src/views/notification/components/message/NotificationModal.vue?7bb1","webpack://enDI/./src/views/notification/components/message/NotificationModal.vue?64bd","webpack://enDI/./src/views/notification/components/message/NotificationListComponent.vue","webpack://enDI/./src/views/notification/components/message/NotificationListComponent.vue?fce3","webpack://enDI/./src/views/notification/components/message/NotificationListComponent.vue?12ef","webpack://enDI/./src/views/notification/MessageApp.vue","webpack://enDI/./src/views/notification/MessageApp.vue?5795","webpack://enDI/./src/views/notification/MessageApp.vue?3066","webpack://enDI/./src/views/notification/components/alert/NotificationModal.vue","webpack://enDI/./src/views/notification/components/alert/NotificationModal.vue?4234","webpack://enDI/./src/views/notification/components/alert/NotificationModal.vue?66c8","webpack://enDI/./src/views/notification/AlertApp.vue","webpack://enDI/./src/views/notification/AlertApp.vue?621d","webpack://enDI/./src/views/notification/AlertApp.vue?628b","webpack://enDI/./src/views/notification/components/header_message/Notification.vue","webpack://enDI/./src/views/notification/components/header_message/Notification.vue?4743","webpack://enDI/./src/views/notification/components/header_message/Notification.vue?5da2","webpack://enDI/./src/views/notification/HeaderMessageApp.vue","webpack://enDI/./src/views/notification/HeaderMessageApp.vue?7c2d","webpack://enDI/./src/views/notification/HeaderMessageApp.vue?cc79","webpack://enDI/./src/views/notification/notification.js","webpack://enDI/webpack/bootstrap","webpack://enDI/webpack/runtime/chunk loaded","webpack://enDI/webpack/runtime/compat get default export","webpack://enDI/webpack/runtime/create fake namespace object","webpack://enDI/webpack/runtime/define property getters","webpack://enDI/webpack/runtime/ensure chunk","webpack://enDI/webpack/runtime/global","webpack://enDI/webpack/runtime/hasOwnProperty shorthand","webpack://enDI/webpack/runtime/make namespace object","webpack://enDI/webpack/runtime/runtimeId","webpack://enDI/webpack/runtime/publicPath","webpack://enDI/webpack/runtime/jsonp chunk loading","webpack://enDI/webpack/runtime/nonce","webpack://enDI/webpack/before-startup","webpack://enDI/webpack/startup","webpack://enDI/webpack/after-startup"],"sourcesContent":["import { defineStore } from 'pinia'\nimport api from '@/api/index'\n\nfunction notificationActions(name, channelName) {\n  return {\n    markRead: async function (notification) {\n      try {\n        await api.notifications.markRead(notification)\n        this.collection = this.collection.filter(\n          (item) => item.id !== notification.id\n        )\n        this.collectionMetaData.total_entries -= 1\n      } catch (error) {\n        throw new Error(error)\n      }\n    },\n    postPone: async function (notification) {\n      try {\n        await api.notifications.postPone(notification)\n        this.collection = this.collection.filter(\n          (item) => item.id !== notification.id\n        )\n        this.collectionMetaData.total_entries -= 1\n      } catch (error) {\n        throw new Error(error)\n      }\n    },\n    async handleError(error) {\n      this.loading = false\n      this.error = error\n      return error\n    },\n    async loadChannel(num_items = 5) {\n      console.log('Calling loadChannel')\n      this.loading = true\n      try {\n        ;[this.collectionMetaData, this.collection] =\n          await api.notifications.loadCollection({\n            fields: ['title', 'body'],\n            related: [],\n            pageOptions: { items_per_page: num_items, page: 0 },\n            filters: { channel: channelName },\n          })\n        this.loading = false\n        this.error = ''\n      } catch (error) {\n        throw new Error(error)\n      }\n    },\n  }\n}\n\nconst getNotificationStore = (name, channelName) =>\n  defineStore(name, {\n    state: () => ({\n      loading: true,\n      error: false,\n      collection: [],\n      collectionMetaData: { total_entries: 0 },\n    }),\n    actions: notificationActions(name, channelName),\n    getters: {\n      notificationCount: (state) => state.collectionMetaData.total_entries,\n    },\n  })\n\nexport const useNotificationMessageStore = getNotificationStore(\n  'notification-message',\n  'message'\n)\nexport const useNotificationHeaderMessageStore = getNotificationStore(\n  'notification-header_message',\n  'header_message'\n)\nexport const useNotificationAlertStore = getNotificationStore(\n  'notification-alert',\n  'alert'\n)\n","<script setup>\n  import Icon from '@/components/Icon.vue'\n  import IconSpan from '@/components/IconSpan.vue'\n\n  const props = defineProps({\n    notification: Object,\n  })\n  const emits = defineEmits(['mark_read', 'postpone'])\n\n  const iconDict = {\n    success: 'check',\n    valid: 'check-circle',\n    error: 'exclamation-triangle',\n    invalid: 'times-circle',\n    caution: 'exclamation-triangle',\n    neutral: 'info-circle',\n    calendar: 'calendar-alt',\n  }\n  const cssDict = {\n    success: 'success',\n    valid: 'success',\n    error: 'invalid',\n    caution: 'caution',\n    neutral: 'neutral',\n    calendar: 'neutral',\n  }\n  let iconName = iconDict[props.notification.status_type] || 'info-circle'\n  let cssClass = cssDict[props.notification.status_type] || 'neutral'\n  const postPone = () => {\n    emits('postpone', props.notification)\n  }\n  const markRead = () => {\n    emits('mark_read', props.notification)\n  }\n</script>\n<template>\n  <li aria-hidden=\"false\" :class=\"cssClass\">\n      <IconSpan :name=\"iconName\" alt=\"\" />\n    <div>\n      <h4 class=\"text\" v-html=\"notification.title\"></h4>\n      <div class=\"text\" v-html=\"notification.body\"></div>\n    </div>\n\n    <button\n      class=\"icon unstyled close\"\n      title=\"Fermer cette notification\"\n      aria-label=\"Fermer cette notification\"\n      @click=\"markRead\"\n    >\n      <Icon name=\"times\" />\n    </button>\n    <button\n      class=\"icon unstyled repeat\"\n      title=\"Répéter cette notification dans 7 jours\"\n      aria-label=\"Répéter cette notification dans 7 jours\"\n      @click=\"postPone\"\n    >\n      <Icon name=\"clock\" />\n    </button>\n  </li>\n</template>\n","export { default } from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Notification.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Notification.vue?vue&type=script&setup=true&lang=js\"","import script from \"./Notification.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Notification.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","export const DROPDOWN_NUM_ENTRIES = 5\n","<script setup>\n  import Notification from './Notification.vue'\n  import { DROPDOWN_NUM_ENTRIES } from './const.js'\n\n  const props = defineProps({\n    notifications: Array,\n    notificationCount: Number,\n  })\n  const emits = defineEmits(['showAll', 'mark_read', 'postpone'])\n  const unvisibleCount = Math.max(\n    props.notificationCount - DROPDOWN_NUM_ENTRIES,\n    0\n  )\n  const message = `... et ${unvisibleCount} autres notifications`\n  const showAll = () => {\n    emits('showAll')\n    return false\n  }\n</script>\n<template>\n  <ul class=\"notifications\">\n    <Notification\n      v-for=\"notification of notifications.slice(0, DROPDOWN_NUM_ENTRIES)\"\n      :key=\"notification.id\"\n      :notification=\"notification\"\n      @mark_read=\"(notification) => $emit('mark_read', notification)\"\n      @postpone=\"(notification) => $emit('postpone', notification)\"\n    />\n    <li v-if=\"unvisibleCount\" class=\"text_more\">\n      <div>\n        <small>{{ message }}</small>\n        <br />\n        <a href=\"javascript:void(0);\" @click=\"showAll\"\n          >Voir toutes les notifications</a\n        >\n      </div>\n    </li>\n  </ul>\n</template>\n","export { default } from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NotificationList.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NotificationList.vue?vue&type=script&setup=true&lang=js\"","import script from \"./NotificationList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NotificationList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\n  import Icon from '@/components/Icon.vue'\n  import { uniqueId } from '../helpers/utils'\n  const props = defineProps({\n    size: { type: String, default: 'middle' },\n  })\n  const emit = defineEmits(['close'])\n  const uid = uniqueId()\n  const onClose = () => emit('close')\n\n  const css = 'modal_view ' + 'size_' + props.size\n</script>\n<template>\n  <section :class=\"css\">\n    <div\n      role=\"dialog\"\n      :id=\"uid\"\n      aria-modal=\"true\"\n      :aria-labelledby=\"'modal' + uid + '_title'\"\n      class=\"appear\"\n    >\n      <div class=\"modal_layout\">\n        <header>\n          <button\n            type=\"button\"\n            class=\"icon only unstyled close\"\n            title=\"Masquer cette fenêtre\"\n            aria-label=\"Masquer cette fenêtre\"\n            @click=\"() => onClose()\"\n          >\n            <Icon name=\"times\"></Icon>\n          </button>\n          <h2 :id=\"'modal' + uid + '_title'\">\n            <slot name=\"header\"></slot>\n          </h2>\n        </header>\n\n        <div class=\"modal_content_layout\">\n          <div class=\"modal_content\">\n            <slot name=\"body\"></slot>\n          </div>\n\n          <footer>\n            <slot name=\"footer\"></slot>\n          </footer>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n","export { default } from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ModalLayout.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ModalLayout.vue?vue&type=script&setup=true&lang=js\"","import script from \"./ModalLayout.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ModalLayout.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\n  import { ref } from 'vue'\n  import { onClickOutside } from '@vueuse/core'\n\n  import { storeToRefs } from 'pinia'\n  import { useNotificationMessageStore } from '@/stores/notifications'\n  import Notification from './Notification.vue'\n  import Icon from '@/components/Icon.vue'\n  import ModalLayout from '@/layouts/ModalLayout.vue'\n\n  const emit = defineEmits(['close', 'mark_read', 'postpone'])\n  const store = useNotificationMessageStore()\n  // Load notifications destinated to the message channel\n  const { collectionMetaData, collection } = storeToRefs(store)\n\n  const modalTarget = ref(null)\n  onClickOutside(modalTarget, (event) => {\n    emit('close')\n  })\n\n  const onMarkRead = (notification) => {\n    emit('mark_read', notification)\n  }\n  const onPostpone = (notification) => {\n    emit('postpone', notification)\n  }\n  await store.loadChannel(1000)\n</script>\n<template>\n  <ModalLayout @close=\"$emit('close')\" ref=\"modalTarget\">\n    <template v-slot:header>{{ collection.length }} Notifications</template>\n    <template v-slot:body>\n      <ul class=\"notifications\">\n        <Notification\n          v-for=\"notification of collection\"\n          :key=\"notification.id\"\n          :notification=\"notification\"\n          @mark_read=\"() => onMarkRead(notification)\"\n          @postpone=\"() => onPostpone(notification)\"\n        />\n      </ul>\n    </template>\n    <template v-slot:footer>\n      <button\n        type=\"button\"\n        @click=\"$emit('close')\"\n        title=\"Fermer cette fenêtre\"\n        aria-label=\"Fermer cette fenêtre\"\n      >\n        Fermer\n      </button>\n    </template>\n  </ModalLayout>\n</template>\n","export { default } from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NotificationModal.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NotificationModal.vue?vue&type=script&setup=true&lang=js\"","import script from \"./NotificationModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NotificationModal.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\n  import { computed, ref } from 'vue'\n  import { onClickOutside } from '@vueuse/core'\n  import { storeToRefs } from 'pinia'\n\n  import { useNotificationMessageStore } from '@/stores/notifications'\n  import Icon from '@/components/Icon.vue'\n\n  import NotificationList from './NotificationList.vue'\n  import NotificationModal from './NotificationModal.vue'\n  import { DROPDOWN_NUM_ENTRIES } from './const.js'\n\n  const store = useNotificationMessageStore()\n  const { collectionMetaData, collection } = storeToRefs(store)\n  const { loadChannel, markRead, postPone } = store\n\n  let buttonTitle = computed(() =>\n    collection.value\n      ? `Afficher ${collection.value.length} notifications`\n      : 'Aucune notification'\n  )\n\n  const childrenVisible = ref(false)\n  const alertVisible = ref(false)\n\n  function toggleVisible() {\n    childrenVisible.value = !childrenVisible.value\n  }\n  function showAlert() {\n    console.log('Showing the popup with all notifications')\n    alertVisible.value = true\n    childrenVisible.value = false\n  }\n  function hideAlert() {\n    alertVisible.value = false\n    childrenVisible.value = false\n  }\n  const dropDownTarget = ref(null)\n  onClickOutside(dropDownTarget, (event) => {\n    if (!childrenVisible) return\n    if (!alertVisible.value) {\n      childrenVisible.value = false\n    }\n  })\n  const onMarkRead = (notification) => {\n    markRead(notification)\n  }\n  const onPostpone = (notification) => {\n    postPone(notification)\n  }\n  // Load notifications destinated to the message channel\n  loadChannel(DROPDOWN_NUM_ENTRIES)\n</script>\n<template>\n  <div class=\"notification_counter\">\n    <button\n      class=\"icon unstyled\"\n      :title=\"buttonTitle\"\n      :aria-label=\"buttonTitle\"\n      @click=\"toggleVisible\"\n      :disabled=\"!store.notificationCount\"\n      :key=\"store.notificationCount\"\n    >\n      <Icon name=\"bell\" />\n      <span v-if=\"store.notificationCount > 0\" class=\"bubble\">{{\n        store.notificationCount\n      }}</span>\n    </button>\n  </div>\n  <NotificationList\n    v-if=\"childrenVisible\"\n    :notifications=\"collection\"\n    :notificationCount=\"store.notificationCount\"\n    @show-all=\"showAlert\"\n    @mark_read=\"onMarkRead\"\n    @postpone=\"onPostpone\"\n    ref=\"dropDownTarget\"\n  />\n  <NotificationModal\n    v-if=\"alertVisible\"\n    ref=\"alertTarget\"\n    @close=\"hideAlert\"\n    @mark_read=\"onMarkRead\"\n    @postpone=\"onPostpone\"\n  />\n</template>\n","export { default } from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NotificationListComponent.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NotificationListComponent.vue?vue&type=script&setup=true&lang=js\"","import script from \"./NotificationListComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NotificationListComponent.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\n  import { Suspense } from 'vue'\n  import NotificationListComponent from './components/message/NotificationListComponent.vue'\n</script>\n\n<template>\n  <Suspense>\n    <NotificationListComponent />\n    <template #fallback> Chargement... </template>\n  </Suspense>\n</template>\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MessageApp.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MessageApp.vue?vue&type=script&setup=true&lang=js\"","import script from \"./MessageApp.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MessageApp.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\n  import ModalLayout from '@/layouts/ModalLayout.vue'\n\n  const props = defineProps({\n    notification: Object,\n  })\n  const emit = defineEmits(['postpone', 'mark_read'])\n</script>\n<template>\n  <ModalLayout @close=\"$emit('mark_read', notification)\">\n    <template v-slot:header><span v-html=\"notification.title\"></span></template>\n    <template v-slot:body><span v-html=\"notification.body\"></span></template>\n    <template v-slot:footer>\n      <button\n        type=\"button\"\n        class=\"btn btn-primary\"\n        @click=\"$emit('mark_read', notification)\"\n        title=\"Fermer cette fenêtre\"\n        aria-label=\"Fermer cette fenêtre\"\n      >\n        Fermer\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn btn-secondary\"\n        @click=\"$emit('postpone', notification)\"\n        title=\"Me le rappeler plus tard\"\n        aria-label=\"Me le rappeler plus tard\"\n      >\n        Plus tard\n      </button>\n    </template>\n  </ModalLayout>\n</template>\n","export { default } from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NotificationModal.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NotificationModal.vue?vue&type=script&setup=true&lang=js\"","import script from \"./NotificationModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NotificationModal.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\n  import { storeToRefs } from 'pinia'\n  import { useNotificationAlertStore } from '@/stores/notifications'\n  import NotificationModal from './components/alert/NotificationModal.vue'\n\n  const store = useNotificationAlertStore()\n  const { collectionMetaData, collection } = storeToRefs(store)\n\n  const onMarkRead = (notification) => {\n    store.markRead(notification).then(() => store.loadChannel(1))\n  }\n  const onPostPone = (notification) => {\n    store.postPone(notification).then(() => store.loadChannel(1))\n  }\n\n  store.loadChannel(1)\n</script>\n<template>\n  <NotificationModal\n    v-if=\"collectionMetaData.total_entries\"\n    :notification=\"collection[0]\"\n    @mark_read=\"onMarkRead\"\n    @postpone=\"onPostPone\"\n  />\n</template>\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AlertApp.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AlertApp.vue?vue&type=script&setup=true&lang=js\"","import script from \"./AlertApp.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AlertApp.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\n  import IconSpan from '@/components/IconSpan.vue'\n  const props = defineProps({\n    notification: Object,\n  })\n  const emit = defineEmits(['mark_read'])\n  const rawHtml = props.notification.title + '<br />' + props.notification.body\n</script>\n<template>\n  <div class=\"notification\">\n    <div class=\"alert alert-warning align_center\">\n      <IconSpan name=\"exclamation-triangle\" alt=\"Attention : \" />\n      <div>\n        <strong v-html=\"rawHtml\"></strong>\n      </div>\n      <button\n        type=\"button\"\n        class=\"icon only unstyled close\"\n        title=\"Masquer ce message\"\n        aria-label=\"Masquer ce message\"\n        @click=\"$emit('mark_read', notification)\"\n      >\n        <svg class=\"\"><use href=\"/static/icons/endi.svg#times\"></use></svg>\n      </button>\n    </div>\n  </div>\n</template>\n","export { default } from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Notification.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Notification.vue?vue&type=script&setup=true&lang=js\"","import script from \"./Notification.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Notification.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\n  import { useNotificationHeaderMessageStore } from '@/stores/notifications'\n  import Notification from './components/header_message/Notification.vue'\n  import { storeToRefs } from 'pinia'\n  import { computed } from 'vue'\n\n  // Load the latest notification\n  const store = useNotificationHeaderMessageStore()\n  const { collectionMetaData, collection } = storeToRefs(store)\n  const onMarkRead = (notification) => {\n    store.markRead(notification).then(() => store.loadChannel(1))\n  }\n\n  store.loadChannel(1)\n  // collection est réactive, mais collection[0] ne l'est pas\n  // On utilise donc une valeur \"computed\" pour avoir de la réactivité\n  const notification = computed(() => {\n    return collection.value[0]\n  })\n</script>\n<template>\n  <Notification\n    v-if=\"collectionMetaData.total_entries && !loading\"\n    :notification=\"notification\"\n    @mark_read=\"onMarkRead\"\n  />\n</template>\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HeaderMessageApp.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HeaderMessageApp.vue?vue&type=script&setup=true&lang=js\"","import script from \"./HeaderMessageApp.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HeaderMessageApp.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { startApp } from '@/helpers/utils'\nimport MessageApp from './MessageApp.vue'\nimport AlertApp from './AlertApp.vue'\nimport HeaderMessageApp from './HeaderMessageApp.vue'\n\nconst messageApp = startApp(MessageApp, 'vue-notification-message-app')\nconst alertApp = startApp(AlertApp, 'vue-notification-alert-app')\nconst headerMessageApp = startApp(\n  HeaderMessageApp,\n  'vue-notification-header_message-app'\n)\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// The chunk loading function for additional chunks\n// Since all referenced chunks are already included\n// in this file, this function is empty here.\n__webpack_require__.e = () => (Promise.resolve());","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.j = 602;","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t602: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkenDI\"] = self[\"webpackChunkenDI\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [534], () => (__webpack_require__(1065)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":[],"sourceRoot":""}