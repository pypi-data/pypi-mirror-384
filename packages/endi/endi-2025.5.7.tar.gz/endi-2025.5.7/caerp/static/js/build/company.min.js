(()=>{"use strict";var e,n,t,r={9064:(e,n,t)=>{var r=t(750),a=t(5458),l=t(641),i=t(953),o=t(136),u=t(296),c=t(467),s=t(4756),d=t.n(s),p=t(810),f=t(7437),v=t(3454),m=t(4590),g=t(9596),b=(0,v.A)("company"),h=((0,v.A)("companyList"),["id","goal","name","activities","email","phone","mobile","address","zip_code","city","country","latitude","longitude","logo","logo_id","cgv","header","header_id","decimal_to_display","internal","code_compta","general_customer_account","general_expense_account","third_party_customer_account","general_supplier_account","third_party_supplier_account","internalgeneral_customer_account","internalthird_party_customer_account","internalgeneral_supplier_account","internalthird_party_supplier_account","contribution","internalcontribution","insurance","internalinsurance","RIB","IBAN","antenne_id","follower_id","smtp_configuration","use_margin_rate_in_catalog","margin_rate","general_overhead"]),_=(0,p.nY)("company",{state:function(){return{loading:!0,error:!1,collection:[],collectionMetaData:{},companyId:null,item:{}}},actions:{setCurrentCompanyId:function(e){this.companyId=e},loadCompanies:function(e){var n=this;return(0,c.A)(d().mark(function t(){return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.loading=!0,t.abrupt("return",g.A.companies.getCompanies(e).then(function(t){var r;return e.pageOptions&&2==t.length?(n.collectionMetaData=t[0],r=t[1]):r=t,n.loading=!1,n.error="",n.collection=r,r}).catch(n.handleError));case 1:case"end":return t.stop()}},t)}))()},loadCompany:function(){var e=arguments,n=this;return(0,c.A)(d().mark(function t(){var r,a;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(a=e.length>1&&void 0!==e[1]?e[1]:null)&&(a=h),r=(r=e.length>0&&void 0!==e[0]?e[0]:null)||n.companyId){t.next=1;break}throw Error("no Id provided");case 1:return n.loading=!0,t.abrupt("return",g.A.companies.load(r,a).then(function(e){return n.loading=!1,n.error=!1,n.item=e,e}).catch(n.handleError));case 2:case"end":return t.stop()}},t)}))()},handleError:function(e){var n=this;return(0,c.A)(d().mark(function t(){return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.loading=!1,n.error=e,t.abrupt("return",Promise.reject(e));case 1:case"end":return t.stop()}},t)}))()},saveCompany:function(e){var n=this;return(0,c.A)(d().mark(function t(){var r;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=n.companyId||e.id)){t.next=1;break}return t.abrupt("return",g.A.companies.update(e,r));case 1:return t.abrupt("return",n.createCompany(e));case 2:case"end":return t.stop()}},t)}))()},createCompany:function(e){return(0,c.A)(d().mark(function n(){return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.id){n.next=1;break}throw Error("Company already exists (has an id)");case 1:return n.abrupt("return",g.A.companies.create(e));case 2:case"end":return n.stop()}},n)}))()}},getters:(0,m.Q)("company")}),y=t(33),k=t(1268),w=t(4467);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach(function(n){(0,w.A)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function A(e){return{state:function(){return{api:e,loading:!1,error:null,current:null,collection:[],collectionMetaData:{}}},actions:{loadFromNodes:(s=(0,c.A)(d().mark(function e(n){var t=this;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,Promise.all(n.map(function(){var e=(0,c.A)(d().mark(function e(n){var r,l;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,t.api.getFiles(n);case 1:l=e.sent,(r=t.collection).push.apply(r,(0,a.A)(l));case 2:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)}),loadFromNode:(u=(0,c.A)(d().mark(function e(n){var t,r,a,l,i;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.api.getFiles(n);case 1:t=e.sent,r={},t.forEach(function(e){r[e.id]||(r[e.id]=e)}),a=[],l=this.collection.map(function(e,n){return r[e.id]?(a.push(e.id),r[e.id]):e}),i=Object.values(r).filter(function(e){return!a.includes(e.id)}),this.collection=l.concat(i);case 2:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)}),addFile:(o=(0,c.A)(d().mark(function e(n){var t,r;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,console.log("Adding file from filestore"),console.log(n),e.prev=1,e.next=2,this.api.create(n);case 2:return t=e.sent,this.collection=this.collection.concat([t]),this.current=t,this.error=null,e.abrupt("return",t);case 3:e.prev=3,r=e.catch(1),this.error=r;case 4:return e.prev=4,this.loading=!1,e.finish(4);case 5:case"end":return e.stop()}},e,this,[[1,3,4,5]])})),function(e){return o.apply(this,arguments)}),addMultipleFiles:(i=(0,c.A)(d().mark(function e(n){var t,r,a=this;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Adding multiple files from filestore"),this.loading=!0,e.prev=1,console.log("Building promises"),e.next=2,Promise.all(n.map(function(e){return a.api.create(e)}));case 2:t=e.sent,this.collection=this.collection.concat(t),this.error=null,e.next=4;break;case 3:e.prev=3,r=e.catch(1),console.log(r),this.error=r;case 4:return e.prev=4,this.loading=!1,e.finish(4);case 5:case"end":return e.stop()}},e,this,[[1,3,4,5]])})),function(e){return i.apply(this,arguments)}),updateFile:(l=(0,c.A)(d().mark(function e(n,t){var r,a;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=2,this.api.update(n,t);case 2:return r=e.sent,this.collection=this.collection.map(function(e){return e.id===t?r:e}),this.current=r,this.error=null,e.abrupt("return",r);case 3:e.prev=3,a=e.catch(1),console.log(a),this.error=a;case 4:return e.prev=4,this.loading=!1,e.finish(4);case 5:case"end":return e.stop()}},e,this,[[1,3,4,5]])})),function(e,n){return l.apply(this,arguments)}),moveFile:(r=(0,c.A)(d().mark(function e(n,t){var r,a,l;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=2,this.api.moveFile(n,t);case 2:r=e.sent,a=this.collection.findIndex(function(e){return e.id===n}),this.collection[a]=r,this.current=r,this.error=null,e.next=4;break;case 3:e.prev=3,l=e.catch(1),this.error=l;case 4:return e.prev=4,this.loading=!1,e.finish(4);case 5:case"end":return e.stop()}},e,this,[[1,3,4,5]])})),function(e,n){return r.apply(this,arguments)}),downloadFile:(t=(0,c.A)(d().mark(function e(n){var t;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t="/files/".concat(n,"?action=download"),window.open(t);case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),deleteFile:(n=(0,c.A)(d().mark(function e(n){var t,r;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=2,this.api.delete(n);case 2:t=e.sent,this.collection=this.collection.filter(function(e){return e.id!==n}),this.current=t,this.error=null,e.next=4;break;case 3:e.prev=3,r=e.catch(1),this.error=r;case 4:return e.prev=4,this.loading=!1,e.finish(4);case 5:case"end":return e.stop()}},e,this,[[1,3,4,5]])})),function(e){return n.apply(this,arguments)})},getters:L({getByParentId:function(e){return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return console.log("Getting files by parent id",n),e.collection.filter(function(e){return!(e.parent_id!=n||r&&!r.includes(e.id)||t&&t.includes(e.id))})}},files:function(e){return e.collection}},(0,m.Q)("files"))};var n,t,r,l,i,o,u,s}(0,p.nY)("files",A(g.A.files));var F=(0,p.nY)("company_logo",A(g.A.company_logo)),x=(0,p.nY)("company_header",A(g.A.company_header)),R=((0,v.A)("files"),t(920)),S=t(8126),E=t(320),I=t(2323),O=t(4142),X=t(7977),B=t(6952),j=t(5979),N=t(6741),P=t(4456),W=t(2372),Q=t(3983),q={key:0,class:"layout flex"},V={class:"file-preview"},K=["href"],M=["src","alt"],T={key:0},z={key:0},D=["href"],U={key:1},G={class:"help-block"},H=["name"],Y={key:2,class:"help-block"},$=["innerHTML"],J={key:1};const Z={__name:"ImageUpload",props:{name:{type:String,required:!0},label:{type:String,default:""},downloadLabel:{type:String,default:"Choisir un fichier"},editLabel:{type:String,default:"Choisir un autre fichier"},deleteLabel:{type:String,default:"Supprimer le fichier"},icon:{type:String,default:"pen"},value:{type:Object||null,default:null},description:{type:String,default:""},fileUrl:{type:String||null,default:null},fileInfo:{type:Object||null,default:null},required:{type:Boolean||null,default:!1},maxSize:{type:Number},deletePermission:{type:Boolean||null,default:!0}},emits:["changeValue","blurValue","unsetValue"],setup:function(e,n){var t=n.emit,a=e,o=t,u=(0,Q.A)(a,o),c=u.nameRef,s=u.tagId,d=u.currentFileInfo,p=u.fileInputRef,f=(u.value,u.errorMessage),v=(u.handleBlur,u.handleChange,u.meta),m=u.onPickFile,g=u.onFilePicked,b=u.onDeleteClicked;return function(n,t){return(0,l.uX)(),(0,l.CE)("div",{class:(0,y.C4)(["form-group File file-upload",{"has-error":(0,i.R1)(v).touched&&!!(0,i.R1)(f)}])},[(0,l.bF)(N.A,{tagId:(0,i.R1)(s),required:e.required,label:e.label},null,8,["tagId","required","label"]),(0,i.R1)(d)?((0,l.uX)(),(0,l.CE)("div",q,[(0,l.Lk)("div",V,[e.fileUrl?((0,l.uX)(),(0,l.CE)("a",{key:0,href:e.fileUrl,title:"Cliquer pour télécharger le fichier","aria-label":"Cliquer pour télécharger le fichier",target:"_blank"},[e.fileInfo?((0,l.uX)(),(0,l.CE)("img",{key:0,onClick:t[0]||(t[0]=function(){return(0,i.R1)(m)&&(0,i.R1)(m).apply(void 0,arguments)}),src:e.fileUrl,alt:e.fileInfo.name,onerror:"this.style.display='none';"},null,8,M)):(0,l.Q3)("v-if",!0)],8,K)):(0,l.Q3)("v-if",!0)]),(0,i.R1)(d)?((0,l.uX)(),(0,l.CE)("div",T,[e.fileUrl?((0,l.uX)(),(0,l.CE)("span",z,[(0,l.Lk)("a",{href:e.fileUrl,title:"Cliquer pour télécharger le fichier","aria-label":"Cliquer pour télécharger le fichier",target:"_blank"},(0,y.v_)(e.fileInfo.name),9,D)])):((0,l.uX)(),(0,l.CE)("span",U,(0,y.v_)((0,i.R1)(d).name),1)),(0,l.Lk)("small",G,(0,y.v_)((0,i.R1)(r.bn)((0,i.R1)(d).size)),1),(0,l.bF)(P.A,{icon:"pen",class:"icon unstyled",onClick:(0,i.R1)(m),type:"button",label:e.editLabel,showLabel:!1},null,8,["onClick","label"]),a.fileInfo&&a.fileInfo.id?((0,l.uX)(),(0,l.Wv)(P.A,{key:2,icon:"trash-alt",class:"icon unstyled",onClick:(0,i.R1)(b),type:"button",label:e.deleteLabel,showLabel:!1},null,8,["onClick","label"])):(0,l.Q3)("v-if",!0)])):(0,l.Q3)("v-if",!0)])):((0,l.uX)(),(0,l.Wv)(P.A,{key:1,icon:"pen",class:"btn btn-info",onClick:(0,i.R1)(m),type:"button",label:e.downloadLabel,showLabel:!0},null,8,["onClick","label"])),(0,l.Lk)("input",{type:"file",name:(0,i.R1)(c),style:{display:"none"},ref_key:"fileInputRef",ref:p,accept:"image/*",onChange:t[1]||(t[1]=function(){return(0,i.R1)(g)&&(0,i.R1)(g).apply(void 0,arguments)})},null,40,H),e.description||e.maxSize?((0,l.uX)(),(0,l.CE)("small",Y,[e.description?((0,l.uX)(),(0,l.CE)("span",{key:0,innerHTML:e.description},null,8,$)):(0,l.Q3)("v-if",!0),e.description&&e.maxSize?((0,l.uX)(),(0,l.CE)("br",J)):(0,l.Q3)("v-if",!0),(0,l.eW)(" Taille maximale : "+(0,y.v_)((0,i.R1)(r.bn)(e.maxSize)),1)])):(0,l.Q3)("v-if",!0),(0,i.R1)(v).touched&&(0,i.R1)(f)?((0,l.uX)(),(0,l.Wv)(W.A,{key:3,message:(0,i.R1)(f)},null,8,["message"])):(0,l.Q3)("v-if",!0)],2)}}};var ee=t(5467);const ne={__name:"AutonomousImageUpload",props:{name:{type:String,required:!0},label:{type:String,default:""},downloadLabel:{type:String,default:"Choisir un fichier"},editLabel:{type:String,default:"Choisir un autre fichier"},deleteLabel:{type:String,default:"Supprimer le fichier"},icon:{type:String,default:"pen"},value:{type:Number||null,default:null},description:{type:String,default:""},fileInfo:{type:Object||null,default:null},deletePermission:{type:Boolean||null,default:!0},required:{type:Boolean||null,default:!1},parentId:{type:Number,required:!0}},emits:["changeValue","blurValue"],setup:function(e,n){var t=n.emit,r=e,a=(0,i.KR)({}),o=(0,ee.i)(),u=(0,l.WQ)("fileStore-".concat(r.name)),s=t,p=(0,i.KR)(0),f=function(){var e=(0,c.A)(d().mark(function e(n){var t,a,l;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new FormData).append("upload",n),t.append("description",n.name),console.log("onFileSelected",r,r.value),!r.fileInfo||!r.fileInfo.id){e.next=2;break}return e.next=1,u.updateFile(t,r.fileInfo.id);case 1:a=e.sent,p.value=(new Date).getTime(),s("changeValue",a),e.next=4;break;case 2:return r.parentId&&t.append("parent_id",r.parentId),e.next=3,u.addFile(t);case 3:l=e.sent,s("changeValue",l);case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,c.A)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,u.deleteFile(r.fileInfo.id);case 1:s("changeValue",null);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),m=(0,l.EW)(function(){return r.fileInfo?"/files/".concat(r.fileInfo.id,"?action=download&_cache_bust=").concat(p.value):null});return(0,l.sV)((0,c.A)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,o.loadConst("config");case 1:a.value=e.sent;case 2:case"end":return e.stop()}},e)}))),function(e,n){return(0,l.uX)(),(0,l.Wv)(Z,{name:"_"+r.name,label:r.label,downloadlabel:r.downloadLabel,editlabel:r.editLabel,deletelabel:r.deletelabel,icon:r.icon,description:r.description,fileInfo:r.fileInfo,"max-size":a.value.max_allowed_file_size,onChangeValue:f,onUnsetValue:v,"file-url":m.value},null,8,["name","label","downloadlabel","editlabel","deletelabel","icon","description","fileInfo","max-size","file-url"])}}};var te=t(7546),re={class:"collapse_title title"},ae=["id","aria-expanded","title","aria-label","aria-controls"],le=["id","aria-labelledby","hidden"],ie={class:"collapse in"},oe={class:"panel-body"};const ue={__name:"Accordion",props:{initialCollapsedState:{type:Boolean,default:!0}},setup:function(e){var n=e,t=(0,i.lW)(n.initialCollapsedState);(0,l.nT)(function(){return t.value=n.initialCollapsedState});var a=(0,r.NF)("accordionPanel"),o=(0,r.NF)("accordionTitle"),u=function(){return t.value=!t.value},c=(0,l.EW)(function(){return t.value?"Afficher le contenu":"Masquer le contenu"});return function(e,n){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("h2",re,[(0,l.Lk)("a",{id:(0,i.R1)(o),href:"#","aria-expanded":!t.value,title:c.value,"aria-label":c.value,"aria-controls":(0,i.R1)(a),onClick:u},[t.value?((0,l.uX)(),(0,l.Wv)(te.A,{key:0,class:"arrow",name:"chevron-down"})):((0,l.uX)(),(0,l.Wv)(te.A,{key:1,class:"arrow",name:"chevron-up"})),(0,l.RG)(e.$slots,"title")],8,ae)]),(0,l.Lk)("div",{id:(0,i.R1)(a),class:"collapse_content","aria-labelledby":(0,i.R1)(o),hidden:t.value},[(0,l.Lk)("div",ie,[(0,l.Lk)("div",oe,[(0,l.RG)(e.$slots,"body")])])],8,le)])}}};t(5199),t(6075),t(7741),t(5775),t(1627),t(217),t(1310),t(9204),t(9311);var ce=t(8838),se=["innerHTML"];const de={__name:"RichTextArea",props:{name:{type:String,required:!0},label:{type:String,default:""},value:{type:[String,Number,Date],default:""},ariaLabel:{type:String,default:""},placeholder:{type:String,default:""},description:{type:String,default:""},required:{type:Boolean,default:!1},cssClass:{type:String,default:""},editable:{type:Boolean,default:!0}},emits:["changeValue","blurValue"],setup:function(e,n){var t=n.emit,a=e,o=t,u=(0,r.NF)(a.name),c=(0,i.lW)(a,"name"),s=((0,i.KR)(null),(0,k.Mt)(c)),d=s.value,p=s.errorMessage,f=s.handleBlur,v=s.handleChange,m=s.meta;function g(e,n){v(e),o("changeValue",n.getContent())}function b(e,n){f(e),o("blurValue",n.getContent())}var h="oxide";window.matchMedia("(prefers-color-scheme: dark)").matches&&(h="oxide-dark");var _={body_class:"form-control",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",width:"100%",language:"fr_FR",skin_url:"/fanstatic/fanstatic/js/build/tinymce-assets/skins/ui/"+h,language_url:"/fanstatic/fanstatic/js/build/tinymce-assets/langs/fr_FR.js",content_css:"/fanstatic/fanstatic/js/build/tinymce-assets/skins/ui/"+h+"/content.css",plugins:"lists advlist searchreplace visualblocks fullscreen paste",theme_advanced_resizing:!0,theme:"silver",skin:h,strict_loading_mode:!0,mode:"none",convert_fonts_to_spans:!0,paste_as_text:!0,toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor emoticons | fontsizeselect",fontsize_formats:"6pt 8pt 10pt 12pt 14pt 16pt 18pt 24pt 36pt 48pt",menubar:"edit view insert format tools table",browser_spellcheck:!0};return function(n,t){return(0,l.uX)(),(0,l.CE)("div",{class:(0,y.C4)(["form-group String",{"has-error":(0,i.R1)(m).touched&&!!(0,i.R1)(p)}])},[(0,l.bF)(N.A,{tagId:(0,i.R1)(u),required:e.required,label:e.label},null,8,["tagId","required","label"]),(0,l.bF)((0,i.R1)(ce.A),{class:(0,y.C4)(["form-control",e.cssClass]),"aria-label":e.ariaLabel,placeholder:e.placeholder,name:e.name,id:(0,i.R1)(u),init:(0,i.R1)(_),modelValue:(0,i.R1)(d),"onUpdate:modelValue":t[0]||(t[0]=function(e){return(0,i.i9)(d)?d.value=e:null}),disabled:!e.editable,required:e.required,onBlur:b,onKeyup:g},null,8,["class","aria-label","placeholder","name","id","init","modelValue","disabled","required"]),e.description?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"help-block",innerHTML:e.description},null,8,se)):(0,l.Q3)("v-if",!0),(0,i.R1)(m).touched&&(0,i.R1)(p)?((0,l.uX)(),(0,l.Wv)(W.A,{key:1,message:(0,i.R1)(p)},null,8,["message"])):(0,l.Q3)("v-if",!0)],2)}}};var pe=t(4865),fe=t(3751),ve=(t(2696),t(8061)),me=t(3481),ge=t.n(me),be={class:"form-group"},he={class:"label"},_e=["innerHTML"];const ye={__name:"LatLonMiniMap",props:{label:{type:String,default:""},ariaLabel:{type:String,default:""},value:{type:Array,default:[47.21297,-1.55104]},editable:{type:Boolean,default:!0},description:{type:String,default:"Vous pouvez déplacer le marqueur pour ajuster la position."},fallbackCenter:{type:Array,required:!0},checkboxLabel:{type:String,default:"Définir une localisation"},checkboxDescription:{type:String,default:""}},emits:["changeValue","checkboxToggled"],setup:function(e,n){return(0,c.A)(d().mark(function t(){var r,a,o,s,p,f,v,m,g,b,h,_,k,w,C,L;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.emit,f=e,v=o,m=(0,ee.i)(),g=(0,i.KR)({}),r=(0,l.E)(function(){return m.loadConst("config")}),a=(0,u.A)(r,2),s=a[0],p=a[1],t.next=1,s;case 1:return s=t.sent,p(),g.value=s,b=(0,i.KR)(ge().latLng(f.value)),h=(0,l.EW)(function(){return Boolean(b.value&&b.value.lat)}),_=(0,l.EW)(function(){return h.value?b.value:ge().latLng(f.fallbackCenter)}),k=(0,i.KR)(_.value),w=function(){return k.value=_.value},C=function(e){b.value&&(b.value=e),v("changeValue",b.value)},L=function(){var e=(0,c.A)(d().mark(function e(n){var t;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.target.checked,e.next=1,v("checkboxToggled",t);case 1:t?(b.value=ge().latLng(f.fallbackCenter),w(),window.setTimeout(function(){return window.dispatchEvent(new Event("resize"))},500)):b.value=null;case 2:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),(0,l.wB)(function(){return f.value},function(){b.value=ge().latLng(f.value),w()}),t.abrupt("return",function(n,t){return(0,l.uX)(),(0,l.CE)("div",be,[(0,l.Lk)("span",he,(0,y.v_)(e.label),1),(0,l.bo)((0,l.Lk)("div",null,[(0,l.bF)((0,i.R1)(ve.Do),{center:k.value,zoom:12,style:{height:"350px"}},{default:(0,l.k6)(function(){return[(0,l.bF)((0,i.R1)(ve.a),{url:g.value.leaflet_layer_url,attribution:'© Contributeur·ices <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a>'},null,8,["url"]),(0,l.bF)((0,i.R1)(ve.li),{"lat-lng":_.value,draggable:e.editable,"onUpdate:latLng":C},{default:(0,l.k6)(function(){return[(0,l.bF)((0,i.R1)(ve.up),null,{default:(0,l.k6)(function(){return[(0,l.bF)(j.A,{name:"location-dot","css-class":"map_location",alt:"Localisation de l'enseigne"})]}),_:1})]}),_:1},8,["lat-lng","draggable"])]}),_:1},8,["center"]),e.description?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"help-block",innerHTML:e.description},null,8,_e)):(0,l.Q3)("v-if",!0)],512),[[fe.aG,h.value]]),(0,l.bF)(pe.A,{value:h.value,name:"show_me_on_map",label:e.checkboxLabel,description:e.checkboxDescription,onChange:L},null,8,["value","label","description"])])});case 2:case"end":return t.stop()}},t)}))()}};var ke=t(933),we=t(4794),Ce=t(1275),Le={class:"alert alert-success"},Ae={class:"limited_width width60"},Fe={id:"form-accordion",class:"collapsible"},xe={class:"row form-row"},Re={class:"col-md-12"},Se={class:"row form-row"},Ee={class:"col-md-12"},Ie={class:"row form-row"},Oe={class:"col-md-12"},Xe={class:"row form-row"},Be={class:"col-md-12"},je={class:"row form-row"},Ne={class:"col-md-6"},Pe={class:"col-md-6"},We={class:"row form-row"},Qe={class:"col-md-12"},qe={class:"row form-row"},Ve={class:"col-md-6"},Ke={class:"col-md-6"},Me={class:"row form-row"},Te={class:"col-md-12"},ze={class:"row form-row"},De={class:"col-md-12 minimap"},Ue={class:"row form-row"},Ge={class:"col-md-12"},He={class:"row form-row"},Ye={class:"col-md-12"},$e={class:"row form-row"},Je={class:"col-md-12"},Ze={class:"row form-row"},en={class:"col-md-12"},nn={class:"row form-row"},tn={class:"col-md-12"},rn={key:0,class:"row form-row"},an={class:"col-md-12"},ln={key:1,class:"row form-row"},on={class:"col-md-12"},un={class:"row form-row"},cn={class:"col-md-12"},sn={key:0,class:"data_display content_vertical_padding"},dn={class:"alert alert-info"},pn={class:"icon"},fn={key:0},vn={key:1,class:"alert alert-info"},mn={key:0},gn={key:0,class:"row form-row"},bn={class:"col-md-12"},hn={class:"col-md-12"},_n={class:"col-md-12"},yn={class:"input-group"},kn={key:1,class:"row form-row"},wn={class:"col-md-12"},Cn={key:2,class:"row form-row"},Ln={class:"col-md-12"},An={key:3,class:"row form-row"},Fn={class:"col-md-12"},xn={key:4,class:"row form-row"},Rn={class:"col-md-12"},Sn={key:1},En={class:"row form-row"},In={key:0,class:"col-md-6"},On={key:1,class:"col-md-6"},Xn={key:0,class:"row form-row"},Bn={class:"col-md-12"},jn={class:"limited_width width60"},Nn=["disabled"];const Pn={__name:"CompanyForm",props:{company:{type:Object},layout:{type:Object}},emits:["saved","cancel","error"],setup:function(e,n){var t,o,s=n.emit,p=e,f=s,v=b(),m=_(),g=(0,i.KR)(v.getOptions("activities")),h=(0,i.KR)(v.getOptions("decimal_to_display")),w=(0,i.KR)(v.getOptions("deposit_options")),C=(0,i.KR)(v.getOptions("antennes_options")),L=(0,i.KR)(v.getOptions("follower_options")),A=(0,i.KR)(!1),N=(0,i.KR)(null===(t=p.company)||void 0===t?void 0:t.company_smtp_settings_id),P=(0,i.KR)(null===(o=p.company)||void 0===o?void 0:o.smtp_settings),W=(0,l.EW)(function(){var e=v.getSchema("default");return console.log("Json Schema"),console.log(e),(0,R.cp)(e)}),Q=(0,l.EW)(function(){var e=(0,R.rV)(W.value);p.company&&Object.assign(e,p.company);var n=new URLSearchParams(window.location.search).get("user_id");return n&&(e.user_id=n),console.log("Initial values"),console.log(e),e}),q=(0,k.mN)({validationSchema:W,initialValues:Q}),V=q.values,K=q.handleSubmit,M=q.setFieldValue,T=q.isSubmitting,z=q.setFieldTouched,D=q.errors,U=(0,i.KR)(!0),G=K((0,R.FP)(f,function(e){var n=new URLSearchParams(window.location.search).get("user_id");return n&&(e.user_id=n),m.saveCompany(e)}),(0,R.WS)(f,function(){return U.value=!1})),H=function(){return f("cancel")},Y=function(e){e||(e={lat:null,lng:null}),M("latitude",e.lat),z("latitude",!0),M("longitude",e.lng),z("longitude",!0)},$=function(e,n,t){M(e,t?t.id:null),z(e,!0),M(n,t),z(n,!0)},J=(0,l.EW)(function(){return function(e){return(0,R.Nw)(W.value,e)}});(0,l.Gt)(R.MQ,{getFormFieldData:J,formSchema:W,setFieldValue:function(e,n){M(e,n),z(e,!0)}});var Z=F(),ee=x();(0,l.Gt)("fileStore-logo_id",Z),(0,l.Gt)("fileStore-header_id",ee);var te=p.layout,re=p.company&&m.companyId,ae=(0,i.KR)(re?[p.company.latitude,p.company.longitude]:null),le=new r.zB(function(e,n){return(0,S.S3)(e,n,1)}),ie=function(){var e=(0,c.A)(d().mark(function e(n,t,r,a){var l,i,o,u,c;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&"FRANCE"!==a.toUpperCase()||void 0===n){e.next=4;break}return e.prev=1,l=r?"".concat(n,", ").concat(r):n,e.next=2,le.lookup(l,t);case 2:(i=e.sent).length>0&&(o=i[0],(u=o.properties.score)>.9&&(console.log("Setting map location because we have sufficient confidence in API result (score=".concat(u,")"),o),ae.value=o.geometry.coordinates.toReversed())),e.next=4;break;case 3:e.prev=3,c=e.catch(1),console.warn(c);case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(n,t,r,a){return e.apply(this,arguments)}}(),oe=(0,l.EW)(function(){return["internal","code_compta","general_customer_account","general_expense_account","third_party_customer_account","general_supplier_account","third_party_supplier_account","internalgeneral_customer_account","internalthird_party_customer_account","internalgeneral_supplier_account","internalthird_party_supplier_account","contribution","internalcontribution","insurance","internalinsurance","RIB","IBAN","antenne_id","follower_id"].some(function(e){return null!=W.value.fields[e]})});(0,l.wB)(function(){return[V.address,V.zip_code,V.city,V.country]},function(){var e=(0,c.A)(d().mark(function e(n,t){var r,a,l,i,o;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,u.A)(n,4),a=r[0],l=r[1],i=r[2],o=r[3],e.next=1,ie(a,l,i,o);case 1:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}()),(0,l.wB)(function(){return[V.smtp_configuration]},function(){var e=(0,c.A)(d().mark(function e(n){var t,r;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,u.A)(n,1),"company"==(r=t[0])?A.value=!0:"none"==r?(P.value=null,N.value=null):N.value=null;case 1:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}());var ce=function(){A.value=!0},se=function(){A.value=!1,N.value?M("smtp_configuration","company"):P.value?M("smtp_configuration","cae"):M("smtp_configuration","none")},fe=function(e){A.value=!1,N.value=e.id,P.value=e,M("smtp_configuration","company")},ve=function(){A.value=!1,N.value=null,P.value=null,M("smtp_configuration","none")};return function(n,t){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",Le,[(0,l.bF)(j.A,{name:"success",alt:""}),t[4]||(t[4]=(0,l.eW)(" Les données de la section « ",-1)),t[5]||(t[5]=(0,l.Lk)("em",null,"Informations publiques",-1)),t[6]||(t[6]=(0,l.eW)(" » apparaissent sur les devis/factures, ainsi que dans l'annuaire et la carte des enseignes (accessibles seulement en interne, à tous les membres de la CAE). ",-1))]),(0,l.bF)((0,i.R1)(te),{onSubmitForm:(0,i.R1)(G)},{title:(0,l.k6)(function(){return[(0,i.R1)(re)?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)(" Modifier l'enseigne ")],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)(" Ajouter une enseigne ")],64))]}),fields:(0,l.k6)(function(){return[(0,l.Lk)("div",Ae,[(0,l.bF)(ke.A,{errors:(0,i.R1)(D),"get-form-field-data":J.value},null,8,["errors","get-form-field-data"]),(0,l.Lk)("fieldset",null,[(0,l.Lk)("div",Fe,[(0,l.bF)(ue,{"initial-collapsed-state":!1,class:"separate_block border_left_block"},{title:(0,l.k6)(function(){return(0,a.A)(t[7]||(t[7]=[(0,l.eW)(" Informations publiques ",-1)]))}),body:(0,l.k6)(function(){return[(0,l.Lk)("div",xe,[(0,l.Lk)("div",Re,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("name"))),null,16)])]),(0,l.Lk)("div",Se,[(0,l.Lk)("div",Ee,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("goal"))),null,16)])]),(0,l.Lk)("div",Ie,[(0,l.Lk)("div",Oe,[(0,l.bF)(X.A,(0,l.v6)(J.value("activities"),{options:g.value,settings:{multiple:!0}}),null,16,["options"])])]),(0,l.Lk)("div",Xe,[(0,l.Lk)("div",Be,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("email"))),null,16)])]),(0,l.Lk)("div",je,[(0,l.Lk)("div",Ne,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("phone"))),null,16)]),(0,l.Lk)("div",Pe,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("mobile"))),null,16)])]),(0,l.Lk)("div",We,[(0,l.Lk)("div",Qe,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("address"))),null,16)])]),(0,l.Lk)("div",qe,[(0,l.Lk)("div",Ve,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("zip_code"))),null,16)]),(0,l.Lk)("div",Ke,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("city"))),null,16)])]),(0,l.Lk)("div",Me,[(0,l.Lk)("div",Te,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("country"))),null,16)])]),(0,l.Lk)("div",ze,[(0,l.Lk)("div",De,[(0,l.bF)(ye,{"fallback-center":[47.21297,-1.55104],value:ae.value,label:"Position sur la carte des enseignes","checkbox-label":"Publier la position","checkbox-description":"Si « Publier la position » est activé, l'enseigne <strong>apparaîtra sur la carte des enseignes (interne  seulement)</strong>. Notez qu'il est possible d'apparaître sur la carte sans renseigner d'adresse (ex : pour <strong>éviter qu'une adresse perso n'apparaîsse sur les devis/factures</strong>) : il suffit de déplacer le marqueur manuellement et de vider les champs d'adresse.",onChangeValue:Y,onCheckboxToggled:t[0]||(t[0]=function(e){return e&&ie((0,i.R1)(V).address,(0,i.R1)(V).zip_code,(0,i.R1)(V).country)})},null,8,["value"])])]),(0,l.Lk)("div",Ue,[(0,l.Lk)("div",Ge,[(0,l.bF)(E.A,(0,l.v6)(J.value("latitude"),{type:"hidden"}),null,16),(0,l.bF)(E.A,(0,l.v6)(J.value("longitude"),{type:"hidden"}),null,16)])]),(0,l.Lk)("div",He,[(0,l.Lk)("div",Ye,[(0,l.bF)(ne,(0,l.v6)(J.value("logo_id"),{"file-info":(0,i.R1)(V).logo,"parent-id":(0,i.R1)(m).companyId,onChangeValue:t[1]||(t[1]=function(e){return $("logo_id","logo",e)})}),null,16,["file-info","parent-id"])])])]}),_:1}),(0,l.bF)(ue,{"initial-collapsed-state":U.value,class:"separate_block border_left_block"},{title:(0,l.k6)(function(){return(0,a.A)(t[8]||(t[8]=[(0,l.eW)(" Personnalisation des documents ",-1)]))}),body:(0,l.k6)(function(){return[(0,l.Lk)("div",$e,[(0,l.Lk)("div",Je,[(0,l.bF)(ne,(0,l.v6)(J.value("header_id"),{"file-info":(0,i.R1)(V).header,"parent-id":(0,i.R1)(m).companyId,onChangeValue:t[2]||(t[2]=function(e){return $("header_id","header",e)})}),null,16,["file-info","parent-id"])])]),(0,l.Lk)("div",Ze,[(0,l.Lk)("div",en,[(0,l.bF)(de,(0,y._B)((0,l.Ng)(J.value("cgv"))),null,16)])]),(0,l.Lk)("div",nn,[(0,l.Lk)("div",tn,[(0,l.bF)(O.A,(0,l.v6)(J.value("decimal_to_display"),{options:h.value}),null,16,["options"])])]),W.value.fields.default_estimation_deposit?((0,l.uX)(),(0,l.CE)("div",rn,[(0,l.Lk)("div",an,[(0,l.bF)(O.A,(0,l.v6)(J.value("default_estimation_deposit"),{options:w.value}),null,16,["options"])])])):(0,l.Q3)("v-if",!0),W.value.fields.default_add_estimation_details_in_invoice?((0,l.uX)(),(0,l.CE)("div",ln,[(0,l.Lk)("div",on,[(0,l.bF)(pe.A,(0,y._B)((0,l.Ng)(J.value("default_add_estimation_details_in_invoice"))),null,16)])])):(0,l.Q3)("v-if",!0)]}),_:1},8,["initial-collapsed-state"]),(0,l.bF)(ue,{"initial-collapsed-state":U.value,class:"separate_block border_left_block"},{title:(0,l.k6)(function(){return(0,a.A)(t[9]||(t[9]=[(0,l.eW)(" Envoi d’e-mails ",-1)]))}),body:(0,l.k6)(function(){return[(0,l.Lk)("div",un,[(0,l.Lk)("div",cn,[P.value?((0,l.uX)(),(0,l.CE)("div",sn,[(0,l.Lk)("div",dn,[(0,l.Lk)("span",pn,[(0,l.bF)(j.A,{name:"envelope"})]),t[10]||(t[10]=(0,l.eW)(" Votre enseigne est configurée pour envoyer des mails directement depuis CAErp. Un bouton vous permet d'envoyer vos devis et factures à vos clients directement depuis l’application. ",-1))]),(0,l.Lk)("dl",null,[(0,l.Lk)("div",null,[t[11]||(t[11]=(0,l.Lk)("dt",null,"E-mail d'expédition",-1)),(0,l.Lk)("dd",null,(0,y.v_)(P.value.sender_email),1)]),(0,l.Lk)("div",null,[t[12]||(t[12]=(0,l.Lk)("dt",null,"Nom d'hôte",-1)),(0,l.Lk)("dd",null,(0,y.v_)(P.value.smtp_host)+" (port "+(0,y.v_)(P.value.smtp_port)+") ",1)]),P.value.smtp_user!=P.value.sender_email?((0,l.uX)(),(0,l.CE)("div",fn,[t[13]||(t[13]=(0,l.Lk)("dt",null,"Utilisateur",-1)),(0,l.Lk)("dd",null,(0,y.v_)(P.value.smtp_user),1)])):(0,l.Q3)("v-if",!0)])])):((0,l.uX)(),(0,l.CE)("div",vn," Si vous configurez un service d’envoi d’e-mails, un bouton vous permettra d'envoyer vos devis et factures à vos clients directement depuis l’application. ")),N.value?((0,l.uX)(),(0,l.CE)("button",{key:2,type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=function(){return ce&&ce.apply(void 0,arguments)})}," Modifier ma configuration ")):(0,l.Q3)("v-if",!0),(0,l.bF)(B.A,(0,y._B)((0,l.Ng)(J.value("smtp_configuration"))),null,16)])])]}),_:1},8,["initial-collapsed-state"]),oe.value?((0,l.uX)(),(0,l.CE)("div",mn,[(0,l.bF)(ue,{"initial-collapsed-state":U.value,class:"separate_block border_left_block"},{title:(0,l.k6)(function(){return(0,a.A)(t[14]||(t[14]=[(0,l.eW)(" Paramètres techniques (compta, gestion) ",-1)]))}),body:(0,l.k6)(function(){return[W.value.fields.internal?((0,l.uX)(),(0,l.CE)("div",gn,[(0,l.Lk)("div",bn,[(0,l.bF)(pe.A,(0,y._B)((0,l.Ng)(J.value("internal"))),null,16)])])):(0,l.Q3)("v-if",!0),((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(["code_compta","general_customer_account","general_expense_account","third_party_customer_account","general_supplier_account","third_party_supplier_account","internalgeneral_customer_account","internalthird_party_customer_account","internalgeneral_supplier_account","internalthird_party_supplier_account"],function(e){return(0,l.uX)(),(0,l.CE)(l.FK,null,[W.value.fields[e]?((0,l.uX)(),(0,l.CE)("div",{key:e,class:"row form-row"},[(0,l.Lk)("div",hn,[(0,l.bF)(E.A,(0,l.v6)({ref_for:!0},J.value(e)),null,16)])])):(0,l.Q3)("v-if",!0)],64)}),64)),((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(["contribution","internalcontribution","insurance","internalinsurance"],function(e){return(0,l.uX)(),(0,l.CE)(l.FK,null,[W.value.fields[e]?((0,l.uX)(),(0,l.CE)("div",{key:e,class:"row form-row"},[(0,l.Lk)("div",_n,[(0,l.Lk)("div",yn,[(0,l.bF)(E.A,(0,l.v6)({ref_for:!0},J.value(e),{"aria-label":J.value(e).label+" (en pour-cents)"}),null,16,["aria-label"]),t[15]||(t[15]=(0,l.Lk)("span",{class:"input-group-addon"},"%",-1))])])])):(0,l.Q3)("v-if",!0)],64)}),64)),W.value.fields.RIB?((0,l.uX)(),(0,l.CE)("div",kn,[(0,l.Lk)("div",wn,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("RIB"))),null,16)])])):(0,l.Q3)("v-if",!0),W.value.fields.IBAN?((0,l.uX)(),(0,l.CE)("div",Cn,[(0,l.Lk)("div",Ln,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("IBAN"))),null,16)])])):(0,l.Q3)("v-if",!0),W.value.fields.antenne_id?((0,l.uX)(),(0,l.CE)("div",An,[(0,l.Lk)("div",Fn,[(0,l.bF)(O.A,(0,l.v6)(J.value("antenne_id"),{options:C.value}),null,16,["options"])])])):(0,l.Q3)("v-if",!0),W.value.fields.follower_id?((0,l.uX)(),(0,l.CE)("div",xn,[(0,l.Lk)("div",Rn,[(0,l.bF)(X.A,(0,l.v6)(J.value("follower_id"),{options:L.value}),null,16,["options"])])])):(0,l.Q3)("v-if",!0)]}),_:1},8,["initial-collapsed-state"])])):(0,l.Q3)("v-if",!0),W.value.fields.general_overhead?((0,l.uX)(),(0,l.CE)("div",Sn,[(0,l.bF)(ue,{"initial-collapsed-state":U.value,class:"separate_block border_left_block"},{title:(0,l.k6)(function(){return(0,a.A)(t[16]||(t[16]=[(0,l.eW)(" Coefficient de calcul des études de prix ",-1)]))}),body:(0,l.k6)(function(){return[(0,l.Lk)("div",En,[W.value.fields.general_overhead?((0,l.uX)(),(0,l.CE)("div",In,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("general_overhead"))),null,16)])):(0,l.Q3)("v-if",!0),W.value.fields.margin_rate?((0,l.uX)(),(0,l.CE)("div",On,[(0,l.bF)(E.A,(0,y._B)((0,l.Ng)(J.value("margin_rate"))),null,16)])):(0,l.Q3)("v-if",!0)]),W.value.fields.use_margin_rate_in_catalog?((0,l.uX)(),(0,l.CE)("div",Xn,[(0,l.Lk)("div",Bn,[(0,l.bF)(pe.A,(0,y._B)((0,l.Ng)(J.value("use_margin_rate_in_catalog"))),null,16)])])):(0,l.Q3)("v-if",!0)]}),_:1},8,["initial-collapsed-state"])])):(0,l.Q3)("v-if",!0)])])])]}),buttons:(0,l.k6)(function(){return[(0,l.Lk)("div",jn,[(0,l.Lk)("button",{id:"deformsubmit",name:"submit",type:"submit",class:"btn btn-primary",value:"submit",disabled:(0,i.R1)(T)}," Valider ",8,Nn),(0,l.Lk)("button",{id:"deformcancel",name:"cancel",type:"button",class:"btn btn-default",onClick:H}," Annuler "),(0,i.R1)(!1)?((0,l.uX)(),(0,l.Wv)(I.A,{key:0,debug:(0,i.R1)(V)},null,8,["debug"])):(0,l.Q3)("v-if",!0)])]}),_:1},8,["onSubmitForm"]),A.value?((0,l.uX)(),(0,l.Wv)(we.A,{key:0,"smtp-settings-id":N.value,"company-id":e.company.id,"default-email":e.company.email,"form-config-url":"/api/v1/companies/".concat(e.company.id,"/smtp_settings?form_config=1"),layout:Ce.A,onSaved:fe,onCancel:se,onDeleted:ve},null,8,["smtp-settings-id","company-id","default-email","form-config-url"])):(0,l.Q3)("v-if",!0)],64)}}};var Wn={key:0};const Qn={__name:"CompanyFormComponent",props:{edit:{type:Boolean,default:!1},companyId:{type:Number||null,default:null},url:{type:String,required:!0},formConfigUrl:{type:String,required:!0},layout:{type:Object,default:f.A}},emits:["saved","cancel"],setup:function(e,n){return(0,c.A)(d().mark(function t(){var r,a,o,s,f,v,m,g,h,y,k,w,C,L,A,F;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return F=function(e){console.log("Company saved"),m("saved",e)},C=function(){return(C=(0,c.A)(d().mark(function e(){var n;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[h.loadConfig()],y&&(k.setCurrentCompanyId(v.companyId),n.push(k.loadCompany(v.companyId))),Promise.all(n).then(function(){return g.value=!1});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)},w=function(){return C.apply(this,arguments)},o=n.emit,v=e,m=o,g=(0,i.KR)(!0),(h=b()).setUrl(v.formConfigUrl),y=!!v.companyId,k=_(),L=(0,p.bP)(k),A=L.item,r=(0,l.E)(function(){return w()}),a=(0,u.A)(r,2),s=a[0],f=a[1],t.next=1,s;case 1:return f(),t.abrupt("return",function(n,t){return g.value?((0,l.uX)(),(0,l.CE)("div",Wn,"Chargement…")):((0,l.uX)(),(0,l.Wv)(Pn,{key:1,company:(0,i.R1)(A)||{},onSaved:F,onCancel:t[0]||(t[0]=function(e){return m("cancel")}),layout:e.layout},null,8,["company","layout"]))});case 2:case"end":return t.stop()}},t)}))()}},qn={__name:"App",setup:function(e){var n=(0,o.Dn)(),t=function(e){window.location.replace("/companies/"+e.id)},r=function(){console.log("come_from",n),n.come_from?window.location.replace(n.come_from):window.location.href=n.context_url.replace("/api/v1/","/")};return function(e,o){return(0,l.uX)(),(0,l.Wv)(l.tY,null,{fallback:(0,l.k6)(function(){return(0,a.A)(o[0]||(o[0]=[(0,l.eW)(" Chargement... ",-1)]))}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(Qn,{edit:(0,i.R1)(n).edit,"company-id":(0,i.R1)(n).company_id,url:(0,i.R1)(n).context_url,"form-config-url":(0,i.R1)(n).form_config_url,onSaved:t,onCancel:r},null,8,["edit","company-id","url","form-config-url"])])]}),_:1})}}};(0,r.Yk)(qn)}},a={};function l(e){var n=a[e];if(void 0!==n)return n.exports;var t=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(t.exports,t,t.exports,l),t.loaded=!0,t.exports}l.m=r,e=[],l.O=(n,t,r,a)=>{if(!t){var i=1/0;for(s=0;s<e.length;s++){for(var[t,r,a]=e[s],o=!0,u=0;u<t.length;u++)(!1&a||i>=a)&&Object.keys(l.O).every(e=>l.O[e](t[u]))?t.splice(u--,1):(o=!1,a<i&&(i=a));if(o){e.splice(s--,1);var c=r();void 0!==c&&(n=c)}}return n}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[t,r,a]},l.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return l.d(n,{a:n}),n},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);l.r(a);var i={};n=n||[null,t({}),t([]),t(t)];for(var o=2&r&&e;"object"==typeof o&&!~n.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(n=>i[n]=()=>e[n]);return i.default=()=>e,l.d(a,i),a},l.d=(e,n)=>{for(var t in n)l.o(n,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},l.e=()=>Promise.resolve(),l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),l.j=604,(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var n=l.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var t=n.getElementsByTagName("script");if(t.length)for(var r=t.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=t[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={604:0};l.O.j=n=>0===e[n];var n=(n,t)=>{var r,a,[i,o,u]=t,c=0;if(i.some(n=>0!==e[n])){for(r in o)l.o(o,r)&&(l.m[r]=o[r]);if(u)var s=u(l)}for(n&&n(t);c<i.length;c++)a=i[c],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(s)},t=self.webpackChunkenDI=self.webpackChunkenDI||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})(),l.nc=void 0;var i=l.O(void 0,[534],()=>l(9064));i=l.O(i)})();