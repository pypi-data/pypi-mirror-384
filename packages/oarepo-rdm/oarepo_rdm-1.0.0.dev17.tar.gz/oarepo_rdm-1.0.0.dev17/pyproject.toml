[project]
name = "oarepo-rdm"
dynamic = ["version"]
description = ""
readme = "README.md"
authors = [
    { name = "Ronald Krist", email = "krist@cesnet.cz" }
]
requires-python = ">=3.13,<3.14"

dependencies = [
    "oarepo[rdm,tests]>=14.0.0,<15.0.0",
    "oarepo-runtime>=2.0.0dev5,<3.0.0",
    "oarepo-model>=0.1.0dev17,<1.0.0",
    "oarepo-ui>=6.0.0dev1",
    "graphlib"
]

[project.urls]
Homepage = "https://github.com/oarepo/oarepo-rdm"

[project.optional-dependencies]
dev = [
    "oarepo-invenio-typing-stubs>=0.1.0dev0,<1.0.0",
    "types-PyYAML",
    "lxml-stubs",
]
tests = [
    "pytest-invenio",
]
oarepo14 = [
    "oarepo[rdm,tests]>=14.0.0,<15.0.0",
]

[project.entry-points."invenio_config.module"]
oarepo_rdm = "oarepo_rdm.initial_config"

[project.entry-points."invenio_base.apps"]
invenio_rdm_records = "invenio_rdm_records.ext:InvenioRDMRecords"
oarepo_rdm = "oarepo_rdm.ext:OARepoRDM"

[project.entry-points."invenio_base.api_apps"]
invenio_rdm_records = "invenio_rdm_records.ext:InvenioRDMRecords"
oarepo_rdm = "oarepo_rdm.ext:OARepoRDM"

[project.entry-points."invenio_base.api_blueprints"]
invenio_rdm_records = "invenio_rdm_records.views:create_records_bp"
invenio_rdm_records_record_files = "invenio_rdm_records.views:create_record_files_bp"
invenio_rdm_records_draft_files = "invenio_rdm_records.views:create_draft_files_bp"
invenio_rdm_records_ext = "invenio_rdm_records.views:blueprint"
invenio_rdm_records_parent_links = "invenio_rdm_records.views:create_parent_record_links_bp"
invenio_rdm_records_parent_grants = "invenio_rdm_records.views:create_parent_grants_bp"
invenio_rdm_records_user_access = "invenio_rdm_records.views:create_grant_user_access_bp"
invenio_rdm_records_group_access = "invenio_rdm_records.views:create_grant_group_access_bp"
invenio_rdm_iiif = "invenio_rdm_records.views:create_iiif_bp"

[project.entry-points."invenio_base.finalize_app"]
invenio_rdm_records = "invenio_rdm_records.ext:finalize_app"
oarepo_rdm = "oarepo_rdm.ext:finalize_app"

[project.entry-points."invenio_base.api_finalize_app"]
invenio_rdm_records = "invenio_rdm_records.ext:api_finalize_app"
oarepo_rdm = "oarepo_rdm.ext:finalize_app"

[project.entry-points."invenio_search.index_templates"]
oarepo_rdm_oai = "oarepo_rdm.oai.index_templates"

[project.entry-points."invenio_base.blueprints"]
oarepo_invenio_app_rdm_records = "oarepo_rdm.ui.views:create_records_blueprint"
# just to have html templates available. Does not register anything else
templates_app_rdm_records = "oarepo_rdm.ui.templates:records_blueprint"
templates_app_rdm = "oarepo_rdm.ui.templates:rdm_blueprint"
templates_app_rdm_requests = "oarepo_rdm.ui.templates:requests_blueprint"
templates_app_rdm_communities = "oarepo_rdm.ui.templates:communities_blueprint"
templates_app_rdm_users = "oarepo_rdm.ui.templates:users_blueprint"
templates_app_rdm_administration = "oarepo_rdm.ui.templates:administration_blueprint"
# reuse app rdm blueprints
invenio_rdm_records_ext = "invenio_rdm_records.views:blueprint"

[project.entry-points."invenio_search.mappings"]
oarepo_rdm_oai = "oarepo_rdm.oai.mappings"

[project.entry-points."oarepo.cli.search.init"]
install_percollators = "oarepo_rdm.oai.percolator:init_percolators"

[project.entry-points."invenio_celery.tasks"]
invenio_rdm_records_fixtures = "invenio_rdm_records.fixtures.tasks"
invenio_rdm_records_services = "invenio_rdm_records.services.tasks"
invenio_rdm_records_access_requests = "invenio_rdm_records.requests.access.tasks"
invenio_rdm_records_iiif = "invenio_rdm_records.services.iiif.tasks"
invenio_rdm_records_user_moderation = "invenio_rdm_records.requests.user_moderation.tasks"

[tool.hatch.version]
path = "oarepo_rdm/__init__.py"

[tool.hatch.build.targets.sdist]
include = [
    "/oarepo_rdm",
]

[[tool.mypy.overrides]]
follow_untyped_imports = true

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

