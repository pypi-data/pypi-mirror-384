Metadata-Version: 2.4
Name: astro_light_pollution
Version: 0.1.0
Summary: Geospatial and astronomy observation tools for AI assistants via MCP protocol
Project-URL: Homepage, https://github.com/yourusername/geospatial-astronomy-mcp
Project-URL: Documentation, https://github.com/yourusername/geospatial-astronomy-mcp#readme
Project-URL: Repository, https://github.com/yourusername/geospatial-astronomy-mcp.git
Project-URL: Bug Tracker, https://github.com/yourusername/geospatial-astronomy-mcp/issues
Author-email: Your Name <your.email@example.com>
License-Expression: MIT
Keywords: astronomy,elevation,fastmcp,geospatial,light-pollution,mcp
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Topic :: Scientific/Engineering :: Astronomy
Classifier: Topic :: Scientific/Engineering :: GIS
Requires-Python: >=3.12
Requires-Dist: aiohttp>=3.13.0
Requires-Dist: fastmcp>=2.12.4
Requires-Dist: pydantic>=2.12.2
Requires-Dist: requests>=2.32.5
Requires-Dist: selenium>=4.36.0
Provides-Extra: dev
Requires-Dist: black>=23.0.0; extra == 'dev'
Requires-Dist: pre-commit>=3.5.0; extra == 'dev'
Requires-Dist: pytest-asyncio>=0.21.0; extra == 'dev'
Requires-Dist: pytest>=7.4.0; extra == 'dev'
Requires-Dist: ruff>=0.1.0; extra == 'dev'
Description-Content-Type: text/markdown

# å¤©æ–‡å…‰æ±¡æŸ“åˆ†æ MCP æœåŠ¡å™¨

[![Python](https://img.shields.io/badge/Python-3.12+-blue.svg)](https://www.python.org/)
[![FastMCP](https://img.shields.io/badge/FastMCP-2.12.4-green.svg)](https://github.com/jlowin/fastmcp)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

ä¸€ä¸ªåŸºäº FastMCP çš„å¤©æ–‡å…‰æ±¡æŸ“åˆ†æå·¥å…·åŒ…ï¼Œä¸º AI åŠ©æ‰‹æä¾›ä¸“ä¸šçš„å…‰æ±¡æŸ“è¯„ä¼°å’Œå¤©æ–‡è§‚æµ‹æ¡ä»¶åˆ†æåŠŸèƒ½ã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒå·¥å…·
- **ç»¼åˆå¤©æ–‡è§‚æµ‹ç‚¹åˆ†æ** - è¯„ä¼°ä»»æ„åœ°ç‚¹çš„å¤©æ–‡è§‚æµ‹æ¡ä»¶
- **å¤šåœ°ç‚¹å¯¹æ¯”åˆ†æ** - å¯¹æ¯”å¤šä¸ªè§‚æµ‹ç‚¹ï¼Œæ‰¾å‡ºæœ€ä½³é€‰æ‹©
- **æµ·æ‹”æ•°æ®æŸ¥è¯¢** - è·å–ç²¾ç¡®çš„æµ·æ‹”ä¿¡æ¯
- **å…‰æ±¡æŸ“åˆ†æ** - åŸºäº Bortle ç­‰çº§çš„å…‰æ±¡æŸ“è¯„ä¼°
- **é™„è¿‘å³°å€¼æŸ¥æ‰¾** - å¯»æ‰¾å‘¨å›´çš„åˆ¶é«˜ç‚¹

### æ•°æ®æº
- **æµ·æ‹”æ•°æ®**: Open-Elevation API, USGS API
- **å…‰æ±¡æŸ“æ•°æ®**: lightpollutionmap.app (å®æ—¶çˆ¬å–)
- **æ™ºèƒ½å›é€€**: API å¤±è´¥æ—¶ä½¿ç”¨åˆæˆæ•°æ®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.12+
- Chrome/Chromium æµè§ˆå™¨ (ç”¨äº Selenium)
- uv åŒ…ç®¡ç†å™¨

### å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨ uv å®‰è£…ä¾èµ–
uv sync

# æˆ–ä½¿ç”¨ pip
pip install -e .
```

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
uv run pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
uv run pytest tests/test_main.py
uv run pytest tests/test_elevation.py
uv run pytest tests/test_pollution.py

# è¿è¡Œæµ‹è¯•å¹¶æ˜¾ç¤ºè¦†ç›–ç‡
uv run pytest --cov=src/astro_light_pollution
```

### å¯åŠ¨ MCP æœåŠ¡å™¨
```bash
# å¼€å‘æ¨¡å¼
uv run python -m astro_light_pollution

# æˆ–ä½¿ç”¨ uvx
uvx astro_light_pollution
```

## ğŸ“– API ä½¿ç”¨ç¤ºä¾‹

### 1. ç»¼åˆå¤©æ–‡è§‚æµ‹ç‚¹åˆ†æ

```python
from main import analyze_astronomy_site

# åˆ†æåŒ—äº¬å¤©æ–‡é¦†çš„è§‚æµ‹æ¡ä»¶
result = await analyze_astronomy_site(
    latitude=39.9042,
    longitude=116.4074,
    detail_level="detailed"
)

print(f"ç»¼åˆè¯„åˆ†: {result['data']['overall_score']}/10")
print(f"æµ·æ‹”: {result['data']['elevation_info']['elevation_m']}m")
print(f"å…‰æ±¡æŸ“ç­‰çº§: Bortle {result['data']['light_pollution_info']['bortle_scale']}")
print(f"é€‚åˆè§‚æµ‹: {', '.join(result['data']['best_for'])}")
```

### 2. å¤šåœ°ç‚¹å¯¹æ¯”

```python
from main import compare_observation_sites

locations = [
    {"name": "åŒ—äº¬å¤©æ–‡é¦†", "latitude": 39.9042, "longitude": 116.4074},
    {"name": "æ€€æŸ”è§‚æµ‹ç«™", "latitude": 40.3719, "longitude": 116.6327},
    {"name": "å¯†äº‘æ°´åº“", "latitude": 40.3769, "longitude": 116.8419}
]

result = await compare_observation_sites(locations)

print(f"æœ€ä½³è§‚æµ‹ç‚¹: {result['data']['best_choice']['name']}")
print(f"æ¨èç†ç”±: {result['data']['best_choice']['reasoning']}")
```

### 3. æµ·æ‹”æ•°æ®æŸ¥è¯¢

```python
from src.elevation import get_elevation

result = await get_elevation(39.9042, 116.4074)
print(f"æµ·æ‹”: {result['elevation_m']}m (æ•°æ®æº: {result['source']})")
```

### 4. å…‰æ±¡æŸ“åˆ†æ

```python
from src.pollution import analyze_light_pollution

result = await analyze_light_pollution(39.9042, 116.4074, zoom_level=7)
print(f"Bortle ç­‰çº§: {result['data']['bortle_scale']}")
print(f"å¯è§æ˜Ÿæ˜Ÿ: {result['data']['visible_stars']}")
print(f"é“¶æ²³å¯è§æ€§: {result['data']['milky_way_visibility']}")
```

### 5. è§‚æµ‹æ¡ä»¶è¯„ä¼°

```python
from src.pollution import get_observation_conditions

result = await get_observation_conditions(39.9042, 116.4074)
print(f"å¯è§æ€§è¯„çº§: {result['data']['visibility_rating']}")
print(f"æœ€ä½³è§‚æµ‹ç±»å‹: {', '.join(result['data']['best_observation_types'])}")
print(f"å»ºè®®: {result['data']['recommendations'][0]}")
```

## ğŸ“Š è¯„åˆ†ç³»ç»Ÿ

### ç»¼åˆè¯„åˆ†ç®—æ³• (1-10åˆ†)
- **å…‰æ±¡æŸ“å½±å“** (æƒé‡ 60%): Bortle ç­‰çº§è¶Šä½å¾—åˆ†è¶Šé«˜
- **æµ·æ‹”å½±å“** (æƒé‡ 20%): æµ·æ‹”è¶Šé«˜å¾—åˆ†è¶Šé«˜
- **å…¶ä»–å› ç´ ** (æƒé‡ 20%): åŒ…å«åœ°ç†ä½ç½®ã€äº¤é€šä¾¿åˆ©æ€§ç­‰

### Bortle ç­‰çº§è¯´æ˜
| ç­‰çº§ | æè¿° | é€‚ç”¨è§‚æµ‹ç±»å‹ |
|------|------|-------------|
| 1-2 | ä¼˜ç§€æš—ç©ºåœ°ç‚¹ | æ·±ç©ºå¤©ä½“æ‘„å½±ã€æ˜Ÿç³»è§‚æµ‹ |
| 3-4 | ä¹¡æ‘æš—ç©ºåœ°ç‚¹ | äº®æ˜Ÿå›¢ã€è¡Œæ˜Ÿè§‚æµ‹ |
| 5-6 | éƒŠåŒºå¤©ç©º | æœˆçƒè§‚æµ‹ã€äº®æ˜Ÿè§‚æµ‹ |
| 7-8 | åŸå¸‚å¤©ç©º | å¤©è±¡æ•™è‚²ã€åŸºç¡€è®¤çŸ¥ |
| 9 | å¸‚ä¸­å¿ƒå¤©ç©º | åŸºæœ¬æ— æ³•è¿›è¡Œå¤©æ–‡è§‚æµ‹ |

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
astro_light_pollution/
â”œâ”€â”€ main.py                     # FastMCP æœåŠ¡å™¨æ ¸å¿ƒ (ä¸»å…¥å£)
â”œâ”€â”€ src/                        # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py             # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ elevation.py            # æµ·æ‹”æ•°æ®å¼•æ“
â”‚   â””â”€â”€ pollution.py            # å…‰æ±¡æŸ“åˆ†æå¼•æ“
â”œâ”€â”€ tests/                      # æµ‹è¯•å¥—ä»¶
â”‚   â”œâ”€â”€ test_main.py
â”‚   â”œâ”€â”€ test_elevation.py
â”‚   â””â”€â”€ test_pollution.py
â”œâ”€â”€ pyproject.toml              # é¡¹ç›®é…ç½®
â”œâ”€â”€ README.md                   # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ uv.lock                     # ä¾èµ–é”å®šæ–‡ä»¶
```

### æ·»åŠ æ–°å·¥å…·
1. åœ¨ç›¸åº”çš„æ¨¡å—ä¸­å®ç°å·¥å…·å‡½æ•°
2. ä½¿ç”¨ `@mcp.tool` è£…é¥°å™¨æ³¨å†Œå·¥å…·
3. ç¼–å†™å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹
4. æ›´æ–°æ–‡æ¡£

### æµ‹è¯•è§„èŒƒ
```python
@pytest.mark.asyncio
async def test_new_tool_function(self):
    """æµ‹è¯•æ–°å·¥å…·åŠŸèƒ½"""
    # å‡†å¤‡æµ‹è¯•æ•°æ®
    # æ‰§è¡Œå·¥å…·å‡½æ•°
    # éªŒè¯ç»“æœ
    pass
```

## ğŸ“‹ ä¾èµ–åˆ—è¡¨

### æ ¸å¿ƒä¾èµ–
- **fastmcp>=2.12.4** - MCP æœåŠ¡å™¨æ¡†æ¶
- **aiohttp>=3.13.0** - å¼‚æ­¥ HTTP å®¢æˆ·ç«¯
- **pydantic>=2.12.2** - æ•°æ®éªŒè¯
- **selenium>=4.36.0** - Web è‡ªåŠ¨åŒ–
- **requests>=2.32.5** - HTTP è¯·æ±‚åº“

### å¼€å‘ä¾èµ–
- **pytest>=7.4.0** - æµ‹è¯•æ¡†æ¶
- **pytest-asyncio>=0.21.0** - å¼‚æ­¥æµ‹è¯•æ”¯æŒ
- **pytest-cov>=4.1.0** - æµ‹è¯•è¦†ç›–ç‡

## ğŸš¨ æ³¨æ„äº‹é¡¹

### æ•°æ®è·å–é™åˆ¶
- å…‰æ±¡æŸ“æ•°æ®éœ€è¦ Chrome æµè§ˆå™¨æ”¯æŒ
- éƒ¨åˆ†åœ°åŒº API æ•°æ®å¯èƒ½ä¸å‡†ç¡®
- ç½‘ç»œä¸ç¨³å®šæ—¶ä¼šå½±å“æ•°æ®è·å–

### é”™è¯¯å¤„ç†
- æ‰€æœ‰ API è°ƒç”¨éƒ½æœ‰é‡è¯•æœºåˆ¶
- å¤±è´¥æ—¶æä¾›é»˜è®¤å€¼æˆ–ä¼°ç®—æ•°æ®
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•

### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨å¼‚æ­¥å¹¶å‘å¤„ç†
- HTTP ä¼šè¯å¤ç”¨
- åˆç†çš„æ‰¹é‡æŸ¥è¯¢é™åˆ¶

## ğŸ› ï¸ é…ç½®ä¿¡æ¯

### åœ¨ Cherry Studio / Cursor / Codex ä¸­é…ç½® MCP æœåŠ¡å™¨

è¦åœ¨è¿™äº›æ”¯æŒ MCP çš„å¼€å‘ç¯å¢ƒä¸­é…ç½® astro_light_pollution æœåŠ¡å™¨ï¼š

```json
{
  "mcpServers": {
    "astro_light_pollution": {
      "command": "uvx",
      "args": [
        "astro_light_pollution"
      ],
      "timeout": 30000,
      "retries": 3
    }
  }
}
```

æˆ–è€…ä½¿ç”¨ HTTP æ¨¡å¼ï¼š

```json
{
  "mcpServers": {
    "astro_light_pollution_http": {
      "url": "http://localhost:8000",
      "startup": {
        "command": "uvx",
        "args": [
          "astro_light_pollution",
          "--transport", 
          "streamable-http",
          "--port", 
          "8000"
        ]
      },
      "timeout": 30000
    }
  }
}
```

å°†ä¸Šè¿°é…ç½®æ·»åŠ åˆ°æ‚¨çš„ç¼–è¾‘å™¨è®¾ç½®ä¸­ï¼Œå³å¯åœ¨ Cherry Studio / Cursor / Codex ä¸­ä½¿ç”¨ astro_light_pollution æä¾›çš„å¤©æ–‡è§‚æµ‹å·¥å…·ã€‚

æ³¨æ„ï¼šPython åŒ…åå’Œå‘½ä»¤è¡Œå·¥å…·åå‡ä¸º astro_light_pollution (ä¸‹åˆ’çº¿)ï¼Œä¿æŒä¸€è‡´ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
4. æäº¤ä»£ç æ›´æ”¹
5. è¿è¡Œæµ‹è¯•ç¡®ä¿é€šè¿‡
6. æäº¤ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [FastMCP](https://github.com/jlowin/fastmcp) - MCP æœåŠ¡å™¨æ¡†æ¶
- [Open-Elevation](https://api.open-elevation.com/) - æµ·æ‹”æ•°æ® API
- [USGS](https://nationalmap.gov/epqs/) - ç¾å›½åœ°è´¨è°ƒæŸ¥å±€æ•°æ®
- [Light Pollution Map](https://lightpollutionmap.app/) - å…‰æ±¡æŸ“æ•°æ®å¯è§†åŒ–

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ Issue
- å‘é€é‚®ä»¶
- å‚ä¸è®¨è®º

---

**è®©æ¯ä¸€æ¬¡æ˜Ÿç©ºè§‚æµ‹éƒ½æœ‰ç§‘å­¦æ•°æ®æ”¯æ’‘ï¼** âœ¨