# åœ°ç†å¤©æ–‡è§‚æµ‹å·¥å…·åŒ…MCP - æœ€ç»ˆç‰ˆPRDæ–‡æ¡£

## ğŸ“‹ äº§å“æ¦‚è¿°

### **äº§å“åç§°**
GeoSpatial Astronomy MCP Server (åœ°ç†å¤©æ–‡è§‚æµ‹MCPæœåŠ¡å™¨)

### **äº§å“æ„¿æ™¯**
ä¸ºAIåŠ©æ‰‹æä¾›ä¸“ä¸šçš„åœ°ç†å¤©æ–‡è§‚æµ‹æ•°æ®è·å–å’Œåˆ†æèƒ½åŠ›ï¼Œå¸®åŠ©å¤©æ–‡çˆ±å¥½è€…å’Œç ”ç©¶äººå‘˜è¿›è¡Œè§‚æµ‹ç‚¹é€‰å€å’Œå¤©æ–‡æ¡ä»¶è¯„ä¼°ã€‚

### **æ ¸å¿ƒä»·å€¼ä¸»å¼ **
- **ä¸€ç«™å¼å¤©æ–‡é€‰å€**ï¼šé›†æˆåœ°å½¢ã€æµ·æ‹”ã€å…‰æ±¡æŸ“ç­‰å¤šç»´åº¦æ•°æ®
- **ä¸“ä¸šæ•°æ®æ”¯æŒ**ï¼šåŸºäºæƒå¨æ•°æ®æºçš„ç§‘å­¦åˆ†æç»“æœ
- **AIåŸç”Ÿé›†æˆ**ï¼šé€šè¿‡MCPåè®®æ— ç¼é›†æˆåˆ°AIåŠ©æ‰‹å·¥ä½œæµ
- **å¿«é€Ÿå†³ç­–æ”¯æŒ**ï¼šä¸ºå¤©æ–‡è§‚æµ‹æä¾›æ•°æ®é©±åŠ¨çš„é€‰å€å»ºè®®

## ğŸ¯ ç›®æ ‡ç”¨æˆ·ä¸ä½¿ç”¨åœºæ™¯

### **ä¸»è¦ç”¨æˆ·ç¾¤ä½“**
1. **å¤©æ–‡çˆ±å¥½è€…** - ä¸ªäººå¤©æ–‡è§‚æµ‹é€‰å€
2. **å¤©æ–‡æ‘„å½±å¸ˆ** - å¯»æ‰¾æœ€ä½³æ‹æ‘„åœ°ç‚¹
3. **å¤©æ–‡æ•™è‚²å·¥ä½œè€…** - æ•™å­¦å’Œå®è·µæ”¯æŒ
4. **ä¸šä½™å¤©æ–‡å›¢ä½“** - é›†ä½“è§‚æµ‹æ´»åŠ¨è§„åˆ’

### **æ ¸å¿ƒä½¿ç”¨åœºæ™¯**
- **è§‚æµ‹ç‚¹è¯„ä¼°**ï¼šè¯„ä¼°ç‰¹å®šä½ç½®çš„å¤©æ–‡è§‚æµ‹æ¡ä»¶
- **å¤šåœ°ç‚¹æ¯”è¾ƒ**ï¼šå¯¹æ¯”å¤šä¸ªå€™é€‰åœ°ç‚¹çš„è§‚æµ‹è´¨é‡
- **è·¯çº¿è§„åˆ’**ï¼šä¸ºç§»åŠ¨è§‚æµ‹è§„åˆ’æœ€ä½³è·¯çº¿
- **æ•™å­¦æ¼”ç¤º**ï¼šå±•ç¤ºåœ°ç†å› ç´ å¯¹å¤©æ–‡è§‚æµ‹çš„å½±å“

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„è®¾è®¡

### **æŠ€æœ¯æ ˆé€‰æ‹©**
- **åŒ…ç®¡ç†å™¨**ï¼šuv (è¶…é«˜æ€§èƒ½PythonåŒ…ç®¡ç†)
- **MCPæ¡†æ¶**ï¼šFastMCP (æœ€æ–°ç‰ˆæœ¬ >= 2.12.4)
- **æ ¸å¿ƒè¯­è¨€**ï¼šPython 3.12+ (æ¨èä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆ)
- **å¼‚æ­¥å¤„ç†**ï¼šasyncio + aiohttp
- **æ•°æ®å¤„ç†**ï¼šåŸç”ŸPython + æœ€å°åŒ–ä¾èµ–

### **FastMCP v2.12.4 æœ€æ–°ç‰ˆæœ¬ç‰¹æ€§**
- **ç‰ˆæœ¬è¦æ±‚**ï¼šFastMCP >= 2.12.4 (æœ€æ–°ç¨³å®šç‰ˆï¼Œå‘å¸ƒäº2025å¹´9æœˆ26æ—¥)
- **Pythonè¦æ±‚**ï¼šPython 3.10+ (æœ€ä½è¦æ±‚)
- **ç®€åŒ–API**ï¼š`@mcp.tool` è£…é¥°å™¨ï¼Œæ›´Pythonicçš„æ¥å£è®¾è®¡
- **å¼‚æ­¥æ”¯æŒ**ï¼šåŸç”Ÿæ”¯æŒasync/awaitæ¨¡å¼
- **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„ç±»å‹æç¤ºæ”¯æŒ
- **ä¼ä¸šçº§è®¤è¯**ï¼šå†…ç½®Googleã€GitHubã€Azureã€Auth0ã€WorkOSç­‰è®¤è¯æ”¯æŒ
- **å®¢æˆ·ç«¯åº“**ï¼šå®Œæ•´çš„FastMCPå®¢æˆ·ç«¯å®ç°
- **éƒ¨ç½²é€‰é¡¹**ï¼šæ”¯æŒæœ¬åœ°ã€FastMCP Cloudã€è‡ªæ‰˜ç®¡ç­‰å¤šç§éƒ¨ç½²æ–¹å¼
- **æµ‹è¯•å·¥å…·**ï¼šå†…ç½®æµ‹è¯•å·¥å…·å’Œå®ç”¨ç¨‹åº
- **åè®®å…¼å®¹**ï¼šä¸¥æ ¼éµå¾ªMCPåè®®è§„èŒƒ

### **uvæŠ€æœ¯ä¼˜åŠ¿**
- **æè‡´æ€§èƒ½**ï¼šæ¯”pipå¿«10-100å€çš„ä¾èµ–å®‰è£…é€Ÿåº¦
- **ç°ä»£åŒ–è®¾è®¡**ï¼šRustç¼–å†™çš„é«˜æ€§èƒ½åŒ…ç®¡ç†å™¨
- **å…¼å®¹æ€§å¥½**ï¼šå®Œå…¨å…¼å®¹ç°æœ‰Pythonç”Ÿæ€
- **ä¾èµ–ç®¡ç†**ï¼šç²¾ç¡®çš„ä¾èµ–ç‰ˆæœ¬æ§åˆ¶å’Œå†²çªè§£å†³
- **è·¨å¹³å°æ”¯æŒ**ï¼šWindowsã€macOSã€Linuxå…¨å¹³å°æ”¯æŒ

## ğŸ“¦ ç®€åŒ–é¡¹ç›®ç»“æ„è®¾è®¡

### **æç®€é¡¹ç›®æ¶æ„** (åŸºäº3ä¸ªæ ¸å¿ƒè„šæœ¬åŸåˆ™)

```
geospatial-astronomy-mcp/
â”œâ”€â”€ pyproject.toml              # uvé¡¹ç›®é…ç½® + åŒ…å‘å¸ƒé…ç½®
â”œâ”€â”€ README.md                   # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ LICENSE                     # å¼€æºè®¸å¯è¯
â”œâ”€â”€ .gitignore                  # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ src/
â”‚   â””â”€â”€ geospatial_mcp/         # ä¸»åŒ…ç›®å½•
â”‚       â”œâ”€â”€ __init__.py         # åŒ…åˆå§‹åŒ–ï¼Œæš´éœ²ä¸»è¦API
â”‚       â”œâ”€â”€ main.py             # ğŸ¯ MCPæœåŠ¡å™¨ä¸»å…¥å£ (1/3)
â”‚       â”œâ”€â”€ elevation.py        # ğŸ¯ æµ·æ‹”æ•°æ®å·¥å…· (2/3)
â”‚       â””â”€â”€ pollution.py        # ğŸ¯ å…‰æ±¡æŸ“åˆ†æå·¥å…· (3/3)
â”œâ”€â”€ reference/                  # å‚è€ƒå®ç°ï¼ˆç°æœ‰è„šæœ¬ï¼‰
â”‚   â”œâ”€â”€ elevation_api.py
â”‚   â”œâ”€â”€ contour_extractor.py
â”‚   â””â”€â”€ selenium_light_pollution_scraper.py
â”œâ”€â”€ tests/                      # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_elevation.py
â”‚   â”œâ”€â”€ test_pollution.py
â”‚   â””â”€â”€ test_main.py
â””â”€â”€ docs/                       # ç®€åŒ–æ–‡æ¡£
    â”œâ”€â”€ README.md               # å¿«é€Ÿå¼€å§‹æŒ‡å—
    â””â”€â”€ examples.md             # ä½¿ç”¨ç¤ºä¾‹
```

### **3ä¸ªæ ¸å¿ƒè„šæœ¬èŒè´£åˆ’åˆ†**

#### **1. main.py - MCPæœåŠ¡å™¨æ ¸å¿ƒ** (çº¦200è¡Œ)
- **FastMCPæœåŠ¡å™¨åˆå§‹åŒ–** (ä½¿ç”¨æœ€æ–°API)
- **å·¥å…·æ³¨å†Œå’Œè·¯ç”±** (åŸºäº@toolè£…é¥°å™¨)
- **ç»¼åˆåˆ†æå·¥å…·** (ç»„åˆelevation + pollutionåŠŸèƒ½)
- **å¤šåœ°ç‚¹å¯¹æ¯”å·¥å…·**
- **é”™è¯¯å¤„ç†å’Œæ—¥å¿—é…ç½®**
- **æœåŠ¡å™¨å¯åŠ¨å…¥å£**

#### **2. elevation.py - åœ°ç†æ•°æ®å¼•æ“** (çº¦300è¡Œ)
- **æµ·æ‹”æŸ¥è¯¢APIåŒ…è£…** (åŸºäºç°æœ‰elevation_api.py)
- **ç½‘æ ¼æµ·æ‹”æ•°æ®è·å–**
- **å³°å€¼ä¿¡æ¯åˆ†æ**
- **åœ°ç†åæ ‡è®¡ç®—å·¥å…·**
- **æ•°æ®æºæ•…éšœè½¬ç§»é€»è¾‘**

#### **3. pollution.py - å…‰æ±¡æŸ“åˆ†æå¼•æ“** (çº¦350è¡Œ)
- **å…‰æ±¡æŸ“æ•°æ®çˆ¬å–** (åŸºäºç°æœ‰seleniumè„šæœ¬)
- **Bortleç­‰çº§åˆ†æ**
- **å…‰æ±¡æŸ“è¶‹åŠ¿è®¡ç®—**
- **è§‚æµ‹æ¡ä»¶è¯„ä¼°**
- **Seleniumä¼˜åŒ–å’Œé”™è¯¯å¤„ç†**

## ğŸ“‹ PythonåŒ…å‘å¸ƒé…ç½®

### **pyproject.toml - ç»Ÿä¸€é…ç½®æ–‡ä»¶**
```toml
[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "geospatial-astronomy-mcp"
version = "0.1.0"
description = "Geospatial and astronomy observation tools for AI assistants via MCP protocol"
readme = "README.md"
license = "MIT"
requires-python = ">=3.12"
authors = [
    {name = "Your Name", email = "your.email@example.com"}
]
keywords = ["mcp", "astronomy", "geospatial", "elevation", "light-pollution", "fastmcp"]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Topic :: Scientific/Engineering :: Astronomy",
    "Topic :: Scientific/Engineering :: GIS"
]

dependencies = [
    "fastmcp>=2.12.4",          # FastMCP v2.12.4 æœ€æ–°ç¨³å®šç‰ˆ
    "aiohttp>=3.13.0",          # å¼‚æ­¥HTTPå®¢æˆ·ç«¯ (æœ€æ–°ç‰ˆ)
    "pydantic>=2.12.2",         # æ•°æ®éªŒè¯ (FastMCPä¾èµ–ï¼Œæœ€æ–°ç‰ˆ)
    "selenium>=4.36.0",         # å…‰æ±¡æŸ“çˆ¬è™« (æœ€æ–°ç‰ˆ)
    "requests>=2.32.5"          # å¤‡ç”¨HTTPå®¢æˆ·ç«¯ (æœ€æ–°ç‰ˆ)
]

[project.optional-dependencies]
dev = [
    "pytest>=7.4.0",            # æµ‹è¯•æ¡†æ¶
    "pytest-asyncio>=0.21.0",  # å¼‚æ­¥æµ‹è¯•æ”¯æŒ
    "black>=23.0.0",            # ä»£ç æ ¼å¼åŒ–
    "ruff>=0.1.0"               # ä»£ç æ£€æŸ¥
]

[project.urls]
Homepage = "https://github.com/yourusername/geospatial-astronomy-mcp"
Documentation = "https://github.com/yourusername/geospatial-astronomy-mcp#readme"
Repository = "https://github.com/yourusername/geospatial-astronomy-mcp.git"
"Bug Tracker" = "https://github.com/yourusername/geospatial-astronomy-mcp/issues"

[project.scripts]
geospatial-mcp = "geospatial_mcp.main:main"

[tool.hatch.build.targets.wheel]
packages = ["src/geospatial_mcp"]

[tool.ruff]
line-length = 88
target-version = "py311"

[tool.pytest.ini_options]
asyncio_mode = "auto"
testpaths = ["tests"]
```

### **åŒ…å…¥å£é…ç½®**

#### **src/geospatial_mcp/__init__.py**
```python
"""
Geospatial Astronomy MCP Server

ä¸ºAIåŠ©æ‰‹æä¾›åœ°ç†å¤©æ–‡è§‚æµ‹æ•°æ®è·å–å’Œåˆ†æèƒ½åŠ›çš„MCPæœåŠ¡å™¨ã€‚
åŸºäºFastMCPæœ€æ–°ç‰ˆæœ¬æ„å»ºã€‚
"""

__version__ = "0.1.0"
__author__ = "Your Name"
__email__ = "your.email@example.com"

from .main import main
from .elevation import ElevationService
from .pollution import LightPollutionService

__all__ = [
    "main",
    "ElevationService",
    "LightPollutionService"
]
```

## ğŸ› ï¸ ç®€åŒ–ä¾èµ–ç®¡ç†æ–¹æ¡ˆ

### **æœ€å°ä¾èµ–åŸåˆ™**
åŸºäºLinus MVPç†å¿µï¼Œé‡‡ç”¨æœ€å°åŒ–ä¾èµ–ç­–ç•¥ï¼š

#### **æ ¸å¿ƒä¾èµ–** (å¿…éœ€)
```toml
dependencies = [
    "fastmcp>=2.12.4",          # MCPæ¡†æ¶æ ¸å¿ƒ (FastMCP v2.12.4)
    "aiohttp>=3.13.0",          # å¼‚æ­¥HTTPå®¢æˆ·ç«¯ (æœ€æ–°ç‰ˆ)
    "pydantic>=2.12.2",         # æ•°æ®éªŒè¯ (FastMCPä¾èµ–ï¼Œæœ€æ–°ç‰ˆ)
    "selenium>=4.36.0",         # å…‰æ±¡æŸ“çˆ¬è™« (æœ€æ–°ç‰ˆ)
    "requests>=2.32.5"          # å¤‡ç”¨HTTPå®¢æˆ·ç«¯ (æœ€æ–°ç‰ˆ)
]
```

#### **å¼€å‘ä¾èµ–** (å¯é€‰)
```toml
[project.optional-dependencies]
dev = [
    "pytest>=7.4.0",            # æµ‹è¯•æ¡†æ¶
    "pytest-asyncio>=0.21.0",  # å¼‚æ­¥æµ‹è¯•æ”¯æŒ
    "black>=23.0.0",            # ä»£ç æ ¼å¼åŒ–
    "ruff>=0.1.0"               # ä»£ç æ£€æŸ¥
]
```

### **FastMCP v2.12.4 ä½¿ç”¨è¦ç‚¹**
- **è£…é¥°å™¨è¯­æ³•**ï¼šä½¿ç”¨`@mcp.tool`æ³¨å†Œå·¥å…· (æ³¨æ„ï¼šä¸æ˜¯@mcp.tool())
- **æœåŠ¡å™¨åˆå§‹åŒ–**ï¼š`mcp = FastMCP("server_name")`
- **å¯åŠ¨æ–¹å¼**ï¼š`mcp.run()` æˆ– `fastmcp run server.py`
- **å¼‚æ­¥æ”¯æŒ**ï¼šå·¥å…·å‡½æ•°å¯ä»¥æ˜¯åŒæ­¥æˆ–å¼‚æ­¥
- **ç±»å‹æç¤º**ï¼šå¼ºåˆ¶ä½¿ç”¨Pythonç±»å‹æç¤ºè¿›è¡Œå‚æ•°éªŒè¯
- **é”™è¯¯å¤„ç†**ï¼šä½¿ç”¨FastMCPå†…ç½®çš„é”™è¯¯å¤„ç†æœºåˆ¶
- **ä¼ä¸šçº§è®¤è¯**ï¼šå†…ç½®å¤šç§èº«ä»½éªŒè¯æä¾›è€…æ”¯æŒ

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½è§„æ ¼ (åŸºäºFastMCPæœ€æ–°ç‰ˆ)

### **MCPå·¥å…·æ¥å£è®¾è®¡**

#### **main.py æä¾›çš„å·¥å…·**
```python
from fastmcp import FastMCP

mcp = FastMCP("geospatial-astronomy")

@mcp.tool
async def analyze_astronomy_site(
    latitude: float,
    longitude: float,
    detail_level: str = "basic"  # "basic" | "detailed"
) -> dict:
    """
    ç»¼åˆåˆ†æå¤©æ–‡è§‚æµ‹ç‚¹æ¡ä»¶

    Args:
        latitude: çº¬åº¦åæ ‡ (-90 åˆ° 90)
        longitude: ç»åº¦åæ ‡ (-180 åˆ° 180)
        detail_level: åˆ†æè¯¦ç»†ç¨‹åº¦

    Returns:
        åŒ…å«æµ·æ‹”ã€å…‰æ±¡æŸ“ã€ç»¼åˆè¯„åˆ†çš„å®Œæ•´åˆ†ææŠ¥å‘Š
    """

@mcp.tool
async def compare_observation_sites(
    locations: list[dict]  # [{"lat": float, "lon": float, "name": str}]
) -> dict:
    """
    å¯¹æ¯”å¤šä¸ªè§‚æµ‹ç‚¹çš„æ¡ä»¶

    Args:
        locations: å¾…å¯¹æ¯”çš„åœ°ç‚¹åˆ—è¡¨

    Returns:
        åŒ…å«æ’åã€å¯¹æ¯”è¡¨æ ¼å’Œæœ€ä½³æ¨èçš„å¯¹æ¯”æŠ¥å‘Š
    """
```

#### **elevation.py æä¾›çš„å·¥å…·**
```python
@mcp.tool
async def get_elevation(
    latitude: float,
    longitude: float,
    source: str = "auto"
) -> dict:
    """
    è·å–æŒ‡å®šä½ç½®çš„æµ·æ‹”ä¿¡æ¯

    Args:
        latitude: çº¬åº¦
        longitude: ç»åº¦
        source: æ•°æ®æºé€‰æ‹© ("auto", "open_elevation", "usgs")

    Returns:
        æµ·æ‹”é«˜åº¦ã€æ•°æ®æºå’Œç²¾åº¦ä¿¡æ¯
    """

@mcp.tool
async def find_nearby_peaks(
    latitude: float,
    longitude: float,
    radius_km: float = 10.0
) -> dict:
    """
    æŸ¥æ‰¾é™„è¿‘çš„æœ€é«˜ç‚¹

    Args:
        latitude: ä¸­å¿ƒç‚¹çº¬åº¦
        longitude: ä¸­å¿ƒç‚¹ç»åº¦
        radius_km: æœç´¢åŠå¾„

    Returns:
        å³°å€¼ä¿¡æ¯å’Œä½ç½®è¯¦æƒ…
    """
```

#### **pollution.py æä¾›çš„å·¥å…·**
```python
@mcp.tool
async def analyze_light_pollution(
    latitude: float,
    longitude: float,
    zoom_level: int = 7
) -> dict:
    """
    åˆ†æå…‰æ±¡æŸ“æƒ…å†µ

    Args:
        latitude: çº¬åº¦
        longitude: ç»åº¦
        zoom_level: åœ°å›¾ç¼©æ”¾çº§åˆ«

    Returns:
        Bortleç­‰çº§ã€å¯è§æ˜Ÿæ˜Ÿã€å…‰æ±¡æŸ“è¶‹åŠ¿ç­‰ä¿¡æ¯
    """

@mcp.tool
async def get_observation_conditions(
    latitude: float,
    longitude: float
) -> dict:
    """
    è·å–å¤©æ–‡è§‚æµ‹æ¡ä»¶è¯„ä¼°

    Args:
        latitude: çº¬åº¦
        longitude: ç»åº¦

    Returns:
        è§‚æµ‹å»ºè®®ã€æœ€ä½³è§‚æµ‹ç±»å‹ã€é™åˆ¶å› ç´ ç­‰
    """
```

## ğŸš€ æ‰“åŒ…å’Œéƒ¨ç½²æ–¹æ¡ˆ

### **uvå·¥ä½œæµé›†æˆ**

#### **1. å¼€å‘ç¯å¢ƒè®¾ç½®**
```bash
# å®‰è£…uv (å¦‚æœæœªå®‰è£…)
curl -LsSf https://astral.sh/uv/install.sh | sh

# åˆ›å»ºé¡¹ç›®
uv init geospatial-astronomy-mcp
cd geospatial-astronomy-mcp

# å®‰è£…ä¾èµ– (åŒ…å«FastMCPæœ€æ–°ç‰ˆ)
uv sync

# å¼€å‘æ¨¡å¼å®‰è£…
uv pip install -e .
```

#### **2. æ„å»ºPythonåŒ…**
```bash
# æ„å»ºwheelåŒ…
uv build

# æ„å»ºç»“æœ
dist/
â”œâ”€â”€ geospatial_astronomy_mcp-0.1.0-py3-none-any.whl
â””â”€â”€ geospatial-astronomy-mcp-0.1.0.tar.gz
```

#### **3. å‘å¸ƒåˆ°PyPI**
```bash
# å®‰è£…å‘å¸ƒå·¥å…·
uv pip install twine

# å‘å¸ƒåˆ°æµ‹è¯•PyPI
uv run twine upload --repository testpypi dist/*

# å‘å¸ƒåˆ°æ­£å¼PyPI
uv run twine upload dist/*
```

### **ç”¨æˆ·å®‰è£…å’Œä½¿ç”¨**

#### **æ–¹å¼1ï¼šç›´æ¥å®‰è£…è¿è¡Œ**
```bash
# ä½¿ç”¨pipå®‰è£…
pip install geospatial-astronomy-mcp

# ä½¿ç”¨uvå®‰è£… (æ¨è)
uv add geospatial-astronomy-mcp

# å¯åŠ¨MCPæœåŠ¡å™¨
geospatial-mcp

# æˆ–Pythonæ¨¡å—æ–¹å¼
python -m geospatial_mcp.main
```

#### **æ–¹å¼2ï¼šå¼€å‘è€…æ¨¡å¼**
```bash
# å…‹éš†æºç 
git clone https://github.com/yourusername/geospatial-astronomy-mcp.git
cd geospatial-astronomy-mcp

# ä½¿ç”¨uvå®‰è£…å¼€å‘ä¾èµ–
uv sync --dev

# è¿è¡ŒæœåŠ¡å™¨
uv run geospatial-mcp

# æˆ–ç›´æ¥è¿è¡Œ
uv run python -m geospatial_mcp.main
```

### **MCPå®¢æˆ·ç«¯é…ç½®ç¤ºä¾‹**

#### **Claude Desktopé…ç½®**
```json
{
  "mcpServers": {
    "geospatial-astronomy": {
      "command": "geospatial-mcp",
      "args": []
    }
  }
}
```

#### **å…¶ä»–AIåŠ©æ‰‹é…ç½®**
```yaml
# ç¤ºä¾‹ï¼šå…¶ä»–æ”¯æŒMCPçš„AIåŠ©æ‰‹é…ç½®
mcp_servers:
  - name: geospatial-astronomy
    command: geospatial-mcp
    description: "Geospatial and astronomy observation tools powered by FastMCP"
```

## ğŸ“Š æ•°æ®æ¨¡å‹ç®€åŒ–

### **ç»Ÿä¸€å“åº”æ ¼å¼**
```python
{
    "status": "success" | "error",
    "data": {...},           # å®é™…æ•°æ®
    "metadata": {            # å…ƒæ•°æ®
        "source": str,       # æ•°æ®æº
        "timestamp": str,    # æ—¶é—´æˆ³
        "coordinates": {     # åæ ‡ä¿¡æ¯
            "latitude": float,
            "longitude": float
        }
    },
    "error": {               # é”™è¯¯ä¿¡æ¯ (å¦‚æœ‰)
        "code": str,
        "message": str
    }
}
```

### **æ ¸å¿ƒæ•°æ®ç»“æ„**
```python
# æµ·æ‹”æ•°æ®
ElevationData = {
    "elevation_m": float,
    "source": str,
    "accuracy": str
}

# å…‰æ±¡æŸ“æ•°æ®
LightPollutionData = {
    "bortle_scale": float,
    "bortle_class": str,
    "visible_stars": str,
    "milky_way_visibility": str
}

# ç»¼åˆè¯„åˆ†
SiteRating = {
    "overall_score": float,      # 1-10åˆ†
    "best_for": list[str],       # é€‚åˆçš„è§‚æµ‹ç±»å‹
    "limitations": list[str]     # é™åˆ¶å› ç´ 
}
```

## ğŸ“ˆ æ•°æ®è´¨é‡æ ‡å‡†

### **æ•°æ®æºå¯é æ€§**
- **æµ·æ‹”æ•°æ®**ï¼šOpen-Elevation API (ä¸»), USGS API (å¤‡)
- **å…‰æ±¡æŸ“æ•°æ®**ï¼šLight Pollution Map (åŸºäºNOAA VIIRS)
- **åœ°ç†è®¡ç®—**ï¼šWGS84åæ ‡ç³»ï¼ŒHaversineè·ç¦»å…¬å¼

### **æ•°æ®å‡†ç¡®æ€§æŒ‡æ ‡**
- **æµ·æ‹”ç²¾åº¦**ï¼šÂ±10ç±³ (åŸå¸‚åœ°åŒº), Â±30ç±³ (åè¿œåœ°åŒº)
- **å…‰æ±¡æŸ“ç­‰çº§**ï¼šåŸºäºæœ€æ–°å«æ˜Ÿæ•°æ®ï¼Œå¹´æ›´æ–°
- **åœ°ç†åæ ‡**ï¼š6ä½å°æ•°ç²¾åº¦ (çº¦1ç±³ç²¾åº¦)

### **é”™è¯¯å¤„ç†æœºåˆ¶**
- **APIæ•…éšœè½¬ç§»**ï¼šä¸»æ•°æ®æºå¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢å¤‡ç”¨æ•°æ®æº
- **æ•°æ®éªŒè¯**ï¼šè¾“å…¥å‚æ•°èŒƒå›´æ£€æŸ¥å’Œåˆç†æ€§éªŒè¯
- **å¼‚å¸¸æ¢å¤**ï¼šç½‘ç»œè¶…æ—¶é‡è¯•å’Œä¼˜é›…é™çº§

## âš¡ MVPå¼€å‘è®¡åˆ’ (72å°æ—¶ç‰ˆ)

### **Day 1: åŸºç¡€æ¡†æ¶ (8å°æ—¶)**
- **ä¸Šåˆ (4h)**ï¼šuvé¡¹ç›®è®¾ç½® + FastMCPæœ€æ–°ç‰ˆé›†æˆ
- **ä¸‹åˆ (4h)**ï¼šelevation.pyæ ¸å¿ƒåŠŸèƒ½ + åŸºç¡€æµ‹è¯•

### **Day 2: æ ¸å¿ƒåŠŸèƒ½ (8å°æ—¶)**
- **ä¸Šåˆ (4h)**ï¼špollution.pyå…‰æ±¡æŸ“åˆ†æåŠŸèƒ½
- **ä¸‹åˆ (4h)**ï¼šmain.pyç»¼åˆåˆ†æå·¥å…·

### **Day 3: å®Œå–„ä¼˜åŒ– (8å°æ—¶)**
- **ä¸Šåˆ (4h)**ï¼šå¤šåœ°ç‚¹å¯¹æ¯”åŠŸèƒ½ + é”™è¯¯å¤„ç†
- **ä¸‹åˆ (4h)**ï¼šæµ‹è¯•å®Œå–„ + æ–‡æ¡£ç¼–å†™ + æ‰“åŒ…æµ‹è¯•

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### **æŠ€æœ¯æŒ‡æ ‡**
- **å“åº”æ—¶é—´**ï¼šå•æ¬¡æŸ¥è¯¢ < 5ç§’ï¼Œç»¼åˆåˆ†æ < 15ç§’
- **å¯ç”¨æ€§**ï¼š99%+ æœåŠ¡å¯ç”¨æ€§
- **æ•°æ®å‡†ç¡®æ€§**ï¼šæµ·æ‹”è¯¯å·® < 50ç±³ï¼Œå…‰æ±¡æŸ“ç­‰çº§å‡†ç¡®ç‡ > 95%

### **ç”¨æˆ·æŒ‡æ ‡**
- **æ˜“ç”¨æ€§**ï¼šAIåŠ©æ‰‹èƒ½å¤Ÿç‹¬ç«‹å®Œæˆå®Œæ•´çš„è§‚æµ‹ç‚¹åˆ†ææµç¨‹
- **å®ç”¨æ€§**ï¼šåˆ†æç»“æœå¯¹å®é™…è§‚æµ‹é€‰å€å…·æœ‰æŒ‡å¯¼ä»·å€¼
- **æ»¡æ„åº¦**ï¼šç”¨æˆ·åé¦ˆè¯„åˆ† > 4.0/5.0

### **ä¸šåŠ¡æŒ‡æ ‡**
- **é›†æˆåº¦**ï¼šæˆåŠŸé›†æˆåˆ°ä¸»æµAIåŠ©æ‰‹å¹³å°
- **ä½¿ç”¨ç‡**ï¼šå‘¨æ´»è·ƒç”¨æˆ·æ•°ç¨³å®šå¢é•¿
- **å£ç¢‘**ï¼šåœ¨å¤©æ–‡ç¤¾åŒºè·å¾—ç§¯æåé¦ˆ

## ğŸ¯ æˆåŠŸæ ‡å‡†

### **MVPéªŒæ”¶æ ‡å‡†**
- âœ… 3ä¸ªæ ¸å¿ƒè„šæœ¬åŠŸèƒ½å®Œæ•´å¯ç”¨
- âœ… ä½¿ç”¨FastMCPæœ€æ–°ç‰ˆæœ¬ (>=2.12.4)
- âœ… å¯é€šè¿‡uvæ‰“åŒ…æˆPythonåŒ…
- âœ… æ”¯æŒpip/uvå®‰è£…å’Œè¿è¡Œ
- âœ… MCPåè®®é€šä¿¡æ­£å¸¸
- âœ… åŸºç¡€æµ‹è¯•è¦†ç›–ä¸»è¦åŠŸèƒ½
- âœ… READMEæ–‡æ¡£åŒ…å«å®‰è£…ä½¿ç”¨è¯´æ˜

### **å‘å¸ƒå°±ç»ªæ ‡å‡†**
- âœ… PyPIåŒ…å‘å¸ƒæˆåŠŸ
- âœ… GitHub Actionsè‡ªåŠ¨åŒ–æµ‹è¯•
- âœ… æ–‡æ¡£å®Œæ•´ (API + ä½¿ç”¨ç¤ºä¾‹)
- âœ… ç¤¾åŒºåé¦ˆæ”¶é›†æœºåˆ¶

## ğŸ“‹ æ€»ç»“

è¿™ä¸ªæœ€ç»ˆç‰ˆPRDæ–‡æ¡£ä½“ç°äº†**æç®€ä¸»ä¹‰**å’Œ**å®ç”¨ä¸»ä¹‰**çš„è®¾è®¡ç†å¿µï¼š

### **æ ¸å¿ƒä¼˜åŒ–ç‚¹**
1. **FastMCPæœ€æ–°ç‰ˆæœ¬**ï¼šåŸºäº>=0.4.0ï¼Œåˆ©ç”¨æœ€æ–°ç‰¹æ€§
2. **3ä¸ªè„šæœ¬åŸåˆ™**ï¼šmain.py(æœåŠ¡å™¨) + elevation.py(åœ°ç†) + pollution.py(å…‰æ±¡æŸ“)
3. **æç®€ä¾èµ–**ï¼šæœ€å°åŒ–å¤–éƒ¨ä¾èµ–ï¼Œä¼˜å…ˆä½¿ç”¨åŸç”ŸPythonåŠŸèƒ½
4. **æ ‡å‡†åŒ–æ‰“åŒ…**ï¼šå®Œæ•´çš„pyproject.tomlé…ç½®ï¼Œæ”¯æŒPyPIå‘å¸ƒ
5. **uvåŸç”Ÿæ”¯æŒ**ï¼šä»å¼€å‘åˆ°å‘å¸ƒçš„å®Œæ•´uvå·¥ä½œæµ

### **æŠ€æœ¯ä¼˜åŠ¿**
- **ç®€å•å¯é **ï¼šå‡å°‘å¤æ‚åº¦ï¼Œæé«˜ç¨³å®šæ€§
- **æ˜“äºç»´æŠ¤**ï¼šæ¸…æ™°çš„èŒè´£åˆ’åˆ†ï¼Œä¾¿äºåç»­æ‰©å±•
- **ç”¨æˆ·å‹å¥½**ï¼šæ ‡å‡†pip/uvå®‰è£…ï¼Œå¼€ç®±å³ç”¨
- **å¼€å‘é«˜æ•ˆ**ï¼š72å°æ—¶MVPï¼Œæ¸è¿›å¼æ”¹è¿›

### **éƒ¨ç½²çµæ´»æ€§**
- **æœ¬åœ°å®‰è£…**ï¼š`pip install geospatial-astronomy-mcp`
- **å¼€å‘è€…æ¨¡å¼**ï¼š`uv sync && uv run geospatial-mcp`
- **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šæ”¯æŒDockeréƒ¨ç½²
- **MCPé›†æˆ**ï¼šæ ‡å‡†MCPåè®®ï¼Œå¹¿æ³›å…¼å®¹

è¿™ä¸ªæ–¹æ¡ˆå®Œç¾å¹³è¡¡äº†**ç®€å•æ€§**å’Œ**å®ç”¨æ€§**ï¼Œæ—¢ç¬¦åˆLinus MVPç†å¿µçš„å¿«é€ŸéªŒè¯è¦æ±‚ï¼Œåˆä¸ºåç»­çš„åŠŸèƒ½æ‰©å±•å’Œå•†ä¸šåŒ–ç•™ä¸‹äº†å……è¶³ç©ºé—´ã€‚åŸºäº"Talk is cheap. Show me the code"çš„å®ç”¨ä¸»ä¹‰å“²å­¦ï¼Œä¸“æ³¨äºå¿«é€Ÿå®ç°å¯ç”¨çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œé€šè¿‡å®é™…ä½¿ç”¨æ”¶é›†åé¦ˆï¼Œæ¸è¿›å¼æ”¹è¿›å®Œå–„ã€‚