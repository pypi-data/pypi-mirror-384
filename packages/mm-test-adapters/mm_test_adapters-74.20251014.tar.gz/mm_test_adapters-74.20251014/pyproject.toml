[build-system]
requires = ["setuptools", "wheel", "meson", "ninja"]
build-backend = "setuptools.build_meta"

[project]
name = "mm-test-adapters"
dynamic = ["version"]
requires-python = ">=3.9"
readme = "README.md"
dependencies = []

[dependency-groups]
build = ["meson>=0.18.0", "ninja>=1.11.1.4"]
test = ["pytest"]
dev = [
    "rich>=14.0.0",
    "ruff>=0.11.9",
    { include-group = "build" },
    { include-group = "test" },
]

[tool.pytest.ini_options]
testpaths = ["tests"]

[tool.cibuildwheel]
build-verbosity = 1
build = [
	"cp39-win_amd64",
	"cp39-manylinux_x86_64",
	"cp39-macosx_x86_64",
	"cp39-macosx_arm64",
]
manylinux-x86_64-image = "manylinux_2_28"
build-frontend = "build[uv]"
test-command = "pytest {project}/tests -v"
test-groups = ["test"]
environment-pass = ["MM_SHA"]
