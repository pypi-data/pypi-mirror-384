# -*- mode: yaml; coding: utf-8 -*-
#
# Schema for the ce_services plugin for csspin

ce_services:
    type: object
    help: |
        The ce_services plugin equips csspin with the ability to provision,
        start, stop or even control services. These services are e.g. traefik,
        solr, redis and many more.
    properties:
        hivemq:
            type: object
            help: |
                Configuration regarding the HiveMQ service
            properties:
                enabled:
                    type: bool
                    help: If enabled, the hivemq service will be started.
                version:
                    type: str
                    help: The version of HiveMQ to use.
                install_dir:
                    type: path
                    help: The installation directory of hivemq.
                elements_integration:
                    type: object
                    help: |
                        Configuration regarding the CONTACT Elements
                        Integration for HiveMQ
                    properties:
                        user:
                            type: str
                            help: |
                                The default user to use when accessing the
                                CONTACT Elements Integration
                        password:
                            type: secret
                            help: The password corresponding to the user
                        install_dir:
                            type: path
                            help: |
                                The installation directory of the HiveMQ CONTACT
                                Elements integration.
        influxdb:
            type: object
            help: Configuration regarding the influxdb service.
            properties:
                enabled:
                    type: bool
                    help: If enabled, the influxdb service will be started.
                version:
                    type: str
                    help: The version of InfluxDB to use.
                install_dir:
                    type: path
                    help: Installation directory of influxdb.
        traefik:
            type: object
            help: Configuration regarding the traefik service.
            properties:
                version:
                    type: str
                    help: The version of Traefik to use.
                dashboard_port:
                    type: str
                    help: |
                        The port at which the Traefik dashboard should be
                        exposed.
                install_dir:
                    type: path
                    help: Traefik's installation directory.
                tls:
                    type: object
                    help: |
                        Configuration regarding the SSL/TLS configuration for
                        the traefik service.
                    properties:
                        enabled:
                            type: bool
                            help: |
                                If set to ``True``, the traefik service will be
                                started with enabled SSL/TLS termination. This
                                setting requires ``mkinstance.tls.cert_key`` and
                                ``mkinstance.tls.cert`` to be set. Additionally,
                                the instance must be built while
                                ``mkinstance.tls.enabled`` is set to ``True``.
        solr:
            type: object
            help: Configuration regarding the Apache Solr service.
            properties:
                version:
                    type: str
                    help: The version of Apache Solr to use.
                install_dir:
                    type: path
                    help: The installation directory of Apache Solr.
                version_postfix:
                    type: str
                    help: The Solr version postfix.
                use:
                    type: path
                    help: |
                        The use property can be used to specify an alternative
                        Apache Solr source to use. This is useful to rather use
                        the system Apache Solr than the one defined in
                        spinfile.yaml or ``ce_services.solr.install_dir``.
                mirrors:
                    type: list
                    help: List of mirrors to use when downloading Apache Solr
        rabbitmq:
            type: object
            help: Configuration regarding the RabbitMQ service.
            properties:
                version:
                    type: str
                    help: The version of RabbitMQ to use.
                install_dir:
                    type: path
                    help: The installation directory of RabbitMQ.
                erlang:
                    type: object
                    help: Configuration regarding the Erlang service.
                    properties:
                        version:
                            type: str
                            help: The version of Erlang to use.
                        install_dir:
                            type: path
                            help: The installation directory of Erlang.
        redis:
            type: object
            help: Configuration regarding redis
            properties:
                version:
                    type: str
                    help: The redis version to use.
                install_dir:
                    type: path
                    help: The installation directory of redis.
        tika:
            type: object
            help: Configuration regarding apache tika
            properties:
                version:
                    type: str
                    help: The apache tika version to use.
                install_dir:
                    type: path
                    help: The directory to put the tika-server.jar files.
                mirrors:
                    type: list
                    help: List of mirrors to use when downloading Apache Tika
        loglevel:
            type: str
            help: The loglevel for the started services.
