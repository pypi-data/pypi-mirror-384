# parq-cli

[![Python Version](https://img.shields.io/badge/python-3.9%2B-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

ä¸€ä¸ªå¼ºå¤§çš„ Apache Parquet æ–‡ä»¶å‘½ä»¤è¡Œå·¥å…· ğŸš€

## âœ¨ ç‰¹æ€§

- ğŸ“Š **å…ƒæ•°æ®æŸ¥çœ‹**: å¿«é€ŸæŸ¥çœ‹ Parquet æ–‡ä»¶çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆè¡Œæ•°ã€åˆ—æ•°ã€æ–‡ä»¶å¤§å°ã€å‹ç¼©ç±»å‹ç­‰ï¼‰
- ğŸ“‹ **Schema å±•ç¤º**: ç¾è§‚åœ°å±•ç¤ºæ–‡ä»¶çš„åˆ—ç»“æ„å’Œæ•°æ®ç±»å‹
- ğŸ‘€ **æ•°æ®é¢„è§ˆ**: æ”¯æŒæŸ¥çœ‹æ–‡ä»¶çš„å‰ N è¡Œæˆ–å N è¡Œ
- ğŸ”¢ **è¡Œæ•°ç»Ÿè®¡**: å¿«é€Ÿè·å–æ–‡ä»¶çš„æ€»è¡Œæ•°
- ğŸ—œï¸ **å‹ç¼©ä¿¡æ¯**: æ˜¾ç¤ºæ–‡ä»¶å‹ç¼©ç±»å‹å’Œæ–‡ä»¶å¤§å°
- ğŸ¨ **ç¾è§‚è¾“å‡º**: ä½¿ç”¨ Rich åº“æä¾›å½©è‰²ã€æ ¼å¼åŒ–çš„ç»ˆç«¯è¾“å‡º
- ğŸ“¦ **æ™ºèƒ½æ˜¾ç¤º**: è‡ªåŠ¨æ£€æµ‹åµŒå¥—ç»“æ„ï¼Œæ˜¾ç¤ºé€»è¾‘åˆ—æ•°å’Œç‰©ç†åˆ—æ•°

## ğŸ“¦ å®‰è£…

### ä»æºç å®‰è£…

```bash
git clone https://github.com/yourusername/parq-cli.git
cd parq-cli
pip install -e .
```

### ä½¿ç”¨ pip å®‰è£…ï¼ˆå³å°†æ”¯æŒï¼‰

```bash
pip install parq-cli
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

```bash
# æŸ¥çœ‹æ–‡ä»¶å…ƒæ•°æ®
parq data.parquet

# æ˜¾ç¤º schema ä¿¡æ¯
parq data.parquet --schema

# æ˜¾ç¤ºå‰ 10 è¡Œ
parq data.parquet --head 10

# æ˜¾ç¤ºå 5 è¡Œ
parq data.parquet --tail 5

# æ˜¾ç¤ºæ€»è¡Œæ•°
parq data.parquet --count
```

### ç»„åˆä½¿ç”¨

```bash
# åŒæ—¶æ˜¾ç¤º schema å’Œè¡Œæ•°
parq data.parquet --schema --count

# æ˜¾ç¤ºå‰ 5 è¡Œå’Œ schema
parq data.parquet --head 5 --schema
```

## ğŸ“– å‘½ä»¤å‚è€ƒ

### ä¸»å‘½ä»¤

```
parq FILE [OPTIONS]
```

**å‚æ•°:**
- `FILE`: Parquet æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰

**é€‰é¡¹:**
- `--schema, -s`: æ˜¾ç¤º schema ä¿¡æ¯
- `--head N`: æ˜¾ç¤ºå‰ N è¡Œ
- `--tail N`: æ˜¾ç¤ºå N è¡Œ
- `--count, -c`: æ˜¾ç¤ºæ€»è¡Œæ•°
- `--version, -v`: æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
- `--help`: æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

## ğŸ¨ è¾“å‡ºç¤ºä¾‹

### å…ƒæ•°æ®å±•ç¤º

**æ™®é€šæ–‡ä»¶ï¼ˆæ— åµŒå¥—ç»“æ„ï¼‰ï¼š**

```bash
$ parq data.parquet
```

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ“Š Parquet File Metadata â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ file_path: data.parquet                                                â”‚
â”‚ num_rows: 1000                                                         â”‚
â”‚ num_columns: 5 (logical)                                               â”‚
â”‚ file_size: 123.45 KB                                                   â”‚
â”‚ compression: SNAPPY                                                    â”‚
â”‚ num_row_groups: 1                                                      â”‚
â”‚ format_version: 2.6                                                    â”‚
â”‚ serialized_size: 126412                                                â”‚
â”‚ created_by: parquet-cpp-arrow version 18.0.0                          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

**åµŒå¥—ç»“æ„æ–‡ä»¶ï¼ˆæ˜¾ç¤ºç‰©ç†åˆ—æ•°ï¼‰ï¼š**

```bash
$ parq nested.parquet
```

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ“Š Parquet File Metadata â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ file_path: nested.parquet                                              â”‚
â”‚ num_rows: 500                                                          â”‚
â”‚ num_columns: 3 (logical)                                               â”‚
â”‚ num_physical_columns: 8 (storage)                                      â”‚
â”‚ file_size: 2.34 MB                                                     â”‚
â”‚ compression: ZSTD                                                      â”‚
â”‚ num_row_groups: 2                                                      â”‚
â”‚ format_version: 2.6                                                    â”‚
â”‚ serialized_size: 2451789                                               â”‚
â”‚ created_by: parquet-cpp-arrow version 21.0.0                          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

### Schema å±•ç¤º

```bash
$ parq data.parquet --schema
```

```
                    ğŸ“‹ Schema Information
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Column Name â”ƒ Data Type     â”ƒ Nullable â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”©
â”‚ id          â”‚ int64         â”‚ âœ—        â”‚
â”‚ name        â”‚ string        â”‚ âœ“        â”‚
â”‚ age         â”‚ int64         â”‚ âœ“        â”‚
â”‚ city        â”‚ string        â”‚ âœ“        â”‚
â”‚ salary      â”‚ double        â”‚ âœ“        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **[PyArrow](https://arrow.apache.org/docs/python/)**: é«˜æ€§èƒ½çš„ Parquet è¯»å–å¼•æ“
- **[Typer](https://typer.tiangolo.com/)**: ç°ä»£åŒ–çš„ CLI æ¡†æ¶
- **[Rich](https://rich.readthedocs.io/)**: ç¾è§‚çš„ç»ˆç«¯è¾“å‡º

## ğŸ§ª å¼€å‘

### å®‰è£…å¼€å‘ä¾èµ–

```bash
pip install -e ".[dev]"
```

### è¿è¡Œæµ‹è¯•

```bash
pytest
```

### è¿è¡Œæµ‹è¯•ï¼ˆå¸¦è¦†ç›–ç‡ï¼‰

```bash
pytest --cov=parq --cov-report=html
```

### ä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥

```bash
# ä½¿ç”¨ Ruff æ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤

ruff check --fix parq tests
```

## ğŸ—ºï¸ è·¯çº¿å›¾

- [x] åŸºç¡€å…ƒæ•°æ®æŸ¥çœ‹
- [x] Schema å±•ç¤º
- [x] æ•°æ®é¢„è§ˆï¼ˆhead/tailï¼‰
- [x] è¡Œæ•°ç»Ÿè®¡
- [x] æ–‡ä»¶å¤§å°å’Œå‹ç¼©ä¿¡æ¯æ˜¾ç¤º
- [x] åµŒå¥—ç»“æ„æ™ºèƒ½è¯†åˆ«ï¼ˆé€»è¾‘åˆ—æ•° vs ç‰©ç†åˆ—æ•°ï¼‰
- [ ] SQL æŸ¥è¯¢æ”¯æŒ
- [ ] æ•°æ®ç»Ÿè®¡åˆ†æ
- [ ] æ ¼å¼è½¬æ¢ï¼ˆCSV, JSON, Excelï¼‰
- [ ] æ–‡ä»¶å¯¹æ¯”
- [ ] äº‘å­˜å‚¨æ”¯æŒï¼ˆS3, GCS, Azureï¼‰

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- çµæ„Ÿæ¥æºäº [parquet-cli](https://github.com/chhantyal/parquet-cli)
- æ„Ÿè°¢ Apache Arrow å›¢é˜Ÿæä¾›å¼ºå¤§çš„ Parquet æ”¯æŒ
- æ„Ÿè°¢ Rich åº“ä¸ºç»ˆç«¯è¾“å‡ºå¢æ·»è‰²å½©

## ğŸ“® è”ç³»æ–¹å¼

- ä½œè€…: Jinfeng Sun
- é¡¹ç›®åœ°å€: https://github.com/Tendo33/parq-cli

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼**
