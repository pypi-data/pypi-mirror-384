(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1961],{85630:function(e){e.exports=function(e){return e.split("")}},75733:function(e){e.exports=function(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var l=Array(r);++i<r;)l[i]=e[i+t];return l}},74833:function(e,t,n){var i=n(56127),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},39158:function(e,t,n){var i=n(75733);e.exports=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:i(e,t,n)}},62690:function(e,t,n){var i=n(39158),r=n(25348),l=n(63528),o=n(65567);e.exports=function(e){return function(t){var n=r(t=o(t))?l(t):void 0,a=n?n[0]:t.charAt(0),s=n?i(n,1).join(""):t.slice(1);return a[e]()+s}}},56632:function(e,t,n){var i=n(89278),r=n(80068),l=n(50098);e.exports=function(e){return function(t,n,o){var a=Object(t);if(!r(t)){var s=i(n,3);t=l(t),n=function(e){return s(a[e],e,a)}}var c=e(t,n,o);return c>-1?a[s?t[c]:c]:void 0}}},25348:function(e){var t=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},63528:function(e,t,n){var i=n(85630),r=n(25348),l=n(84890);e.exports=function(e){return r(e)?l(e):i(e)}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},84890:function(e){var t="\ud800-\udfff",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\ud83c[\udffb-\udfff]",r="[^"+t+"]",l="(?:\ud83c[\udde6-\uddff]){2}",o="[\ud800-\udbff][\udc00-\udfff]",a="(?:"+n+"|"+i+")?",s="[\\ufe0e\\ufe0f]?",c="(?:\\u200d(?:"+[r,l,o].join("|")+")"+s+a+")*",d=RegExp(i+"(?="+i+")|(?:"+[r+n+"?",n,l,o,"["+t+"]"].join("|")+")"+(s+a+c),"g");e.exports=function(e){return e.match(d)||[]}},98052:function(e,t,n){var i=n(65567),r=n(76744);e.exports=function(e){return r(i(e).toLowerCase())}},66726:function(e,t,n){var i=n(11611),r=n(82846),l=n(91936),o=Math.max,a=Math.min;e.exports=function(e,t,n){var s,c,d,u,f,p,v=0,h=!1,m=!1,x=!0;if("function"!=typeof e)throw TypeError("Expected a function");function g(t){var n=s,i=c;return s=c=void 0,v=t,u=e.apply(i,n)}function j(e){var n=e-p,i=e-v;return void 0===p||n>=t||n<0||m&&i>=d}function b(){var e,n,i,l=r();if(j(l))return y(l);f=setTimeout(b,(e=l-p,n=l-v,i=t-e,m?a(i,d-n):i))}function y(e){return(f=void 0,x&&s)?g(e):(s=c=void 0,u)}function w(){var e,n=r(),i=j(n);if(s=arguments,c=this,p=n,i){if(void 0===f)return v=e=p,f=setTimeout(b,t),h?g(e):u;if(m)return clearTimeout(f),f=setTimeout(b,t),g(p)}return void 0===f&&(f=setTimeout(b,t)),u}return t=l(t)||0,i(n)&&(h=!!n.leading,d=(m="maxWait"in n)?o(l(n.maxWait)||0,t):d,x="trailing"in n?!!n.trailing:x),w.cancel=function(){void 0!==f&&clearTimeout(f),v=0,s=p=c=f=void 0},w.flush=function(){return void 0===f?u:y(r())},w}},64925:function(e,t,n){var i=n(56632)(n(66259));e.exports=i},66259:function(e,t,n){var i=n(95372),r=n(89278),l=n(47991),o=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return -1;var s=null==n?0:l(n);return s<0&&(s=o(a+s,0)),i(e,r(t,3),s)}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},94919:function(e,t,n){var i=n(91936),r=1/0;e.exports=function(e){return e?(e=i(e))===r||e===-r?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,n){var i=n(94919);e.exports=function(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},91936:function(e,t,n){var i=n(74833),r=n(11611),l=n(55193),o=0/0,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(l(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=s.test(e);return n||c.test(e)?d(e.slice(2),n?2:8):a.test(e)?o:+e}},76744:function(e,t,n){var i=n(62690)("toUpperCase");e.exports=i},19174:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/[monitorId]/data-explorer",function(){return n(12591)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var i=n(24246),r=n(66726),l=n.n(r),o=n(27378),a=n(26917);let s=e=>{let{value:t,onChange:n,placeholder:r,...s}=e,[c,d]=(0,o.useState)(t);(0,o.useEffect)(()=>{d(t||"")},[t]);let u=l()(n,500),f=(0,o.useCallback)(e=>{d(e),u(e)},[]);return(0,i.jsx)(a.Z,{value:c,onChange:f,onClear:()=>{d(""),n("")},placeholder:r,...s})}},35287:function(e,t,n){"use strict";var i=n(24246),r=n(20595),l=n(88038),o=n.n(l);n(27378),t.Z=e=>{let{children:t,title:n,mainProps:l}=e;return(0,i.jsxs)(r.kCb,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 240px)",children:[(0,i.jsxs)(o(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(r.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...l,children:t})]})}},58754:function(e,t,n){"use strict";var i=n(24246),r=n(20595),l=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:o=!0,children:a,rightContent:s,style:c,...d}=e;return(0,i.jsxs)("div",{...d,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,i.jsxs)(r.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(r.lQT,{className:n||a?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,s&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:s})]}),!!n&&(0,i.jsx)(l.m,{className:a?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),a]})}},79283:function(e,t,n){"use strict";n.d(t,{l:function(){return d}});var i=n(24246),r=n(20595),l=n(72707),o=n.n(l);let a=e=>{let{data:{formattedTitle:t,description:n,name:l,primaryName:o}}=e;return(0,i.jsxs)(r.jqI,{gap:12,title:"".concat(t," - ").concat(n),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:o||l}),o&&": ".concat(l)]}),(0,i.jsx)("em",{children:n})]})},s=e=>"options"in e&&Array.isArray(e.options),c=e=>({...e,className:o().option,formattedTitle:e.formattedTitle||[e.primaryName,e.name].filter(e=>e).join(": ")}),d=e=>{let{options:t,...n}=e,l=null==t?void 0:t.map(e=>s(e)?{...e,options:e.options.map(c)}:c(e));return(0,i.jsx)(r.WPr,{options:l,filterOption:(e,t)=>{var n,i;return(null==t?void 0:null===(n=t.formattedTitle)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null==t?void 0:null===(i=t.value)||void 0===i?void 0:i.toLowerCase().includes(e.toLowerCase()))||!1},optionFilterProp:"label",autoFocus:!0,variant:"borderless",optionRender:a,styles:{popup:{root:{minWidth:"500px"}}},className:"w-full p-0","data-testid":"taxonomy-select",...n})}},34929:function(e,t,n){"use strict";var i=n(24246),r=n(64925),l=n.n(r),o=n(27378),a=n(16134),s=n(30002),c=n(28079),d=n(57072);let u=()=>{let{isLoading:e}=(0,c.fd)(),t=(0,a.C)(c.U3),{isLoading:n}=(0,d.MO)(),i=(0,a.C)(d.qb),{isLoading:r}=(0,s.te)();return{dataUses:t,dataSubjects:(0,a.C)(s.ZL),dataCategories:i,isLoading:e||n||r}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:r}=u(),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t(e);if(!i)return{};let r=t(a(e,n)),l=!!i.parent_key;return{name:i.name||void 0,primaryName:l&&(null==r?void 0:r.name)!==i.name&&(null==r?void 0:r.name)||void 0}},c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:r,primaryName:l}=s(e,t,n);return r?l?(0,i.jsxs)(o.Fragment,{children:[(0,i.jsxs)("strong",{children:[l,":"]})," ",r]},e):(0,i.jsx)("strong",{children:r},e):e},d=t=>l()(e,{fides_key:t}),f=e=>l()(t,{fides_key:e}),p=e=>l()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:d,getDataUseDisplayName:e=>c(e,d,1),getDataUseDisplayNameProps:e=>s(e,d,1),getDataCategories:()=>t,getDataCategoryByKey:f,getDataCategoryDisplayName:e=>c(e,f,2),getDataCategoryDisplayNameProps:e=>s(e,f,2),getDataSubjects:()=>n,getDataSubjectByKey:p,getDataSubjectDisplayName:e=>{let t=p(e);return t?t.name:e},getPrimaryKey:a,isLoading:r}}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(24246),r=n(20595),l=n(79894),o=n.n(l),a=n(27378);let{Text:s}=r.AntTypography,c=e=>{let{items:t,...n}=e,l=(0,a.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let l=n===t.length-1,a={...e},c=a.onClick&&!a.href;return("string"==typeof a.title&&(a.title=(0,i.jsx)(s,{style:{color:"inherit",maxWidth:l?void 0:400},ellipsis:!l,id:l?"breadcrumb-current-page":void 0,children:a.title})),c)?a.title=(0,i.jsx)(r.wpx,{type:"text",size:"small",icon:a.icon,onClick:a.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:a.title}):(a.icon&&(a.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:a.icon}),a.title]})),a.href&&a.title&&(a.title=(0,i.jsx)(o(),{href:a.href,className:"ant-breadcrumb-link",children:a.title}),delete a.href)),a}),[t]);return(0,i.jsx)(r.zrq,{items:l,...n})}},9270:function(e,t,n){"use strict";n.d(t,{S:function(){return l}});var i=n(27378),r=n(36866);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.h)(e),{pageIndex:n,pageSize:l,updatePageIndex:o,updatePageSize:a,pageSizeOptions:s,showSizeChanger:c}=t,d=(0,i.useMemo)(()=>({current:n,pageSize:l,showSizeChanger:c,pageSizeOptions:s.map(String),onChange:o,onShowSizeChange:(e,t)=>{a(t)}}),[n,l,c,s,o,a]);return{...t,paginationProps:d}}},57072:function(e,t,n){"use strict";n.d(t,{Bd:function(){return i.Bd},L5:function(){return i.L5},MO:function(){return i.MO},qb:function(){return i.qb}});var i=n(5785)},12591:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var i,r,l=n(24246),o=n(20595),a=n(25980),s=n(86677),c=n(27378),d=n(30952),u=n(35287),f=n(812),p=n(17245),v=n(77830),h=n(58754),m=n(9270),x=n(46628),g=n(37059),j=n(70675),b=n(39449),y=n(31883),w=n(98052),_=n.n(w);(i=r||(r={})).LOW="low",i.HIGH="high",i.MANUAL="manual";let C="load_more",S="skeleton",k={classifying:{label:"Classifying",color:"blue"},classification_queued:{label:"Classifying",color:"blue"},classification_update:{label:"In Review",color:"nectar"},classification_addition:{label:"In Review",color:"blue"},addition:{label:"Attention Required",color:"blue"},muted:{label:"Unmonitored",color:"nectar"},removal:{label:"Removed",color:"red"},removing:{label:"In Review",color:"nectar"},promoting:{label:"In Review",color:"nectar"},monitored:{label:"Confirmed",color:"nectar"},approved:{label:"Approved",color:"green"}};Object.values(r);let I=e=>{var t,n,i;let{resourceStatus:a,setResourceStatus:s,confidenceScore:c,setConfidenceScore:d,dataCategory:u,setDataCategory:f,reset:p,monitorId:v}=e,{data:h}=(0,g.S0)({monitor_config_id:v},{refetchOnMountOrArgChange:!0}),m=null==h?void 0:null===(t=h.diff_status)||void 0===t?void 0:t.reduce((e,t)=>{let n=Object.values(b.LL).find(e=>e===t),i=n?k[n].label:null;return i&&!e.includes(i)?[...e,i]:e},[]),x=null==h?void 0:null===(n=h.confidence_score)||void 0===n?void 0:n.reduce((e,t)=>{let n=Object.values(r).find(e=>e===t);return n?[...e,n]:e},[]);return(0,l.jsx)(o.V4A,{variant:"borderless",style:{boxShadow:"var(--ant-box-shadow-secondary)"},children:(0,l.jsx)(o.vyj,{size:"middle",className:"p-[var(--ant-padding)]",children:(0,l.jsxs)(o.PPS,{layout:"vertical",children:[(0,l.jsx)(o.PPS.Item,{label:"Status",className:"w-min whitespace-nowrap",children:(0,l.jsx)(o.E_O.Group,{value:a||[],onChange:e=>s(e.length>0?e:null),children:(0,l.jsx)(o.bue,{children:null==m?void 0:m.flatMap(e=>(0,l.jsx)(o.JGx,{span:24,children:(0,l.jsx)(o.E_O,{value:e,children:e})},e))})})}),(0,l.jsx)(o.PPS.Item,{label:"Confidence",className:"w-min whitespace-nowrap",children:(0,l.jsx)(o.E_O.Group,{value:c||[],onChange:e=>d(e.length>0?e:null),children:(0,l.jsx)(o.bue,{children:null==x?void 0:x.map(e=>(0,l.jsx)(o.JGx,{span:24,children:(0,l.jsx)(o.E_O,{value:e,children:_()(e)})},e))})})}),(null==h?void 0:h.data_category)&&(null==h?void 0:null===(i=h.data_category)||void 0===i?void 0:i.length)>0&&(0,l.jsx)(o.PPS.Item,{label:"Data category",className:"w-min whitespace-nowrap",children:(0,l.jsx)(o.E_O.Group,{value:u||[],onChange:e=>f(e.length>0?e:null),children:(0,l.jsx)(o.bue,{children:h.data_category.map(e=>(0,l.jsx)(o.JGx,{span:24,children:(0,l.jsx)(o.E_O,{value:e,children:_()(e)})},e))})})}),(0,l.jsx)(o.wpx,{onClick:()=>{p()},children:"Clear"})]})})})};var N=n(16394),P=n(79283),R=n(34929),L=e=>{let{...t}=e,{getDataUseDisplayNameProps:n,getDataUses:i}=(0,R.Z)(),r=i(),[a,s]=(0,c.useState)(!1),d=r.map(e=>{let{name:t,primaryName:i}=n(e.fides_key);return{value:e.fides_key,label:(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:i||t}),i&&": ".concat(t)]}),name:t,primaryName:i,description:e.description||""}});return(0,l.jsx)(P.l,{options:d,prefix:(0,l.jsx)(o.wpx,{"aria-label":"Add Data Category",type:"text",size:"small",icon:(0,l.jsx)(o.PJP.mm_,{})}),placeholder:"",suffixIcon:null,classNames:{root:"w-full max-w-full overflow-hidden p-0 cursor-pointer"},variant:"borderless",autoFocus:!1,maxTagCount:"responsive",open:a,onOpenChange:e=>s(e),onSelect:(e,n)=>{t.onSelect&&t.onSelect(e,n),s(!1)},...t})};let A={classifying:{label:"Classifying",color:"blue"},classification_queued:{label:"Classifying",color:"blue"},classification_update:{label:"In Review",color:"nectar"},classification_addition:{label:"In Review",color:"blue"},addition:{label:"Attention Required",color:"blue"},muted:{label:"Unmonitored",color:"nectar"},removal:{label:"Removed",color:"red"},removing:{label:"In Review",color:"nectar"},promoting:{label:"In Review",color:"nectar"},monitored:{label:"Confirmed",color:"nectar"},approved:{label:"Approved",color:"green"}},D=e=>{let{label:t,closable:n,onClose:i,isFromClassifier:r}=e;return(0,l.jsx)(o.j8w,{color:"white",bordered:!0,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},closable:n,onClose:i,style:{marginInlineEnd:"calc((var(--ant-padding-xs) * 0.5))"},icon:r&&(0,l.jsx)(o.QMR,{}),children:(0,l.jsx)(o.lKn,{size:"sm",children:t})})};var O=e=>{var t,n;let{urn:i,classifications:a,name:s,diff_status:c,selected:d,onSelect:u,onSetDataUses:f,user_assigned_data_categories:p,onIgnore:v}=e;return(0,l.jsx)(o.krs.Item,{actions:[a&&a.length>0&&(0,l.jsxs)(o.jqI,{gap:"small",align:"center",className:"pr-[var(--ant-padding-xl)]",children:[(0,l.jsx)(o.HwE,{percent:a.find(e=>e.confidence_score===r.HIGH)?100:25,percentPosition:{align:"start",type:"outer"},strokeColor:a.find(e=>e.confidence_score===r.HIGH)?"var(--ant-color-success-text)":"var(--ant-color-warning-text)",steps:2,showInfo:!1,strokeLinecap:"round",size:[24,8]}),(0,l.jsx)(o.lKn,{size:"sm",type:"secondary",className:"font-normal",children:(0,N.kC)(a.find(e=>e.confidence_score===r.HIGH)?r.HIGH:r.LOW)})]},"progress"),a&&a.length>0&&(0,l.jsx)(o.wpx,{"aria-label":"Approve",icon:(0,l.jsx)(o.PJP.MCw,{}),size:"small"},"approve"),c!==b.LL.MUTED&&(0,l.jsx)(o.wpx,{icon:(0,l.jsx)(o.PJP.uzw,{}),size:"small","aria-label":"Ignore",onClick:()=>v(i)},"ignore"),(0,l.jsx)(o.wpx,{"aria-label":"Reclassify",icon:(0,l.jsx)(o.QMR,{}),size:"small"},"reclassify")],children:(0,l.jsx)(o.krs.Item.Meta,{avatar:(0,l.jsx)(o.E_O,{checked:d,onChange:e=>u&&u(i,e.target.checked)}),title:(0,l.jsx)(o.jqI,{justify:"space-between",children:(0,l.jsxs)(o.jqI,{gap:"small",align:"center",className:"w-full",children:[s,c&&(0,l.jsx)(o.j8w,{bordered:!1,color:A[c].color,className:"font-normal text-[var(--ant-font-size-sm)]",children:A[c].label}),(0,l.jsx)(o.lKn,{size:"sm",type:"secondary",className:"overflow-hidden font-normal",ellipsis:{tooltip:i},children:i})]})}),description:(0,l.jsx)(L,{mode:"tags",value:[...null!==(t=null==a?void 0:a.map(e=>{let{label:t}=e;return t}))&&void 0!==t?t:[],...null!==(n=null==p?void 0:p.map(e=>e))&&void 0!==n?n:[]],tagRender:e=>D({...e,isFromClassifier:!!(null==a?void 0:a.find(t=>t.label===e.value))}),onChange:e=>{f(e.flatMap(e=>(null==a?void 0:a.find(t=>t.label!==e))?[]:[e]),i)}})})},i)};let z=(e,t)=>e.find(e=>{let{children:n}=e;return n&&!!n.find(e=>e.key.toString()===t)}),E=(e,t)=>e.reduce((e,n)=>{if(n.children){var i;return null!==(i=z(n.children,t))&&void 0!==i?i:E(n.children,t)}return e},null),q=e=>{let{node:t,treeData:n,onLoadMore:i}=e;if(t.key.toString().startsWith(C)){let e=E(n,t.key.toString());return(0,l.jsx)(o.wpx,{type:"link",block:!0,onClick:()=>{(null==e?void 0:e.key)&&i(null==e?void 0:e.key.toString())},className:"p-0",children:"function"==typeof t.title?t.title(t):t.title})}return t.key.toString().startsWith(S)?(0,l.jsx)(o.N_L,{paragraph:!1,title:{width:"80px"},active:!0,children:"function"==typeof t.title?t.title(t):t.title}):(0,l.jsx)(o.lKn,{ellipsis:{tooltip:"function"==typeof t.title?t.title(t):t.title},children:"function"==typeof t.title?t.title(t):t.title})},M=(e,t)=>{var n;let i=e.items.map(e=>({title:e.name,key:e.urn,selectable:e.has_children,icon:()=>{switch(e.resource_type){case"Database":return(0,l.jsx)(o.PJP.ehp,{className:"h-full"});case"Table":return(0,l.jsx)(o.PJP.iA_,{className:"h-full"});case"Field":return(0,l.jsx)(o.PJP.$4y,{className:"h-full"});default:return null}},isLeaf:!e.has_children}));return(null!==(n=null==i?void 0:i.length)&&void 0!==n?n:0)<100?i:[...i,{title:"Load more...",key:"".concat(C,"-").concat(e.page,"-").concat(t),selectable:!1,isLeaf:!0}]},T=(e,t,n)=>e.map(e=>{if(e.key===t){var i,r;return{...e,children:[...null!==(r=null===(i=e.children)||void 0===i?void 0:i.filter(e=>!(e.key.toString().startsWith(C)||e.key.toString().startsWith(S))))&&void 0!==r?r:[],...n]}}return e.children?{...e,children:T(e.children,t,n)}:e}),U=(e,t,n)=>e.map(e=>e.key===t?{...e,children:n}:e.children?{...e,children:U(e.children,t,n)}:e);var F=e=>{let{selectedNodeKeys:t,setSelectedNodeKeys:n,onClickClassifyButton:i}=e,r=decodeURIComponent((0,s.useRouter)().query.monitorId),[a]=(0,g.RV)(),[d,u]=(0,c.useState)({}),[f,p]=(0,c.useState)([]),v=e=>{let t=null==d?void 0:d[e];if(t){let n=t.pageIndex+1;p(t=>T(t,e,[...Array(100)].map((t,n)=>({key:"".concat(S,"-").concat(e,"-").concat(n),title:"SKELETON",isLeaf:!0})))),a({monitor_config_id:r,staged_resource_urn:e,size:100,page:n}).then(t=>{let{data:i}=t;i&&(p(t=>T(t,e,M(i,e))),u({...d,[e]:{pageSize:100,pageIndex:n}}))})}};return(0,c.useEffect)(()=>{(async()=>{let{data:e}=await a({monitor_config_id:r,size:100});e&&f.length<=0&&p(M(e))})()},[p]),(0,l.jsxs)(o.jqI,{gap:"middle",vertical:!0,className:"h-full",children:[(0,l.jsx)(o.lQT,{level:3,className:"sticky top-0",children:"Schema explorer"}),(0,l.jsx)(o.a$q,{loadData:e=>{let{children:t,key:n}=e;return new Promise(e=>{if(t){e();return}a({monitor_config_id:r,staged_resource_urn:n.toString(),size:100}).then(e=>{let{data:t}=e;t&&(p(e=>U(e,n,M(t,n.toString()))),u({...d,[n.toString()]:{pageSize:100,pageIndex:1}}))}),e()})},treeData:f,onSelect:(e,t)=>n(t.selectedNodes.map(e=>{let{key:t}=e;return t})),showIcon:!0,showLine:!0,blockNode:!0,multiple:!0,rootClassName:"h-full overflow-x-hidden",titleRender:e=>(0,l.jsx)(q,{node:e,treeData:f,onLoadMore:v})}),t.length>0&&(0,l.jsxs)(o.jqI,{justify:"space-between",align:"center",children:[(0,l.jsxs)("span",{children:[t.length," selected"]}),(0,l.jsx)(o.wpx,{"aria-label":"Classify Selected Nodes",icon:(0,l.jsx)(o.QMR,{}),size:"small",onClick:i})]})]})},H=n(40431);let W=["Attention Required","In Review","Classifying","Approved","Unmonitored","Confirmed","Removed"],$=()=>{let[e,t]=(0,H.v1)("resourceStatus",(0,H.S$)((0,H.km)(W))),[n,i]=(0,H.v1)("confidenceScore",(0,H.S$)((0,H.jx)(Object.values(r)))),[l,o]=(0,H.v1)("dataCategory",(0,H.S$)(H.Oi));return{resourceStatus:e,setResourceStatus:t,confidenceScore:n,setConfidenceScore:i,dataCategory:l,setDataCategory:o,reset:()=>{t(null),i(null),o(null)}}},G={classifying:{label:"Classifying",color:"blue"},classification_queued:{label:"Classifying",color:"blue"},classification_update:{label:"In Review",color:"nectar"},classification_addition:{label:"In Review",color:"blue"},addition:{label:"Attention Required",color:"blue"},muted:{label:"Unmonitored",color:"nectar"},removal:{label:"Removed",color:"red"},removing:{label:"In Review",color:"nectar"},promoting:{label:"In Review",color:"nectar"},monitored:{label:"Confirmed",color:"nectar"},approved:{label:"Approved",color:"green"}},J=e=>Object.values(b.LL).flatMap(t=>G[t].label===e?[t]:[]);var Q=()=>{let e=decodeURIComponent((0,s.useRouter)().query.monitorId),{paginationProps:t,pageIndex:n,pageSize:i,resetPagination:r}=(0,m.S)({defaultPageSize:25}),a=(0,p.Rx)(),{resourceStatus:b,confidenceScore:w,..._}=$(),{data:C}=(0,g.vc)({monitor_config_id:e}),[S,k]=(0,c.useState)([]),[N,P]=(0,c.useState)([]),{data:R}=(0,g.Fp)({monitor_config_id:e,size:i,page:n,staged_resource_urn:S.map(e=>e.toString()),search:a.searchProps.value,diff_status:b?b.flatMap(J):void 0,confidence_score:w||void 0}),L=(0,o.pmc)(),[A]=(0,g.Av)(),[D]=(0,j.NA)(),[z]=(0,g.nS)(),{errorAlert:E}=(0,p.VY)(),[q]=(0,j.Hf)(),M=async(t,n)=>{let i=await D({monitor_config_id:e,staged_resource_urn:n,user_assigned_data_categories:t});(0,y.D4)(i)&&E((0,f.e$)(i.error))},T=async e=>{let t=await z({urnList:[e]});(0,y.D4)(t)&&E((0,f.e$)(t.error))},U=async e=>{let t=await q({staged_resource_urns:e});(0,y.D4)(t)&&E((0,f.e$)(t.error))},H=async()=>{let t=await A({monitor_config_key:e,staged_resource_urns:S.flatMap(e=>"bigint"!=typeof e?[e.toString()]:[])});if((0,y.D4)(t)){L((0,x.Vo)((0,f.e$)(t.error)));return}L((0,x.t5)("Classifying initiated"))};return(0,c.useEffect)(()=>{r()},[b,w,S,a.searchQuery]),(0,l.jsxs)(u.Z,{title:"Action center - Discovered assets by system",mainProps:{overflow:"hidden"},children:[(0,l.jsx)(h.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:v.vi},{title:e}],isSticky:!1}),(0,l.jsxs)(o.LgQ,{className:"h-[calc(100%-48px)] overflow-hidden",children:[(0,l.jsx)(o.LgQ.Panel,{defaultSize:250,style:{paddingRight:"var(--ant-padding-md)"},children:(0,l.jsx)(F,{selectedNodeKeys:S,setSelectedNodeKeys:k,onClickClassifyButton:H})}),(0,l.jsx)(o.LgQ.Panel,{style:{paddingLeft:"var(--ant-padding-md)"},children:(0,l.jsxs)(o.jqI,{vertical:!0,gap:"middle",className:"h-full overflow-hidden",children:[(0,l.jsxs)(o.jqI,{justify:"space-between",children:[(0,l.jsx)(o.lQT,{level:2,children:"Monitor results"}),(0,l.jsx)(o.jqI,{align:"center",children:(null==C?void 0:C.last_monitored)&&(0,l.jsxs)(o.lKn,{type:"secondary",children:["Last scan:"," ",new Date(null==C?void 0:C.last_monitored).toLocaleString()]})})]}),(0,l.jsxs)(o.jqI,{justify:"space-between",children:[(0,l.jsx)(d.f,{value:a.searchQuery,onChange:a.updateSearch,placeholder:"Search"}),(0,l.jsxs)(o.jqI,{gap:"small",children:[(0,l.jsx)(o.S0p,{trigger:["click"],popupRender:()=>(0,l.jsx)(I,{resourceStatus:b,confidenceScore:w,..._,monitorId:e}),children:(0,l.jsx)(o.wpx,{icon:(0,l.jsx)(o.PJP._ME,{}),iconPosition:"end",children:"Filter"})}),(0,l.jsx)(o.S0p,{menu:{items:[{key:"promote",onClick:()=>U(N),label:"Promote"}]},disabled:N.length<=0,children:(0,l.jsx)(o.wpx,{type:"primary",icon:(0,l.jsx)(o.PJP._ME,{}),iconPosition:"end",children:"Actions"})})]})]}),(0,l.jsx)(o.krs,{dataSource:null==R?void 0:R.items,className:"overflow-scroll",renderItem:e=>O({...e,selected:N.includes(e.urn),onSelect:(e,t)=>t?P([...N,e]):P(N.filter(t=>t!==e)),onSetDataUses:M,onIgnore:T})}),(0,l.jsx)(o.B7X,{...t,showSizeChanger:!1,total:(null==R?void 0:R.total)||0})]})})]})]})};let K=()=>(0,l.jsxs)(l.Fragment,{children:["Attempting to access the alpha version of monitor results without setting the ",(0,l.jsx)(o.lKn,{code:!0,children:"alphaFullActionCenter"})," flag"]});var B=()=>{let{flags:e}=(0,a.hz)();return e.alphaFullActionCenter?(0,l.jsx)(Q,{}):(0,l.jsx)(o.ux6,{status:"error",title:(0,l.jsx)(K,{})})}},31883:function(e,t,n){"use strict";n.d(t,{Bw:function(){return i.Bw},D4:function(){return i.D4}});var i=n(19043)},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}},function(e){e.O(0,[431,8765,9278,5163,7245,7059,2888,9774,179],function(){return e(e.s=19174)}),_N_E=e.O()}]);