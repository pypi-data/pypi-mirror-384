repos:
  # Rust hooks (clippy + fmt)
  - repo: https://github.com/doublify/pre-commit-rust
    rev: v1.0  # pin to a tag or commit
    hooks:
      - id: fmt
      - id: clippy
        args: ["--all-targets", "--all-features", "--", "-D", "warnings"]

  # Python hooks
  - repo: local
    hooks:
      # Build Python extension with maturin
      - id: dev
        name: Build (maturin develop --release)
        entry: .venv/bin/maturin develop --release
        language: system
        pass_filenames: false

      # Run pytest
      - id: pytest
        name: Run pytest
        entry: .venv/bin/pytest -vv tests
        language: system
        pass_filenames: false
