[project]
name = "pyemd-rs"
requires-python = ">=3.9"
license = { file = "LICENSE" }
classifiers = [
  "Programming Language :: Python :: Implementation :: CPython",
  "Programming Language :: Python :: Implementation :: PyPy",
  "Programming Language :: Rust",
]
dependencies = ["numpy>1.24"]
dynamic = ["version"]

[dependency-groups]
dev = [
  "emd-signal>=1.6.4",
  "ipykernel>=6.29.5",
  "ipython>=8.18.1",
  "matplotlib>=3.9.4",
  "maturin>=1.8.3",
  "polars>=1.30.0",
  "pytest>=8.3.5",
  "pytest-cov>=6.1.1",
  "ruff>=0.11.4",
  "tqdm>=4.67.1",
]

[build-system]
requires = ["maturin>=1.8,<2.0", "numpy>=2"]
build-backend = "maturin"

[tool.maturin]
features = ["pyo3/extension-module"]
module-name = "pyemd_rs._pyemd_rs"
python-source = "python"

[tool.ruff]
line-length = 100
target-version = "py39"
exclude = ["archive/*"]

[tool.ruff.lint]
select = ["ALL"]
ignore = ["COM", "ERA", "ISC001", "PTH", "TRY003", "TD", "FIX", "PYI021"]

[tool.ruff.lint.per-file-ignores]
"!python/**" = [
  "ANN",
  "D",
  "PLR2004",
  "T20",
  "EM",
  "PLR0913",
  "FBT003",
  "INP001",
]
"tests/**.py" = ["S101"]

[tool.ruff.lint.isort]
required-imports = ["from __future__ import annotations"]
known-first-party = ["pyemd_rs"]

[tool.ruff.lint.pydocstyle]
convention = "google"
