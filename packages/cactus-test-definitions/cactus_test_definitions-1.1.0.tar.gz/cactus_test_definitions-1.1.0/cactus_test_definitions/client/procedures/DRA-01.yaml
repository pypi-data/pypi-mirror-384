Description: Configuration
Category: Demand Response
Classes:
  - DR-A

TargetVersions:
  - v1.2
  - v1.3-beta/storage


Criteria:
  checks:
    - type: all-steps-complete
      parameters: {}
    - type: end-device-contents
      parameters:
        deviceCategory_anyset: '20098' # any of bits 3, 4, 7 and 17 being set (for the device type)
    - type: der-capability-contents
      parameters: 
        modesSupported_set: '80' # bit 7 is set - opModFixedW. 

Preconditions:
  immediate_start: true # There will be no "init" phase - all interactions will be immediately logged against the test

Steps:

  # The test will "start" once the DER list is fetched (signalling the end of ALL-01/ALL-02 discovery)
  GET-DER:
    event:
      type: GET-request-received
      parameters:
        endpoint: /edev/1/der
    actions:
      - type: enable-steps
        parameters:
          steps:
            - PUT-DER-CAPABILITY
      - type: remove-steps
        parameters:
          steps:
            - GET-DER

  PUT-DER-CAPABILITY:
    event:
      type: PUT-request-received
      parameters:
        endpoint: /edev/1/der/1/dercap
    actions:
      - type: remove-steps
        parameters:
          steps:
            - PUT-DER-CAPABILITY

  
