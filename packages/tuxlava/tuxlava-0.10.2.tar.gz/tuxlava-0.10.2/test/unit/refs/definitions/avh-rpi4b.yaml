device_type: "avh"

job_name: "tuxlava@avh-rpi4b: boot"
priority: low
visibility: "public"
timeouts:
  job:
    minutes: 30
  action:
    minutes: 10
  connection:
    minutes: 10

secrets:
  avh_api_token: avhapitoken

actions:
- deploy:
    to: avh
    options:
      api_endpoint: https://app.avh.arm.com/api
      project: Default Project
      model: rpi4b
    timeout:
      minutes: 15
    images:
      kernel:
        url: "https://example.com/Image"
      dtb:
        url: "https://example.com/devicetree"
      rootfs:
        url: "https://example.com/rootfs.ext4"
        format: ext4
        root_partition: 1
        partition: 1
- boot:
    method: avh
    docker:
      image: "ghcr.io/vi/websocat:1.12.0"
      local: true
    timeout:
      minutes: 15
    auto_login:
      login_prompt: 'login:'
      username: root
    prompts:
    - 'root@(.*):[/~]#'
