stages:
  - lint
  - test
  - benchmark
  - security
  - deploy

include:
  - local: '.gitlab/ci/lint.yml'
  - local: '.gitlab/ci/test.yml'
  - local: '.gitlab/ci/benchmark.yml'
  - local: '.gitlab/ci/security.yml'
  - local: '.gitlab/ci/deploy.yml'

variables:
  PIP_CACHE_DIR: "$CI_PROJECT_DIR/.cache/pip"
  PYTEST_ARGS: "-v --cov=fastalloc --cov-report=term --cov-report=xml"

cache:
  paths:
    - .cache/pip
    - venv/

before_script:
  - python --version
  - pip install --upgrade pip
  - pip install -r requirements-dev.txt
