---

inputs:
  calling-job-context:
    description: A JSON with the calling job inputs
    type: string
  job-dependencies-context:
    default: >-
      {}
    description: >-
      The `$ {{ needs }}` context passed from the calling workflow
      encoded as a JSON string. The caller is expected to form this
      input as follows:
      `job-dependencies-context: $ {{ toJSON(needs) }}`.
    required: false
    type: string

runs:
  using: composite
  steps:
  - name: Set the runner container image reference for testing
    if: fromJSON(inputs.calling-job-context).toxenv == 'integration'
    env:
      RUNNER_TEST_IMAGE_NAME: ansible-runner-gha${{ github.run_id }}-event-test
    run: >-
      echo RUNNER_TEST_IMAGE_NAME="${RUNNER_TEST_IMAGE_NAME}"
      | tee -a "${GITHUB_ENV}"
    shell: bash

...
