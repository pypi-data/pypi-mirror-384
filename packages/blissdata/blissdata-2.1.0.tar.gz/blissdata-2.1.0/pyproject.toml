[project]
name = "blissdata"
version = "2.1.0"
description = "Bliss data streaming client"
readme = "README.md"
license = "LGPL-3.0-or-later"
license-files = ["LICENSE"]
maintainers = [{name = "BCU (ESRF)"}]
classifiers = [
    "Intended Audience :: Science/Research",
    "Operating System :: OS Independent",
    "Programming Language :: Python :: 3",
]
requires-python = ">=3.10"
dependencies = [
    "beartype",
    "fabio>=0.12",
    "h5py>=2.9",
    "msgpack",
    "numpy>=1.20",
    "numpydantic<1.6.10",
    "pydantic>=2.3.0", # (not a direct dep) redis-om 0.3.2 doesn't support lower versions
    "redis>=4.6.0",
    "redis-om>=0.3.1,<1.0",
    "silx>=1.1.0",
]

[project.urls]
Repository = "https://gitlab.esrf.fr/bliss/blissdata/"
Documentation = "https://bliss.gitlab-pages.esrf.fr/blissdata/"
Changes = "https://gitlab.esrf.fr/bliss/blissdata/-/blob/master/CHANGELOG.md"

[project.optional-dependencies]
tango = ["pytango>=9.3.1"]
lima2 = [
    "blissdata[tango]",
    "lima2-client~=4.0"
]
test = [
    "gevent>=20.9.0",
    "pytest>=7",
    "pytest-mock",
    "pytest-redis>=3.1",
    "pytest-timeout",
    "packaging"
]
dev = [
    "blissdata[test]",
    "black==22.3",
    "flake8>=4",
    "flake8-pep585",
    "mkdocs",
    "mkdocs-material",
    "mkdocstrings[python]>=0.18",
]
beacon = ["ruamel.yaml"]

[project.scripts]
memory_tracker = "blissdata.redis_engine.memory_tracker:cli"

[project.entry-points.blissdata]
hdf5_fallback = "blissdata.streams.hdf5_fallback"
scan_sequence = "blissdata.streams.scan_sequence"
lima = "blissdata.streams.lima"
lima2 = "blissdata.streams.lima2"

[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[tool.pytest.ini_options]
addopts = "-v"
testpaths = ["src/blissdata/tests"]

[tool.setuptools.package-data]
blissdata = ["py.typed"]
