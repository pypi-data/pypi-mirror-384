import{y as it,ae as $e,B as st,P as at,b0 as ot,A as lt,R as ut,H as ft,b1 as ct,b2 as dt,e as ht,b3 as _t,S as Xe,b4 as pt,C as gt,n as ce,b5 as vt,b6 as mt,w as Ve,h as de,m as re,r as Y,i as Pe,v as me,a as fe,p as bt,b as Ie,s as Ce,d as ne,g as w,l as Ne,f as yt,j as wt}from"./XfyNEFST.js";import{c as kt,s as je,o as Et}from"./CfPWzxx9.js";import"./DsnmJJEf.js";import{p as ke,i as Ge}from"./CyI3pj5p.js";import{c as Re,g as Ue,u as Rt,e as Me,i as ze}from"./CXfFsfRJ.js";import{s as be}from"./CvUL_eGA.js";import{d as Ot}from"./B8ie1dNX.js";import{s as Ke}from"./-3L7ibXM.js";function et(r,n,l=!1){if(r.multiple){if(n==null)return;if(!at(n))return ot();for(var s of r.options)s.selected=n.includes(Te(s));return}for(s of r.options){var f=Te(s);if(lt(f,n)){s.selected=!0;return}}(!l||n!==void 0)&&(r.selectedIndex=-1)}function St(r){var n=new MutationObserver(()=>{et(r,r.__value)});n.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),st(()=>{n.disconnect()})}function qe(r,n,l=n){var s=!0;it(r,"change",f=>{var u=f?"[selected]":":checked",h;if(r.multiple)h=[].map.call(r.querySelectorAll(u),Te);else{var _=r.querySelector(u)??r.querySelector("option:not([disabled])");h=_&&Te(_)}l(h)}),$e(()=>{var f=n();if(et(r,f,s),s&&f===void 0){var u=r.querySelector(":checked");u!==null&&(f=Te(u),l(f))}r.__value=f,s=!1}),St(r)}function Te(r){return"__value"in r?r.__value:r.value}const Ct=()=>performance.now(),_e={tick:r=>requestAnimationFrame(r),now:()=>Ct(),tasks:new Set};function tt(){const r=_e.now();_e.tasks.forEach(n=>{n.c(r)||(_e.tasks.delete(n),n.f())}),_e.tasks.size!==0&&_e.tick(tt)}function xt(r){let n;return _e.tasks.size===0&&_e.tick(tt),{promise:new Promise(l=>{_e.tasks.add(n={c:r,f:l})}),abort(){_e.tasks.delete(n)}}}function Ae(r,n){Xe(()=>{r.dispatchEvent(new CustomEvent(n))})}function Lt(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const n=r.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(l=>l[0].toUpperCase()+l.slice(1)).join("")}function Ze(r){const n={},l=r.split(";");for(const s of l){const[f,u]=s.split(":");if(!f||u===void 0)break;const h=Lt(f.trim());n[h]=u.trim()}return n}const jt=r=>r;function lr(r,n,l,s){var f=(r&vt)!==0,u=(r&mt)!==0,h=f&&u,_=(r&_t)!==0,x=h?"both":f?"in":"out",a,g=n.inert,b=n.style.overflow,R,q;function I(){return Xe(()=>a??=l()(n,s?.()??{},{direction:x}))}var D={is_global:_,in(){if(n.inert=g,!f){q?.abort(),q?.reset?.();return}u||R?.abort(),Ae(n,"introstart"),R=We(n,I(),q,1,()=>{Ae(n,"introend"),R?.abort(),R=a=void 0,n.style.overflow=b})},out(se){if(!u){se?.(),a=void 0;return}n.inert=!0,Ae(n,"outrostart"),q=We(n,I(),R,0,()=>{Ae(n,"outroend"),se?.()})},stop:()=>{R?.abort(),q?.abort()}},Q=ut;if((Q.transitions??=[]).push(D),f&&kt){var V=_;if(!V){for(var G=Q.parent;G&&(G.f&ft)!==0;)for(;(G=G.parent)&&(G.f&ct)===0;);V=!G||(G.f&dt)!==0}V&&$e(()=>{ht(()=>D.in())})}}function We(r,n,l,s,f){var u=s===1;if(pt(n)){var h,_=!1;return gt(()=>{if(!_){var Q=n({direction:u?"in":"out"});h=We(r,Q,l,s,f)}}),{abort:()=>{_=!0,h?.abort()},deactivate:()=>h.deactivate(),reset:()=>h.reset(),t:()=>h.t()}}if(l?.deactivate(),!n?.duration)return f(),{abort:ce,deactivate:ce,reset:ce,t:()=>s};const{delay:x=0,css:a,tick:g,easing:b=jt}=n;var R=[];if(u&&l===void 0&&(g&&g(0,1),a)){var q=Ze(a(0,1));R.push(q,q)}var I=()=>1-s,D=r.animate(R,{duration:x,fill:"forwards"});return D.onfinish=()=>{D.cancel();var Q=l?.t()??1-s;l?.abort();var V=s-Q,G=n.duration*Math.abs(V),se=[];if(G>0){var pe=!1;if(a)for(var ge=Math.ceil(G/16.666666666666668),ee=0;ee<=ge;ee+=1){var j=Q+V*b(ee/ge),e=Ze(a(j,1-j));se.push(e),pe||=e.overflow==="hidden"}pe&&(r.style.overflow="hidden"),I=()=>{var t=D.currentTime;return Q+V*b(t/G)},g&&xt(()=>{if(D.playState!=="running")return!1;var t=I();return g(t,1-t),!0})}D=r.animate(se,{duration:G,fill:"forwards"}),D.onfinish=()=>{I=()=>s,g?.(s,1-s),f()}},{abort:()=>{D&&(D.cancel(),D.effect=null,D.onfinish=ce)},deactivate:()=>{f=ce},reset:()=>{s===0&&g?.(1,0)},t:()=>I()}}function Tt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fe={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var It=Fe.exports,Ye;function At(){return Ye||(Ye=1,(function(r,n){((l,s)=>{r.exports=s()})(It,function l(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},f,u=!s.document&&!!s.postMessage,h=s.IS_PAPA_WORKER||!1,_={},x=0,a={};function g(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var i=ge(t);i.chunkSize=parseInt(i.chunkSize),t.step||t.chunk||(i.chunkSize=null),this._handle=new D(i),(this._handle.streamer=this)._config=i}).call(this,e),this.parseChunk=function(t,i){var c=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<c){let p=this._config.newline;p||(o=this._config.quoteChar||'"',p=this._handle.guessLineEndings(t,o)),t=[...t.split(p).slice(c)].join(p)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&(o=this._config.beforeFirstChunk(t))!==void 0&&(t=o),this.isFirstChunk=!1,this._halted=!1;var c=this._partialLine+t,o=(this._partialLine="",this._handle.parse(c,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=o.meta.cursor,c=(this._finished||(this._partialLine=c.substring(t-this._baseIndex),this._baseIndex=t),o&&o.data&&(this._rowCount+=o.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)s.postMessage({results:o,workerId:a.WORKER_ID,finished:c});else if(j(this._config.chunk)&&!i){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!c||!j(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(t){j(this._config.error)?this._config.error(t):h&&this._config.error&&s.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function b(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),g.call(this,e),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),u||(t.onload=ee(this._chunkLoaded,this),t.onerror=ee(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var i,c=this._config.downloadRequestHeaders;for(i in c)t.setRequestHeader(i,c[i])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+o));try{t.send(this._config.downloadRequestBody)}catch(p){this._chunkError(p.message)}u&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(i=>(i=i.getResponseHeader("Content-Range"))!==null?parseInt(i.substring(i.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(i){i=t.statusText||i,this._sendError(new Error(i))}}function R(e){(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),g.call(this,e);var t,i,c=typeof FileReader<"u";this.stream=function(o){this._input=o,i=o.slice||o.webkitSlice||o.mozSlice,c?((t=new FileReader).onload=ee(this._chunkLoaded,this),t.onerror=ee(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var o=this._input,p=(this._config.chunkSize&&(p=Math.min(this._start+this._config.chunkSize,this._input.size),o=i.call(o,this._start,p)),t.readAsText(o,this._config.encoding));c||this._chunkLoaded({target:{result:p}})},this._chunkLoaded=function(o){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(o.target.result)},this._chunkError=function(){this._sendError(t.error)}}function q(e){var t;g.call(this,e=e||{}),this.stream=function(i){return t=i,this._nextChunk()},this._nextChunk=function(){var i,c;if(!this._finished)return i=this._config.chunkSize,t=i?(c=t.substring(0,i),t.substring(i)):(c=t,""),this._finished=!t,this.parseChunk(c)}}function I(e){g.call(this,e=e||{});var t=[],i=!0,c=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(o){this._input=o,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){c&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=ee(function(o){try{t.push(typeof o=="string"?o:o.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(p){this._streamError(p)}},this),this._streamError=ee(function(o){this._streamCleanUp(),this._sendError(o)},this),this._streamEnd=ee(function(){this._streamCleanUp(),c=!0,this._streamData("")},this),this._streamCleanUp=ee(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function D(e){var t,i,c,o,p=Math.pow(2,53),L=-p,F=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,W=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,y=this,U=0,v=0,$=!1,k=!1,O=[],d={data:[],errors:[],meta:{}};function K(S){return e.skipEmptyLines==="greedy"?S.join("").trim()==="":S.length===1&&S[0].length===0}function B(){if(d&&c&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),c=!1),e.skipEmptyLines&&(d.data=d.data.filter(function(m){return!K(m)})),Z()){let m=function(z,H){j(e.transformHeader)&&(z=e.transformHeader(z,H)),O.push(z)};if(d)if(Array.isArray(d.data[0])){for(var S=0;Z()&&S<d.data.length;S++)d.data[S].forEach(m);d.data.splice(0,1)}else d.data.forEach(m)}function T(m,z){for(var H=e.header?{}:[],A=0;A<m.length;A++){var P=A,C=m[A],C=((ae,E)=>(N=>(e.dynamicTypingFunction&&e.dynamicTyping[N]===void 0&&(e.dynamicTyping[N]=e.dynamicTypingFunction(N)),(e.dynamicTyping[N]||e.dynamicTyping)===!0))(ae)?E==="true"||E==="TRUE"||E!=="false"&&E!=="FALSE"&&((N=>{if(F.test(N)&&(N=parseFloat(N),L<N&&N<p))return 1})(E)?parseFloat(E):W.test(E)?new Date(E):E===""?null:E):E)(P=e.header?A>=O.length?"__parsed_extra":O[A]:P,C=e.transform?e.transform(C,P):C);P==="__parsed_extra"?(H[P]=H[P]||[],H[P].push(C)):H[P]=C}return e.header&&(A>O.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+O.length+" fields but parsed "+A,v+z):A<O.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+O.length+" fields but parsed "+A,v+z)),H}var M;d&&(e.header||e.dynamicTyping||e.transform)&&(M=1,!d.data.length||Array.isArray(d.data[0])?(d.data=d.data.map(T),M=d.data.length):d.data=T(d.data,0),e.header&&d.meta&&(d.meta.fields=O),v+=M)}function Z(){return e.header&&O.length===0}function ie(S,T,M,m){S={type:S,code:T,message:M},m!==void 0&&(S.row=m),d.errors.push(S)}j(e.step)&&(o=e.step,e.step=function(S){d=S,Z()?B():(B(),d.data.length!==0&&(U+=S.data.length,e.preview&&U>e.preview?i.abort():(d.data=d.data[0],o(d,y))))}),this.parse=function(S,T,M){var m=e.quoteChar||'"',m=(e.newline||(e.newline=this.guessLineEndings(S,m)),c=!1,e.delimiter?j(e.delimiter)&&(e.delimiter=e.delimiter(S),d.meta.delimiter=e.delimiter):((m=((z,H,A,P,C)=>{var ae,E,N,ve;C=C||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var ye=0;ye<C.length;ye++){for(var oe,Oe=C[ye],X=0,le=0,J=0,te=(N=void 0,new V({comments:P,delimiter:Oe,newline:H,preview:10}).parse(z)),he=0;he<te.data.length;he++)A&&K(te.data[he])?J++:(oe=te.data[he].length,le+=oe,N===void 0?N=oe:0<oe&&(X+=Math.abs(oe-N),N=oe));0<te.data.length&&(le/=te.data.length-J),(E===void 0||X<=E)&&(ve===void 0||ve<le)&&1.99<le&&(E=X,ae=Oe,ve=le)}return{successful:!!(e.delimiter=ae),bestDelimiter:ae}})(S,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=m.bestDelimiter:(c=!0,e.delimiter=a.DefaultDelimiter),d.meta.delimiter=e.delimiter),ge(e));return e.preview&&e.header&&m.preview++,t=S,i=new V(m),d=i.parse(t,T,M),B(),$?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return $},this.pause=function(){$=!0,i.abort(),t=j(e.chunk)?"":t.substring(i.getCharIndex())},this.resume=function(){y.streamer._halted?($=!1,y.streamer.parseChunk(t,!0)):setTimeout(y.resume,3)},this.aborted=function(){return k},this.abort=function(){k=!0,i.abort(),d.meta.aborted=!0,j(e.complete)&&e.complete(d),t=""},this.guessLineEndings=function(z,m){z=z.substring(0,1048576);var m=new RegExp(Q(m)+"([^]*?)"+Q(m),"gm"),M=(z=z.replace(m,"")).split("\r"),m=z.split(`
`),z=1<m.length&&m[0].length<M[0].length;if(M.length===1||z)return`
`;for(var H=0,A=0;A<M.length;A++)M[A][0]===`
`&&H++;return H>=M.length/2?`\r
`:"\r"}}function Q(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V(e){var t=(e=e||{}).delimiter,i=e.newline,c=e.comments,o=e.step,p=e.preview,L=e.fastMode,F=null,W=!1,y=e.quoteChar==null?'"':e.quoteChar,U=y;if(e.escapeChar!==void 0&&(U=e.escapeChar),(typeof t!="string"||-1<a.BAD_DELIMITERS.indexOf(t))&&(t=","),c===t)throw new Error("Comment character same as delimiter");c===!0?c="#":(typeof c!="string"||-1<a.BAD_DELIMITERS.indexOf(c))&&(c=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var v=0,$=!1;this.parse=function(k,O,d){if(typeof k!="string")throw new Error("Input must be a string");var K=k.length,B=t.length,Z=i.length,ie=c.length,S=j(o),T=[],M=[],m=[],z=v=0;if(!k)return X();if(L||L!==!1&&k.indexOf(y)===-1){for(var H=k.split(i),A=0;A<H.length;A++){if(m=H[A],v+=m.length,A!==H.length-1)v+=i.length;else if(d)return X();if(!c||m.substring(0,ie)!==c){if(S){if(T=[],ve(m.split(t)),le(),$)return X()}else ve(m.split(t));if(p&&p<=A)return T=T.slice(0,p),X(!0)}}return X()}for(var P=k.indexOf(t,v),C=k.indexOf(i,v),ae=new RegExp(Q(U)+Q(y),"g"),E=k.indexOf(y,v);;)if(k[v]===y)for(E=v,v++;;){if((E=k.indexOf(y,E+1))===-1)return d||M.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:T.length,index:v}),oe();if(E===K-1)return oe(k.substring(v,E).replace(ae,y));if(y===U&&k[E+1]===U)E++;else if(y===U||E===0||k[E-1]!==U){P!==-1&&P<E+1&&(P=k.indexOf(t,E+1));var N=ye((C=C!==-1&&C<E+1?k.indexOf(i,E+1):C)===-1?P:Math.min(P,C));if(k.substr(E+1+N,B)===t){m.push(k.substring(v,E).replace(ae,y)),k[v=E+1+N+B]!==y&&(E=k.indexOf(y,v)),P=k.indexOf(t,v),C=k.indexOf(i,v);break}if(N=ye(C),k.substring(E+1+N,E+1+N+Z)===i){if(m.push(k.substring(v,E).replace(ae,y)),Oe(E+1+N+Z),P=k.indexOf(t,v),E=k.indexOf(y,v),S&&(le(),$))return X();if(p&&T.length>=p)return X(!0);break}M.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:T.length,index:v}),E++}}else if(c&&m.length===0&&k.substring(v,v+ie)===c){if(C===-1)return X();v=C+Z,C=k.indexOf(i,v),P=k.indexOf(t,v)}else if(P!==-1&&(P<C||C===-1))m.push(k.substring(v,P)),v=P+B,P=k.indexOf(t,v);else{if(C===-1)break;if(m.push(k.substring(v,C)),Oe(C+Z),S&&(le(),$))return X();if(p&&T.length>=p)return X(!0)}return oe();function ve(J){T.push(J),z=v}function ye(J){var te=0;return te=J!==-1&&(J=k.substring(E+1,J))&&J.trim()===""?J.length:te}function oe(J){return d||(J===void 0&&(J=k.substring(v)),m.push(J),v=K,ve(m),S&&le()),X()}function Oe(J){v=J,ve(m),m=[],C=k.indexOf(i,v)}function X(J){if(e.header&&!O&&T.length&&!W){var te=T[0],he=Object.create(null),De=new Set(te);let Qe=!1;for(let we=0;we<te.length;we++){let ue=te[we];if(he[ue=j(e.transformHeader)?e.transformHeader(ue,we):ue]){let Se,Je=he[ue];for(;Se=ue+"_"+Je,Je++,De.has(Se););De.add(Se),te[we]=Se,he[ue]++,Qe=!0,(F=F===null?{}:F)[Se]=ue}else he[ue]=1,te[we]=ue;De.add(ue)}Qe&&console.warn("Duplicate headers found and renamed."),W=!0}return{data:T,errors:M,meta:{delimiter:t,linebreak:i,aborted:$,truncated:!!J,cursor:z+(O||0),renamedHeaders:F}}}function le(){o(X()),T=[],M=[]}},this.abort=function(){$=!0},this.getCharIndex=function(){return v}}function G(e){var t=e.data,i=_[t.workerId],c=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){c=!0,se(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:pe,resume:pe};if(j(i.userStep)){for(var p=0;p<t.results.data.length&&(i.userStep({data:t.results.data[p],errors:t.results.errors,meta:t.results.meta},o),!c);p++);delete t.results}else j(i.userChunk)&&(i.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!c&&se(t.workerId,t.results)}function se(e,t){var i=_[e];j(i.userComplete)&&i.userComplete(t),i.terminate(),delete _[e]}function pe(){throw new Error("Not implemented.")}function ge(e){if(typeof e!="object"||e===null)return e;var t,i=Array.isArray(e)?[]:{};for(t in e)i[t]=ge(e[t]);return i}function ee(e,t){return function(){e.apply(t,arguments)}}function j(e){return typeof e=="function"}return a.parse=function(e,t){var i=(t=t||{}).dynamicTyping||!1;if(j(i)&&(t.dynamicTypingFunction=i,i={}),t.dynamicTyping=i,t.transform=!!j(t.transform)&&t.transform,!t.worker||!a.WORKERS_SUPPORTED)return i=null,a.NODE_STREAM_INPUT,typeof e=="string"?(e=(c=>c.charCodeAt(0)!==65279?c:c.slice(1))(e),i=new(t.download?b:q)(t)):e.readable===!0&&j(e.read)&&j(e.on)?i=new I(t):(s.File&&e instanceof File||e instanceof Object)&&(i=new R(t)),i.stream(e);(i=(()=>{var c;return!!a.WORKERS_SUPPORTED&&(c=(()=>{var o=s.URL||s.webkitURL||null,p=l.toString();return a.BLOB_URL||(a.BLOB_URL=o.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",p,")();"],{type:"text/javascript"})))})(),(c=new s.Worker(c)).onmessage=G,c.id=x++,_[c.id]=c)})()).userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=j(t.step),t.chunk=j(t.chunk),t.complete=j(t.complete),t.error=j(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id})},a.unparse=function(e,t){var i=!1,c=!0,o=",",p=`\r
`,L='"',F=L+L,W=!1,y=null,U=!1,v=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||a.BAD_DELIMITERS.filter(function(O){return t.delimiter.indexOf(O)!==-1}).length||(o=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(i=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(W=t.skipEmptyLines),typeof t.newline=="string"&&(p=t.newline),typeof t.quoteChar=="string"&&(L=t.quoteChar),typeof t.header=="boolean"&&(c=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");y=t.columns}t.escapeChar!==void 0&&(F=t.escapeChar+L),t.escapeFormulae instanceof RegExp?U=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(U=/^[=+\-@\t\r].*$/)}})(),new RegExp(Q(L),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return $(null,e,W);if(typeof e[0]=="object")return $(y||Object.keys(e[0]),e,W)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||y),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),$(e.fields||[],e.data||[],W);throw new Error("Unable to serialize unrecognized input");function $(O,d,K){var B="",Z=(typeof O=="string"&&(O=JSON.parse(O)),typeof d=="string"&&(d=JSON.parse(d)),Array.isArray(O)&&0<O.length),ie=!Array.isArray(d[0]);if(Z&&c){for(var S=0;S<O.length;S++)0<S&&(B+=o),B+=k(O[S],S);0<d.length&&(B+=p)}for(var T=0;T<d.length;T++){var M=(Z?O:d[T]).length,m=!1,z=Z?Object.keys(d[T]).length===0:d[T].length===0;if(K&&!Z&&(m=K==="greedy"?d[T].join("").trim()==="":d[T].length===1&&d[T][0].length===0),K==="greedy"&&Z){for(var H=[],A=0;A<M;A++){var P=ie?O[A]:A;H.push(d[T][P])}m=H.join("").trim()===""}if(!m){for(var C=0;C<M;C++){0<C&&!z&&(B+=o);var ae=Z&&ie?O[C]:C;B+=k(d[T][ae],C)}T<d.length-1&&(!K||0<M&&!z)&&(B+=p)}}return B}function k(O,d){var K,B;return O==null?"":O.constructor===Date?JSON.stringify(O).slice(1,25):(B=!1,U&&typeof O=="string"&&U.test(O)&&(O="'"+O,B=!0),K=O.toString().replace(v,F),(B=B||i===!0||typeof i=="function"&&i(O,d)||Array.isArray(i)&&i[d]||((Z,ie)=>{for(var S=0;S<ie.length;S++)if(-1<Z.indexOf(ie[S]))return!0;return!1})(K,a.BAD_DELIMITERS)||-1<K.indexOf(o)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?L+K+L:K)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!u&&!!s.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=V,a.ParserHandle=D,a.NetworkStreamer=b,a.FileStreamer=R,a.StringStreamer=q,a.ReadableStreamStreamer=I,s.jQuery&&((f=s.jQuery).fn.parse=function(e){var t=e.config||{},i=[];return this.each(function(p){if(!(f(this).prop("tagName").toUpperCase()==="INPUT"&&f(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var L=0;L<this.files.length;L++)i.push({file:this.files[L],inputElem:this,instanceConfig:f.extend({},t)})}),c(),this;function c(){if(i.length===0)j(e.complete)&&e.complete();else{var p,L,F,W,y=i[0];if(j(e.before)){var U=e.before(y.file,y.inputElem);if(typeof U=="object"){if(U.action==="abort")return p="AbortError",L=y.file,F=y.inputElem,W=U.reason,void(j(e.error)&&e.error({name:p},L,F,W));if(U.action==="skip")return void o();typeof U.config=="object"&&(y.instanceConfig=f.extend(y.instanceConfig,U.config))}else if(U==="skip")return void o()}var v=y.instanceConfig.complete;y.instanceConfig.complete=function($){j(v)&&v($,y.file,y.inputElem),o()},a.parse(y.file,y.instanceConfig)}}function o(){i.splice(0,1),c()}}),h&&(s.onmessage=function(e){e=e.data,a.WORKER_ID===void 0&&e&&(a.WORKER_ID=e.workerId),typeof e.input=="string"?s.postMessage({workerId:a.WORKER_ID,results:a.parse(e.input,e.config),finished:!0}):(s.File&&e.input instanceof File||e.input instanceof Object)&&(e=a.parse(e.input,e.config))&&s.postMessage({workerId:a.WORKER_ID,results:e,finished:!0})}),(b.prototype=Object.create(g.prototype)).constructor=b,(R.prototype=Object.create(g.prototype)).constructor=R,(q.prototype=Object.create(q.prototype)).constructor=q,(I.prototype=Object.create(g.prototype)).constructor=I,a})})(Fe)),Fe.exports}var Ft=At();const rt=Tt(Ft);async function Pt(){let r=Re.PUBLIC_TEMPLE_URL+"solutions/list",n=await fetch(r,{cache:"no-store"});if(!n.ok)return alert("could not fetch "+r),[];let l=await n.json();return l.sort((s,f)=>s.name<f.name?-1:s.name>f.name?1:0),l}async function Dt(r){const n=Re.PUBLIC_TEMPLE_URL+`solutions/get_detail/${r}`;let l=await fetch(n,{cache:"no-store"});if(!l.ok)throw alert("Could not fetch "+n),new Error("Could not fetch "+n);return await l.json()}async function ur(r,n,l,s="",f=0,u=1){const h=new URL(Re.PUBLIC_TEMPLE_URL+"solutions/get_full_ts");h.searchParams.set("solution_name",r),h.searchParams.set("components",n.join(",")),h.searchParams.set("unit_component",s),h.searchParams.set("scenario",l),h.searchParams.set("year",f.toString()),h.searchParams.set("rolling_average_size",u.toString());const _=h.toString();let x=await fetch(_,{cache:"no-store"});if(!x.ok)throw alert("Error when fetching "+_),new Error("Error when fetching "+_);let a=await x.json();const g=Object.fromEntries(Object.entries(a).map(([b,R])=>b=="unit"||R===void 0?null:[b,nt(R)]).filter(b=>b!==null));return{unit:He(a.unit||""),components:g}}async function fr(r,n,l,s=""){let f=new URL(Re.PUBLIC_TEMPLE_URL+"solutions/get_total");f.searchParams.set("solution_name",r),f.searchParams.set("components",n.join(",")),f.searchParams.set("scenario",l),f.searchParams.set("unit_component",s);const u=f.toString();let h=await fetch(u,{cache:"no-store"});if(!h.ok)throw alert("Error when fetching "+u),new Error("Error when fetching "+u);let _=await h.json();for(const x in _)x=="unit"||_[x]===void 0||(_[x]=Ut(Nt(_[x])));return _.unit=He(_.unit||""),_}async function cr(r,n,l){let s=await(await fetch(Re.PUBLIC_TEMPLE_URL+`solutions/get_unit/${r}/${n}?scenario=${l}`,{cache:"no-store"})).json();return He(s)}async function dr(r,n,l,s,f,u){const h=Re.PUBLIC_TEMPLE_URL+`solutions/get_energy_balance/${r}/${n}/${l}?scenario=${s}&year=${f}&rolling_average_size=${u}`;let _=await fetch(h,{cache:"no-store"});if(!_.ok)throw alert("Could not fetch "+h),new Error("Could not fetch "+h);let x=await _.json(),a=["shed_demand","demand","flow_conversion_input","flow_export","flow_import","flow_storage_charge","flow_storage_discharge","flow_transport_in","flow_transport_out","cost_shed_demand","flow_conversion_output","constraint_nodal_energy_balance"],g={};for(const b of a)x[b]!==void 0&&(g[b]=nt(x[b]));return g}function Nt(r){if(r.slice(0,r.indexOf(`
`)).split(",").length==2){let f=r.split(`
`),u="",h="";for(const _ of f.slice(1,f.length)){if(_=="")continue;let x=_.split(",");u+=x[0]+",",h+=x[1]+","}r=u.substring(0,u.length-1)+`
`+h.substring(0,h.length-1)}return r.slice(-1)==`
`&&(r=r.slice(0,-1)),rt.parse(r,{delimiter:",",header:!0,newline:`
`})}function nt(r){return r.map(n=>{let{d:l,t:s,...f}=n;const[u,h]=s;let _=0;return l=l.map(x=>_+=x),l=l.map(x=>x*h+u),{index:f,data:l}})}function He(r){return r.slice(-1)==`
`&&(r=r.slice(0,r.length-1)),rt.parse(r,{delimiter:",",header:!0,newline:`
`})}function Ut(r){return r.data=r.data.filter(n=>Object.keys(n).some(l=>!Number.isNaN(Number(l))&&!Number.isNaN(n[l])&&Math.abs(n[l])>0)),r}const Ee=[["rgb(122, 157, 207)","rgb(8, 64, 126)","rgb(166, 190, 223)","rgb(33, 92, 175)","rgb(211, 222, 239)","rgb(77, 125, 191)"],["rgb(212, 134, 129)","rgb(150, 39, 45)","rgb(226, 174, 171)","rgb(183, 53, 45)","rgb(241, 215, 213)","rgb(197, 93, 87)"],["rgb(102, 175, 192)","rgb(0, 89, 109)","rgb(153, 202, 213)","rgb(0, 120, 148)","rgb(204, 228, 234)","rgb(51, 149, 171)"],["rgb(202, 108, 174)","rgb(140, 10, 89)","rgb(220, 158, 201)","rgb(167, 17, 122)","rgb(239, 208, 227)","rgb(183, 59, 146)"],["rgb(161, 171, 113)","rgb(54, 82, 19)","rgb(192, 199, 161)","rgb(98, 115, 19)","rgb(224, 227, 208)","rgb(129, 143, 66)"],["rgb(187, 164, 113)","rgb(112, 79, 18)","rgb(210, 194, 161)","rgb(142, 103, 19)","rgb(232, 225, 208)","rgb(165, 133, 66)"]];let xe=0,Le=0;function hr(){xe=0,Le=0}function Mt(){xe>=Ee.length&&(xe=0,Le++,Le>=Ee[0].length&&(Le=0));const r=Ee[xe][Le];return xe++,r}function zt(r,n=.8){return r.replace("rgb","rgba").replace(")",`, ${n})`)}function _r(){let r=[];for(let n=0;n<Ee.length;n++)for(let l=0;l<Ee[0].length;l++)r.push(Ee[l][n]);return r}function pr(r,n,l,s=[],f=!1,u="bar",h=""){if(r.length==0)return[];let _=Object.keys(r[0]).filter(g=>!isNaN(Number(g))&&!s.includes(Number(g))),x=Object.keys(n),a={};for(const g of r){let b=!1;for(let I in n)if(!n[I].includes(g[I])){b=!0;break}if(b)continue;for(let I of Object.keys(l))if(!l[I].includes(g[I])){b=!0;break}if(b)continue;let R=[];for(let I of x)R.push(g[I]);let q=R.join("_")+h;q in a||(a[q]=Object.fromEntries(_.map(I=>[I,0])));for(let I of _){let D=Number(g[I]);g[I]=="inf"&&(D=1/0),a[q][I]+=D}}if(f){let g=Object.fromEntries(_.map(b=>[b,0]));for(let b of _)for(let R in a)g[b]+=a[R][b];for(let b of _)for(let R in a)g[b]==0?a[R][b]=0:a[R][b]*=1/g[b]}return Object.entries(a).filter(([,g])=>!Object.values(g).includes(NaN)).map(([g,b])=>{let R=Mt();return{label:g,data:Object.values(b),type:u,borderColor:R,backgroundColor:zt(R)}})}function qt(r){return Array.from(new Set(r))}function gr(r){return r.map(n=>({value:n,label:n}))}function vr(r){let n={};r.forEach(s=>{Object.entries(s.data).forEach(([f,u])=>{!u||u<=0||(n[f]=(n[f]||0)+u)})});let l={};return r.forEach(s=>{Object.entries(s.data).forEach(([f,u])=>{!u||u>=0||(l[f]=(l[f]||0)-u)})}),r.map(s=>({...s,data:Object.values(Object.entries(s.data).reduce((f,[u,h])=>(h&&n[u]>0?f[u]=h/n[u]:h&&l[u]>0?f[u]=h/l[u]:f[u]=0,f),{}))}))}var Bt=de('<div class="row mb-2"><div class="col-sm-3"><label class="fw-medium fs-4"> </label></div> <div class="col-sm-9"><!></div></div>');function Be(r,n){const l=Ve();var s=Bt(),f=re(s),u=re(f),h=re(u,!0);Y(u),Y(f);var _=Pe(f,2),x=re(_);Ke(x,()=>n.content,()=>l),Y(_),Y(s),me(()=>{be(u,"for",l),je(h,n.label)}),fe(r,s)}function Wt(r,n,l,s,f){ne(n,""),ne(l,""),ne(s,null),f()}function Kt(r,n,l){ne(n,""),l()}var Ht=de("<option> </option>"),Qt=de('<select class="form-select"></select>'),Jt=de("<option> </option>"),Gt=de('<select class="form-select"></select>'),Zt=de("<option> </option>"),Yt=de('<select class="form-select"></select>'),$t=de("<!> <!> <!>",1);function mr(r,n){bt(n,!0);let l=ke(n,"carriers",31,()=>Ie([])),s=ke(n,"nodes",31,()=>Ie([])),f=ke(n,"years",31,()=>Ie([])),u=ke(n,"selected_solution",15),h=ke(n,"loading",15,!1),_=ke(n,"disabled",3,!0),x=Ce(Ie([])),a=Ce(null),g=Ce(""),b=Ce(""),R=Ce(""),q=Ne(()=>qt(w(x).map(e=>e.name.split(".")[0]))),I=Ne(()=>w(x).filter(e=>e.name.startsWith(w(g))).map(e=>e.name.split(".")[1]||null).filter(e=>e!=null)),D=Ne(()=>w(I).length==0?w(g)||null:w(b)?w(g)+"."+w(b):null);Et(async function(){ne(x,await Pt(),!0),ne(g,Ue("solution")?.split(".")[0]||"",!0),ne(b,Ue("solution")?.split(".")[1]||"",!0),ne(R,Ue("scenario")||"",!0),Q()});async function Q(){if(w(D)==null){u(null);return}h(!0),ne(a,await Dt(w(D)),!0),Object.keys(w(a).scenarios).length==1?(ne(R,Object.keys(w(a).scenarios)[0],!0),V()):w(R)!=""&&w(R)in w(a).scenarios?V():u(null),h(!1)}function V(){w(a)==null||w(D)==null||(u({solution_name:w(D),scenario_name:w(R),detail:w(a).scenarios[w(R)],version:w(a).version}),Rt({solution:u().solution_name,scenario:Object.keys(w(a).scenarios).length>1?u().scenario_name:null}),l(u().detail.system.set_carriers.slice().sort()),s(u().detail.system.set_nodes.slice().sort()),f([...Array(u().detail.system.optimized_years).keys()].map(e=>e*u().detail.system.interval_between_years+u().detail.system.reference_year)),n.solution_selected?.(u()))}var G=$t(),se=yt(G);Be(se,{label:"Solution",content:(t,i=ce)=>{var c=Qt();c.__change=[Wt,b,R,a,Q],Me(c,21,()=>w(q),ze,(o,p)=>{var L=Ht(),F=re(L,!0);Y(L);var W={};me(()=>{je(F,w(p)),W!==(W=w(p))&&(L.value=(L.__value=w(p))??"")}),fe(o,L)}),Y(c),me(()=>{be(c,"id",i()),c.disabled=_()}),qe(c,()=>w(g),o=>ne(g,o)),fe(t,c)}});var pe=Pe(se,2);{var ge=e=>{Be(e,{label:"Subsolution",content:(i,c=ce)=>{var o=Gt();o.__change=[Kt,R,Q],Me(o,21,()=>w(I),ze,(p,L)=>{var F=Jt(),W=re(F,!0);Y(F);var y={};me(()=>{je(W,w(L)),y!==(y=w(L))&&(F.value=(F.__value=w(L))??"")}),fe(p,F)}),Y(o),me(()=>{be(o,"id",c()),o.disabled=_()}),qe(o,()=>w(b),p=>ne(b,p)),fe(i,o)}})};Ge(pe,e=>{w(I).length>0&&e(ge)})}var ee=Pe(pe,2);{var j=e=>{Be(e,{label:"Scenario",content:(i,c=ce)=>{var o=Yt();o.__change=V,Me(o,21,()=>Object.keys(w(a)?.scenarios||[]),ze,(p,L)=>{var F=Zt(),W=re(F,!0);Y(F);var y={};me(()=>{je(W,w(L)),y!==(y=w(L))&&(F.value=(F.__value=w(L))??"")}),fe(p,F)}),Y(o),me(()=>{be(o,"id",c()),o.disabled=_()}),qe(o,()=>w(R),p=>ne(R,p)),fe(i,o)}})};Ge(ee,e=>{w(a)&&Object.keys(w(a).scenarios).length>1&&e(j)})}fe(r,G),wt()}Ot(["change"]);var Xt=de('<div class="z-1 position-relative"><div class="accordion" id="accordionFilters"><!></div></div>');function br(r,n){var l=Xt(),s=re(l),f=re(s);Ke(f,()=>n.children??ce),Y(s),Y(l),fe(r,l)}var Vt=de('<div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" aria-expanded="true"> </button></h2> <div class="accordion-collapse collapse show"><div class="accordion-body"><!></div></div></div>');function yr(r,n){const l=Ve();var s=Vt(),f=re(s),u=re(f),h=re(u,!0);Y(u),Y(f);var _=Pe(f,2),x=re(_),a=re(x);Ke(a,()=>n.children??ce),Y(x),Y(_),Y(s),me(()=>{be(u,"data-bs-target","#collapse"+l),be(u,"aria-controls","collapse"+l),je(h,n.title),be(_,"id","collapse"+l)}),fe(r,s)}export{br as F,mr as S,cr as a,yr as b,Be as c,ur as d,qt as e,fr as f,dr as g,pr as h,vr as i,qe as j,Tt as k,lr as l,_r as m,Mt as n,hr as r,gr as t};
